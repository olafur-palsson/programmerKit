RD.prototype.Mi=t(1063,function(){return V(this,2)});$N.prototype.Mi=t(1062,g("F"));MY.prototype.Mi=t(1061,function(){return V(this,1)});OY.prototype.Mi=t(1060,function(){return V(this,1)});PY.prototype.Mi=t(1059,function(){return V(this,2)});TY.prototype.Mi=t(1058,function(){return V(this,1)});aZ.prototype.Mi=t(1057,function(){return V(this,1)});cZ.prototype.Mi=t(1056,function(){return V(this,1)});
gZ.prototype.Mi=t(1055,function(a){var b=this,c=new MA;c.Ai=!0;var d=c.serialize(a);return new Qe(function(a,f){hZ(b,"/dbx/getExecutionStatus",d,function(b){c.Ai=!1;b=c.qd(aZ.Ca(),b.Ye());a(b)},function(){f()})})});function DUe(a,b){W(a,3,b)}function EUe(a,b){var c=new MA;c.Ai=!0;var d=c.serialize(b);return new Qe(function(b,f){hZ(a,"/dbx/createQuery",d,function(a){c.Ai=!1;a=c.qd(MY.Ca(),a.Ye());3==a.Mi().getState()?f(a):b(a)},function(){var a=new MY,b=new VA;W(a,1,b);b.wb(3);W(b,2,1);f(a)})})}
function FUe(a,b){var c=new MA;c.Ai=!0;var d=c.serialize(b);return new Qe(function(b,f){hZ(a,"/dbx/previewQuery",d,function(a){c.Ai=!1;a=c.qd(OY.Ca(),a.Ye());3==a.Mi().getState()?f(a):b(a)},function(){var a=new OY,b=new VA;W(a,1,b);b.wb(3);W(b,2,1);f(a)})})}
function GUe(a,b){var c=new MA;c.Ai=!0;var d=c.serialize(b);return new Qe(function(e,f){hZ(a,"/dbx/refreshSheets",d,function(a){c.Ai=!1;a=c.qd(AOd.Ca(),a.Ye());Dw(a,1).some(function(a){return 3==a.Mi().getState()})?f(a):e(a)},function(){var a=new AOd,c=new VA;c.wb(3);W(c,2,1);Dw(b,1).forEach(function(b){var d=new PY;W(d,1,b);W(d,2,c);Bw(a,1,d)});f(a)})})}
function HUe(a,b){var c=new MA;c.Ai=!0;var d=c.serialize(b);return new Qe(function(b,f){hZ(a,"/dbx/getDbPivotResult",d,function(a){c.Ai=!1;a=c.qd(cZ.Ca(),a.Ye());3==a.Mi().getState()?f(a):b(a)},function(){var a=new cZ,b=new VA;W(a,1,b);b.wb(3);W(b,2,1);f(a)})})}
function IUe(a,b){var c=new MA;c.Ai=!0;var d=c.serialize(b);return new Qe(function(b,f){hZ(a,"/dbx/editQuery",d,function(a){c.Ai=!1;a=c.qd(TY.Ca(),a.Ye());3==a.Mi().getState()?f(a):b(a)},function(){var a=new TY,b=new VA;W(a,1,b);b.wb(3);W(b,2,1);f(a)})})}function JUe(a){var b=new MA;return new Qe(function(c,d){lx(Yu(mx(ly(Zu(a.C.vf("/dbx/listConnections"),"GET")),1).setTimeout(3E4),function(a){b.Ai=!1;a=b.qd(JOd.Ca(),a.Ye());c(a)}),d).We()})}
function KUe(a,b){var c=new MA;c.Ai=!0;var d=sp(c.serialize(b));return new Qe(function(b,f){lx(Yu(Vx(mx(ly(Zu(a.C.vf("/dbx/getQuery"),"POST")),1).setTimeout(3E4),["data",d]),function(a){c.Ai=!1;a=c.qd(WOd.Ca(),a.Ye());V(a,1)?b(a):f("Query is not found")}),f).We()})}
function LUe(a,b){var c=new MA;c.Ai=!0;var d=c.serialize(b);return new Qe(function(b,f){hZ(a,"/dbx/getBigQueryProjects",d,function(a){c.Ai=!1;a=c.qd(ZY.Ca(),a.Ye());a.ap()&&f(a);b(a)},function(){var a=new OY,b=new VA;W(a,1,b);b.wb(3);W(b,2,1);f(a)})})}function MUe(a){var b=gZ.getInstance(),c=new MA;c.Ai=!0;var d=c.serialize(a);return new Qe(function(a,f){hZ(b,"/dbx/hasBigQueryQueryResults",d,function(b){c.Ai=!1;b=c.qd(eZ.Ca(),b.Ye());b.Cq()||f(b);a(b)},function(){var a=new eZ;W(a,1,!1);f(a)})})}
function NUe(a,b){var c=new MA;c.Ai=!0;var d=c.serialize(b);return new Qe(function(b,f){hZ(a,"/dbx/getConnection",d,function(a){c.Ai=!1;a=c.qd(cPd.Ca(),a.Ye());b(a)},function(){f()})})}function OUe(a){this.C=a}OUe.prototype.getSelection=g("C");function PUe(a,b,c){b=void 0===b?"":b;c=void 0===c?"dataconnector-querytype-raw":c;this.C=[];for(var d=0;d<a.length;d++)this.C.push(a[d].clone());this.F=b;this.D=c};function QUe(){var a='<div class="'+T("waffle-dataconnector-footer-sharing-message")+'">';return S(a+'<span>The data you query is visible to everyone with view access, but your query is only visible to people with edit access. <a href="https://support.google.com/docs/answer/9077536" target="_blank">Learn more</a></span></div>')};function RUe(a){a=a.jNb;var b='<div class="'+T("waffle-dataconnector-bigqueryquerysettingsdialog-project-section")+'"><h3 class="'+T("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-header")+'">';b=b+"Billing project"+('</h3><div class="'+T("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-wrapper")+'"></div>'+(a?'<div class="'+T("waffle-dataconnector-bigqueryquerysettingsdialog-radio-group")+'"><div class="'+T("waffle-dataconnector-bigqueryquerysettingsdialog-raw-data-radio-wrapper")+
'"></div><div class="'+T("waffle-dataconnector-bigqueryquerysettingsdialog-pivot-table-radio-wrapper")+'"></div></div>':"")+"</div>");return S(b)}function SUe(a,b,c){b=c||b;a='<div class="'+T("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button-wrapper")+'"><p>';a=a+'Your use of BigQuery is governed by the Google Cloud Platform <a href="https://cloud.google.com/terms/" target="_blank">Terms of Service</a>.'+("</p></div>"+Q(QUe(null,b)));return S(a)};function TUe(){return S('<svg class="waffle-dataconnector-database-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="#000" fill-rule="evenodd"><ellipse cx="9" cy="5" rx="7" ry="3"/><path d="M16,7 L16,8.99999983 C16,10.6568542 12.8659932,12 9,12 C5.13400675, 12 2,10.6568542 2,9 L2,7 C2,8.65685425 5.13400675,10 9,10 C12.8659932,10 16,8.65685425 16,7 Z"/><path d="M16,11 L16,12.9999998 C16,14.6568542 12.8659932,16 9,16 C5.13400675,16 2,14.6568542 2,13 L2,11 C2,12.6568542 5.13400675,14 9,14 C12.8659932,14 16,12.6568542 16,11 Z"/></g></svg>')}
function UUe(a){a=a||{};var b=a.color;a="";b=vt(b,null)?"#D0021B":b;a+='<svg class="waffle-dataconnector-error-icon" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path fill="'+T(b)+'" fill-rule="evenodd" d="M9,13 L11,13 L11,15 L9,15 L9,13 Z M9,5 L11,5 L11,11 L9,11 L9,5 Z M9.99,0 C4.47,0 0,4.48 0,10 C0,15.52 4.47,20 9.99,20 C15.52,20 20,15.52 20,10 C20,4.48 15.52,0 9.99,0 Z M10,18 C5.58,18 2,14.42 2,10 C2,5.58 5.58,2 10,2 C14.42,2 18,5.58 18,10 C18,14.42 14.42,18 10,18 Z"></path></g></svg>';
return S(a)}
function VUe(){return S('<svg class="waffle-dataconnector-bigquery-icon" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path fill="#000000" fill-rule="evenodd" d="M17.6210231,14.9676464 C17.7267041,14.964158 17.8336481,14.999598 17.9136667,15.0739664 L21.2187334,18.1431672 C21.3715333,18.2853017 21.3715333,18.5181274 21.2187334,18.6604475 L19.8908,19.8929813 C19.7375334,20.0356729 19.4867333,20.0356729 19.3334666,19.8929813 L16.0288667,16.8252043 C15.9483809,16.7504669 15.9100327,16.6511429 15.9138223,16.5530387 C14.5318646,17.5088871 12.8185327,18.0746254 10.962963,18.0746254 C6.38121025,18.0746254 2.66666667,14.6253786 2.66666667,10.3707987 C2.66666667,6.11585235 6.38121025,2.66666667 10.962963,2.66666667 C15.5447814,2.66666667 19.259325,6.11585235 19.2592593,10.3708597 C19.2592593,12.0936892 18.6501585,13.6844725 17.6210231,14.9676464 Z M10.9627632,16.1481946 C14.3991593,16.1481946 17.1851852,13.5615621 17.1851852,10.3706486 C17.1851852,7.17973497 14.3992258,4.59254616 10.9627632,4.59254616 C7.52630064,4.59254616 4.74074074,7.17967314 4.74074074,10.3706486 C4.74074074,13.561624 7.52630064,16.1481946 10.9627632,16.1481946 Z M6.81481481,10.3703704 L8.88888889,10.3703704 L8.88888889,14.0029401 C8.03391111,13.6464441 7.31942754,13.1505168 6.81481481,12.5594013 L6.81481481,10.3703704 Z M9.92592593,8.44442896 L12,8.44442896 L12,14.1665272 C11.6766072,14.200082 11.3475683,14.2222532 11.0093815,14.2222532 C10.6390341,14.2222532 10.2784063,14.1975885 9.92592593,14.1574203 L9.92592593,8.44442896 Z M13.044326,11.3333411 L15.1184,11.3333411 L15.1184,12.4901418 C14.6287957,13.0790718 13.9116201,13.5742789 13.044326,13.933362 L13.044326,11.3333411 Z"></path></g></svg>')}
function WUe(a){a=a||{};var b=a.opacity;a="";b=vt(b,null)?1:b;a+='<svg class="waffle-dataconnector-menu-icon" fill="#000000" fill-opacity="'+T(b)+'" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>';return S(a)};function XUe(){var a=S,b='<div class="'+T("waffle-dataconnector-modal-header")+'"><div class="'+T("waffle-dataconnector-modal-title")+'" role="heading"></div><div class="'+T("waffle-dataconnector-modal-close-button")+'" tabindex="0" role="button">';var c=S('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="none" fill-rule="evenodd"><path d="M0,0 L18,0 L18,18 L0,18 L0,0 Z M0,0 L18,0 L18,18 L0,18 L0,0 Z"/><polygon fill="#000" points="14.53 4.53 13.47 3.47 9 7.94 4.53 3.47 3.47 4.53 7.94 9 3.47 13.47 4.53 14.53 9 10.06 13.47 14.53 14.53 13.47 10.06 9"/></g></svg>');
return a(b+c+'</div></div><div class="'+T("waffle-dataconnector-modal-body")+'"></div><div class="'+T("waffle-dataconnector-modal-footer")+'"></div>')};function B4(a,b){a=void 0===a?"":a;Ot.call(this,!1,b);this.Qb=a;this.C=new Ls(void 0,YUe.getInstance());this.Ia(this.C);this.C.Gg("Close");this.xb=null;this.kb=!0}v(B4,Ot);n=B4.prototype;
n.Ea=function(){Ot.prototype.Ea.call(this);var a=this.getId();Uk(this.Qa(),"labelledby",a);Tk(this.Qa(),"dialog");$k(this.getElement(),"waffle-dataconnector-modal");this.Qb&&$k(this.getElement(),this.Qb);mt(this.getElement(),XUe);this.La("waffle-dataconnector-modal-title").id=a;a=this.Np();$k(a,"waffle-dataconnector-modal-bg");O(a,this.kb);this.C.Xa(this.La("waffle-dataconnector-modal-close-button"));this.xb&&ZUe(this)};
n.Ja=function(){Ot.prototype.Ja.call(this);$Ue(this);this.getHandler().R(this.C,"action",this.J_);this.getHandler().R(this.Qa(),["keydown","keypress"],this.xSb)};n.tb=function(){return this.hb("waffle-dataconnector-modal-body")};function aVe(a){return a.hb("waffle-dataconnector-modal-footer")}function bVe(a,b){a.xb=b;a.ub()&&ZUe(a)}function $Ue(a){var b=a.va(),c=a.Np(),d=a.lq;a.kb?(d&&b.Ms(d,a.getElement()),b.Ms(c,a.getElement())):(b.Lf(d),b.Lf(c))}n.J_=function(){pwb.zb()};n.j9=function(){pwb.zb()};
n.xSb=function(a){"keydown"==a.type?27==a.keyCode?this.j9():9==a.keyCode&&a.shiftKey&&a.target==this.getElement()&&eSa(this):this.kKa(a)};function ZUe(a){cm.getInstance().setContent(a.La("waffle-dataconnector-modal-title"),a.xb)}n.kKa=da();function YUe(){}v(YUe,Ks);YUe.prototype.Bq=m("waffle-dataconnector-modal-close-button");xa(YUe);function C4(a,b){B4.call(this,a,b);this.H=We()}v(C4,B4);n=C4.prototype;n.getResult=function(){return this.H.C};n.resolve=function(a){this.H.resolve(a)};n.reject=function(a){this.H.reject(a)};n.Ka=function(){B4.prototype.Ka.call(this);this.H.reject()};n.j9=function(){this.reject()};n.J_=function(){this.reject()};var cVe=new Iv(1);function dVe(a){var b=1024<=a;a=b?XEd(parseInt(a,10)):a;return(new Lv("{AT_LEAST_ONE_KB, select, \n     true {Will process {BYTES}.}\n     other {\n         {BYTES, plural,\n             =0 {Will process # bytes.}\n             =1 {Will process # byte.}\n             other {Will process # bytes.}}}}")).format({AT_LEAST_ONE_KB:b?"true":"false",BYTES:a})}
function eVe(){var a=new Tr,b="Configure a project in the Google Cloud Platform console to continue. "+(a.Ae("a",{"class":"goog-inline-block",href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+a.Ce("a")));return a.format(b)}function fVe(){return(new Lv("{ROWS, plural, =0 {unused plural form}=1 {Only the first row will be shown.}other {Only the first # rows will be shown.}}")).format({ROWS:1E4})};function gVe(a,b){C4.call(this,"waffle-dataconnector-bigqueryquerysettingsdialog",b);bVe(this,this.va().Ea("SPAN",void 0,ot(VUe),"BigQuery data connection"));this.J=a.C;this.D=new fU;this.Ia(this.D);this.D.Hd("waffle-dataconnector-bigqueryquerysettingsdialog-project-select");this.D.Gg("Billing project");vQa(this.D,"Select a project");this.L=new xX(this.va(),"Raw data");this.V=new xX(this.va(),"Pivot table");this.O=new yX([this.L,this.V]);this.F=new fZ("Write query");this.Ia(this.F);this.F.Hd("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button")}
v(gVe,C4);
gVe.prototype.Ea=function(){C4.prototype.Ea.call(this);var a=N(M(),"fedp");mt(this.tb(),RUe,{jNb:a});aVe(this).appendChild(ot(SUe));this.D.render(this.La("waffle-dataconnector-bigqueryquerysettingsdialog-project-select-wrapper"));this.F.render(this.La("waffle-dataconnector-bigqueryquerysettingsdialog-continue-button-wrapper"));a&&(this.L.render(this.La("waffle-dataconnector-bigqueryquerysettingsdialog-raw-data-radio-wrapper")),this.V.render(this.La("waffle-dataconnector-bigqueryquerysettingsdialog-pivot-table-radio-wrapper")),zX(this.O,
this.L))};gVe.prototype.Ja=function(){C4.prototype.Ja.call(this);if(0==this.J.length){this.D.Pa(!1);vQa(this.D,"No billing projects");var a=this.va(),b=qe(a,eVe());a.appendChild(this.La("waffle-dataconnector-bigqueryquerysettingsdialog-project-section"),a.Ea("DIV","waffle-dataconnector-bigqueryquerysettingsdialog-error-caption",b))}else{a=this.J;for(b=0;b<a.length;b++){var c=a[b];this.D.cd(new so(hVe(c),c.getId()))}this.getHandler().R(this.F,"action",this.Da).R(this.D,"change",this.Aa)}this.Aa()};
gVe.prototype.Aa=function(){this.F.Pa(null!=this.D.kf())};gVe.prototype.Da=function(){this.resolve(iVe(this))};function iVe(a){var b=a.D.kf().getValue(),c="dataconnector-querytype-raw";N(M(),"fedp")&&"Pivot table"==AX(a.O).getLabel()&&(c="dataconnector-querytype-pivot");return new PUe(a.J,b,c)}function hVe(a){var b=a.getName();a=a.getId();return b+" ["+a+"]"};function jVe(a){this.C=a}function kVe(a){var b=new QOd;return LUe(a.C,b).then(function(a){return Dw(a,4)})};function lVe(a){B.call(this);this.F=a;this.D=new E;this.Ba(this.D);this.C=[]}v(lVe,B);function mVe(a){return 0<a.C.length?Ta(a.C):null}function D4(a,b,c){void 0===c||c?nVe(a):(c=mVe(a))&&c.setVisible(!1);b.Sd(a.D);b instanceof Pt?a.F.Bi(b):(c=new lNb(b),c.Sd(a.D),a.F.Bi(c));b.render();b.setVisible(!0);a.C.push(b)}function oVe(a){var b=a.C.pop();for(C(b);0<a.C.length;)if(b=Ta(a.C),b.isDisposed())a.C.pop();else{b.setVisible(!0);break}}
function nVe(a){for(var b=ja(a.C),c=b.next();!c.done;c=b.next())C(c.value);a.C=[]}lVe.prototype.Ka=function(){nVe(this);B.prototype.Ka.call(this)};function pVe(a,b,c,d){B.call(this);this.V=a;this.ea=b;this.oa=c;this.J=this.L=null;this.H=d||null;this.C=3;this.O=new qVe;this.D=this.F=null}v(pVe,B);n=pVe.prototype;n.getId=function(){return Ea(this)};n.Ka=function(){this.stop();B.prototype.Ka.call(this)};n.start=function(){this.C=2;this.D=this.F=null;this.DEa(this.V)};n.stop=function(){2==this.C&&(this.C=3,this.O.stop())};function rVe(a,b){a.L=b;return a}function sVe(a,b){a.J=b;return a}
n.DEa=function(a){var b=this;this.ea.call(this.H,a).then(function(a){if(2==b.C){b.F=a;b.D=null;var c=b.oa.call(b.H,a);if(c){a:{a=b.O;c=y(b.DEa,b,c);if(10>a.F){a.F++;var e=1E3}else if(60>a.D)a.D++,e=5E3;else{a=!1;break a}e+=Math.round(.2*e*(Math.random()-.5)*2);a.C=om(c,e);a=!0}a||tVe(b,Error("Polling timed out"))}else b.stop(),b.C=4,b.F=a,b.D=null,b.L&&b.L.call(b.H,a)}},function(a){2==b.C&&tVe(b,a)})};function tVe(a,b){a.stop();a.C=1;a.F=null;a.D=b;a.J&&a.J.call(a.H,b)}n.getStatus=g("C");n.qH=g("D");
function qVe(){this.D=this.F=0;this.C=null}qVe.prototype.stop=function(){this.D=this.F=0;pm(this.C);this.C=null};function uVe(a){this.C=a}function vVe(a,b){var c=V(b,1);return new pVe(b,function(b){return FUe(a.C,b)},function(a){if(1==a.Mi().getState()){var b=new NY;W(b,1,c);b.setToken(a.Mi().getToken());return b}return null})};function wVe(a,b){Lt(a.Pc,xVe(a));a.C="vertical"==a.D?PRa(a.Pc,b):QRa(a.Pc,b);var c=ja("vertical"==a.D?[a.C,0]:[0,a.C]);b=c.next().value;c=c.next().value;WI(a.Qa(),b,c,a.ze());a.dispatchEvent("yh")}function xVe(a){var b=a.Qa().parentElement.getBoundingClientRect(),c=b.height;b=b.width;"horizontal"==a.D?(b=0,c-=a.Yc()):(c=0,b-=a.Yc());return new kl(0,0,b,c)};function yVe(a,b){var c=b.getErrorCode(),d=V(b,3);switch(c){case 20:return zVe(a,d);case 14:return E4('Update parameter "'+(V(b,6).toUpperCase()+'" to reference a cell in the current workbook and try again'));case 15:return E4('Update the cell referenced by parameter "'+(V(b,6).toUpperCase()+'" to be text or a number'));case 16:return E4("Select a parameter name you haven't used before");case 13:return E4('Define your parameter "'+(V(b,6).toUpperCase()+'" and try again'));case 6:return N(M(),"docs-idu")?
(a=new Tr,b=a.Ae("span",{"class":"waffle-dataconnector-error-message"})+("Query timed out. "+(a.Ae("a",{href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+(a.Ce("a")+a.Ce("span"))))),a=a.format(b)):a=AVe("Query timed out",d),a;case 8:return N(M(),"docs-idu")?(a=new Tr,b="Results exceed "+(BVe+(" rows. Update query and run again. "+(a.Ae("a",{href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+a.Ce("a"))))),a=a.format(b),a=E4(a)):
a=AVe(CVe,d),a;case 18:return E4("The query returns an ARRAY or a STRUCT type, which is currently not supported.");case 9:return a=new Tr,b="Go to Plx to specify an engine other than 'Auto' and try again. "+(a.Ae("a",{href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+a.Ce("a"))),a=a.format(b),E4(a);case 19:return E4("The query is already in execution.");case 17:return a="Can not insert the results of the query: that would increase the number of cells in the workbook above the limit of "+
(dh(M(),"fmtc")+" cells."),E4(a);case 22:return E4("Duplicated column names or aliases are not supported. Please update your query.");case 23:return E4("There is no sheet associated with this query.");case 24:return E4("Can not insert the results of the query: exceeds the maximum characters allowed in a single cell.")}return DVe(d)}
function EVe(a){var b=new Tr;a=(new Lv("To execute this query, {startLink}sign in to your Google account{endLink}")).format({startLink:b.Ae("a",{href:"#",id:a}),endLink:b.Ce("a")});return b.format(a)}function zVe(a,b){if(!b)return DVe(b);switch(a){case 2:return E4("Plx error: "+b);case 3:return E4("BigQuery error: "+b);default:return E4("Database error: "+b)}}function DVe(a){return AVe("Something's wrong. Please try again later",a)}var BVe=(new Iv(1)).format(1E4),CVe="Results exceed "+(BVe+" rows. Update query and run again.");
function E4(a){return cd("span",{"class":"waffle-dataconnector-error-message"},a)}function AVe(a,b){var c=new Tr;b&&(a=a+": "+b);return E4(c.format(a))};function FVe(a){switch(a){case 2:var b=1;break;case 3:b=2;break;case 1:b=3;break;default:b=0}a=new VLc;K(a,1,b);b=new hk;zf(b,91,a);return b};function GVe(){}v(GVe,Ks);GVe.prototype.Rb=m("waffle-dataconnector-queryeditor-removable-chip-remove-button");xa(GVe);function HVe(){}v(HVe,Ks);HVe.prototype.Ea=function(a){var b=Ks.prototype.Ea.call(this,a);a.va().appendChild(b,a.va().Ea("DIV","waffle-dataconnector-queryeditor-removable-chip-chip-content"));return b};HVe.prototype.tb=function(a){return Id("waffle-dataconnector-queryeditor-removable-chip-chip-content",a)};HVe.prototype.Rb=m("waffle-dataconnector-queryeditor-removable-chip-button");
xa(HVe);var IVe=new MA;function JVe(a){return a.C.Dd().map(function(a){return a.Ta()})};function KVe(){B.call(this);this.C=Nd()}v(KVe,B);function LVe(a,b){a.C.dataConnectorOnCompleteAuth=b;b=(new Yo(a.C.location.href)).resolve(new Yo("dbx/ssoLogin")).toString();var c=Kd();(a=Vr(b,{target:"google_popup",width:500,height:500,top:Math.floor((c.height-500)/2),left:Math.floor((c.width-500)/2),toolbar:!1,menubar:!1,location:!1,statusbar:!1},a.C))&&a.focus()}KVe.prototype.Ka=function(){delete this.C.dataConnectorOnCompleteAuth;B.prototype.Ka.call(this)};function MVe(a){var b=a.jla(),c;if(c=b){a=ja(JVe(a.Ya));for(c=a.next();!c.done;c=a.next())Bw(b,3,c.value);c=b}return c}function NVe(a){a.J.setVisible(!0);var b=Math.min(a.J.Sjb().height+16,240);OVe(a,b)}function PVe(a){if(!a.O.enabled){var b=0;QVe(a,b);a.O.R("tick",function(){a.isDisposed()||(b+=.1,QVe(a,b))});a.O.start()}}function QVe(a,b){F4(a,$c("Executing query "+(b.toFixed(1)+"s")))}function RVe(a,b){a.Wa=!1;a.O.stop();a.O.yE();SVe(a,!0);TVe(a,b.Mi());UVe(a)}
function TVe(a,b){10==b.getErrorCode()?VVe(a):F4(a,yVe(a.gE(),b))}function WVe(a){a.Wa=!0;F4(a,$c("Updating workbook"));UVe(a)}function OVe(a,b){var c=void 0===c?!0:c;C(a.Da);a.Da=null;c?(c=XVe(a),a.Da=new YVe(c,b,200,a),a.Ba(a.Da),a.Da.play()):ZVe(a,b)}function XVe(a){return a.ub()?Fl(a.La("waffle-dataconnector-newqueryeditor-preview-pane")).height:0}function ZVe(a,b){var c=a.La("waffle-dataconnector-newqueryeditor-main");b=Fl(c).height-a.F.Yc()-b;wVe(a.F,b)}
function UVe(a){var b=MVe(a),c=a.bb.C;a.Wa||null==b||c?(a.Na.Pa(!1),a.Aa.Pa(!1)):(a.Aa.Pa(!0),a.Na.Pa(!0));b=a.gb&&a.gb.equals(b);a.J.gta(!b)}function $Ve(a){var b=new NY;a=MVe(a);W(b,1,a);W(b,2,30);return b}function VVe(a){var b="waffle-dataconnector-ssologin-"+ac(),c=EVe(b);F4(a,c);(b=Fd(b))&&a.getHandler().R(b,"click",function(){return aWe(a)})}function aWe(a){LVe(a.Ic,function(){SVe(a,!1);iG.zb($Ve(a),a.Lx)})}
function F4(a,b,c){c=void 0===c?!0:c;a=a.La("waffle-dataconnector-newqueryeditor-footer-message");gd(a,b);c&&lK(ge(a))}function SVe(a,b){a.ub()&&dl(a.La("waffle-dataconnector-newqueryeditor-footer-message-container"),"waffle-dataconnector-newqueryeditor-unhandled-error",b)}function YVe(a,b,c,d){tv.call(this,[a],[b],c);this.D=d}v(YVe,tv);YVe.prototype.Waa=function(){ZVe(this.D,this.coords[0])};YVe.prototype.KU=function(){ZVe(this.D,this.UQ[0])};
var bWe=new Tr,cWe="Inserted data is visible to all. The query is visible only to people with edit access. "+(bWe.Ae("a",{"class":"goog-inline-block",href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Learn more"+bWe.Ce("a"))),dWe=bWe.format(cWe);function eWe(a,b,c){b=c||b;b="<div id="+Bt(a.id)+' class="'+T("waffle-dataconnector-dbschematreenode")+'"><div class="'+T("waffle-dataconnector-dbschematreenode-label")+(a.Zb?" waffle-dataconnector-dbschematreenode-rtl":"")+'"><div class="'+T("waffle-dataconnector-dbschematreenode-spinner-container")+'">'+Q(UQb({Lb:!0},b))+"</div>";c=S('<svg class="waffle-dataconnector-expand-icon" width="18px" height="18px" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><polygon id="Shape" points="0 0 18 0 18 18 0 18"></polygon><polygon id="Shape" fill-opacity="0.87" fill="#000000" points="5 7 9 11 13 7"></polygon></g></g></svg>');
a=b+Q(c)+'<div class="'+T("waffle-dataconnector-dbschematreenode-title")+'">'+Q(a.title)+'</div></div><div class="'+T("waffle-dataconnector-dbschematreenode-child-container")+'" role="group"></div></div>';return S(a)};function fWe(a){this.C=a}fWe.prototype.getType=g("C");function gWe(a){this.C="jdbc-table";this.D=a}v(gWe,fWe);function G4(a,b,c,d){c=void 0===c?!1:c;P.call(this,d);this.dc(b);this.J=a;this.nextSibling=this.previousSibling=this.parentNode=null;this.H=(this.D=c)?2:0;this.F=this.C=!1}v(G4,P);n=G4.prototype;n.Ea=function(){this.ob(ot(eWe,{title:this.J,id:this.getId()}))};n.tb=function(){return this.hb("waffle-dataconnector-dbschematreenode-child-container")};
n.Ja=function(){P.prototype.Ja.call(this);var a=this.La("waffle-dataconnector-dbschematreenode-label"),b=this.La("waffle-dataconnector-dbschematreenode-title");a.id=this.getId()+"-label";Uk(this.Qa(),"labelledby",a.id);this.D||Uk(this.Qa(),"expanded",this.C);Uk(this.Qa(),"selected",this.F);Tk(this.Qa(),"treeitem");Tk(this.La("waffle-dataconnector-dbschematreenode-spinner-container"),"presentation");Tk(this.La("waffle-dataconnector-expand-icon"),"presentation");dl(this.Qa(),"waffle-dataconnector-dbschematreenode-rtl",
this.ze());Eva(this.va());Em(b,this.J,void 0);hWe(this,!1);dl(this.Qa(),"waffle-dataconnector-dbschematreenode-leaf",this.D);this.getHandler().R(a,"click",this.ySb)};n.getTitle=g("J");n.ySb=function(){this.Jd(!this.C);this.Yb(!0)};n.Jd=function(a){if(!this.D&&a!=this.C){var b=dva(64,a);this.dispatchEvent(b)&&hWe(this,a)}};function hWe(a,b){a.D||(a.C=b,a.ub()&&(dl(a.Qa(),"waffle-dataconnector-dbschematreenode-open",a.C),Uk(a.Qa(),"expanded",a.C)))}
n.Yb=function(a){if(a!=this.F){var b=dva(8,a);this.dispatchEvent(b)&&(this.F=a,this.ub()&&(dl(this.Qa(),"waffle-dataconnector-dbschematreenode-selected",this.F),Uk(this.Qa(),"selected",a)))}};n.hf=g("C");n.Gp=g("H");n.dc=function(a){P.prototype.dc.call(this,a)};n.Ta=function(){return P.prototype.Ta.call(this)};n.Zc=function(a){return P.prototype.Zc.call(this,a)};n.Qc=function(a){return P.prototype.Qc.call(this,a)};
n.Ia=function(a,b){if(this.D)throw Error("Can't add child to leaf node");P.prototype.Ia.call(this,a,b)};function iWe(a){a.parentNode=null;var b=a.previousSibling,c=a.nextSibling;a.previousSibling=null;a.nextSibling=null;b&&(b.nextSibling=c);c&&(c.previousSibling=b)}n.ag=function(a,b,c){if(this.D)throw Error("Can't add child to leaf node");var d=this.Qc(b-1),e=this.Qc(b);a.parentNode=this;a.nextSibling=e;if(a.previousSibling=d)d.nextSibling=a;e&&(e.previousSibling=a);P.prototype.ag.call(this,a,b,c)};
n.removeChild=function(a,b){iWe(a);return P.prototype.removeChild.call(this,a,b)};n.Ad=function(){return P.prototype.Ad.call(this,!0)};n.Rn=function(a){return P.prototype.Rn.call(this,a,!0)};function jWe(a){var b=a.C.Ad(!0);yb(b);kWe(a,!1)}function kWe(a,b){a.ub()&&O(a.La("waffle-dataconnector-schema-menu-error-message"),b)};function lWe(a){jWe(a);a.F.setActive(!0);a.H.H().then(function(b){a.F.setActive(!1);b.forEach(function(b){b=b.getName();b=new G4(b,new gWe(b));kWe(a,!1);a.C.Ia(b,!0)});0==b.length&&kWe(a,!0)},function(){a.F.setActive(!1);kWe(a,!0)})};var mWe=Object.freeze({caption:"Dremel",value:"DREMEL"}),nWe=Object.freeze({caption:"F1",value:"F1"}),oWe=Object.freeze({caption:"Procella",value:"PROCELLA"});function H4(a,b){Pt.call(this,"waffle-dataconnector-prompt",a,b);this.L=We();au(this,null);$t(this,!0);this.C=new RM("Continue");this.Ia(this.C);this.J=new qV("Cancel");this.Ia(this.J);this.O=[]}v(H4,Pt);n=H4.prototype;n.Hd=function(a){this.O.push(a);var b=this.getElement();b&&$k(b,a)};n.getResult=function(){return this.L.C};n.resolve=function(a){this.L.resolve(a)};n.reject=function(){this.L.reject()};
n.Ea=function(){Pt.prototype.Ea.call(this);var a=Ut(this);this.J.render(a);this.C.render(a);O(a,!0)};n.Ja=function(){var a=this;Pt.prototype.Ja.call(this);al(this.Qa(),this.O);this.getHandler().R(this.J,"action",function(){return a.reject()})};n.setVisible=function(a){Pt.prototype.setVisible.call(this,a);a||this.reject()};n.Ka=function(){Pt.prototype.Ka.call(this);this.reject()};function pWe(a,b,c,d,e,f){B.call(this);var h=this;this.Aa=a;this.F=gZ.getInstance();this.Da=new uVe(this.F);this.V=c;this.ea=f;this.C=new lVe(c);this.O=new xe(this);this.Ba(this.O);qWe(this,e);rWe(this);this.L=new $e;EF("queryeditor",function(){var c=HF("queryeditor");h.L.callback(c.C(d,a,h.F,h.V,h.ea,b))})}v(pWe,B);function qWe(a,b){pwb.Pa(!0);owb.Pa(!0);a.Wza(b)}function rWe(a){a.O.subscribe(pwb,"action",function(){oVe(a.C)}).subscribe(owb,"action",a.iCb);a.KVa()}n=pWe.prototype;n.Bf=function(a){this.F.Bf(a)};
n.G9a=function(){var a=sWe("Connecting to Plx...");tWe(this);Pr(Or.getInstance(),a)};n.F9a=function(){var a=this,b=sWe("Connecting to BigQuery...");kVe(new jVe(this.F)).then(function(c){Pr(Or.getInstance(),b);uWe(a,c)},function(){Pr(Or.getInstance(),b);vWe("Could not connect to BigQuery")})};function uWe(a,b){b=new PUe(b);var c=new gVe(b);a.Ba(c);D4(a.C,c);c.getResult().then(function(b){wWe(a,b)},function(){a.ea.C(35753);C(c)})}
function sWe(a){return Or.getInstance().postMessage(Qr(a,"info",!0))}function vWe(a){Or.getInstance().postMessage(Qr(a,"error",!0))}function wWe(a,b){a.L.addCallback(function(c){c=c.njb(b);a.Ba(c);D4(a.C,c)})}function tWe(a){a.L.addCallback(function(b){b=b.pjb();a.Ba(b);D4(a.C,b)})}
n.VKa=function(a){var b=mVe(this.C);b.Wa=!0;F4(b,$c("Executing query"));UVe(b);PVe(b);var c=V(a,1);sVe(rVe(vVe(this.Da,a),function(a){if(!b.isDisposed()){b.O.stop();b.O.yE();SVe(b,!1);b.Wa=!1;b.gb=c;if(!b.isDisposed()){var d=V(a,3);if(V(a,4))d="Query successful. "+fVe();else{var f=(new Lv("{TOTAL_ROWS, plural, =0 {No results.}=1 {1 row returned.}other {# rows returned.}}")).format({TOTAL_ROWS:d});d=1E4>d?f:f+" "+fVe()}d=cd("strong",void 0,d);d=dd(d,cd("br"),dWe);F4(b,d)}b.J.B_b(V(a,2));NVe(b);b.Aa.setContent("Refresh preview");
UVe(b)}}),function(a){b.isDisposed()||RVe(b,a)}).start()};n.iCb=function(){Vr("https://cloud.google.com/bigquery/docs/projects")};function xWe(a,b){H4.call(this,a,b)}v(xWe,H4);xWe.prototype.Ja=function(){var a=this;H4.prototype.Ja.call(this);this.getHandler().R(this.C,"action",function(){return a.resolve(0)})};function yWe(a){return S('<div class="'+T("waffle-dataconnector-connectioncard")+'" role="button" tab-index="0"><div class="'+T("waffle-dataconnector-connectioncard-icon")+'"></div><div class="'+T("waffle-dataconnector-connectioncard-body")+'"><div class="'+T("waffle-dataconnector-connectioncard-header")+'">'+Q(a.Fha)+'</div><div class="'+T("waffle-dataconnector-connectioncard-type")+'">'+Q(a.Gha)+"</div></div></div>")};function zWe(){}v(zWe,Ks);zWe.prototype.Ea=function(a){a=a.Ta();return ot(yWe,{Fha:a.getName(),Gha:"SQL"})};zWe.prototype.Rb=m("waffle-dataconnector-connectioncard");xa(zWe);function AWe(a,b){Ls.call(this,void 0,zWe.getInstance(),b);this.dc(a);this.Ze(8,!0)}v(AWe,Ls);AWe.prototype.dc=function(a){Ls.prototype.dc.call(this,a)};function BWe(){var a='<div class="'+T("waffle-dataconnector-connectionmanager-content")+'"><div class="'+T("waffle-dataconnector-connectionmanager-header")+'">';a=a+"Choose a data source"+('</div><div class="'+T("waffle-dataconnector-connectionmanager-connections")+'"></div></div>');return S(a)};function CWe(a){C4.call(this,"waffle-dataconnector-connectionmanager",a);bVe(this,this.va().Ea("SPAN",void 0,ot(TUe),"Managed data sources"));this.D=new P(this.va());this.Ia(this.D);this.F=new nN;this.Ia(this.F);this.L=gZ.getInstance()}v(CWe,C4);CWe.prototype.Ea=function(){C4.prototype.Ea.call(this);mt(this.tb(),BWe);aVe(this).appendChild(ot(QUe));this.F.render(this.La("waffle-dataconnector-connectionmanager-content"))};
CWe.prototype.Ja=function(){var a=this;C4.prototype.Ja.call(this);this.D.Xa(this.La("waffle-dataconnector-connectionmanager-connections"));this.getHandler().R(this.D,"action",this.J);DWe(this,!0);JUe(this.L).then(function(b){b=Dw(b,1);EWe(a,b);DWe(a,!1)},function(){DWe(a,!1);Or.getInstance().postMessage(Qr("Could not get managed data sources","error",!0))})};function DWe(a,b){dl(a.Qa(),"waffle-dataconnector-connectionmanager-loading",b);a.F.setActive(b)}
function EWe(a,b){var c=a.La("waffle-dataconnector-connectionmanager-connections");if(0==b.length){var d=new Tr,e="You do not have access to any managed data sources. "+(d.Ae("a",{"class":"goog-inline-block",href:"https://sites.google.com/corp/google.com/dataconnectors/home",target:"_blank"})+("Learn more"+d.Ce("a")));b=a.va();d=qe(b,d.format(e));b.appendChild(c,b.Ea("DIV","waffle-dataconnector-connectionmanager-no-connections-message",d));O(a.La("waffle-dataconnector-connectionmanager-header"),!1)}else{b=
ja(b);for(d=b.next();!d.done;d=b.next())d=new AWe(d.value),a.D.Ia(d),d.render(c);b=new RM("CREATE NEW DATA SOURCE");a.Ia(b);b.render(c);a.getHandler().R(b,"action",function(){Vr("https://sites.google.com/corp/google.com/dataconnectors/home")})}}CWe.prototype.J=function(a){a.stopPropagation();this.resolve(a.target.Ta())};function FWe(){B.call(this);this.C={};this.D={};this.F=new MA}v(FWe,B);function GWe(a,b,c){a.C[b]=c}function HWe(a,b){var c;(c=ritz_api.DbxApi.getExecutionStatusForQuery(b))?(c=a.F.qd(VA.Ca(),c),a.D[b]=c):c=a.D[b];var d=a.C[b];return d?c&&d.getToken()==c.getToken()?(sc(a.C,b),c):d:c};function IWe(){var a='<div class="'+T("waffle-dataconnector-pill-menuitem")+'">';var b=S('<svg class="waffle-dataconnector-refresh-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="none" fill-rule="evenodd"><polygon points="0 0 18 0 18 18 0 18"/><path fill="#000" d="M9,13.5 C6.51,13.5 4.5,11.49 4.5,9 C4.5,6.51 6.51,4.5 9,4.5 C10.24,4.5 11.36,5.02 12.17,5.83 L10,8 L15,8 L15,3 L13.24,4.76 C12.15,3.68 10.66,3 9,3 C5.69,3 3.01,5.69 3.01,9 C3.01,12.31 5.69,15 9,15 C11.97,15 14.43,12.84 14.9,10 L13.38,10 C12.92,12 11.14,13.5 9,13.5 L9,13.5 Z"/></g></svg>');
a+=Q(b);a=a+"Refresh query"+('<span class="'+T("waffle-dataconnector-pill-menuitem-refreshquery-info")+" "+T("waffle-dataconnector-pill-menuitem-accel")+'"><span class="'+T("waffle-dataconnector-pill-menuitem-refreshquery-info-message")+'"></span><span class="'+T("waffle-dataconnector-pill-menuitem-refreshquery-info-progress")+'">');a=a+"Calculating size..."+('</span><span class="'+T("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button")+'">');return S(a+"Error estimating size</span></span></div>")}
function JWe(){var a='<div class="'+T("waffle-dataconnector-pill-menuitem-editquery")+" "+T("waffle-dataconnector-pill-menuitem")+'">';var b=S('<svg class="waffle-dataconnector-edit-icon" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');a+=Q(b);return S(a+
"Edit query</div>")}function KWe(a,b,c){b=c||b;a='<div class="'+T("waffle-dataconnector-pill-menuitem-viewerror")+" "+T("waffle-dataconnector-pill-menuitem")+'">'+Q(UUe({color:"#000000"},b));return S(a+"View error</div>")}function LWe(a,b,c){b=c||b;a='<div class="'+T("waffle-dataconnector-pill-menuitem-bigquery-helpdoc")+" "+T("waffle-dataconnector-pill-menuitem")+'">'+Q(VUe(null,b));return S(a+"Learn more about BigQuery</div>")}
function MWe(){var a='<div class="'+T("waffle-dataconnector-pill-menuitem")+'"><span class="'+T("waffle-dataconnector-pill-menuitem-truncation-message")+'"></span><span class="'+T("waffle-dataconnector-pill-menuitem-truncation-bigquery-console")+" "+T("waffle-dataconnector-pill-menuitem-accel")+'">';return S(a+"View all in BigQuery</span></div>")};function NWe(a,b,c,d){so.call(this,ot(IWe),a,d);this.H=b;this.J=c;this.F=An(new zn,72).build();this.C=new Ls(void 0,dm(Ks,"waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"),this.va());this.Ia(this.C);this.D=3==ritz_api.DbxApi.getTypeOfQuery(this.H)}v(NWe,so);
NWe.prototype.Ja=function(){so.prototype.Ja.call(this);$k(this.Qa(),"waffle-dataconnector-pill-menuitem-refreshquery");this.C.Xa(this.La("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"));this.RI();this.getHandler().R(this.C,"action",this.V)};
NWe.prototype.RI=function(){O(this.La("waffle-dataconnector-pill-menuitem-refreshquery-info"),this.D);if(this.D){OWe(this,"waffle-dataconnector-pill-menuitem-refreshquery-info-message");var a=this.La("waffle-dataconnector-pill-menuitem-refreshquery-info-message");gd(a,ed)}PWe(this)};NWe.prototype.lh=function(a){if(a&&Pd(a.target)){var b=this.La("waffle-dataconnector-pill-menuitem-refreshquery-info");if(ce(b,a.target))return!0}return so.prototype.lh.call(this,a)};
NWe.prototype.V=function(a){a.stopPropagation();this.getParent().setVisible(!1);Dwb.zb(void 0,this.F)};
function PWe(a){a.D&&(OWe(a,"waffle-dataconnector-pill-menuitem-refreshquery-info-progress"),a.J.C(35737,a.F),QWe(a).then(function(b){b=V(b,2);return RWe(b).then(function(b){b=V(V(b,5),1);b=dVe(b);var c=a.La("waffle-dataconnector-pill-menuitem-refreshquery-info-message");gd(c,$c(b));OWe(a,"waffle-dataconnector-pill-menuitem-refreshquery-info-message");lK(b)},function(){return SWe(a)})},function(){return SWe(a)}))}
function SWe(a){OWe(a,"waffle-dataconnector-pill-menuitem-refreshquery-info-error-button")}function QWe(a){var b=new UOd;W(b,1,a.H);return KUe(gZ.getInstance(),b)}function RWe(a){V(a,6);var b=new NY;a=a.clone();W(b,1,a);W(b,2,1);W(b,4,!0);return FUe(gZ.getInstance(),b)}
function OWe(a,b){["waffle-dataconnector-pill-menuitem-refreshquery-info-message","waffle-dataconnector-pill-menuitem-refreshquery-info-progress","waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"].forEach(function(b){return O(a.La(b),!1)});O(a.La(b),!0);a.C.setVisible("waffle-dataconnector-pill-menuitem-refreshquery-info-error-button"==b)};function TWe(a,b,c){so.call(this,ot(MWe),a,c);this.C=b;this.D=new MA;this.Tga=null}v(TWe,so);TWe.prototype.Ja=function(){so.prototype.Ja.call(this);this.Pa(!1);$k(this.Qa(),"waffle-dataconnector-pill-menuitem-truncation");this.RI()};
TWe.prototype.RI=function(){ywb.Pa(!1);O(this.La("waffle-dataconnector-pill-menuitem-truncation-bigquery-console"),!1);this.Tga=null;gd(this.La("waffle-dataconnector-pill-menuitem-truncation-message"),ed);var a=UWe(this);a&&(V(a,7)||!zw(a,6)?a="Limit: "+(cVe.format(1E4)+" rows"):(a=V(a,6),a=(new Lv("{ROWS, plural, =0 {No results}=1 {1 row}other {# rows}}")).format({ROWS:a})),gd(this.La("waffle-dataconnector-pill-menuitem-truncation-message"),$c(a)));VWe(this)};
function VWe(a){if(3==ritz_api.DbxApi.getTypeOfQuery(a.C)){var b=UWe(a);if(b&&zw(b,8)&&zw(b,9)&&V(b,7)){var c=new dZ,d=V(b,8),e=V(b,9);W(c,2,d);W(c,1,e);MUe(c).then(function(b){b.Cq()&&(a.Pa(!0),ywb.Pa(!0),O(a.La("waffle-dataconnector-pill-menuitem-truncation-bigquery-console"),!0),a.Tga=(new Yo("https://console.cloud.google.com/bigquery")).wc("project",d).wc("j",e).wc("page","queryresults").toString())},va)}}}
function UWe(a){var b=ritz_api.DbxApi.getDbQueryForQueryId(a.C);return null==b?null:a.D.qd(TA.Ca(),b)};function WWe(a,b,c,d){c=void 0===c?!1:c;QX.call(this,nt(WUe,{opacity:.54}),new xo(d),XWe.getInstance(),d);this.H=a;this.ea=c;this.O=b;this.J=Bn(An(new zn,72),FVe(ritz_api.DbxApi.getTypeOfQuery(this.H))).build();this.D={};this.D["refresh-query"]=new NWe("refresh-query",this.H,this.O,this.va());this.cd(this.D["refresh-query"]);this.D["edit-query"]=new so(ot(JWe),"edit-query",this.va());this.cd(this.D["edit-query"]);this.D["view-error"]=new so(ot(KWe),"view-error",this.va());this.cd(this.D["view-error"]);
this.D["menu-separator"]=new wo(this.va());this.cd(this.D["menu-separator"]);this.D.truncation=new TWe("truncation",this.H,this.va());this.cd(this.D.truncation);this.D["bigquery-helpdoc"]=new so(ot(LWe),"bigquery-helpdoc",this.va());this.cd(this.D["bigquery-helpdoc"])}v(WWe,QX);WWe.prototype.Ja=function(){QX.prototype.Ja.call(this);$k(this.Xb().getElement(),"waffle-dataconnector-pill-menu");Ydd(this,new Fn(this.Qa(),this.ea?4:0));this.Dy=!0;this.getHandler().R(this.Xb(),"action",this.oa)};
WWe.prototype.oa=function(a){a=a.target;var b=a.Ta(),c=YWe[b];if(c&&c.isEnabled()){var d;"truncation"==b&&(d=a.Tga);c.zb(d,this.J)}};
WWe.prototype.refresh=function(a){var b=[];switch(a){case 2:b.push("edit-query");b.push("refresh-query");break;case 3:b.push("view-error")}b.push("menu-separator");b.push("truncation");3==ritz_api.DbxApi.getTypeOfQuery(this.H)&&b.push("bigquery-helpdoc");a=ja(Object.values(this.D));for(var c=a.next();!c.done;c=a.next())c.value.setVisible(!1);b=ja(b);for(a=b.next();!a.done;a=b.next())this.D[a.value].setVisible(!0)};
WWe.prototype.Jd=function(a,b){var c=this.Xb();if(c&&c.ub()&&a){c=ja(Object.values(this.D));for(var d=c.next();!d.done;d=c.next())d=d.value,d.RI&&d.RI()}QX.prototype.Jd.call(this,a,b)};var ZWe={},YWe=(ZWe["bigquery-helpdoc"]=owb,ZWe["edit-query"]=twb,ZWe["refresh-query"]=Bwb,ZWe.truncation=ywb,ZWe["view-error"]=Dwb,ZWe);function XWe(){}v(XWe,lId);XWe.prototype.pr=function(a){return a.Ea("DIV",{style:"display:none;"})};xa(XWe);function $We(a,b,c){b=c||b;a='<div class="'+T("waffle-dataconnector-pill")+'" tabindex="0"><div class="'+T("waffle-dataconnector-pill-info")+'"><div class="'+T("waffle-dataconnector-pill-timestamp")+'"></div><div class="'+T("waffle-dataconnector-pill-progress")+'"><div class="'+T("waffle-dataconnector-pill-spinner")+'"></div><span class="'+T("waffle-dataconnector-pill-progress-message")+'">';a=a+"Running query..."+(' </span></div><div class="'+T("waffle-dataconnector-pill-error")+'">'+Q(UUe(null,
b)));a=a+"Execution error"+('</div></div><div class="'+T("waffle-dataconnector-pill-editquery-button-wrapper")+'"></div><div class="'+T("waffle-dataconnector-pill-refresh-button-wrapper")+'"></div><div class="'+T("waffle-dataconnector-pill-menu-button-wrapper")+'"></div></div>');return S(a)};function aXe(a,b,c,d,e,f,h,k){h=void 0===h?!1:h;P.call(this,k);this.O=a;this.Ma=b;this.Da=c;this.H=h;this.V=d;this.Aa=e;this.oa=f;b=ritz_api.DbxApi.getTypeOfQuery(a);this.L=Bn(An(new zn,72),FVe(b)).build();this.ea=new bXe;this.J=new Gm;this.Ba(this.J);this.F=new qV;this.Ia(this.F);this.F.Hd("waffle-dataconnector-pill-editquery-button");Jm(this.J,this.F,twb,Pm,void 0,this.L);this.D=new qV("Refresh");this.D.Hd("waffle-dataconnector-pill-refresh-button");this.Ia(this.D);this.C=new WWe(a,this.Aa,this.H,
this.va());this.C.Hd("waffle-dataconnector-pill-menu-button");this.Ia(this.C);this.Ha=new MA}v(aXe,P);n=aXe.prototype;n.Ea=function(){this.ob(ot($We))};
n.Ja=function(){var a=this;P.prototype.Ja.call(this);Tk(this.Qa(),"toolbar");var b=this.getId()+":label";this.La("waffle-dataconnector-pill-info").id=b;Uk(this.Qa(),"labelledby",b);this.F.render(this.La("waffle-dataconnector-pill-editquery-button-wrapper"));this.D.render(this.La("waffle-dataconnector-pill-refresh-button-wrapper"));this.C.render(this.La("waffle-dataconnector-pill-menu-button-wrapper"));Em(this.C.Qa(),"More options",void 0);this.getHandler().R(this.D,"action",this.WEb).R(oe(this.va()),
"focus",this.refresh).R(this.Qa(),"keydown",function(a){var b=a.keyCode;37!=b&&39!=b||a.preventDefault()});D.jq&&D.product.gq&&this.getHandler().R(this.Qa(),"focus",function(){ol(a.Qa(),{outline:"1px dotted black"})}).R(this.Qa(),"blur",function(){ol(a.Qa(),{outline:"0"})});this.refresh();b=new oR(this.Qa(),this.va());this.Ba(b);pR(b)};n.Ka=function(){P.prototype.Ka.call(this)};n.bd=function(){this.Da.bd(this.Qa(),this.H?5:1,new jl(0,this.H?50:0,12,this.H?0:50))};
n.refresh=function(){var a=HWe(this.V,this.O);a=a?a.getState():2;var b=uwb.isEnabled()&&N(this.oa,"fedct");switch(a){case 5:case 1:O(this.La("waffle-dataconnector-pill-timestamp"),!1);O(this.La("waffle-dataconnector-pill-progress"),!0);O(this.La("waffle-dataconnector-pill-error"),!1);this.F.setVisible(!1);this.D.setVisible(!1);this.D.Pa(!1);this.C.setVisible(!1);break;case 4:case 2:O(this.La("waffle-dataconnector-pill-timestamp"),!0);O(this.La("waffle-dataconnector-pill-progress"),!1);O(this.La("waffle-dataconnector-pill-error"),
!1);cXe(this);this.F.setVisible(!1);this.D.setVisible(b);this.D.Pa(b);this.C.setVisible(b);this.C.isVisible()&&this.C.refresh(a);break;case 3:O(this.La("waffle-dataconnector-pill-timestamp"),!1);O(this.La("waffle-dataconnector-pill-progress"),!1);O(this.La("waffle-dataconnector-pill-error"),!0);this.F.setVisible(b);this.D.setVisible(!1);this.D.Pa(!1);this.C.setVisible(b);this.C.isVisible()&&this.C.refresh(a);b||(O(this.La("waffle-dataconnector-pill-timestamp"),!0),O(this.La("waffle-dataconnector-pill-error"),
!1),cXe(this));break;default:Dmd("Unrecognized execution state: "+a)}this.bd()};
function cXe(a){var b=a.La("waffle-dataconnector-pill-timestamp");var c=ritz_api.DbxApi.getDbQueryForSheet(a.Ma);if(c=null==c?null:a.Ha.qd(TA.Ca(),c)){var d=V(c,3)||0;0>=d?ee(b,"No query results"):(a=a.ea.format(d),V(c,7)?(a="Limited to "+(dXe.format(V(c,6))+(" rows, "+a)),ee(b,a)):zw(c,6)?(a=(new Lv("{totalRows, plural, =0 {No rows, {formattedDateTime}}=1 {1 row, {formattedDateTime}}other {# rows, {formattedDateTime}}}")).format({totalRows:V(c,6),formattedDateTime:a}),ee(b,a)):ee(b,"Updated "+a))}else ee(b,
"No query results")}n.WEb=function(){this.D.Pa(!1);Bwb.zb(void 0,this.L)};n.focus=function(){this.Qa().focus()};var dXe=new Iv(1);function bXe(){this.C=new Cv(1);this.D=new Cv(Fv.MONTH_DAY_ABBR);this.F=new Cv(7)}bXe.prototype.format=function(a){a=new Date(a);var b=new Date;return 0<b.getFullYear()-a.getFullYear()?this.C.format(a):a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()?this.F.format(a):this.D.format(a)};function eXe(a,b,c,d,e,f,h){B.call(this);this.D=a;this.H=b;this.L=c;this.oa=d;this.J=e;this.Oa=new gl(this);this.Ba(this.Oa);this.F=new xe(this);this.Ba(this.F);this.V=f;this.ea=h;this.O=M();this.C=null;this.Oa.R(this.L,"F",this.vSb).R(this.D,"gb",this.wSb).R(this.D,"hb",this.hHb).R(this.oa,"db-execution-status-updated",this.uSb).R(this.D,"zb",this.refresh);this.F.subscribe(vwb,"action",this.Ewb)}v(eXe,B);n=eXe.prototype;n.Ka=function(){B.prototype.Ka.call(this);C(this.C)};n.refresh=function(){fXe(this)};
n.vSb=function(){this.C&&this.C.bd()};n.wSb=function(){fXe(this)};n.hHb=function(){C(this.C);this.C=null};n.Ewb=function(){this.C&&(this.C.focus(),this.V.wb(2))};function fXe(a){var b=a.D.C.C;if(b&&KK(b))if(a.C)a.C.refresh();else{var c=zK(a.H);if(c){b=c.ze();c=new Fn(c.Ma.J,b?5:1);var d=a.D.C.C,e=V(d.H,1);d=d.mb();a.C=new aXe(e,d,c,a.J,a.ea,a.O,b);a.C.render()}}}n.uSb=function(a){a.F&&0!=a.F.length&&this.C&&db(a.F,this.C.O)&&this.C.refresh()};function gXe(a,b,c,d){var e="Error in query on "+c;c=new xWe;c.Hd("waffle-dataconnector-error-popup");Qt(c,e);c.C.setContent("Open query editor");c.J.setContent("Ok");a=10==a.getErrorCode()?EVe(d):yVe(b,a);Rt(c,a);return c};function hXe(a,b,c,d,e,f,h,k,l){pWe.call(this,a,d,f,h,k,l);this.H=new FWe;this.Ba(this.H);this.D=b;this.J=new eXe(b,c,d,a,this.H,e,l);this.Ba(this.J);this.Oa=new gl(this);this.Ba(this.Oa);this.oa=new KVe;this.Ba(this.oa);this.Oa.R(this.C.D,["show","hide"],this.Rtb);this.Oa.R(this.C.D,["Qh"],this.Syb);this.J.refresh()}v(hXe,pWe);n=hXe.prototype;
n.Wza=function(a){var b=this,c=vtc(),d=new Uv(utc.concat(["waffle-dataconnector-connection-selected"])),e=new Uv(["waffle-dataconnector-active-sheet-db-connection","embedded-object-unfocused"]),f=utc.concat(["waffle-dataconnector-active-sheet-db-connection","sheet-access-no-protected-range-for-sheet"]);c||f.push("waffle-dataconnector-active-sheet-not-plx");c=new Uv(f);a.C(gG,US).F(gG,US).C(hG,US).F(hG,US).C(Bwb,c).C(twb,c).C(iG,US).C(Cwb,d).C(zwb,c).C(Dwb,c).C(vwb,e);a.C(uwb,c);this.O.Ab(uwb,Qa,function(){b.J.refresh()});
N(M(),"fedp")&&a.C(rwb,US).F(rwb,US).C(swb,US).F(swb,US)};n.KVa=function(){this.O.subscribe(iG,"action",this.VKa).subscribe(gG,"action",this.Usb).subscribe(rwb,"action",this.Tsb).subscribe(Bwb,"action",this.UEb).subscribe(twb,"action",this.gra).subscribe(hG,"action",this.ivb).subscribe(zwb,"action",this.lCb).subscribe(Dwb,"action",this.gra).Ab(swb,Ra,this.axb).subscribe(ywb,"action",this.hCb)};n.Rtb=function(){var a=mVe(this.C);a&&a.isVisible()||(iG.setValue(null),Cwb.setValue(null))};
n.aRa=function(a){var b=this;a=void 0===a?!1:a;var c=new CWe;this.Ba(c);D4(this.C,c,!a);c.getResult().then(function(c){var d=a,f=c.getId();c=c.getName();if(d){oVe(b.C);d=mVe(b.C);d.hc=f;d.Va=!0;-1!=ge(aVe(d)).indexOf("A managed data source is missing under query settings")&&F4(d,cd("span"));var h=d.L;h.F=c;ee(h.La("waffle-dataconnector-jdbc-query-settings-widget-connection-name"),c);dl(h.La("waffle-dataconnector-jdbc-query-settings-widget-connection-name"),"waffle-dataconnector-jdbc-query-settings-widget-connection-name-error",
!1);d.L.Jd(!0);d.Od.J(f);lWe(d.pb);d.TI()}else iXe(b,f,c)},function(){oVe(b.C)})};n.l_b=function(){jXe(this,[],!1)};function iXe(a,b,c){a.L.addCallback(function(d){d=d.ojb(b,c);a.Ba(d);D4(a.C,d)})}n.Usb=function(a){kXe(this,1,a)};n.Tsb=function(a){kXe(this,2,a)};function kXe(a,b,c){var d=mVe(a.C);W(c,2,b);EUe(a.F,c).then(function(c){lXe(a,c);2==b&&SFb()},function(a){d.isDisposed()||RVe(d,a)});WVe(d)}
function lXe(a,b){GWe(a.H,V(b,2),b.Mi());var c=b.mb();nVe(a.C);mXe(a,c);hM(a.D,c)?kM(a.D.C)==c?a.J.refresh():mM(a.D,c,void 0,{vE:!0}):a.Oa.Kc(a.D,["rb","gb"],function(b){"rb"==b.type&&b.Sh==c&&mM(a.D,c,void 0,{vE:!0})})}n.UEb=function(){jXe(this,[EO(this.D.C)],!0)};function jXe(a,b,c){var d=new yOd;b.forEach(function(a){Bw(d,1,a)});GUe(a.F,d).then(function(b){nXe(a,Dw(b,1));a.J.refresh()},function(b){return oXe(a,b,c)})}
function oXe(a,b,c){var d=[],e=[];Dw(b,1).forEach(function(a){return 3==a.Mi().getState()?e.push(a):d.push(a)});nXe(a,d);a.J.refresh();c&&(b=e[0],c=b.Mi(),c.getErrorCode(),pXe(a,b.mb(),c))}function nXe(a,b){b.forEach(function(b){var c=hM(a.D,b.mb());if(c=c&&c.H)c=V(c,1),b=b.Mi(),a.H.C[c]=b})}
n.axb=function(){var a=this,b=new bZ,c=iKb(UL(this.D.getActiveGrid().Fc())),d=EO(this.D.C);W(b,1,3);W(b,2,d);DUe(b,ZJb(c));HUe(this.F,b).then(function(b){var c=V(b,2);b=b.Mi();a.H.C[c]=b},function(b){pXe(a,d,b.Mi())})};
function pXe(a,b,c){var d=hM(a.D,b),e=d&&d.H;if(e){d=d.we();e=ritz_api.DbxApi.getTypeOfQuery(V(e,1));var f="waffle-dataconnector-ssologin-"+ac(),h=gXe(c,e,d,f);a.Ba(h);a.V.Bi(h);h.render();h.setVisible(!0);h.getResult().then(function(){C(h);a.gra(b)},function(){C(h)});(c=Fd(f))&&H4.prototype.getHandler.call(h).R(c,"click",function(){qXe(a,b,h)})}}function qXe(a,b,c){LVe(a.oa,function(){C(c);jXe(a,[b],!0)})}
n.gra=function(a){if((a=void 0!==a?hM(this.D,a):this.D.C.C)&&KK(a)){var b=a.H;a=V(b,1);switch(ritz_api.DbxApi.getTypeOfQuery(a)){case 2:rXe(this,a);break;case 1:b=V(b,2);sXe(this,b,a);break;case 3:tXe(this,a)}}};
function sXe(a,b,c){var d=uXe(a,c),e=vXe(a,b),f=wXe(a,c);a.L.addCallback(function(h){var k=sWe("Loading query...");Ue([d,e,f]).then(function(d){var e=d[0],f=d[1]?d[1]:null;f=f?f.getName():null;d=h.sjb(b,f,c,e,d[2]?d[2]:null);a.Ba(d);Pr(Or.getInstance(),k);D4(a.C,d)},function(){Pr(Or.getInstance(),k);vWe("Could not load query")})})}
function rXe(a,b){var c=uXe(a,b),d=wXe(a,b);a.L.addCallback(function(e){var f=sWe("Loading query...");Ue([c,d]).then(function(c){c=e.tjb(b,c[0],c[1]?c[1]:null);a.Ba(c);Pr(Or.getInstance(),f);D4(a.C,c)},function(){Pr(Or.getInstance(),f);vWe("Could not load query")})})}
function tXe(a,b){var c=kVe(new jVe(a.F)),d=uXe(a,b),e=wXe(a,b);a.L.addCallback(function(f){var h=sWe("Connecting to BigQuery...");Ue([d,e,c]).then(function(c){var d=c[0],e=c[1]?c[1]:null;c=c[2];var k=V(d,4).Sl();c=new PUe(c,k);d=f.rjb(c,b,d,e);Pr(Or.getInstance(),h);D4(a.C,d)},function(){Pr(Or.getInstance(),h);vWe("Could not load query")})})}function uXe(a,b){var c=We(),d=new UOd;W(d,1,b);KUe(a.F,d).then(function(a){c.resolve(V(a,2))},function(a){return c.reject(a)});return c.C}
function vXe(a,b){var c=We(),d=new aPd;W(d,1,b);NUe(a.F,d).then(function(a){c.resolve(V(a,1))},function(){return c.resolve(null)});return c.C}function wXe(a,b){var c=HWe(a.H,b);if(!c||3!=c.getState())return Se(null);c=new YOd;W(c,1,b);return a.F.Mi(c).then(function(a){return a.Mi()})}
n.ivb=function(a){var b=this,c=V(a,1),d=mVe(this.C);IUe(this.F,a).then(function(a){a=a.Mi();b.H.C[c]=a;a=ritz_api.DbxApi.getSheetIdForQuery(c);mM(b.D,a,void 0,{vE:!0});nVe(b.C);b.J.refresh()},function(a){d.isDisposed()||RVe(d,a)});WVe(d)};n.lCb=function(){var a=this,b=this.D.C.C,c=V(b.H,1),d=new YOd;W(d,1,c);this.F.Mi(d).then(function(c){(c=c.Mi())&&3==c.getState()&&pXe(a,b.mb(),c)})};n.Syb=function(){this.aRa(!0)};n.hCb=function(a){Vr(a)};
function mXe(a,b){a=a.Aa.Qb;var c=new LA,d=q$b(b,0,0);W(c,1,d);b=BC(b,0,0,1,1);Bw(c,2,b);a.dispatchEvent(new OUe(new KA(c)))};function xXe(a,b){nK.call(this,139);this.C=a||"";this.D=b}v(xXe,nK);xXe.prototype.Rd=function(){var a=new CFb;W(a,1,this.C);W(a,2,this.D);return a};function yXe(a,b,c,d,e,f,h,k,l){pWe.call(this,a,c,e,f,h,k);this.H=l}v(yXe,pWe);yXe.prototype.Wza=function(a){a.C(gG,US).F(gG,US).C(iG,US)};yXe.prototype.KVa=function(){this.O.subscribe(iG,"action",this.VKa).subscribe(gG,"action",this.D)};
yXe.prototype.D=function(a){var b=V(a,1);a=new iD;switch(V(b,6)){case 3:var c=new jD,d=V(V(b,4),1);W(c,1,d);b=V(b,4).Sl();W(c,3,b);W(a,3,c);break;case 2:c=new kD;(d=V(V(b,2),1))?(W(c,1,d),b=V(V(b,2),2),W(c,2,b)):(b=V(V(b,2),3),W(c,3,b));W(a,4,c);break;default:throw Error("Unknown data connector type: "+V(b,6));}this.H.C(new xXe(null,a));nVe(this.C)};function zXe(){B.call(this)}v(zXe,zF);zXe.prototype.C=function(){return hXe};zXe.prototype.D=function(){return yXe};GF("dataconnector",zXe);
