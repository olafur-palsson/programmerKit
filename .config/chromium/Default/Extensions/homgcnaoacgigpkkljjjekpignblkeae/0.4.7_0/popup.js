var bg=chrome.extension.getBackgroundPage();chrome.tabs.getSelected(null,function(a){chrome.extension.sendMessage({msg:'get',tab:a.id},function(a){var b=document.getElementById('app_list'),c=a&&a.apps?a.apps:{},d=bg.appinfo,e=0;for(var f in table=document.createElement('table'),tbody=document.createElement('tbody'),c){tr=document.createElement('tr'),td_1=document.createElement('td'),td_2=document.createElement('td'),app=d[f]?d[f]:{},app.title||(app.title=f),app.url||(app.url=d[''].url.replace('%s',f)),app.icon||(app.icon=d[''].icon),'-1'!=c[f]&&(app.title=f+' '+c[f]);var g=document.createElement('a'),h=document.createElement('img');g.target='_blank',g.title=app.title,g.href=app.url,h.alt=app.title,h.width=16,h.height=16,h.src='apps/'+app.icon,text=document.createElement('a'),text.href=app.url,text.target='_blank',text.innerText=app.title,g.appendChild(h),td_1.appendChild(g),td_2.appendChild(text),tr.appendChild(td_1),tr.appendChild(td_2),tbody.appendChild(tr),e++}table.appendChild(tbody),b.appendChild(table)})});