if (self.CavalryLogger) { CavalryLogger.start_js(["qebai"]); }

__d("FacebookAppIDs",[],(function(a,b,c,d,e,f){e.exports={BONFIRE_FOR_WWW:784885635046813,FACEBOOK_FOR_ANDROID:74769995908,FACEBOOK_FOR_EMERGING_MARKET_ANDROID:275254692598279,TURDUCKEN:400954310366822,FACEBOOK_MEDIA_EFFECTS:1779302845618373,MOST_RECENT_FEED:608920319153834,SAVED_FOR_LATER:586254444758776,TRANSLATIONS:4329892722,MESSENGERDOTCOM:772021112871879,MESSENGER_DESKTOP:195376314393036,WWW:256281040558,FBPAGES:2530096808,ADS_PAYMENT:123097351040126,EVENTS:2344061033,BUSINESS_ACCOUNTS:436761779744620,ADS_EVENTS_MANAGER:2094176354154603,WORKPLACE_BILLING:1350397358363828,WORKPLACE_FOR_EVERY_PHONE:1263749867021676,WORKPLACE_DESKTOP:267999183646265,CHATPROXY_WEB:229895473858072,MARKETPLACE:1606854132932955,WHATSAPP_BUSINESS_ACCOUNT_MANAGER:225181538219344,LIFT_STUDY_VIEW:1501349520163380,LIFT_STUDY_CREATION:367378623468359,INTERN_ADS_PREVIEW_GENERATION_APP:2004203579636813}}),null);
__d("FBRTCCallConstants",[],(function(a,b,c,d,e,f){e.exports={FBRTCCallConnectionType:{MISSED_CALL:4,CONNECTED_CALL:5},FBRTCCallType:{VOICE_CALL:1,VIDEO_CALL:2,COLLAB_VIDEO_CALL:3,COLLAB_SCREEN_SHARE_CALL:4}}}),null);
__d("FBRTCCapability",[],(function(a,b,c,d,e,f){e.exports={SUPPORT_AUDIO_DEPRECATED:0,SUPPORT_VIDEO_DEPRECATED:1,SUPPORT_EXPERIMENTS_IN_JOIN_RESPONSE:2,SUPPORT_NEW_PARTICIPANT_STATES:3,SUPPORT_SDP_RENEGOTIATION:4}}),null);
__d("FBRTCDeviceStatus",[],(function(a,b,c,d,e,f){e.exports={OK:0,NOT_SUPPORTED:1,IN_ANOTHER_CALL:10}}),null);
__d("FBRTCDismissReason",[],(function(a,b,c,d,e,f){e.exports={CALL_ENDED:0,ANSWERED_ON_ANOTHER_DEVICE:1,IN_ANOTHER_CALL:2,CONNECTION_DROPPED:3,REJECTED_ON_ANOTHER_DEVICE:4,REMOVED_BY_PARTICIPANT:5,REJECTED_BY_CALLEE:6,INTERNAL_ERROR:7,JOIN_APPROVAL_DENIED:8}}),null);
__d("FBRTCHangupReason",[],(function(a,b,c,d,e,f){e.exports={IGNORE_CALL:0,HANGUP_CALL:1,NO_ANSWER_TIMEOUT:2,CLIENT_ERROR:3,IN_ANOTHER_CALL:4,CLIENT_INTERRUPTED:5,SESSION_MIGRATED:6}}),null);
__d("FBRTCMediaType",[],(function(a,b,c,d,e,f){e.exports={AUDIO:0,VIDEO:1,DATA:2}}),null);
__d("FBRTCRtcResponseStatusCode",[],(function(a,b,c,d,e,f){e.exports={OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,METHOD_NOT_ALLOWED:406,CONDITIONAL_REQUEST_FAILED:412,SERVER_INTERNAL_ERROR:500,SERVICE_UNAVAILABLE:503}}),null);
__d("FBRTCVideoQuality",[],(function(a,b,c,d,e,f){e.exports={LOW:0,MEDIUM:1,HIGH:2,HD:3,NUM_QUALITIES:4}}),null);
__d("FluxDebugUtils",["areEqual","flattenArray","getByPath"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){return b("areEqual")(a,c.slice(0,a.length))}function h(a){return Object.prototype.toString.call(a)==="[object Object]"}function i(a){return Object.keys(a).sort()}function j(a,b){return i(a).filter(function(a){return!(a in b)})}function k(a,b){return i(b).filter(function(b){return!(b in a)})}function l(a,b){return i(a).filter(function(a){return a in b})}function m(a,c){__p&&__p();if(!h(a)||!h(c))return[];var d=k(a,c).map(function(a){var b;return{path:[],op:"add",value:(b={},b[a]=c[a],b)}}),e=j(a,c).map(function(a){return{path:[a],op:"delete"}}),f=[].concat(b("flattenArray")(l(a,c).map(function(d){if(b("areEqual")(a[d],c[d]))return[];return!h(a[d])||!h(c[d])?{path:[d],op:"update",oldValue:a[d],newValue:c[d]}:m(a[d],c[d]).map(function(a){return babelHelpers["extends"]({},a,{path:[d].concat(a.path)})})})));return[].concat(d,e,f)}var n={diff:m,diffStoreMutation:function(a){return a.prevState&&a.prevState.toJS?m(a.prevState.toJS(),a.currState.toJS()):m(a.prevState,a.currState)},diffStoreMutationInstance:function(a){return n.diffStoreMutation(a.mutation)},isOperationTouchingPath:function(a,c){if(b("areEqual")(a.path,c))return!0;if(g(a.path,c)){c=c.slice(a.path.length);a=a.value||a.newValue;return!!b("getByPath")(a,c)}return!1},getStoreStateFromStoreConfig:function(a){return a.store&&a.stateGetter?a.stateGetter():a.getState()},getStoreInstanceFromStoreConfig:function(a){return a.store||a},applyPlugins:function(a,b,c){b.forEach(function(d){return a[d.name]=function(){for(var a=arguments.length,e=new Array(a),f=0;f<a;f++)e[f]=arguments[f];var g=d.run.apply(d,[c()].concat(e));n.applyPlugins(g,b,function(){return g});return g}})}};e.exports=n}),null);
__d("SignalsSimpleFadeOutContainer.react",["Animation","React","ReactDOM","joinClasses"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PureComponent;d=babelHelpers.inherits(a,c);g=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.state={show:!0},b}a.prototype.componentDidMount=function(){var a=this.props,c=a.delay;a=a.duration;var d=b("ReactDOM").findDOMNode(this);d&&(this.$1=new(b("Animation"))(d).from("opacity",1).to("opacity",1).duration(c*1e3).checkpoint().from("opacity",1).to("opacity",0).duration(a*1e3).ondone(function(){this.setState({show:!1})}.bind(this)).go())};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.stop()};a.prototype.render=function(){var a=this.props,c=a.className;a=a.children;var d=this.state.show;return d?b("React").createElement("div",{className:b("joinClasses")(c)},a):null};e.exports=a}),null);
__d("ChromeExtensionInstallError",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b=babelHelpers.inherits(a,Error);g=b&&b.prototype;function a(a,b,c){g.constructor.call(this,a),this.message=a,this.$ChromeExtensionInstallError3=a,this.$ChromeExtensionInstallError1=c,this.$ChromeExtensionInstallError2=b,this.name=this.constructor.name}a.prototype.toString=function(){return this.name+": "+[this.message,this.$ChromeExtensionInstallError2,this.$ChromeExtensionInstallError1].join("-")};a.prototype.getTypedMessage=function(){return this.$ChromeExtensionInstallError3};a.prototype.getInstallType=function(){return this.$ChromeExtensionInstallError2};e.exports=a}),null);
__d("ChromeExtensionInstallErrorTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHROME_WEBSTORE_UNDEFINED:"CHROME_WEBSTORE_UNDEFINED",EXTENSION_INSTALL_FAILED:"EXTENSION_INSTALL_FAILED",EXTENSION_STORE_INSTALL_TIMEOUT:"EXTENSION_STORE_INSTALL_TIMEOUT"})}),null);
__d("RTCChromeExtensionListener",["DateConsts","EventEmitter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("DateConsts").MS_PER_SEC;var h=c;d=babelHelpers.inherits(a,b("EventEmitter"));g=d&&d.prototype;function a(a){g.constructor.call(this),this.$RTCChromeExtensionListener1=!1,this.$RTCChromeExtensionListener2=null,this.$RTCChromeExtensionListener5=function(a){var b=a;if(a.type==="notificationButtonClicked"){var c=a.buttonIndex;a=a.notificationId;c!==0&&c!==1&&(b={type:"notificationClicked",notificationId:a})}this.emit(b.type,b)}.bind(this),this.$RTCChromeExtensionListener6=function(a){a.onMessage.removeListener(this.$RTCChromeExtensionListener5),this.$RTCChromeExtensionListener2=null,this.emit("portDisconnected"),this.$RTCChromeExtensionListener1===!1&&this.$RTCChromeExtensionListener7(h)}.bind(this),this.$RTCChromeExtensionListener3=a}a.prototype.$RTCChromeExtensionListener4=function(){if(this.$RTCChromeExtensionListener2==null)try{var a=window.chrome.runtime.connect(this.$RTCChromeExtensionListener3,{name:"notifications"});a.onMessage.addListener(this.$RTCChromeExtensionListener5);a.onDisconnect.addListener(this.$RTCChromeExtensionListener6);this.$RTCChromeExtensionListener2=a;this.emit("portConnected")}catch(a){this.emit("portConnectionError",a)}};a.prototype.$RTCChromeExtensionListener7=function(a){a===void 0&&(a=10),window.setTimeout(function(){this.$RTCChromeExtensionListener4()}.bind(this),a)};a.prototype.connect=function(){this.$RTCChromeExtensionListener7()};a.prototype.disconnect=function(){this.$RTCChromeExtensionListener2!=null&&(this.$RTCChromeExtensionListener1=!0,this.$RTCChromeExtensionListener2.disconnect(),this.$RTCChromeExtensionListener2=null)};e.exports=a}),null);
__d("RTCChromeScreenSharingExtension",["Promise","RTCChromeExtensionListener","uuid"],(function(a,b,c,d,e,f){__p&&__p();var g="ncfpggehkhmjpdjpefomjchjafhmbnai";function a(a){return new(b("RTCChromeExtensionListener"))(a)}function h(a,c){return new(b("Promise"))(function(b,d){window.chrome.runtime.sendMessage(c,a,function(a){if(a!=null)typeof a==="object"&&a.type==="error"?d(new Error(a.message)):b(a);else{a=window.chrome.runtime.lastError.message;d(new Error(a))}})})}function c(a,b){b===void 0&&(b=["screen","window","tab"]);return h({type:"getStreamID",sources:b},a)}function d(a,b){return h({type:"cancel",requestID:a},b)}function f(){return b("uuid")()}e.exports={EXTENSION_ID:g,connectToNotifications:a,generateNotificationID:f,getMediaSourceFromExtension:c,sendExtensionRequest:h,stopExtensionScreenSharing:d}}),null);
__d("ScreenSharingExtensionInstallationEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({STARTED:"started",INSTALLED:"installed",FAILED:"failed"})}),null);
__d("ScreenSharingExtensionInstallationType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({INLINE:"inline",STORE:"store"})}),null);
__d("ScreenSharingExtensionInstallationTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:ScreenSharingExtensionInstallationLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:ScreenSharingExtensionInstallationLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:ScreenSharingExtensionInstallationLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setExtensionID=function(a){this.$1.extension_id=a;return this};a.prototype.setFailReason=function(a){this.$1.fail_reason=a;return this};a.prototype.setInstallEvent=function(a){this.$1.install_event=a;return this};a.prototype.setSourceApp=function(a){this.$1.source_app=a;return this};a.prototype.setType=function(a){this.$1.type=a;return this};a.prototype.setURIPath=function(a){this.$1.uri_path=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={extension_id:!0,fail_reason:!0,install_event:!0,source_app:!0,type:!0,uri_path:!0,vc:!0};e.exports=a}),null);
__d("CollabRTCChromeScreenSharingExtension",["invariant","Promise","regeneratorRuntime","ChromeExtensionInstallError","ChromeExtensionInstallErrorTypes","DateConsts","RTCChromeScreenSharingExtension","ScreenSharingExtensionInstallationEvent","ScreenSharingExtensionInstallationType","ScreenSharingExtensionInstallationTypedLogger","URI","gkx","isFacebookURI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=b("DateConsts").MS_PER_MIN;var h=b("RTCChromeScreenSharingExtension").EXTENSION_ID,i=b("RTCChromeScreenSharingExtension").generateNotificationID,j=b("RTCChromeScreenSharingExtension").getMediaSourceFromExtension,k=b("RTCChromeScreenSharingExtension").sendExtensionRequest,l=b("RTCChromeScreenSharingExtension").stopExtensionScreenSharing,m="DIALOG_USER_CANCEL",n="EXTENSION_NOT_FOUND",o="MESSAGESENDER_TAB_UNDEFINED",p="REQUEST_ID_UNDEFINED",q="UNEXPECTED_ERROR",r="data-fb-only-screensharing-extension-available",s=250,t=2*c,u=2;function a(){this.DIALOG_USER_CANCEL=m,this.EXTENSION_NOT_FOUND=n,this.MESSAGESENDER_TAB_UNDEFINED=o,this.REQUEST_ID_UNDEFINED=p,this.UNEXPECTED_ERROR=q,this.$2=h}a.prototype.isInstalled=function(){var a=document;a=a.documentElement;return a!=null?a.hasAttribute(r)&&a.getAttribute(r)==="true"?!0:!1:!1};a.prototype.throwIfNotInstalled=function(){if(this.isInstalled()!==!0)throw new Error(n)};a.prototype.$3=function(a,c){__p&&__p();var d=(c=a)!=null?(c=c.chrome)!=null?c.webstore:c:c;if(d==null)return b("Promise").reject(new(b("ChromeExtensionInstallError"))(b("ChromeExtensionInstallErrorTypes").CHROME_WEBSTORE_UNDEFINED,b("ScreenSharingExtensionInstallationType").INLINE));var e=window.document.documentElement;v(this.getExtensionURL(),window.document);a!==window&&v(this.getExtensionURL(),a.document);return new(b("Promise"))(function(a,c){d.install(this.getExtensionURL(),function(){e!=null&&e.setAttribute(this.getPresenseAttr(),"true"),a()}.bind(this),function(a,d){c(new(b("ChromeExtensionInstallError"))(b("ChromeExtensionInstallErrorTypes").EXTENSION_INSTALL_FAILED,b("ScreenSharingExtensionInstallationType").INLINE,d))})}.bind(this)).then(function(){this.$4(u);return b("ScreenSharingExtensionInstallationType").INLINE}.bind(this))};a.prototype.$5=function(a){__p&&__p();if(this.isInstalled())return b("Promise").resolve(b("ScreenSharingExtensionInstallationType").STORE);v(this.getExtensionURL(),window.document);a=(a=window)!=null?(a=a.chrome)!=null?a.webstore:a:a;if(a==null)return b("Promise").reject(new(b("ChromeExtensionInstallError"))(b("ChromeExtensionInstallErrorTypes").CHROME_WEBSTORE_UNDEFINED,b("ScreenSharingExtensionInstallationType").STORE));window.open(this.getExtensionURL(),"_blank");return this.$4(t/s).then(function(){var a=window.document.documentElement;a.setAttribute(this.getPresenseAttr(),"true");return b("ScreenSharingExtensionInstallationType").STORE}.bind(this))["catch"](function(){throw new(b("ChromeExtensionInstallError"))(b("ChromeExtensionInstallErrorTypes").EXTENSION_STORE_INSTALL_TIMEOUT,b("ScreenSharingExtensionInstallationType").STORE)})};a.prototype.getPresenseAttr=function(){return r};a.prototype.isInlineInstallCapableDomain=function(){return b("isFacebookURI")(b("URI").getRequestURI())};a.prototype.install=function(a){if(this.isInstalled())return b("Promise").resolve();new(b("ScreenSharingExtensionInstallationTypedLogger"))().setInstallEvent(b("ScreenSharingExtensionInstallationEvent").STARTED).setExtensionID(this.$2).setSourceApp(a).log();return this.$6(a).then(function(c){new(b("ScreenSharingExtensionInstallationTypedLogger"))().setInstallEvent(b("ScreenSharingExtensionInstallationEvent").INSTALLED).setExtensionID(this.$2).setType(c).setSourceApp(a).setURIPath(b("URI").getRequestURI().getPath()).log()}.bind(this))["catch"](function(c){new(b("ScreenSharingExtensionInstallationTypedLogger"))().setInstallEvent(b("ScreenSharingExtensionInstallationEvent").FAILED).setExtensionID(this.$2).setFailReason(c.getTypedMessage()).setType(c.getInstallType()).setSourceApp(a).setURIPath(b("URI").getRequestURI().getPath()).log();throw c}.bind(this))};a.prototype.$6=function(a){__p&&__p();if(!this.isInlineInstallCapableDomain())return this.$5(a);if(window.opener){if(b("gkx")("678271"))return this.$5(a);try{window.opener.document;return window.opener.closed?this.$5(a):this.$3(window.opener,a)}catch(b){return this.$5(a)}}return this.$3(window,a)};a.prototype.getSourceID=function(a){__p&&__p();var c;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:if(this.isInstalled()){d.next=2;break}throw new Error(n);case 2:d.next=4;return b("regeneratorRuntime").awrap(j(this.$2,a));case 4:c=d.sent;d.t0=c.type;d.next=d.t0==="streamID"?8:d.t0==="canceledGetStreamID"?10:11;break;case 8:this.$1=c.requestID;return d.abrupt("return",c.streamID);case 10:throw new Error(m);case 11:throw new Error(q);case 12:case"end":return d.stop()}},null,this)};a.prototype.getExtensionID=function(){return this.$2};a.prototype.getExtensionURL=function(){return"https://chrome.google.com/webstore/detail/"+this.$2};a.prototype.stop=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(l(this.$1,this.$2));case 2:this.$1=null;case 3:case"end":return a.stop()}},null,this)};a.prototype.$4=function(a){return k({type:"ping"},this.$2)["catch"](function(b){if(a<1)throw b;return w(s).then(function(){return this.$4(a-1)}.bind(this))}.bind(this))};a.prototype.isMinimumVersionNumber=function(a,c,d){__p&&__p();var e,f,g,h,i,j;return b("regeneratorRuntime").async(function(l){__p&&__p();while(1)switch(l.prev=l.next){case 0:this.throwIfNotInstalled();l.next=3;return b("regeneratorRuntime").awrap(k({type:"ping"},this.$2));case 3:e=l.sent;f=e.version;g=f.split(".").map(function(a){return parseInt(a,10)}),h=g[0],i=g[1],j=g[2];if(!(h>=a)){l.next=10;break}if(!(i>c)){l.next=9;break}return l.abrupt("return",!0);case 9:return l.abrupt("return",i===c&&j>=d);case 10:return l.abrupt("return",!1);case 11:case"end":return l.stop()}},null,this)};a.prototype.focusTabAndWindow=function(){__p&&__p();var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:this.throwIfNotInstalled();c.next=3;return b("regeneratorRuntime").awrap(k({type:"focusTabAndWindow"},this.$2));case 3:a=c.sent;return c.abrupt("return",{tab:a.tab,window:a.window});case 5:case"end":return c.stop()}},null,this)};a.prototype.getLastFocusedWindow=function(a){__p&&__p();var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:this.throwIfNotInstalled();d.next=3;return b("regeneratorRuntime").awrap(k({type:"getLastFocusedWindow",getInfo:a},this.$2));case 3:c=d.sent;return d.abrupt("return",c.window);case 5:case"end":return d.stop()}},null,this)};a.prototype.getTabForSender=function(){__p&&__p();var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:this.throwIfNotInstalled();c.next=3;return b("regeneratorRuntime").awrap(k({type:"getTabForSender"},this.$2));case 3:a=c.sent;return c.abrupt("return",a.tab);case 5:case"end":return c.stop()}},null,this)};a.prototype.getTabAndWindowForSender=function(){__p&&__p();var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:this.throwIfNotInstalled();c.next=3;return b("regeneratorRuntime").awrap(k({type:"getTabAndWindowForSender"},this.$2));case 3:a=c.sent;return c.abrupt("return",{tab:a.tab,window:a.window});case 5:case"end":return c.stop()}},null,this)};a.prototype.getWindow=function(a,c){__p&&__p();var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:this.throwIfNotInstalled();e.next=3;return b("regeneratorRuntime").awrap(k({type:"getWindow",windowId:a,getInfo:c},this.$2));case 3:d=e.sent;return e.abrupt("return",d.window);case 5:case"end":return e.stop()}},null,this)};a.prototype.updateTab=function(a,c){__p&&__p();var d,e;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:this.throwIfNotInstalled();d={type:"updateTab",updateProperties:a};c!==undefined&&(d.tabId=c);f.next=5;return b("regeneratorRuntime").awrap(k(d,this.$2));case 5:e=f.sent;return f.abrupt("return",e.tab);case 7:case"end":return f.stop()}},null,this)};a.prototype.updateWindow=function(a,c){__p&&__p();var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:this.throwIfNotInstalled();e.next=3;return b("regeneratorRuntime").awrap(k({type:"updateWindow",windowId:a,updateInfo:c},this.$2));case 3:d=e.sent;return e.abrupt("return",d.window);case 5:case"end":return e.stop()}},null,this)};a.prototype.clearNotification=function(a){__p&&__p();var c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(this.isNotificationPermissionGranted());case 2:c=e.sent;if(!(c===!1)){e.next=5;break}throw new Error("Chrome extension notifications permission not granted");case 5:e.next=7;return b("regeneratorRuntime").awrap(k({type:"clearNotification",notificationId:a},this.$2));case 7:d=e.sent;return e.abrupt("return",d.wasCleared);case 9:case"end":return e.stop()}},null,this)};a.prototype.createNotification=function(a){__p&&__p();var c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(this.isNotificationPermissionGranted());case 2:c=e.sent;if(!(c===!1)){e.next=5;break}throw new Error("Chrome extension notifications permission not granted");case 5:e.next=7;return b("regeneratorRuntime").awrap(k({type:"createNotification",notificationId:i(),options:a},this.$2));case 7:d=e.sent;return e.abrupt("return",d.notificationId);case 9:case"end":return e.stop()}},null,this)};a.prototype.getAllNotifications=function(){__p&&__p();var a,c;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(this.isNotificationPermissionGranted());case 2:a=d.sent;if(!(a===!1)){d.next=5;break}throw new Error("Chrome extension notifications permission not granted");case 5:d.next=7;return b("regeneratorRuntime").awrap(k({type:"getAllNotifications"},this.$2));case 7:c=d.sent;return d.abrupt("return",Object.keys(c.notifications));case 9:case"end":return d.stop()}},null,this)};a.prototype.getNotificationsPermissionLevel=function(){__p&&__p();var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:this.throwIfNotInstalled();c.next=3;return b("regeneratorRuntime").awrap(k({type:"getNotificationsPermissionLevel"},this.$2));case 3:a=c.sent;return c.abrupt("return",a.level);case 5:case"end":return c.stop()}},null,this)};a.prototype.updateNotification=function(a,c){__p&&__p();var d,e;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(this.isNotificationPermissionGranted());case 2:d=f.sent;if(!(d===!1)){f.next=5;break}throw new Error("Chrome extension notifications permission not granted");case 5:f.next=7;return b("regeneratorRuntime").awrap(k({type:"updateNotification",notificationId:a,options:c},this.$2));case 7:e=f.sent;return f.abrupt("return",e.wasUpdated);case 9:case"end":return f.stop()}},null,this)};a.prototype.isNotificationPermissionGranted=function(){__p&&__p();var a;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:a="denied";c.prev=1;c.next=4;return b("regeneratorRuntime").awrap(this.getNotificationsPermissionLevel());case 4:a=c.sent;c.next=10;break;case 7:c.prev=7,c.t0=c["catch"](1),a="denied";case 10:c.t1=a;c.next=c.t1==="granted"?13:c.t1==="denied"?14:15;break;case 13:return c.abrupt("return",!0);case 14:return c.abrupt("return",!1);case 15:throw new Error("Received an unexpected permission level: "+a);case 16:case"end":return c.stop()}},null,this,[[1,7]])};function v(a,b){var c="chrome-webstore-item";if(!b.querySelector('link[href="'+a+'"][rel="'+c+'"]')){var d=b.createElement("link");d.setAttribute("href",a);d.setAttribute("rel",c);b.head!=null||g(0,6240);b.head.appendChild(d)}}function w(a){return new(b("Promise"))(function(b){return setTimeout(b,a)})}e.exports=new a()}),null);
__d("CollabRTCChromeScreenSharing",["CollabRTCChromeScreenSharingExtension"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={focusTabAndWindow:function(){return b("CollabRTCChromeScreenSharingExtension").focusTabAndWindow()},getLastFocusedWindow:function(a){return b("CollabRTCChromeScreenSharingExtension").getLastFocusedWindow(a)},getTabForSender:function(){return b("CollabRTCChromeScreenSharingExtension").getTabForSender()},getTabAndWindowForSender:function(){return b("CollabRTCChromeScreenSharingExtension").getTabAndWindowForSender()},getWindow:function(a,c){return b("CollabRTCChromeScreenSharingExtension").getWindow(a,c)},getSourceID:function(a,c){return b("CollabRTCChromeScreenSharingExtension").install(c).then(function(){return b("CollabRTCChromeScreenSharingExtension").getSourceID(a)})},stop:function(){return b("CollabRTCChromeScreenSharingExtension").stop()},updateTab:function(a,c){return b("CollabRTCChromeScreenSharingExtension").updateTab(a,c)},updateWindow:function(a,c){return b("CollabRTCChromeScreenSharingExtension").updateWindow(a,c)}};e.exports=a}),null);
__d("MediaRequestSourceApp",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LIVE_BROADCAST:"live_broadcast",RTC_CALL:"rtc_call",SCREEN_RECORDER:"screen_recorder",UNKNOWN:"unknown",WIRELESS_SCREEN_SHARING:"wireless_screen_sharing",WORKPLACE:"workplace"})}),null);
__d("RTCChromeScreenSharingUtils",["MediaRequestSourceApp","WorkModeConfig"],(function(a,b,c,d,e,f){"use strict";function a(){return b("WorkModeConfig").is_work_user?b("MediaRequestSourceApp").WORKPLACE:b("MediaRequestSourceApp").RTC_CALL}e.exports={getMediaRequestSourceAppId:a}}),null);
__d("PaneGeometryMixin.react",["React"],(function(a,b,c,d,e,f){a=b("React").PropTypes;c={propTypes:{top:a.number,left:a.number,width:a.number,height:a.number,minwidth:a.number,minheight:a.number},getStyle:function(){return{top:this.props.top,left:this.props.left,width:this.props.width,height:this.props.height}}};e.exports=c}),null);
__d("InnerPane.react",["cx","DOMDimensions","PaneGeometryMixin.react","React","ReactDOM","joinClasses"],(function(a,b,c,d,e,f,g){a=b("React").PropTypes;c=b("React").createClass({displayName:"InnerPane",mixins:[b("PaneGeometryMixin.react")],propTypes:{collapsible:a.bool},getSize:function(a){var c=b("ReactDOM").findDOMNode(this),d=b("ReactDOM").findDOMNode(this.refs.content);d=b("DOMDimensions").getElementDimensions(d)[a];d+=b("DOMDimensions").measureElementBox(c,a,1,1,1);return d},render:function(){var a=b("joinClasses")(this.props.className,"pane");return b("React").createElement("div",babelHelpers["extends"]({},this.props,{style:this.getStyle(),className:a}),b("React").createElement("div",{className:"paneScroll _4l3f"},b("React").createElement("div",{className:"paneContent",ref:"content"},this.props.children)))}});e.exports=c}),null);
__d("SplitPane.react",["cx","invariant","DOMDimensions","Event","PaneGeometryMixin.react","React","ReactDOM","clearImmediate","getElementPosition","getViewportDimensions","joinClasses","setImmediate"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;c=b("React").PropTypes;var j=b("React").createClass({displayName:"Item",mixins:[b("PaneGeometryMixin.react")],render:function(){return b("React").createElement("div",babelHelpers["extends"]({},this.props,{style:this.getStyle()}),this.props.children)}});d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={separatorWidth:0,dragging:!1},this.$1=function(a,b){return this.state.orientation==="vertical"?a:{width:a[b.width],height:a[b.height],top:a[b.top],left:a[b.left]}}.bind(this),this.$2=function(a,b,c){var d={},e={},f={};if(a[c.width]){var g=a[c.width];e=this.$1({left:0,top:0,width:Math.max(Math.floor((g-b)*this.state.proportion),0),height:a[c.height]},c);d=this.$1({left:e[c.width],top:0,height:a[c.height]},c);f=this.$1({left:b+d[c.left],top:0,width:Math.max(g-e[c.width]-b,0),height:a[c.height]},c)}return{separator:d,firstPane:e,secondPane:f}}.bind(this),this.collapse=function(){this.refs.firstPane.props.collapsible?this.setState({proportion:0}):this.refs.secondPane.props.collapsible&&this.setState({proportion:1})}.bind(this),this.getDimensions=function(){return{height:this.state.height,width:this.state.width}}.bind(this),this.getSize=function(a){return a==="width"&&this.state.orientation==="vertical"||a==="height"&&this.state.orientation==="horizontal"?0:Math.max(this.refs.firstPane.getSize(a),this.refs.secondPane.getSize(a))}.bind(this),this.$4=function(event){if(event.altKey){this.$5();return}document.body.style.MozUserSelect="none";var a=this.$3();this.setState({dragging:!0,dragStart:event[a.clientX],dragProportion:this.state.proportion})}.bind(this),this.$6=function(event){__p&&__p();if(!this.state.dragging)return;var a=this.$3(),b=this.state[a.width],c=(event[a.clientX]-this.state.dragStart)/b,d=this.state.separatorWidth;b=b-d;d=this.refs.firstPane.props[a.minwidth]||0;a=this.refs.secondPane.props[a.minwidth]||0;c=this.state.dragProportion+c;c=Math.max(c,d/b);c=Math.min(c,1-a/b);c=Math.max(0,Math.min(c,1));this.state.proportion!=c&&(this.props.onProportionChanged&&this.props.onProportionChanged(c),this.setState({proportion:c}))}.bind(this),this.$7=function(event){if(!this.state.dragging)return;document.body.style.MozUserSelect="";this.setState({dragging:!1});this.props.onDragEnd&&this.props.onDragEnd(this.state.proportion)}.bind(this),this.$8=function(event){this.state.dragging&&event.kill()}.bind(this),this.$3=function(){if(this.state.orientation==="vertical")return{top:"top",bottom:"bottom",left:"left",right:"right",width:"width",height:"height",clientX:"clientX",maxwidth:"maxwidth",maxheight:"maxheight",minwidth:"minwidth",minheight:"minheight",x:"x",y:"y"};else return{top:"left",bottom:"right",left:"top",right:"bottom",width:"height",height:"width",clientX:"clientY",maxwidth:"maxheight",maxheight:"maxwidth",minwidth:"minheight",minheight:"minwidth",x:"y",y:"x"}}.bind(this),this.$11=function(){__p&&__p();var a=b("ReactDOM").findDOMNode(this),c=a.parentNode,d=b("ReactDOM").findDOMNode(this.refs.separator);c=b("DOMDimensions").getElementDimensions(c);var e=b("getElementPosition")(a),f=b("getViewportDimensions").withoutScrollbars(),g=this.$3();d=b("DOMDimensions").getElementDimensions(d);d[g.width]!==this.state.separatorWidth&&this.setState({separatorWidth:d[g.width]});d={height:this.props.heightPolicy,width:this.props.widthPolicy};this.props.height!==undefined&&(d.height="fixed");this.props.width!==undefined&&(d.width="fixed");d[g.width]==="grow"&&(d[g.width]="auto");var h={};d[g.width]==="auto"?h[g.width]=c[g.width]:d[g.width]==="fixed"?h[g.width]=this.props[g.width]:d[g.width]==="full"&&(h[g.width]=f[g.width]-e[g.x]-this.$12(g.right,a));this.props[g.maxwidth]!==undefined&&h[g.width]>this.props[g.maxwidth]&&(h[g.width]=this.props[g.maxwidth]);if(d[g.height]==="auto")h[g.height]=c[g.height];else if(d[g.height]==="fixed")h[g.height]=this.props[g.height];else if(d[g.height]==="full")h[g.height]=f[g.height]-e[g.y]-this.$12(g.bottom,a);else if(d[g.height]==="grow"){c=this.refs.firstPane.getSize(g.height);f=this.refs.secondPane.getSize(g.height);h[g.height]=Math.max(c,f)}this.props[g.maxheight]!==undefined&&h[g.height]>this.props[g.maxheight]&&(h[g.height]=this.props[g.maxheight]);(this.state.width!==h.width||this.state.height!==h.height)&&(this.setState(h),this.props.onResize&&this.props.onResize())}.bind(this),this.$12=function(a,c){this.nestedBox===undefined&&(this.nestedBox={});if(this.nestedBox[a]!==undefined)return this.nestedBox[a];var d=0;do d+=b("DOMDimensions").measureElementBox(c,a,1,1,1);while(c!==document.body&&(c=c.parentNode));this.nestedBox[a]=d;return d}.bind(this),c}a.prototype.render=function(){"use strict";var a=[];b("React").Children.forEach(this.props.children,function(b){b&&a.push(b)});a.length===2||h(0,4885);var c=this.$2(this.state,this.state.separatorWidth,this.$3()),d=b("joinClasses")("splitPane"+(this.props.bossPane?" splitPaneBoss":"")+(this.state.orientation==="vertical"?" vertical":"")+(this.state.orientation==="horizontal"?" horizontal":"")+(this.props.nostyling?"":" default")+(this.state.dragging?" dragging":""),this.props.className),e=b("React").createElement(j,babelHelpers["extends"]({ref:"separator",className:"separator"},c.separator,{onMouseDown:this.$4,onMouseOver:this.props.onMouseOverSeparator,onMouseLeave:this.props.onMouseLeaveSeparator}),b("React").createElement("div",{className:"grip",ref:"grid"})),f=b("React").cloneElement(a[0],babelHelpers["extends"]({},c.firstPane,{ref:"firstPane",bossPane:!1}));c=b("React").cloneElement(a[1],babelHelpers["extends"]({},c.secondPane,{ref:"secondPane",bossPane:!1}));return b("React").createElement(j,babelHelpers["extends"]({ref:"container"},this.props,{width:this.state.width,height:this.state.height,className:d}),e,b("React").createElement("div",{className:"guide",ref:"guide"}),b("React").createElement("div",{className:"voile",ref:"voile"}),f,c)};a.prototype.$5=function(){"use strict";if(this.props.flippable){var a=this.state.orientation==="vertical"?"horizontal":"vertical";this.props.onOrientation&&this.props.onOrientation(a);this.setState({orientation:a})}};a.prototype.UNSAFE_componentWillMount=function(){"use strict";document.addEventListener("mousemove",this.$6),document.addEventListener("mouseup",this.$7),document.addEventListener("selectstart",this.$8),this.setState({height:this.props.height,width:this.props.width,orientation:this.props.orientation,proportion:this.props.proportion})};a.prototype.componentWillUnmount=function(){"use strict";document.removeEventListener("mousemove",this.$6),document.removeEventListener("mouseup",this.$7),document.removeEventListener("selectstart",this.$8),this.$9!=null&&(this.$9.remove(),delete this.$9),this.$10!=null&&b("clearImmediate")(this.$10)};a.prototype.componentDidMount=function(){"use strict";this.$11(),(this.props.heightPolicy==="full"||this.props.widthPolicy==="full"||this.props.alwaysUpdateOnWindowResize)&&(this.$9=b("Event").listen(window,"resize",this.$11))};a.prototype.UNSAFE_componentWillReceiveProps=function(a){"use strict";a.proportion!==this.props.proportion&&this.setState({proportion:a.proportion}),this.$10=b("setImmediate")(this.$11)};a.propTypes={widthPolicy:c.oneOf(["auto","full","fixed","grow"]),heightPolicy:c.oneOf(["auto","full","fixed","grow"]),orientation:c.oneOf(["vertical","horizontal"]),nostyling:c.bool,flippable:c.bool,maxwidth:c.number,maxheight:c.number,width:c.number,height:c.number,proportion:c.number,onProportionChanged:c.func,onDragEnd:c.func,bossPane:c.bool,onResize:c.func,onOrientation:c.func,alwaysUpdateOnWindowResize:c.bool,onMouseOverSeparator:c.func,onMouseLeaveSeparator:c.func};a.defaultProps={widthPolicy:"auto",heightPolicy:"grow",orientation:"vertical",nostyling:!1,flippable:!1,proportion:.5,bossPane:!0};e.exports=a}),null);
__d("SUISpinnerUniform.fds",["cssVar"],(function(a,b,c,d,e,f,g){"use strict";a={activeColor:"#3578E5",backgroundColor:"#CCD0D5",darkActiveColor:"#FFFFFF",darkBackgroundColor:"rgba(255, 255, 255, 0.3)",sizes:{large:{border:2,diameter:20},small:{border:1.5,diameter:13}}};e.exports=a}),null);
__d("SUITextUniform.fds",["cssVar","FDSSystemFonts"],(function(a,b,c,d,e,f,g){"use strict";a=b("FDSSystemFonts").FONT_FAMILY;c={header1:{fontFamily:a,fontSize:24,lineHeight:28},header2:{fontFamily:a,fontSize:20,lineHeight:24},header3:{fontFamily:a,fontSize:16,lineHeight:20},header4:{fontFamily:a,fontSize:14,lineHeight:18},body1:{fontFamily:a,fontSize:14,lineHeight:18},body1_DEPRECATED:{fontFamily:a,fontSize:16,lineHeight:20},body2:{fontFamily:a,fontSize:13,lineHeight:17},body2_DEPRECATED:{fontFamily:a,fontSize:14,lineHeight:18},body3:{fontFamily:a,fontSize:12,lineHeight:16},body3_DEPRECATED:{fontFamily:a,fontSize:13,lineHeight:17},meta1:{fontFamily:a,fontSize:12,lineHeight:16},display:{fontFamily:a,fontSize:40,lineHeight:48},heading:{fontFamily:a,fontSize:24,lineHeight:32},subheading:{fontFamily:a,fontSize:20,lineHeight:24},headline:{fontFamily:a,fontSize:16,lineHeight:24},regular:{fontFamily:a,fontSize:14,lineHeight:20},regularUI:{fontFamily:a,fontSize:14,lineHeight:16},large:{fontFamily:a,fontSize:16,lineHeight:20},letterSpacing:"normal",medium:{fontFamily:a,fontSize:14,lineHeight:18},shade:{dark:"#1d2129",light:"#90949c",link:"#365899",medium:"#4b4f56",white:"#FFFFFF"},small:{fontFamily:a,fontSize:12,lineHeight:16},color:{blueLink:"#385898",disabled:"#BEC3C9",disabledDark:"#373737",interactive:"#3578E5",negative:"#FA383E",placeholder:"#8D949E",positive:"#00A400",primary:"#1C1E21",primaryDark:"#cccccc",secondary:"#606770",secondaryDark:"#4A4A4A",white:"#FFFFFF"},xlarge:{fontFamily:a,fontSize:18,lineHeight:24},xsmall:{fontFamily:a,fontSize:11,lineHeight:14},xxlarge:{fontFamily:a,fontSize:24,lineHeight:30}};e.exports=c}),null);
__d("SUIDropdownButtonUniform.fds",["ix","cssVar","React","SUIGlyphIcon.react","asset"],(function(a,b,c,d,e,f,g,h){"use strict";a={use:{"default":{chevron:b("React").createElement(b("SUIGlyphIcon.react"),{srcDefault:g("481883"),srcDisabled:g("482773"),style:{marginRight:"-2px"}}),disabled:{background:"#EBEDF0",borderColor:"#DADDE1",color:"#BEC3C9"}},confirm:{chevron:b("React").createElement(b("SUIGlyphIcon.react"),{srcDefault:g("483254"),srcDisabled:g("483254"),style:{marginRight:"-2px"}}),disabled:{background:"#AAC9FF",borderColor:"#AAC9FF",color:"#FFFFFF"}},special:{chevron:b("React").createElement(b("SUIGlyphIcon.react"),{srcDefault:g("483254"),srcDisabled:g("483254"),style:{marginRight:"-2px"}}),disabled:{background:"#86DF81",borderColor:"#86DF81",color:"#FFFFFF"}}},padding:"12px"};e.exports=a}),null);
__d("SUIErrorUniform.fds",["ix","cssVar","Image.react","React","asset"],(function(a,b,c,d,e,f,g,h){"use strict";a={error:{borderColor:"#FA383E",icon:b("React").createElement(b("Image.react"),{src:g("480267")})},warning:{borderColor:"#FFBA00",icon:b("React").createElement(b("Image.react"),{src:g("480789")})}};e.exports=a}),null);
__d("FDSPrivateDropdownButtonTheme.fds18",["SUIButtonUniform.fds","SUIDropdownButtonUniform.fds","SUIErrorUniform.fds","makeSUIFDSPrivateTheme"],(function(a,b,c,d,e,f){"use strict";a=b("makeSUIFDSPrivateTheme")("FDSDropdownButton",{SUIButton:b("SUIButtonUniform.fds"),SUIError:b("SUIErrorUniform.fds"),SUISelectorButton:b("SUIDropdownButtonUniform.fds")});e.exports=a}),null);
__d("FDSPrivateDropdownButtonThemeContext",["FDSPrivateDropdownButtonTheme.fds18","React"],(function(a,b,c,d,e,f){"use strict";e.exports=b("React").createContext(b("FDSPrivateDropdownButtonTheme.fds18"))}),null);
__d("PositionEnum",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c={above:"above",below:"below",left:"left",right:"right",propType:a.oneOf(["above","below","left","right"]),values:["above","below","left","right"]};e.exports=c}),null);
__d("SUIErrorComponentUtil",["cx","PositionEnum","React","Tooltip","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={propTypes:{errorMessage:b("prop-types").node,warningMessage:b("prop-types").node,errorTooltipPosition:b("PositionEnum").propType},defaultProps:{errorTooltipPosition:"above"},getErrorLevel:function(a){if(a.errorMessage)return"error";return a.warningMessage?"warning":"none"},hasError:function(a){return h.getErrorLevel(a)!=="none"},getErrorTooltipProps:function(a){return!h.hasError(a)?{}:babelHelpers["extends"]({},b("Tooltip").propsFor(a.errorMessage||a.warningMessage,a.errorTooltipPosition),{"data-tooltip-alignh":"right"})},getErrorBorderColor:function(a,b){a=h.getErrorLevel(a);if(a==="none")return null;b=b.SUIError;return a==="error"?b.error.borderColor:b.warning.borderColor},getErrorIcon:function(a,c,d){a=h.getErrorLevel(a);if(a==="none")return null;c=c.SUIError;a=a==="error"?c.error.icon:c.warning.icon;return b("React").cloneElement(a,{className:b("joinClasses")("_1vvf",d)})}};e.exports=h}),null);
__d("FDSDropdownButton.react",["FDSPrivateDropdownButtonThemeContext","React","SUIBorderUtils","SUISelectorButton.react","makeFDSStandardComponent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("FDSPrivateDropdownButtonThemeContext").Consumer,null,function(a){return b("React").createElement(b("SUISelectorButton.react"),{"aria-haspopup":this.props["aria-haspopup"],borderedSides:this.props.borderedSides,"data-testid":this.props["data-testid"],"data-tooltip-position":this.props.tooltipPosition,disabled:this.props.isDisabled,errorMessage:this.props.errorMessage,errorTooltipPosition:this.props.errorTooltipPosition,hasHoverState:this.props.hasHoverState,height:h(this.props.size),icon:this.props.icon,id:this.props.id,isDepressed:this.props.isDepressed,isMenuShown:this.props.isMenuShown,label:this.props.label,labelIsHidden:this.props.labelIsHidden,margin:this.props.margin,maxWidth:this.props.maxWidth,onBlur:this.props.onBlur,onClick:this.props.onClick,onFocus:this.props.onFocus,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onMouseUp:this.props.onMouseUp,rel:this.props.rel,roundedCorners:this.props.roundedCorners,target:this.props.target,textAlign:this.props.textAlign,theme:a,tooltip:this.props.tooltip,tooltipDelay:this.props.tooltipDelay,type:this.props.type,use:i(this.props.use),warningMessage:this.props.warningMessage,width:this.props.width})}.bind(this))};function a(){g.apply(this,arguments)}a.defaultProps={errorTooltipPosition:"above",borderedSides:b("SUIBorderUtils").ALL_SIDES,isDisabled:!1,labelIsHidden:!1,roundedCorners:b("SUIBorderUtils").ALL_CORNERS,size:"medium",type:"button",use:"default",hasHoverState:!1,isMenuShown:!1};function h(a){if(a==="small")return"short";return a==="large"?"tall":"normal"}function i(a){return a==="primary"?"confirm":a}e.exports=b("makeFDSStandardComponent")("FDSDropdownButton",a)}),null);
__d("SUIDropdownSelectorOptionGroupUniform.fds",["ix","cssVar","React","SUIGlyphIcon.react","asset","createBUITypeStyle"],(function(a,b,c,d,e,f,g,h){"use strict";a={activeBackgroundColor:"#DADDE1",activeColor:"#1C1E21",collapsedIcon:b("React").createElement(b("SUIGlyphIcon.react"),{srcDefault:g("496752")}),color:"#1C1E21",expandedIcon:b("React").createElement(b("SUIGlyphIcon.react"),{srcDefault:g("504839")}),highlightedBackgroundColor:"#F5F6F7",highlightedColor:"#1C1E21",typeStyle:b("createBUITypeStyle")({color:"#1C1E21",fontSize:"12px",fontWeight:"bold"})};e.exports=a}),null);
__d("FDSDropdownSelectorOptionGroup.react",["React","SUIDropdownSelectorOptionGroupUniform.fds","SUISelectorOptionGroup.react","emptyFunction","makeFDSStandardComponent","makeSUIFDSPrivateTheme"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("makeSUIFDSPrivateTheme")("FDSDropdownSelectorOptionGroup",{SUISelectorOptionGroup:b("SUIDropdownSelectorOptionGroupUniform.fds")});g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("SUISelectorOptionGroup.react"),{canSelectMultiple:this.props.canSelectMultiple,"data-testid":this.props["data-testid"],isCollapsible:this.props.isCollapsible,isExpandedInitially:this.props.isExpandedInitially,label:this.props.label,onKeyDown:this.props.onKeyDown,onSelect:this.props.onSelect,onSubItemSelect:this.props.onSubItemSelect,selected:this.props.selected,setupFocusRef:this.props.setupFocusRef,theme:h},this.props.children)};function a(){g.apply(this,arguments)}a.defaultProps={canSelectMultiple:!1,isCollapsible:!0,isExpandedInitially:!1,setupFocusRef:b("emptyFunction")};e.exports=b("makeFDSStandardComponent")("FDSDropdownSelectorOptionGroup",a)}),null);
__d("SUIDropdownSelectorUniform.fds",["cssVar"],(function(a,b,c,d,e,f,g){"use strict";a={backgroundColor:"#FFFFFF",borderColor:"#DADDE1",boxShadow:"0 0 4px 0 rgba(0, 0, 0, 0.2)"};e.exports=a}),null);
__d("FDSDropdownSelector.react",["FDSDropdownButton.react","FDSDropdownSelectorOptionGroup.react","React","SUIButtonUniform.fds","SUIDropdownButtonUniform.fds","SUIDropdownSelectorUniform.fds","SUIErrorComponentUtil","SUIErrorUniform.fds","SUISelector.react","SUISelectorButton.react","makeFDSStandardComponent","makeSUIFDSPrivateTheme"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("makeSUIFDSPrivateTheme")("FDSDropdownSelector",{SUISelector:b("SUIDropdownSelectorUniform.fds"),SUIButton:b("SUIButtonUniform.fds"),SUIError:b("SUIErrorUniform.fds"),SUISelectorButton:b("SUIDropdownButtonUniform.fds")});g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("SUISelector.react"),{button:this.props.button?b("React").cloneElement(this.props.button,{icon:this.props.buttonIcon,isDisabled:this.props.isDisabled,size:this.props.buttonSize,use:this.props.buttonUse}):b("React").createElement(b("SUISelectorButton.react"),{disabled:this.props.isDisabled,height:i(this.props.buttonSize),icon:this.props.buttonIcon,textAlign:this.props.buttonTextAlign,use:this.props.buttonUse}),buttonBorderedSides:this.props.buttonBorderedSides,buttonRoundedCorners:this.props.buttonRoundedCorners,buttonTextAlign:this.props.buttonTextAlign,canCollapseGroups:this.props.canCollapseGroups,canSelectMultiple:!1,children:this.props.children,contextualLayerBehaviors:this.props.contextualLayerBehaviors,"data-menu-testid":this.props["data-menu-testid"],"data-testid":this.props["data-testid"],disabled:this.props.isDisabled,dropdownWidth:this.props.dropdownWidth,errorMessage:this.props.errorMessage,errorTooltipPosition:this.props.errorTooltipPosition,id:this.props.id,isSuppressed:this.props.isSuppressed,label:this.props.label,labelledBy:this.props.labelledBy,margin:this.props.margin,maxHeight:this.props.maxHeight,maxWidth:this.props.maxWidth,menuAlignment:this.props.menuAlignment,menuPosition:this.props.menuPosition,name:this.props.name,onChange:this.props.onChange,onMouseEntersMenu:this.props.onMouseEntersMenu,onMouseLeavesMenu:this.props.onMouseLeavesMenu,onOpen:this.props.onOpen,onSelectorButtonClick:this.props.onSelectorButtonClick,optionGroupComponentType:b("FDSDropdownSelectorOptionGroup.react"),placeholder:this.props.placeholder,shouldHideOnBlur:this.props.shouldHideOnBlur,shouldHideOnMouseLeave:this.props.shouldHideOnMouseLeave,shouldOpenAutomatically:this.props.shouldOpenAutomatically,style:this.props.style,theme:h,tooltip:this.props.tooltip,value:this.props.value,warningMessage:this.props.warningMessage,width:this.props.width},this.props.children)};function a(){g.apply(this,arguments)}a.defaultProps=babelHelpers["extends"]({},b("SUIErrorComponentUtil").defaultProps,{buttonSize:"medium",buttonTextAlign:"left",buttonUse:"default",canCollapseGroups:!0,contextualLayerBehaviors:{},isDisabled:!1,dropdownWidth:"auto",isSuppressed:!1,maxHeight:250,menuAlignment:"left",menuPosition:"below",shouldHideOnMouseLeave:!1,shouldHideOnBlur:!0,width:"auto"});function i(a){if(a==="small")return"short";return a==="large"?"tall":"normal"}e.exports=b("makeFDSStandardComponent")("FDSDropdownSelector",a)}),null);
__d("SUIDropdownSelectorOptionUniform.fds",["ix","cssVar","React","SUIGlyphIcon.react","asset","createBUITypeStyle"],(function(a,b,c,d,e,f,g,h){"use strict";a={activeBackgroundColor:"#DADDE1",activeColor:"#1C1E21",color:"#1C1E21",descriptionColor:"#606770",descriptionSelectedColor:"#606770",disabledBackgroundColor:"#F5F6F7",disabledColor:"#606770",highlightedBackgroundColor:"#F5F6F7",highlightedColor:"#1C1E21",iconMargin:{left:"0",right:"8px"},padding:{bottom:"6px",left:"32px",right:"24px",top:"6px"},paddingWhenNoValue:{bottom:"6px",left:"12px",right:"24px",top:"6px"},selectedBackgroundColor:"#ECF3FF",selectedColor:"#1C1E21",selectedIcon:b("React").createElement(b("SUIGlyphIcon.react"),{srcDefault:g("495838"),style:{position:"relative",top:-1}}),selectedIconMarginRight:"8px",selectedTypeStyle:b("createBUITypeStyle")({color:"#1C1E21",fontSize:"12px",fontWeight:"bold"}),typeStyle:b("createBUITypeStyle")({color:"#1C1E21",fontSize:"12px",fontWeight:"normal"})};e.exports=a}),null);
__d("FDSDropdownSelectorOption.react",["React","SUIDropdownSelectorOptionUniform.fds","SUIHelpMessageUniform.business","SUISelectorOption.react","SUITooltipUniform.business","makeFDSStandardComponent","makeSUIFDSPrivateTheme"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("makeSUIFDSPrivateTheme")("FDSDropdownSelectorOption",{SUISelectorOption:b("SUIDropdownSelectorOptionUniform.fds"),SUIHelpMessage:b("SUIHelpMessageUniform.business"),SUITooltip:b("SUITooltipUniform.business")});g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("SUISelectorOption.react"),{canSelectMultiple:this.props.canSelectMultiple,"data-testid":this.props["data-testid"],description:this.props.description,disabled:this.props.isDisabled,hasSelectedValue:this.props.hasSelectedValue,icon:this.props.icon,onKeyDown:this.props.onKeyDown,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onSelect:this.props.onSelect,role:this.props.role,selected:this.props.selected,setupFocusRef:this.props.setupFocusRef,theme:h,tooltip:this.props.tooltip,tooltipPosition:this.props.tooltipPosition,value:this.props.value},this.props.children)};function a(){g.apply(this,arguments)}a.defaultProps={canSelectMultiple:!1,isDisabled:!1,hasSelectedValue:!1,role:"menuitem",selected:!1,tooltipPosition:"above"};e.exports=b("makeFDSStandardComponent")("FDSDropdownSelectorOption",a)}),null);
__d("SUIInlineStyle",[],(function(a,b,c,d,e,f){"use strict";a=[0,4,8,12,16,20,24,28,32,36,40,"0","0px","4px","8px","12px","16px","20px","24px","28px","32px","36px","40px","auto"];e.exports={StandardSpacingValues:a}}),null);
__d("WhiteSpaceEnum",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c={inherit:"inherit",initial:"initial",normal:"normal",nowrap:"nowrap",pre:"pre","pre-line":"pre-line","pre-wrap":"pre-wrap",propType:a.oneOf(["inherit","initial","normal","nowrap","pre","pre-line","pre-wrap"]),values:["inherit","initial","normal","nowrap","pre","pre-line","pre-wrap"]};e.exports=c}),null);
__d("SUIText.react",["cx","invariant","AlignmentEnum","PositionEnum","React","SUIComponent","SUIInlineStyle","SUITheme","WhiteSpaceEnum","autoFlipStyleProps","gkx","joinClasses","withSUITheme"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;a=b("SUIInlineStyle").StandardSpacingValues;c=b("React").PropTypes;d={display:"inline",overflowWrap:"normal",shade:"dark",size:"body2",textAlign:"left"};f=b("gkx")("678820")?b("React").Component:b("SUIComponent");i=babelHelpers.inherits(j,f);i&&i.prototype;j.getLineHeight=function(a,b){a=a.SUIText;return a[j.$SUIText1(b)].lineHeight};j.$SUIText1=function(a){__p&&__p();switch(a){case"large_DEPRECATED":return"large";case"medium_DEPRECATED":return"medium";case"xlarge_DEPRECATED":return"xlarge";case"xsmall_DEPRECATED":return"xsmall";case"xxlarge_DEPRECATED":return"xxlarge";case"heading_DEPRECATED":return"heading";case"headline_DEPRECATED":return"headline";case"regular_DEPRECATED":return"regular";case"regularUI_DEPRECATED":return"regularUI";default:return a}};j.prototype.$SUIText2=function(a,b){if(!a||!(a==="dark"))return b;switch(b){case"primary":return"primaryDark";case"secondary":return"secondaryDark";case"disabled":return"disabledDark";default:return b}};j.prototype.$SUIText3=function(a,b,c){return a.color?c.color[this.$SUIText2(a.palette,a.color)]:c.shade[a.shade]};j.prototype.render=function(){__p&&__p();var a=b("SUITheme").get(this).SUIText,c=babelHelpers["extends"]({},this.props.style),d=this.$SUIText3(this.props,j.defaultProps,a),e=a[j.$SUIText1(this.props.size)];c.fontFamily=e.fontFamily;c.fontSize=e.fontSize+"px";c.lineHeight=e.lineHeight+"px";c.letterSpacing=a.letterSpacing;this.props.customSizeUseSparingly&&(c.fontSize=this.props.customSizeUseSparingly,c.lineHeight="1.35");this.props.weight&&(c.fontWeight=this.props.weight);this.props.width&&(c.width=this.props.width);c.overflowWrap=this.props.overflowWrap;c.textAlign=this.props.textAlign;c.color=this.props.customColorUseSparingly||d;this.props.whiteSpace&&(c.whiteSpace=this.props.whiteSpace);e={};this.props.id&&(e.id=this.props.id);this.props["data-testid"]&&(e["data-testid"]=this.props["data-testid"]);this.props.headingLevel&&(e.role="heading",e["aria-level"]=String(this.props.headingLevel));(this.props.className||this.props.margin)&&(e.className=b("joinClasses")(this.props.className,this.props.margin));var f;switch(this.props.display){case"inline":f="span";(this.props.width||this.props.margin)&&(c.display="inline-block");break;case"block":f="div";break;case"truncate":f="div";e.className=b("joinClasses")(e.className,"ellipsis");e["data-hover"]="tooltip";e["data-tooltip-display"]="overflow";this.props.tooltipPosition&&(e["data-tooltip-position"]=this.props.tooltipPosition);break;default:h(0,1606)}e.style=b("autoFlipStyleProps")(c);return b("React").createElement(f,e,this.props.children)};function j(){i.apply(this,arguments)}j.propTypes={color:c.oneOf(["primary","secondary","blueLink","placeholder","disabled","interactive","white","positive","negative"]),customColorUseSparingly:c.string,customSizeUseSparingly:c.string,"data-testid":c.string,display:c.oneOf(["block","inline","truncate"]).isRequired,margin:c.string,overflowWrap:c.oneOf(["break-word","normal"]).isRequired,shade:c.oneOf(["dark","light","link","medium","white"]).isRequired,size:c.oneOf(["display","header1","header2","header3","header4","body1","body1_DEPRECATED","body2","body2_DEPRECATED","body3","body3_DEPRECATED","meta1","heading","heading_DEPRECATED","headline","headline_DEPRECATED","regular","regular_DEPRECATED","regularUI","regularUI_DEPRECATED","large","large_DEPRECATED","medium","medium_DEPRECATED","small","subheading","xlarge","xlarge_DEPRECATED","xsmall","xsmall_DEPRECATED","xxlarge","xxlarge_DEPRECATED"]).isRequired,style:c.shape({margin:c.oneOf(a),marginBottom:c.oneOf(a),marginLeft:c.oneOf(a),marginRight:c.oneOf(a),marginTop:c.oneOf(a)}),textAlign:b("AlignmentEnum").propType.isRequired,tooltipPosition:b("PositionEnum").propType,palette:c.oneOf(["light","dark"]),weight:c.oneOf(["bold","normal"]),whiteSpace:b("WhiteSpaceEnum").propType,width:c.oneOfType([c.number,c.string])};j.defaultProps=d;e.exports=b("withSUITheme")(j)}),null);
__d("FDSText.react",["React","SUIText.react","SUITextUniform.fds","makeFDSStandardComponent","makeSUIFDSPrivateTheme"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("makeSUIFDSPrivateTheme")("FDSText",{SUIText:b("SUITextUniform.fds")});g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){var a=this.props;return b("React").createElement(b("SUIText.react"),{children:a.children,color:j(a.color),"data-testid":i(a["data-testid"]),display:a.display,id:i(a.id),margin:i(a.margin),overflowWrap:a.overflowWrap,palette:a.palette,size:a.size,textAlign:a.textAlign,theme:h,tooltipPosition:i(a.tooltipPosition),weight:i(a.weight),whiteSpace:i(a.whiteSpace),width:i(a.width)})};function a(){g.apply(this,arguments)}a.defaultProps={color:"primary",display:"inline",overflowWrap:"normal",size:"body2",textAlign:"left"};function i(a){return a===null?undefined:a}function j(a){return a==="highlight"?"interactive":a}e.exports=b("makeFDSStandardComponent")("FDSText",a)}),null);
__d("SUISpinner.react",["cx","fbt","LoadingMarker.react","React","SUIComponent","SUITheme","joinClasses","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=Math.PI;c=.75;var k=1.5;d={arcSpread:c,background:"light",size:"large"};f=babelHelpers.inherits(a,b("SUIComponent"));i=f&&f.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$SUISpinner3=function(a){this.$SUISpinner1=a}.bind(this),b}a.prototype.componentDidMount=function(){this.$SUISpinner2()};a.prototype.componentDidUpdate=function(){this.$SUISpinner2()};a.prototype.$SUISpinner2=function(){__p&&__p();var a=this.$SUISpinner1,c=a&&a.getContext("2d");if(!a||!c)return;var d=b("SUITheme").get(this).SUISpinner,e=d.sizes[this.props.size],f=e.border;e=e.diameter;var g=window.devicePixelRatio||1,h=this.props.background==="dark",i=h?d.darkActiveColor:d.activeColor;h=h?d.darkBackgroundColor:d.backgroundColor;d=e/2*g;e=f*g;f=(d+e)*2;a.height=a.width=f;a.style.width=a.style.height=f/g+"px";c.lineCap="round";c.lineWidth=e;a=f/2;c.beginPath();c.arc(a,a,d,0,2*j);c.strokeStyle=h;c.stroke();c.beginPath();c.arc(a,a,d,k*j,(k+this.props.arcSpread)%2*j);c.strokeStyle=i;c.stroke()};a.prototype.render=function(){var a=this.props.animationDuration,c=b("SUITheme").get(this).SUISpinner;c=c.sizes[this.props.size];var d=c.border;c=c.diameter;c=c+d*2;d={};a!==undefined&&(d.style={animationDuration:a+"ms"});return b("React").createElement(b("LoadingMarker.react"),null,b("React").createElement("span",{"aria-busy":!0,"aria-valuemax":360,"aria-valuemin":0,"aria-valuetext":h._("Loading..."),className:b("joinClasses")("_4cgy",this.props.className,this.props.margin),"data-testid":this.props["data-testid"],role:"progressbar",style:babelHelpers["extends"]({},this.props.style,{height:c,width:c})},b("React").createElement("canvas",babelHelpers["extends"]({className:"_1lid",ref:this.$SUISpinner3},d))))};a.propTypes={background:b("prop-types").oneOf(["dark","light"]).isRequired,className:b("prop-types").string,margin:b("prop-types").string,size:b("prop-types").oneOf(["large","small"]).isRequired,theme:b("prop-types").instanceOf(b("SUITheme"))};a.defaultProps=d;e.exports=a}),null);
__d("suiMargin",[],(function(a,b,c,d,e,f){"use strict";function a(a){throw new Error("suiMargin: Unexpected margin transformation.")}e.exports=a}),null);
__d("FDSSpinner.react",["cx","FDSText.react","React","SUISpinner.react","SUISpinnerUniform.fds","joinClasses","makeFDSStandardComponent","makeSUIFDSPrivateTheme","suiMargin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i={maxWidth:"100%"},j=1.25,k=b("makeSUIFDSPrivateTheme")("FDSSpinner",{SUISpinner:b("SUISpinnerUniform.fds")});h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.$1=function(){return this.props.center===undefined?Boolean(this.props.title):this.props.center};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.shade==="light"?"dark":"light",d=Boolean(a.title),e=this.$1();if(!d&&!e)return b("React").createElement(b("SUISpinner.react"),{animationDuration:750,arcSpread:j,background:c,"data-testid":a["data-testid"],margin:a.margin,size:a.size,style:a.style,theme:k});var f=null;if(d){d=c==="dark"?["white","primary"]:["primary","secondary"];var g=d[0];d=d[1];f=b("React").createElement("div",{style:i},b("React").createElement(b("FDSText.react"),{color:g,display:"truncate",margin:"_3-8y",palette:c,size:"header4",textAlign:"center",weight:"bold",whiteSpace:"nowrap"},a.title),a.subtitle!==null&&a.subtitle!==undefined&&b("React").createElement(b("FDSText.react"),{color:d,display:"truncate",margin:"_3-8w",palette:c,size:"body2",textAlign:"center",whiteSpace:"nowrap"},a.subtitle))}return b("React").createElement("div",{className:b("joinClasses")("_15v0"+(a.shade==="light"?" _316b":"")+(e?" _15v1":""),a.margin),"data-testid":a["data-testid"],style:a.style},b("React").createElement(b("SUISpinner.react"),{animationDuration:750,arcSpread:j,background:c,size:a.size,theme:k}),f)};function a(){h.apply(this,arguments)}a.defaultProps={shade:"dark",size:"large"};e.exports=b("makeFDSStandardComponent")("FDSSpinner",a)}),null);
__d("AbstractTextArea.react",["cx","AbstractTextField.react","React","TextAreaControl"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=b("React").Component;d=b("React").PropTypes;h=babelHelpers.inherits(a,c);h&&h.prototype;a.prototype.componentDidUpdate=function(){"use strict";this.$2&&this.$2.onupdate()};a.prototype.componentWillUnmount=function(){"use strict";this.$2=null};a.prototype.render=function(){"use strict";return b("React").createElement(b("AbstractTextField.react"),this.props,b("React").createElement("textarea",{className:"_58an",onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onKeyUp:this.props.onKeyUp,rows:this.props.rows,tabIndex:this.props.tabIndex,ref:function(a){this.$1=a,this.$3()}.bind(this)}))};a.prototype.$3=function(){"use strict";if(this.$1&&this.props.autoGrow&&!this.$2){var a=new(b("TextAreaControl"))(this.$1);a.setAutogrow(!0);a.onupdate();this.$2=a}};a.prototype.focusInput=function(){"use strict";this.$1&&this.$1.focus()};a.prototype.blurInput=function(){"use strict";this.$1&&this.$1.blur()};a.prototype.getTextFieldDOM=function(){"use strict";return this.$1};a.prototype.getValue=function(){"use strict";return this.$1?this.$1.value:""};function a(){"use strict";h.apply(this,arguments)}a.propTypes=babelHelpers["extends"]({},b("AbstractTextField.react").propTypes,{autoGrow:d.bool});e.exports=a}),null);
__d("XVideoCallAdminMessageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/admin_msg/",{})}),null);
__d("FBRTCAdminMessage",["FBRTCCallConstants","FBRTCConstants","FBRTCLogger","FBRTCUtils","XVideoCallAdminMessageController","emptyFunction","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();function a(a,b){"use strict";this.$1=a,this.$2=b,this.$3=Date.now(),this.$4=null,this.$5=null}a.prototype.onCallConnected=function(){"use strict";this.$4||(this.$4=b("performanceNow")())};a.prototype.onCallEnded=function(){"use strict";this.$5||(this.$5=b("performanceNow")())};a.prototype.submit=function(a,c,d){"use strict";this.$5||this.onCallEnded();var e=0,f=b("FBRTCCallConstants").FBRTCCallConnectionType.MISSED_CALL;this.$4&&this.$5&&(e=Math.ceil(this.$5-this.$4),f=b("FBRTCCallConstants").FBRTCCallConnectionType.CONNECTED_CALL);c=f===b("FBRTCCallConstants").FBRTCCallConnectionType.CONNECTED_CALL||c===b("FBRTCConstants").CallEndReason.IGNORE_CALL;this.$6({peer_id:this.$1,call_id:this.$2,start_time:this.$3,call_duration:e,message_type:f,call_category:a,call_acknowledged:c,conference_name:d})};a.prototype.$6=function(a){"use strict";var c=b("XVideoCallAdminMessageController").getURIBuilder().getURI();b("FBRTCUtils").sendServerRequest(c,b("emptyFunction"),this.$7.bind(this,a.peer_id,a.call_id),!1,undefined,a)};a.prototype.$7=function(a,c,d){"use strict";d?d="Fail to log admin message, error "+d.error:d="Server timed out on logging admin message";b("FBRTCLogger").getInstance().logError(a,c,d)};e.exports=a}),null);
__d("FBRTCIceCache",[],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";this.$1=new Map()}a.prototype.getCache=function(){"use strict";__p&&__p();var a={};for(var b=this.$1,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];a[f]={};for(var e=e,g=Array.isArray(e),h=0,e=g?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;var j=i[0];i=i[1];a[f][j]=i}}return a};a.prototype.reset=function(a,b){"use strict";var c=this.$1.get(a);c||(c=new Map(),this.$1.set(a,c));c.set(b,[])};a.prototype.cacheCandidate=function(a,b,c){"use strict";var d=this.$1.get(a);d||(d=new Map(),this.$1.set(a,d));a=d.get(b);a||(a=[],d.set(b,a));a.unshift(c)};a.prototype.drainCandidates=function(a,b,c){"use strict";a=this.$1.get(a);if(a){a=a.get(b)||[];while(a.length>0){b=a.pop();c(b)}}};e.exports=a}),null);
__d("RTWebClientFeatureGating",["CurrentUser","FBRTCConfig","FBRTCExperiment","FBRTCExperimentName","FBRTCSupport","URI","gkx","isBonfireURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={addScreenContentTypeInSDP:function(){return b("gkx")("678343")},doubleSelfViewSize:function(){return!g.isRTCWebHoldOut()},draggableSelfView:function(){return b("FBRTCExperiment").gen(b("FBRTCExperimentName").LARGER_SELF_VIEW).getBool("draggable_self_view",!1)},endCallSurveyDropdownOptions:function(){return!g.isRTCWebHoldOut()&&!b("FBRTCConfig").isVCEndpointCall()&&!b("CurrentUser").isWorkUser()},fixedHeightGridView:function(){return b("FBRTCExperiment").gen(b("FBRTCExperimentName").FIXED_HEIGHT_GRID_VIEW).getBool("fixed_height_grid_view",!1)},canUseMWVideoFilters:function(){return!b("CurrentUser").isWorkUser()&&!b("isBonfireURI")(b("URI").getRequestURI())&&b("FBRTCSupport").isVideoFilterEffectSupported()&&b("FBRTCExperiment").gen(b("FBRTCExperimentName").VIDEO_CHAT_FILTERS).getBool("use_filters_mw",!1)},isRTCWebHoldOut:function(){return b("gkx")("678345")},isMQTTEnabled:function(){return b("FBRTCExperiment").gen("rtc_web_client_mqtt").getBool("use_mqtt",!1)},isChatEnabled:function(){return b("FBRTCConfig").isVCEndpointCall()||g.isRTCWebHoldOut()?!1:b("FBRTCExperiment").gen(b("FBRTCExperimentName").SHOW_CHAT_WHILE_IN_CALL).getBool("show_chat",!0)},isGroupChatEnabled:function(){return b("FBRTCExperiment").gen(b("FBRTCExperimentName").SHOW_CHAT_WHILE_IN_CALL).getBool("show_chat_for_mw",!1)},canUseP2PVideoFilters:function(){return!b("CurrentUser").isWorkUser()&&b("FBRTCSupport").isVideoFilterEffectSupported()&&b("gkx")("678346")&&!this.stopVideoWhenMute()},isGuestLoginEnabled:function(){return b("gkx")("678347")},useNewIncomingCallDialog:function(){return b("FBRTCExperiment").getIncomingCallExperiments().getBool("use_new_incoming_call_dialog",!1)},answerCallWithThreeButtons:function(){return b("FBRTCExperiment").getIncomingCallExperiments().getBool("use_three_buttons",!1)},callUnification:function(){return b("FBRTCExperiment").gen(b("FBRTCExperimentName").CALL_UNIFICATION).getBool("in_call_background_updated",!1)},waitForMediaPermission:function(){return b("gkx")("678348")},shouldUseRealMultiwayAppID:function(){return b("gkx")("678349")},canUseMultiwaySandbox:function(){return b("gkx")("678350")},stopVideoWhenMute:function(){if(b("FBRTCConfig").isVCEndpointCall())return!1;var a=b("FBRTCExperiment").gen(b("FBRTCExperimentName").TURNOFF_CAMERA_WHEN_FACEMUTE);return a.getBool("camera_off",!1)},restartVideoWithTrackAPI:function(){var a=b("FBRTCExperiment").gen(b("FBRTCExperimentName").TURNOFF_CAMERA_WHEN_FACEMUTE);return a.getBool("track_api",!1)},shouldAlwaysShowRedial:function(){return b("FBRTCExperiment").gen(b("FBRTCExperimentName").P2P_END_CALL_SCREEN).getBool("persist_redial_in_footer",!1)},disableOpusStereo:function(){return b("gkx")("678351")},shouldApplySdpMidTranslation:function(){return b("gkx")("700608")},preserveFirefoxInactiveDataChannelBlock:function(){return b("gkx")("724606")},alwaysOpenChatTab:function(){return b("FBRTCExperiment").gen(b("FBRTCExperimentName").FB_PROFILE_RTC_BUTTONS).getBool("open_chat_tab",!1)},shouldAlwaysShowStarRating:function(){return b("FBRTCConfig").isVCEndpointCall()?!1:b("FBRTCExperiment").gen(b("FBRTCExperimentName").P2P_END_CALL_SCREEN).getBool("persist_star_rating",!1)},preferIsacForGroupCalls:function(){return b("FBRTCConfig").isVCEndpointCall()?!1:b("gkx")("717703")}};e.exports=g}),null);
__d("FBRTCSdpUtils",["FBLogger","RTWebClientFeatureGating","UserAgent"],(function(a,b,c,d,e,f){__p&&__p();var g="a=x-fb-feature:",h="\r\n",i="m=video 0";f=["audio","video"].map(function(a){return new RegExp("m="+a+"\\s+\\d+\\s+(\\w+\\/?)+(\\s+\\d+)+")});var j=f[0],k=f[1],l=["http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01","http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time","http://www.webrtc.org/experiments/rtp-hdrext/playout-delay","urn:3gpp:video-orientation","urn:ietf:params:rtp-hdrext:ssrc-audio-level","urn:ietf:params:rtp-hdrext:toffset"],m=function(a){return a.match(/^a=rtpmap:(\d+)\s/)[1]},n=function(a,b,c){var d=m(a[b]);o(a,c,[d]);a.splice(b,1)},o=function(a,b,c){var d=a[b].split("RTP/SAVPF"),e=d[1].split(/\s+/);for(var f=0;f<c.length;f++){var g=e.indexOf(c[f]);g>=0&&e.splice(g,1)}d[1]=e.join(" ");a[b]=d.join("RTP/SAVPF")},p=function(a,b,c){__p&&__p();var d=m(a[b]);n(a,b,c);var e=new RegExp("^a=(rtcp-fb|fmtp):"+d+" ");a=a.filter(function(a,b){return!(e.test(a)&&b>=c)});var f=new RegExp("^a=fmtp:(\\d+)\\s+apt="+d+"($|;)");b=a.reduce(function(a,b,c){c=b.match(f);return c?[].concat(a,[c[1]]):a},[]);d=b.join("|");o(a,c,b);var g=new RegExp("^a=rtpmap:("+d+")\\s+rtx/|^a=fmtp:("+d+")\\s+apt=");return a.filter(function(a){return!g.test(a)})};f={RX_SDP_MEDIA_AUDIO:j,RX_SDP_MEDIA_VIDEO:k,replaceRTPSAVPFProfile:function(a){var b="UDP/TLS/RTP/SAVPF",c="RTP/SAVPF";while(a.indexOf(b)>=0)a=a.replace(b,c);return a},addIceOptionToSdp:function(a,b){"use strict";__p&&__p();var c="a=ice-options:",d=a.indexOf(c);if(d>=0)return a.split(h).map(function(a){return a.startsWith(c)?a+" "+b:a}).join(h);d=c+b;var e=a.split(h),f=!1,g=-1;for(var i=0;i<e.length;i++){var j=e[i].slice(0,2);if(j=="s="){f=!0;continue}if(f&&j=="a="){g=i;break}}if(g>=0){e.splice(g,0,d);return e.join(h)}return[a,d,h].join("")},preferIsac:function(a){__p&&__p();a=a.split(h);var b=-1,c=-1,d=-1;for(var e=0;e<a.length;e++){var f=a[e];f.match(j)&&(b=e);d===-1&&b>-1&&f.match(/^a=rtpmap:/)&&(d=e);f.match(/^a=rtpmap:\d+\s+ISAC\/16000/)&&(c=e)}if(b===-1||c===-1||d===-1||a[b].indexOf("RTP/SAVPF")===-1)return a.join(h);f=a[c];n(a,c,b);a.splice(d,0,f);a[b]=a[b].replace("RTP/SAVPF","RTP/SAVPF "+m(f));return a.join(h)},preferCodec:function(a,b,c){__p&&__p();a=a.split(h);var d=c?k:j,e=a.findIndex(function(a){return d.test(a)});if(e!==-1&&a[e].indexOf("RTP/SAVPF")!==-1){var f=new RegExp("^a=rtpmap:\\d+\\s+"+b);c=a.findIndex(function(a){return f.test(a)});var g=/^a=rtpmap:/;b=a.findIndex(function(a,b){return b>e&&g.test(a)});if(c!==-1&&b!==-1){var i=a[c];n(a,c,e);a.splice(b,0,i);a[e]=a[e].replace("RTP/SAVPF","RTP/SAVPF "+m(i))}}return a.join(h)},disableVideo:function(a){var c=/m=video\s+\S+/;a=a.replace(c,i);b("UserAgent").isBrowser("Firefox <= 37")&&(a=this._makeDisabledVideoReceiveOnly(a));return a},_makeDisabledVideoReceiveOnly:function(a){if(a.indexOf(i)>-1){var b=a.split(i);b[1]=b[1].replace(/send(recv|only)/,"recvonly");a=b.join(i)}return a},fixMobileIceSdp:function(a){__p&&__p();a=a.replace(/^a=/,"");a=a.split(/\s+username\s+.+password.+/)[0];var b=a.match(/\s+relay\s+|\s+srflx\s+/),c=a.match(/raddr.+rport.+/);if(b&&!c){b=b[0];c=a.split(b);var d=c[1].match(/^(\d+\.\d+\.\d+\.\d+)\s+(\d+)\s+/),e,f;d?(e=d[1],f=d[2],c[1]=c[1].replace(d[0],"")):(d=c[0].split(/\s+/),e=d[4],f=d[5]);a=""+c[0]+b+"raddr "+e+" rport "+f+" "+c[1]}return a},addAudioNack:function(a){var b=[];a=a.split(h).map(function(a){var c="";b.length>0&&(/^a=rtpmap:(\d+)/.test(a)||/^a=ssrc/.test(a)||/^m=/.test(a))&&(c+=this._getrtcpFeedbackLinesFromAudioFMTs(b)+h,b=[]);/^m=audio/.test(a)&&(b=a.match(/^m=audio\s+[\d\/]+\s+[\w\/]+([\s+\d+]+)/)[1].trim().split(" "));return c+a}.bind(this)).join(h);b.length>0&&(a+=h+this._getrtcpFeedbackLinesFromAudioFMTs(b));return a},addSetup:function(a){if(a.indexOf("a=setup:")>=0)return a;a=a.split(h);var b=a.findIndex(function(a){return a.startsWith("s=")}),c=a.findIndex(function(a,c){return c>b&&a.startsWith("a=")});a.splice(c,0,"a=setup:actpass");return a.join(h)},_replaceFmtp:function(a,b,c,d){a=a==b?[]:a.substr(b.length).split(";");var e=a.findIndex(function(a){return a.startsWith(c+"=")});d=c+"="+d;e<0?a.push(d):a[e]=d;return""+b+a.join(";")},_addFmtpToMediaSection:function(a,b,c,d){__p&&__p();var e=new RegExp("^a=rtpmap:(\\d+)\\s"+b);b=a.findIndex(function(a){return a.match(e)});if(b<0)return a;var f=a[b].match(e);f=f[1];var g="a=fmtp:"+f+" ";f=a.findIndex(function(a){return a.startsWith(g)});f===-1&&(f=b+1,a.splice(f,0,g));a[f]=this._replaceFmtp(a[f],g,c,d);return a},addFmtp:function(a,b,c,d){__p&&__p();a=a.split(h);var e=-1;for(var f=0;f<=a.length;f++)if(f===a.length||a[f].startsWith("m=")){if(e!==-1){var g=a.splice(e,f-e);g=this._addFmtpToMediaSection(g,b,c,d);a.splice.apply(a,[e,0].concat(g));f=e+1+g.length}e=f}return a.join(h)},_getrtcpFeedbackLinesFromAudioFMTs:function(a){return a.map(function(a){return"a=rtcp-fb:"+a+" nack"}).join(h)},_removeCodec:function(a,b){__p&&__p();var c=a;a=function(){var a=c.split(h),d=new RegExp("^a=rtpmap:\\d+\\s+"+b+"\\/"),e=a.findIndex(function(a){return d.test(a)}),f=a.findIndex(function(a){return/^m=video/.test(a)});if(e==-1||f==-1)return"break";c=p(a,e,f).join(h)};do{var d=a();if(d==="break")break}while(!0);return c},removeRED:function(a){return this._removeCodec(a,"red")},removeH264:function(a){return this._removeCodec(a,"H264")},removeVP9:function(a){return this._removeCodec(a,"VP9")},removeUnknownRtpHeaderExtensions:function(a){a=a.split(h);a=a.filter(function(a){return!a.match(/^a=extmap:/)||l.some(function(b){return a.includes(b)})});return a.join(h)},isVideoSupported:function(a){return!!a&&a.indexOf("m=video")!==-1&&a.indexOf(i)===-1},setDtlsRole:function(a,b){if(!a.match(/setup:(active|passive|actpass)/))return a.replace(/(a=fingerprint:.+)/g,"$1"+h+"a=setup:"+b);else return a.replace(/setup:actpass/g,"setup:"+b)},setVideoBitrateConstraint:function(a){var c=b("UserAgent").isBrowser("Firefox"),d=c?"TIAS":"AS";c=c?72e4:720;var e=new RegExp("^b="+d+":","m");if(a.match(e))return a;a=a.replace(/^a=mid:video\r\n/m,"a=mid:video"+h+"b="+d+":"+c+h);return a},removeSdparta:function(a){__p&&__p();if(b("RTWebClientFeatureGating").shouldApplySdpMidTranslation())return a;a=a.split(h);var c="audio",d=!1,e=-1;for(var f=0;f<a.length;f++){var g=a[f];g.indexOf("m=audio")===0&&(c="audio");g.indexOf("m=video")===0&&(d=!0,c="video");g.indexOf("a=mid:sdparta_")===0&&(a[f]="a=mid:"+c);g.indexOf("a=group:BUNDLE sdparta_")===0&&(e=f);g.indexOf("a=group:BUNDLE audio sdparta_")===0&&(e=f);g.indexOf("a=group:BUNDLE audio video sdparta_")===0&&b("FBLogger")("rtc_www").mustfix("content_name rewriting will not work anymore, fix sdparta_# in Firefox.")}e>-1&&(d?a[e]="a=group:BUNDLE audio video":a[e]="a=group:BUNDLE audio");return a.join(h)},constructMidMap:function(a){if(!b("RTWebClientFeatureGating").shouldApplySdpMidTranslation())return{answerSdpMap:null,offerSdpMap:null};a=a.split(h);var c={},d={},e=null;a.forEach(function(b){b.startsWith("m=audio")?e="audio":b.startsWith("m=video")?e="video":b.startsWith("m=")?e=null:b.startsWith("a=mid:")&&e&&(a=b.split("a=mid:")[1],a!==e&&(c[a]=e,d[e]||(d[e]=a)))});return{offerSdpMap:Object.keys(c).length?c:null,answerSdpMap:Object.keys(d).length?d:null}},transformSdpMids:function(a,c){__p&&__p();if(c==null||!b("RTWebClientFeatureGating").shouldApplySdpMidTranslation())return a;var d=c,e=a.split(h);c=-1;e.forEach(function(b,f){if(b.startsWith("a=group:BUNDLE"))c=f;else if(b.startsWith("a=mid:")){a=b.split("a=mid:")[1];b=d[a]||a;e[f]="a=mid:"+b}});if(c>-1){var f=e[c].split("a=group:BUNDLE ")[1].split(" ");f=f.map(function(a){return d[a]||a});e[c]="a=group:BUNDLE "+f.join(" ")}return e.join(h)},useDTLSOverCrypto:function(a){if(!(b("UserAgent").isBrowser("Chrome >= 57")||b("UserAgent").isBrowser("Opera >= 44")))return a;return!/^a=fingerprint:/m.test(a)?a:a.split(h).filter(function(a){return a.indexOf("a=crypto:")!==0}).join(h)},validateOfferSdp:function(a,b){__p&&__p();if(a.split(":")[0]==="LIVE"){a=/^m=/;var c=/^m=audio/,d=/^m=video/,e=/^a=ssrc:/;b=b.split(h);var f=[];for(var g=b.length-1;g>=0;g--)a.test(b[g])&&f.push(b.splice(g));var i=!1,j=!1;f.forEach(function(a){c.test(a[0])&&!i?i=a.some(function(a){return e.test(a)}):d.test(a[0])&&!j&&(j=a.some(function(a){return e.test(a)}))});return i&&j}return!0},_removeCodecID:function(a,b){var c=a.findIndex(function(a){a=a.match(/^a=rtpmap:(\S+)\s/);return a&&a[1]===b?!0:!1}),d=a.findIndex(function(a){return/^m=video/.test(a)});return c===-1||d===-1?a:p(a,c,d)},_getAllCodecIds:function(a,b){__p&&__p();var c=a.findIndex(function(a){return/^m=video/.test(a)});if(c===-1)return[];var d=new RegExp("^a=rtpmap:\\S+\\s+"+b+"\\/"),e=[];a.forEach(function(b,f){if(d.test(b)){b=m(a[f]);a[c].indexOf(b)>0&&e.push(b)}});return e},_getCodecIDMatchingH264Profile:function(a,b){var c=b.levelAsymmetryAllowed?"1":"0",d=b.packetizationMode?"1":"0";c=new RegExp("^a=fmtp:(\\S+)\\s+level-asymmetry-allowed="+c+";packetization-mode="+d+";profile-level-id="+b.profileLevelId);for(var d=0;d<a.length;d++){b=a[d].match(c);if(b)return b[1]}return null},pickSpecificH264ProfileIfExists:function(a,b){var c=a.split(h),d=this._getCodecIDMatchingH264Profile(c,b);if(!d)return a;b=this._getAllCodecIds(c,"H264");return b.reduce(function(a,b){return b!==d?this._removeCodecID(a,b):a}.bind(this),c).join(h)},clearFirefoxInactiveDataChannelBlock:function(a){__p&&__p();if(!b("UserAgent").isBrowser("Firefox")||b("RTWebClientFeatureGating").preserveFirefoxInactiveDataChannelBlock())return a;var c=a.split(h),d=c.findIndex(function(a){return a.startsWith("m=application")});if(d===-1)return a;var e=c.slice(d),f=e.findIndex(function(a,b){return b>0&&a.startsWith("m=")});f!==-1&&(e=e.slice(0,f));if(e[0]!=null&&e[0].endsWith("0")&&e.some(function(a){return a.startsWith("a=inactive")})){f=e.findIndex(function(a){return a.startsWith("c=")});return[].concat(c.slice(0,d+1+(f!==-1?f:0)),c.slice(d+e.length)).join(h)}return a},addFBFeatures:a,getFBFeatures:c,addSSRCContentType:d};function a(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if(c.length<1)return a;var e=q(a),f=e[0],i=e[1],j=f.split(h),k=r(j),l=j.filter(function(a){return!a.startsWith(g)}),m=1+l.map(function(a){return a?a.substr(0,2):""}).lastIndexOf("a=")||l.length;return[].concat(l.slice(0),s([].concat(k,c)).map(function(a){return""+g+a}),l.slice(m),[i?[i.trim(),""].join(h):""]).join(h)}function c(a){a=q(a);a=a[0];return r(a.split(h))}function q(a){if(!a)return["",""];var b=a.trim().split(h),c=0;while(c<b.length){if(b[c].startsWith("m="))break;c++}return c===b.length?[a.trim(),""]:[b.slice(0,c).join(h).trim(),b.slice(c).join(h).trim()]}function r(a){return s(a.filter(function(a){return a.startsWith(g)}).map(function(a){return a.substr(g.length)}))}function s(a){__p&&__p();var b=Object.create(null);for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e&&(b[e]=!0)}return Object.keys(b).sort()}function d(a,b){__p&&__p();var c=a.split(h);b.forEach(function(a,b){__p&&__p();var d=new RegExp("^a=ssrc:\\d+ label:"+b);b=c.findIndex(function(a){return d.test(a)});if(b!==-1){var e=c[b].trim().split(" ")[0];if(/^a=ssrc:\d+$/.test(e)){e=e+" x-fb-content:"+a;c.splice(b+1,0,e)}}});return c.join(h)}e.exports=f}),null);
__d("FBRTCMessage",["FBRTCConstants","FBRTCExperiment","FBRTCExperimentName","FBRTCSdpUtils","FBRTCSupport"],(function(a,b,c,d,e,f){__p&&__p();var g="mobile";function a(a){"use strict";__p&&__p();if(!this.$1(a))throw new Error("invalid webrtc message");this.originalMessageData=a;this.peerID=a.from;this.callID=parseInt(a.call_id,10);this.msg=JSON.parse(a.payload);this.msg.json_payload&&(this.escalationName=this.msg.sessionName,this.msg=this.msg.json_payload);this.msgType=this.msg.type;this.msgID=this.msg.msg_id;this.ackID=this.msg.ack_id;this.source=a.source;this.peerSupportsVideoInterop=!!this.msg.supports_video_interop;this.$2();this.$3();this.$4();this.$5()}a.prototype.$1=function(a){"use strict";return a.from&&a.call_id&&a.payload};a.prototype.$2=function(){"use strict";if(this.peerSupportsVideoInterop)return;this.isFromMobile()&&this.disableVideo()};a.prototype.disableVideo=function(){"use strict";this.msg.sdp&&(this.msg.sdp=b("FBRTCSdpUtils").disableVideo(this.msg.sdp)),(this.msgType===b("FBRTCConstants").PayloadType.SET_VIDEO||this.msgType===b("FBRTCConstants").PayloadType.OFFER||this.msgType===b("FBRTCConstants").PayloadType.ICERESTART_OFFER||this.msgType===b("FBRTCConstants").PayloadType.ANSWER||this.msgType===b("FBRTCConstants").PayloadType.ICERESTART_ANSWER)&&(this.msg.videoon=!1)};a.prototype.$3=function(){"use strict";this.isFromMobile()&&this.msg.sdp&&this.msgType!==b("FBRTCConstants").PayloadType.ICE_CANDIDATE&&(this.msg.sdp=b("FBRTCSdpUtils").removeRED(this.msg.sdp))};a.prototype.$4=function(){"use strict";if(this.isFromMobile()&&b("FBRTCSupport").isWebrtcSupported()&&this.msg.sdp&&this.msgType!==b("FBRTCConstants").PayloadType.ICE_CANDIDATE){var a=b("FBRTCExperiment").gen(b("FBRTCExperimentName").USE_H264);a.getBool("allow_h264",!1)||(this.msg.sdp=b("FBRTCSdpUtils").removeH264(this.msg.sdp))}};a.prototype.$5=function(){"use strict";if(this.isFromMobile()&&b("FBRTCSupport").isWebrtcSupported()&&this.msg.sdp&&this.msgType!==b("FBRTCConstants").PayloadType.ICE_CANDIDATE){var a=b("FBRTCExperiment").gen(b("FBRTCExperimentName").USE_VP9);a.getBool("allow_vp9",!1)||(this.msg.sdp=b("FBRTCSdpUtils").removeVP9(this.msg.sdp))}};a.prototype.isOffer=function(){"use strict";return this.msgType===b("FBRTCConstants").PayloadType.OFFER};a.prototype.isFromMobile=function(){"use strict";return this.source===g};a.prototype.isRemoteVideoSupported=function(){"use strict";return!this.msg.sdp||this.msgType===b("FBRTCConstants").PayloadType.ICE_CANDIDATE?!0:b("FBRTCSdpUtils").isVideoSupported(this.msg.sdp)};a.prototype.isRetry=function(){"use strict";return!!this.msg.flag};a.prototype.isForCall=function(a,c){"use strict";return this.escalationName&&(this.msgType===b("FBRTCConstants").PayloadType.HANGUP||this.msgType===b("FBRTCConstants").PayloadType.SWITCH_TO_MULTIWAY)?c===this.escalationName:!a||a===this.callID||this.msgType===b("FBRTCConstants").PayloadType.OFFER||this.msgType===b("FBRTCConstants").PayloadType.ICERESTART_OFFER||this.msgType===b("FBRTCConstants").PayloadType.PCRESTART_OFFER||this.msgType===b("FBRTCConstants").PayloadType.ICE_CANDIDATE};a.prototype.getSignalingExperiments=function(){"use strict";return this.isFromMobile()&&!this.msg.experiments?["sdp_update"]:this.msg.experiments};e.exports=a}),null);
__d("FBRTCMessageDedup",[],(function(a,b,c,d,e,f){var g={};a={check:function(a,b,c){g[a]||(g[a]={});g[a][b]||(g[a][b]={});if(g[a][b][c])return!1;g[a][b][c]=!0;return!0}};e.exports=a}),null);
__d("SamplingPolicyBase",[],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";throw new Error("Tried to instantiate SamplingPolicyBase")}a.prototype.getName=function(){"use strict";return this.name};a.prototype.isSampled=function(){"use strict";typeof this.sampled==="undefined"&&(this.sampled=this.decideIfSampled());return this.sampled};e.exports=a}),null);
__d("FbtraceForcedByServerPolicy",["FbtraceForcedByServer","SamplingPolicyBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function h(){this.name="FbtraceForcedByServerPolicy"}h.get=function(){typeof g==="undefined"&&(g=new h());return g};function a(){return b("FbtraceForcedByServer").forced}Object.assign(h.prototype,b("SamplingPolicyBase").prototype,{decideIfSampled:a});e.exports=h}),null);
__d("guardFunction",[],(function(a,b,c,d,e,f){function a(a,b,c){return function(){a.apply(c||this,arguments)&&b.apply(c||this,arguments)}}e.exports=a}),null);
__d("Fbtrace",["Arbiter","ArtilleryTraceIDUtils","BanzaiScribe","FbtraceForcedByServer","FbtraceForcedByServerPolicy","SiteData","guardFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(){Object.assign(this,g)}Object.assign(g,{isOn:function(){return!1},replySend:function(a,b){},requestSend:function(a,b,c){l(a,b);return{metadata:function(){return undefined},replyReceive:function(a){}}}});var h=new g();function i(a,c,d){__p&&__p();if(!a)throw{name:"ArgumentError",message:"no valid service name specified"};if(!c)throw{name:"ArgumentError",message:"no valid version specified"};var e=b("BanzaiScribe"),f=0,g=b("ArtilleryTraceIDUtils").newTraceId(),h=b("ArtilleryTraceIDUtils").newObjectId(),j=b("ArtilleryTraceIDUtils").traceIdToBucket(g),k={service:a,version:c},m=function a(b){if(typeof b==="undefined")return"undefined";typeof b!=="string"&&(b=a(JSON.stringify(b)));return b},n=function(a){var b="";for(var c in a)b.length>0&&(b+="\x02"),b+=m(c)+"\x03"+m(a[c]);return b},o=function(c,b,event,a,d){f++;return[d,f,g,c,b,m(event),n(a)].join("\x01")},p=function(c,b,event,a,d){!d&&typeof d==="undefined"&&(d=Date.now()*1e3);c=o(c,b,event,a,d);e.log("fbtrace",c,j)},q=function(){return h};p(b("ArtilleryTraceIDUtils").getDummyId(),h,"#rqrecv",Object.assign(d||{},k));Object.assign(this,i,{replySend:function(c,a){a=babelHelpers["extends"]({},a,k,{success:c?"true":"false"}),p(b("ArtilleryTraceIDUtils").getDummyId(),h,"#rpsend",a)},requestSend:function(d,e,a){l(d,e);var f=q(),c=b("ArtilleryTraceIDUtils").newObjectId();a=babelHelpers["extends"]({},a,k,{op:d,"remote:service":e});p(f,c,"#rqsend",a);return{metadata:function(){return g+c},replyReceive:function(a){p(f,c,"#rprecv",Object.assign(a||{},k))},parentNode:this}}})}Object.assign(i,{isOn:function(){return!0}});function j(){return h}function k(a,c,d){d=d||{};d.init=!0;var e=b("FbtraceForcedByServerPolicy").get();if(e.isSampled())return new i(a,c,d);else return new g()}function l(a,b){if(!a)throw{name:"ArgumentError",message:"no valid operation specified"};if(!b)throw{name:"ArgumentError",message:"no valid remote:service specified"}}function a(a,b){var c=h;h=a;try{a=b()}finally{h=c}return a}c=function(a,c){__p&&__p();a=j();c=c.request;var d=!1;!a.isOn()&&b("FbtraceForcedByServer").forced&&/\/upload\/(?:composer|photos)\/|\/ajax\/composerx\/attachment\/media\//.test(c.uri.toString())&&(a=k("photo_upload_kludge",String(b("SiteData").client_revision||"dev"),{policy:"PhotoUpload"}),d=!0);if(a.isOn()){d=d?{policy:"PhotoUpload"}:{};c.userActionId&&(d.user_action_id=c.userActionId);a=a.requestSend(c.uri.toString(),"www",d);c.fbtraceRemoteNode=a;c.transport.setRequestHeader("X-Fbtrace-Meta",a.metadata())}};d=function(a,b){b.request.fbtraceRemoteNode.replyReceive({is_last:b.response.is_last,success:!0}),setTimeout(function(){b.request.fbtraceRemoteNode.parentNode.replySend(!0,{})},0)};f=function(a,b){b.request.fbtraceRemoteNode.replyReceive({is_last:b.response.is_last,success:!1,error_code:b.response.error,error_summary:b.response.errorSummary,error_description:b.response.errorDescription}),setTimeout(function(){b.request.fbtraceRemoteNode.parentNode.replySend(!1,{})},0)};var m=function(a,b){return b.request.fbtraceRemoteNode};b("Arbiter").subscribe("AsyncRequest/will_send",c);b("Arbiter").subscribe("AsyncRequest/response",b("guardFunction")(m,d));b("Arbiter").subscribe("AsyncRequest/error",b("guardFunction")(m,f));e.exports={defaultNode:j,requestReceive:k,withDefaultNode:a}}),null);
__d("RTCAppData",["FacebookAppIDs","RTWebClientFeatureGating","URI","WorkplaceChatHelper","isBonfireURI","isFacebookURI","isMessengerDotComURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getAppID:function(){return b("WorkplaceChatHelper").isDesktopChatApp()?this._getWorkplaceChatDesktopAppID():b("FacebookAppIDs").WWW},getChannelManagerAppName:function(){switch(g.getMWAppID()){case b("FacebookAppIDs").MESSENGERDOTCOM.toString():return"messenger_dot_com";case b("FacebookAppIDs").WWW.toString():return"www";case b("FacebookAppIDs").BONFIRE_FOR_WWW.toString():return"bonfire_for_www";case b("FacebookAppIDs").WORKPLACE_DESKTOP.toString():return"workplace";default:return"desktop"}},_getWorkplaceChatDesktopAppID:function(){return b("WorkplaceChatHelper").getAppID()||b("FacebookAppIDs").WORKPLACE_DESKTOP},getMWAppID:function(){__p&&__p();if(!b("RTWebClientFeatureGating").shouldUseRealMultiwayAppID())return b("FacebookAppIDs").CHATPROXY_WEB.toString();var a=new(b("URI"))(window.location.href),c=new(b("URI"))(window.location.href).domain;if(!c)return b("FacebookAppIDs").CHATPROXY_WEB.toString();if(b("WorkplaceChatHelper").isDesktopChatApp())return this._getWorkplaceChatDesktopAppID().toString();else if(b("isFacebookURI")(a)&&(c.startsWith("www")||c.startsWith("m")))return b("FacebookAppIDs").WWW.toString();else if(b("isBonfireURI")(a))return b("FacebookAppIDs").BONFIRE_FOR_WWW.toString();else if(b("isMessengerDotComURI")(a))return b("FacebookAppIDs").MESSENGERDOTCOM.toString();else return b("FacebookAppIDs").CHATPROXY_WEB.toString()}};e.exports=g}),null);
__d("RTCAudioTrackNoiseDetector",["invariant","Promise","MediaStream"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="audio track with absolute silence",i="audio track data timeout",j='wrong track type, expected "audio"',k=100;a={ABSOLUTE_SILENCE_ERROR:h,DATA_TIMEOUT_ERROR:i,WRONG_TRACK_TYPE_ERROR:j,detect:function(a,c){__p&&__p();if("kind"in a&&a.kind!=="audio")return b("Promise").reject(new Error(j));var d=new(b("MediaStream"))();d.addTrack(a);var e=new AudioContext(),f=e.createMediaStreamSource(d),l=e.createScriptProcessor(0,1,1),m=k,n=function(){__p&&__p();l!=null||g(0,2865);l.onaudioprocess=null;l.disconnect();l=null;f!=null||g(0,2866);f.disconnect();f=null;d!=null||g(0,2867);d.removeTrack(a);d=null;e!=null||g(0,2868);return b("Promise").resolve(e.close())["catch"](function(){return b("Promise").resolve()}).then(function(){e=null})};return b("Promise").race([new(b("Promise"))(function(a,b){__p&&__p();l!=null||g(0,2865),l.onaudioprocess=function(c){__p&&__p();c=c.inputBuffer;for(var c=c.getChannelData(0),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;if(f!==0){a();return}}m>0?m--:b(new Error(h))},f!=null||g(0,2866),f.connect(l),e!=null||g(0,2868),l.connect(e.destination)}),new(b("Promise"))(function(a){return window.setTimeout(a,c)}).then(function(){throw new Error(i)})]).then(function(){return n()})["catch"](function(a){return n().then(function(){throw a})})}};e.exports=a}),null);
__d("RTCEndCallReason",["fbt","FBRTCConstants","FBRTCDismissReason","FBRTCHangupReason","FBRTCRtcResponseStatusCode"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").CallEndReason,i=b("FBRTCConstants").CollabCallEndSubreason;function j(a){this.$3="local",typeof a==="string"||a instanceof String?this.$1=b("FBRTCConstants").endCallReasonFromString(a):this.$1=a}j.prototype.setSubreason=function(a){this.$2=a;return this};j.prototype.getSubreason=function(){return this.$2};j.prototype.setRemoteEnded=function(a){this.$3=a?"remote":"local";return this};j.prototype.getRemoteEnded=function(){return this.$3==="remote"};j.prototype.toStrName=function(a){a===void 0&&(a=!0);return a?this.$4()+"_"+this.$3:this.$4()};j.prototype.$4=function(){return b("FBRTCConstants").callEndReasonString(this.$1)};j.prototype.getReasonID=function(){return this.$1};j.prototype.toString=function(a){var b;a===void 0&&(a=!1);b=((b=this.$5(a))!=null?b:"").toString();return a?b+" "+this.$6():b};j.prototype.$5=function(a){__p&&__p();switch(this.$1){case h.NO_ANSWER_TIMEOUT:case h.IGNORE_CALL:return g._("No Answer");case h.OTHER_NOT_CAPABLE:if(this.$2===i.MCU_INVALID_STREAM_CONFIGURATION)return g._("Too many clients connected to the room");case h.INCOMING_TIMEOUT:case h.NO_PERMISSION:case h.OTHER_CARRIER_BLOCKED:return g._("Not Reachable");case h.SIGNALING_MESSAGE_FAILED:case h.WEBRTC_ERROR:case h.NO_UI_ERROR:case h.CALLER_NOT_VISIBLE:case h.CLIENT_ERROR:return g._("Call Failed");case h.UNSUPPORTED_VERSION:return g._("Can't Connect Call");case h.IN_ANOTHER_CALL:return g._("In Another Call");case h.CARRIER_BLOCKED:return g._("Switch to Wi-Fi to complete your call");case h.CLIENT_INTERRUPTED:return g._("Call Interrupted");case h.HANGUP_CALL:case h.ACCEPT_AFTER_HANGUP:return a?"":g._("Call Ended");case h.CONNECTION_DROPPED:return g._("Connection Lost");case h.OTHER_INSTANCE_HANDLED:return null;case h.CLIENT_ENCRYPTION_ERROR:return g._("Client Encryption Error");case h.INACTIVE_TIMEOUT:return g._("Call is Inactive");default:return null}};j.prototype.$6=function(){__p&&__p();var a;if(this.$1!==h.OTHER_NOT_CAPABLE&&this.$1!==h.SIGNALING_MESSAGE_FAILED&&this.$1!==h.HANGUP_CALL&&this.$1!==h.ACCEPT_AFTER_HANGUP)return"";switch(this.$2){case i.REMOTE_PEER_HANGUP:return"Call ended";case i.REMOTE_PEER_REJECT:return"Call declined";case i.CLOSED_BY_MCU:return"Call expired";case i.CLOSED_AS_STALE:return"Server failed, call is stale";case i.CALL_INITIALIZATION_FAILED:return"Call initialization to room failed";case i.SIP_CONNECTION_INITIALIZATION_FAILED:return"No Answer";case i.LOST_MCU_CONNECTION:return"MCU Media connection failed";case i.LOST_MCU_THRIFT_CONNECTION:return"MCU infrastructure dropped connection";case i.LOST_SIP_ADAPTER_CONNECTION:return"SIP infrastructure dropped connection";case i.MCU_NO_AUDIO_STREAM:return"Invalid audio stream";case i.MCU_INVALID_STREAM_CONFIGURATION:return"Invalid stream configuration";case i.INVALID_MEETING_ID:return"Invalid meeting ID";case i.UNKNOWN:default:a=(a=this.$2)!=null?a:"Unknown";return this.$2!=null&&this.$2!==""?"Unexpected call failure: "+a:"Call ended"}};j.fromHangupReason=function(a){switch(a){case b("FBRTCHangupReason").IGNORE_CALL:return new j(h.IGNORE_CALL);case b("FBRTCHangupReason").NO_ANSWER_TIMEOUT:return new j(h.NO_ANSWER_TIMEOUT);case b("FBRTCHangupReason").HANGUP_CALL:return new j(h.HANGUP_CALL);case b("FBRTCHangupReason").CLIENT_ERROR:return new j(h.CLIENT_ERROR);case b("FBRTCHangupReason").IN_ANOTHER_CALL:return new j(h.IN_ANOTHER_CALL);case b("FBRTCHangupReason").CLIENT_INTERRUPTED:return new j(h.CLIENT_INTERRUPTED);default:return new j(h.HANGUP_CALL)}};j.fromDismissRequest=function(a){__p&&__p();if(!a)return new j(h.HANGUP_CALL);switch(a.reason){case b("FBRTCDismissReason").ANSWERED_ON_ANOTHER_DEVICE:case b("FBRTCDismissReason").REJECTED_ON_ANOTHER_DEVICE:return new j(h.OTHER_INSTANCE_HANDLED);case b("FBRTCDismissReason").CALL_ENDED:return new j(h.HANGUP_CALL);case b("FBRTCDismissReason").IN_ANOTHER_CALL:return new j(h.IN_ANOTHER_CALL);case b("FBRTCDismissReason").CONNECTION_DROPPED:return new j(h.CONNECTION_DROPPED);case b("FBRTCDismissReason").REMOVED_BY_PARTICIPANT:return new j(h.HANGUP_CALL);case b("FBRTCDismissReason").REJECTED_BY_CALLEE:return new j(h.IGNORE_CALL);case b("FBRTCDismissReason").INTERNAL_ERROR:return new j(h.SIGNALING_MESSAGE_FAILED);default:return new j(h.HANGUP_CALL)}};j.fromResponseStatusCode=function(a){switch(a){case b("FBRTCRtcResponseStatusCode").PRECONDITION_FAILURE:case b("FBRTCRtcResponseStatusCode").METHOD_NOT_ALLOWED:case b("FBRTCRtcResponseStatusCode").UNAUTHORIZED:return new j(h.NO_PERMISSION);case b("FBRTCRtcResponseStatusCode").SERVICE_UNAVAILABLE:return new j(h.SIGNALING_MESSAGE_FAILED);case b("FBRTCRtcResponseStatusCode").SERVER_INTERNAL_ERROR:case b("FBRTCRtcResponseStatusCode").BAD_REQUEST:case b("FBRTCRtcResponseStatusCode").BUSY_HERE:case b("FBRTCRtcResponseStatusCode").CONDITIONAL_REQUEST_FAILED:case b("FBRTCRtcResponseStatusCode").NOT_FOUND:return new j(h.CLIENT_ERROR);default:return new j(h.HANGUP_CALL)}};e.exports=j}),null);
__d("RTCMediaDevices",["invariant","Promise","RTCOnDeviceChangePoller"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=navigator.mediaDevices&&typeof navigator.mediaDevices.enumerateDevices==="function",i=window.MediaStreamTrack&&window.MediaStreamTrack.getSources==="function",j=1e3,k;a={addEventListener:function(a,c){if(a==="devicechange"&&b("RTCOnDeviceChangePoller").isNeeded()){k||(k=new(b("RTCOnDeviceChangePoller"))(j));k.add(c);return}var d=navigator;d=d.mediaDevices;d&&"addEventListener"in d&&d.addEventListener(a,c)},removeEventListener:function(a,c){if(a==="devicechange"&&b("RTCOnDeviceChangePoller").isNeeded()){k&&k.remove(c);return}var d=navigator;d=d.mediaDevices;d&&"removeEventListener"in d&&d.removeEventListener(a,c)},isSupported:function(a){switch(a){case"enumerateDevices":return h||i;default:return Boolean(navigator.mediaDevices)}},enumerateDevices:function(){if(h){navigator.mediaDevices||g(0,4492);return b("Promise").resolve(navigator.mediaDevices.enumerateDevices())}else if(i)return new(b("Promise"))(function(a){return window.MediaStreamTrack.getSources(a)}).then(l);return b("Promise").reject(new Error("enumerateDevices() not supported"))},filterDevicesOfKind:function(a,b){return a.filter(function(a){return a.kind===b})}};function l(a){return a.map(function(a){var b=a.id,c=a.kind;a=a.label;return{deviceId:b,groupId:"",kind:c==="video"?"videoinput":"audioinput",label:a}})}e.exports=a}),null);
__d("RTCOnDeviceChangePoller",["Promise","FBRTCLogger","RTCMediaDevices"],(function(a,b,c,d,e,f){__p&&__p();a.isNeeded=function(){"use strict";var a=navigator;a=a.mediaDevices;return!b("RTCMediaDevices").isSupported("enumerateDevices")||a&&"ondevicechange"in a?!1:!0};function a(a){"use strict";__p&&__p();this.$1=[],this.$2="",this.$4=null,this.$7=function(){__p&&__p();b("RTCMediaDevices").enumerateDevices().then(function(a){__p&&__p();a=a.map(function(a){return a.deviceId+":"+a.label+":"+a.groupId}).sort().join("~");if(a===this.$2)return;this.$2=a;for(var a=this.$1,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;try{d()}catch(a){}}}.bind(this))["catch"](function(a){return b("Promise").resolve()}).then(function(){this.$4=window.setTimeout(this.$7,this.$3)}.bind(this))["catch"](function(a){})}.bind(this),this.$3=a}a.prototype.add=function(a){"use strict";this.$1.push(a),this.$5()};a.prototype.remove=function(a){"use strict";this.$1=this.$1.filter(function(b){return b!==a}),this.$6()};a.prototype.$5=function(){"use strict";if(this.$4!==null)return;this.$4=window.setTimeout(this.$7,0)};a.prototype.$6=function(){"use strict";if(this.$1.length>0)return;this.$4!==null&&(window.clearTimeout(this.$4),this.$4=null)};e.exports=a}),null);
__d("RTCVideoTrackActivityDetector",["invariant","Promise","MediaStream","assignMediaStream"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="video track playback timeout",i="unexpected video track ready state",j='wrong track type, expected "video"';a={PLAYBACK_TIMEOUT_ERROR:h,WRONG_READY_STATE_ERROR:i,WRONG_TRACK_TYPE_ERROR:j,detect:function(a,c){__p&&__p();if("kind"in a&&a.kind!=="video")return b("Promise").reject(new Error(j));var d=document.createElement("video");d.muted=!0;var e=new(b("MediaStream"))();e.addTrack(a);var f,k=null,l=function(){window.clearInterval(k),d&&(d.pause(),b("assignMediaStream")(d,null),d.removeEventListener("timeupdate",f),d=null),e&&(e.removeTrack(a),e=null)};return b("Promise").race([new(b("Promise"))(function(c,h){d!=null||g(0,5995),b("assignMediaStream")(d,e),f=function(b){d!=null||g(0,5995),d.currentTime>0&&(a.readyState==="live"?(c(),l()):h(new Error(i)))},b("Promise").resolve(d.pause()).then(function(){d!=null||g(0,5995);return d.play()}).then(function(){f(),d!=null||g(0,5995),d.addEventListener("timeupdate",f),k=window.setInterval(f,50)})["catch"](function(a){return h(a)})}),new(b("Promise"))(function(a){return window.setTimeout(a,c)}).then(function(){throw new Error(h)})])["catch"](function(a){l();throw a})}};e.exports=a}),null);
__d("RTCMediaStreamValidator",["Promise","RTCAudioTrackNoiseDetector","RTCVideoTrackActivityDetector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="no audio tracks",h="no video tracks",i="too many audio tracks",j="too many video tracks",k="unexpected audio track(s)",l="unexpected video track(s)";a={NO_AUDIO_TRACKS_ERROR:g,NO_VIDEO_TRACKS_ERROR:h,TOO_MANY_AUDIO_TRACKS_ERROR:i,TOO_MANY_VIDEO_TRACKS_ERROR:j,UNEXPECTED_AUDIO_TRACKS_ERROR:k,UNEXPECTED_VIDEO_TRACKS_ERROR:l,validate:function(a,c,d,e){__p&&__p();d===void 0&&(d={});e===void 0&&(e={});d=d;var f=d.audio;f=f===void 0?!0:f;d=d.video;d=d===void 0?!0:d;e=e;var g=e.audio;g=g===void 0?1e3:g;e=e.video;e=e===void 0?1e3:e;return b("Promise").all([m(a,c,f,g),n(a,c,d,e)]).then(function(){return a})}};function m(a,c,d,e){var f=a.getAudioTracks();if(!c.audio)return f.length>0?b("Promise").reject(new Error(k)):b("Promise").resolve(a);if(f.length<1)return b("Promise").reject(new Error(g));else if(f.length>1)return b("Promise").reject(new Error(i));return d?b("RTCAudioTrackNoiseDetector").detect(f[0],e).then(function(){return a}):b("Promise").resolve(a)}function n(a,c,d,e){var f=a.getVideoTracks();if(!c.video)return f.length>0?b("Promise").reject(new Error(l)):b("Promise").resolve(a);if(f.length<1)return b("Promise").reject(new Error(h));else if(f.length>1)return b("Promise").reject(new Error(j));return d?b("RTCVideoTrackActivityDetector").detect(f[0],e).then(function(){return a}):b("Promise").resolve(a)}e.exports=a}),null);
__d("RTCUserMediaConstraints",["FBRTCConstants","FBRTCSupport","RTCConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("FBRTCConstants").RTCConstraints;var g=b("FBRTCConstants").VideoQuality,h={width:a.FHD_WIDTH,height:a.FHD_HEIGHT,frameRate:a.FRAME_RATE},i={width:a.HD_WIDTH,height:a.HD_HEIGHT,frameRate:a.FRAME_RATE},j={width:a.SD_WIDTH,height:a.SD_HEIGHT,frameRate:a.FRAME_RATE},k={width:a.LQ_WIDTH,height:a.LQ_HEIGHT,frameRate:a.LQ_FRAME_RATE},l={audio:function(a){return a?{deviceId:{exact:a}}:!0},video:function(a,c,d){__p&&__p();d===void 0&&(d=b("RTCConfig").CollaborationCallQuality.videoToRoom);if(a===g.NO_VIDEO)return!1;c=c?{deviceId:{exact:c}}:null;if(a===g.CUSTOM_VIDEO)return babelHelpers["extends"]({},d,c);if(b("FBRTCSupport").isMobileDevice())return{facingMode:{ideal:"user"}};d=n(a);a=m(a)?k:p(d);return babelHelpers["extends"]({width:o(d,"width",a),height:o(d,"height",a),frameRate:o(d,"frameRate",{frameRate:10})},c)},chromeMediaSource:function(a,b){a=a.video;a=l.chromify(a);if(typeof a!=="object")return{audio:!1,video:Boolean(a)};var c=a.mandatory;a=a.optional;a=a===void 0?[]:a;return{audio:!1,video:{mandatory:babelHelpers["extends"]({},c,{chromeMediaSource:"desktop",chromeMediaSourceId:b}),optional:[{googTemporalLayeredScreencast:!0}].concat(a)}}},chromify:function(a,b){__p&&__p();if(!a||typeof a!=="object")return Boolean(a);if(!s(a))return a;b=b?b.optionalConstraintsOnly:!1;var c=a.mandatory;c=c===void 0?{}:c;var d=a.optional;d=d===void 0?[]:d;var e=Object.entries(a);for(var f=0;f<e.length;f++){var g=e[f],h=g[0];g=g[1];if(h==="require"||h==="advanced"||h==="mediaSource")continue;g=g&&typeof g==="object"?g:{ideal:g};Number.isFinite(g.exact)&&(g.min=g.exact,g.max=g.exact);var i=g.ideal,j=g.exact;if(i!==undefined)if(Number.isFinite(i)){var k;d.push((k={},k[r(h,"min")]=i,k),(k={},k[r(h,"max")]=i,k))}else{d.push((k={},k[r(h)]=i,k))}if(!b)if(j!==undefined&&!Number.isFinite(j))c[r(h)]=j;else{i=["min","max"];for(var k=0;k<i.length;k++){j=i[k];Number.isFinite(g[j])&&(c[r(h,j)]=g[j])}}}a.advanced&&d.push.apply(d,a.advanced);j={};Object.keys(c).length>0?j.mandatory=c:b&&(j.mandatory={});d.length>0&&(j.optional=d);return j}};function m(a){return a===g.HD_IDEAL_LQ_REQUIRED_VIDEO||a===g.FHD_IDEAL_LQ_REQUIRED_VIDEO}function n(a){switch(a){case g.FHD_VIDEO:case g.FHD_IDEAL_LQ_REQUIRED_VIDEO:return h;case g.HD_VIDEO:case g.HD_IDEAL_LQ_REQUIRED_VIDEO:return i;case g.LQ_VIDEO:return k;case g.SD_VIDEO:return j;default:return i}}function o(a,b,c){c===void 0&&(c=p(a));var d=a[b];return{min:Math.min(c[b],d),max:Math.max(q(a)[b],d),ideal:d}}function p(a){switch(a){case h:return i;case i:return j;case j:case k:default:return k}}function q(a){switch(a){case k:return j;case j:return i;case i:case h:default:return h}}function r(b,a){return a?""+a+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b}function s(a){return Object.keys(a).some(function(a){return a!=="mandatory"&&a!=="optional"})}e.exports=l}),null);
__d("UserMediaRequestError",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a=babelHelpers.inherits(h,Error);g=a&&a.prototype;function h(a,b,c){g.constructor.call(this,b),this.constraint=c,this.nativeErrorName=a,this.message=i(b),this.name=j(a)}h.createFromNative=function(a){var b=a.message,c=a.name;a=a.constraint;return new h(c,b,a||"")};h.prototype.isRecoverableError=function(){return this.name==="InvalidStateError"?!0:!1};h.prototype.getEndCallSubReason=function(){return"MediaFailed: "+this.name+", "+this.constraint};function i(a){switch(a){case"The operation is insecure.":return"The request is not allowed by the user agent or the platform in the current context.";default:return a}}function j(a){switch(a){case"ConstraintNotSatisfiedError":return"OverconstrainedError";case"NO_DEVICES_FOUND":case"DevicesNotFoundError":return"NotFoundError";case"MediaDeviceFailedDueToShutdown":case"MediaDeviceKillSwitchOn":case"TrackStartError":return"NotReadableError";case"PermissionDeniedError":case"PERMISSION_DENIED":case"PermissionDismissedError":return"NotAllowedError";default:return a}}e.exports=h}),null);
__d("generateRTCTransactionID",["randomInt"],(function(a,b,c,d,e,f){"use strict";function a(){return String(b("randomInt")(0,4294967294)+1)}e.exports=a}),null);
__d("RTCUtils",["invariant","Promise","CurrentUser","FBLogger","FBRTCConfig","FBRTCLogger","FBRTCUtils","MediaRequestSourceApp","RTCAudioTrackNoiseDetector","RTCConfig","RTCEndCallReason","RTCMediaDevices","RTCMediaStreamValidator","RTCScreenSharing","RTCUser","RTCUserMediaConstraints","RTCVideoFilterRenderer","RTCVideoTrackActivityDetector","RTWebClientFeatureGating","URI","UserAgent","UserMediaRequestError","generateRTCTransactionID"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("RTCAudioTrackNoiseDetector").DATA_TIMEOUT_ERROR,i=b("RTCVideoTrackActivityDetector").PLAYBACK_TIMEOUT_ERROR;function j(a,c,d){b("FBRTCLogger").getInstance().logInfo(null,null,{userMediaErrorType:a,errorName:(c==null?void 0:c.name)||"",errorDescription:(c==null?void 0:c.description)||"",initialConstraints:d})}var k={isGroupCall:function(a){return a.split(":")[0]==="GROUP"},isMessengerCall:function(a){return a.split(":")[0]==="MESSENGER"},isBonfireCall:function(a){return!!this.parseBonfireID(a)},isAlohaCall:function(a){return a.split(":")[0]==="ALOHA"},isWatchPartyCall:function(a){return a.split(":")[0]==="WATCH"},isSupportedMWCall:function(a){return k.isGroupCall(a)||k.isMessengerCall(a)||k.isAlohaCall(a)||k.isBonfireCall(a)||k.isWatchPartyCall(a)},parseBonfireID:function(a){a=a.match(/BONFIRE:(\d+)/);return a&&a.length>1?a[1]:null},getPeerID:function(a){if(k.isGroupCall(a))throw new Error("Not a P2P call: "+a);a=a.split(":");a=a.slice(1);return a[0]===b("CurrentUser").getID()?a[1]:a[0]},getMessengerCallID:function(a){if(!k.isMessengerCall(a))throw new Error("Not a Messenger call: "+a);return Number(a.split(":")[1])},getThreadID:function(a){return!k.isGroupCall(a)?null:Number(a.split(":")[1])},getSandboxingTierFromURIOrEmpty:function(a,b){b=b+"=";a=a.split(b);if(a[1]){b=a.pop().split("&").shift();return b}return""},createRequestHeader:function(a,c,d,e,f){__p&&__p();a={type:a,transactionId:b("generateRTCTransactionID")(),retryCount:0,conferenceName:c,clientSessionId:e?e:""};c={};d&&(a.serverInfoData=d);f&&(c.esc_p2p_call_id=f);if(b("RTWebClientFeatureGating").canUseMultiwaySandbox()){e=window.location.href;d=k.getSandboxingTierFromURIOrEmpty(e,"multiway_www_tier");f=k.getSandboxingTierFromURIOrEmpty(e,"multiway_core_tier");d&&(c.multiwayWwwTier=d);f&&(c.multiwayCoreTier=f)}a.extensions=c;return a},createClientContextMessage:function(a,b){a={num_participants:a,trigger:b};b={header:{topic_DEPRECATED:"client_context",shouldSendToAllUsers:!1},body:{genericMessage:{topic:"client_context",data:JSON.stringify(a)}}};return b},createResponseHeader:function(a,b,c){b={type:a.type,transactionId:a.transactionId,retryCount:0,conferenceName:a.conferenceName,responseStatusCode:b,clientSessionId:c?c:""};a.serverInfoData&&(b.serverInfoData=a.serverInfoData);return b},maybeRemoveVideoConstraint:function(a){return b("RTCMediaDevices").enumerateDevices().then(function(b){if(b.some(function(a){return a.kind==="videoinput"}))return a;j("noCameraFallback",null,a);return babelHelpers["extends"]({},a,{video:!1})})["catch"](function(){return b("Promise").resolve(a)})},getUserMediaWithAudioFallback:function(a,b){__p&&__p();return a.video?k.maybeRemoveVideoConstraint(a).then(function(a){return k.getUserMedia(a,b)})["catch"](function(b){__p&&__p();if(a.video){if(b.name==="NotFoundError"||b.name==="StreamFailedToStart"){j("audioFallbackError",b,a);return k.getUserMedia({video:!1,audio:a.audio})}if(b.name==="OverconstrainedError"){j("overConstrainedError",b,a);return k.getUserMedia({video:!0,audio:a.audio})}}j("unknownGetUserMediaError",b,a);throw b}):k.getUserMedia(a,b)},getUserMediaWithFallbackToEmptyVideoConstraints:function(a,b){return k.getUserMedia(a,b)["catch"](function(b){if(a.video&&b.name==="OverconstrainedError")return k.getUserMedia(babelHelpers["extends"]({},a,{video:!0}));throw b})},getUserScreenMedia:function(a,c,d){return b("RTCScreenSharing").getUserMedia(a,c,d)},getUserMedia:function(a,c){__p&&__p();var d=navigator,e=d.mediaDevices;if(typeof a.video==="object"&&a.video.mediaSource){b("FBLogger")("rtc_www").mustfix("Please use %s instead of %s for screen","RTCUtils.getUserScreenMedia()","RTCUtils.getUserMedia()");return b("RTCScreenSharing").getUserMedia(a,b("MediaRequestSourceApp").UNKNOWN)}d=c&&c.optionalConstraintsOnly&&a.video;var f=k._parseConstraints(a,{optionalConstraintsOnly:!!d}),g=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return new(b("Promise"))(function(a,b){e&&typeof e.getUserMedia==="function"?a(e.getUserMedia(f).then(function(a){return k._maybeSupportFilteredStreams(a,!!(c&&c.supportFilteredStreams))})):g?g.call(navigator,f,a,b):b("getUserMedia not supported")})["catch"](function(a){throw b("UserMediaRequestError").createFromNative(a)})},_parseConstraints:function(a,c){if(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera")){var d=a.audio,e=a.video,f={};d!==undefined&&(f.audio=b("RTCUserMediaConstraints").chromify(d));e!==undefined&&(f.video=b("RTCUserMediaConstraints").chromify(e,c));return f}return a},_maybeSupportFilteredStreams:function(a,c){return c&&a.getVideoTracks().length>0?b("RTCVideoFilterRenderer").initStreamForFilters(a):a},getUserMediaWithValidation:function(a,c,d,e){__p&&__p();c===void 0&&(c={audio:!0,video:!0});d===void 0&&(d=5);e===void 0&&(e={audio:1e3,video:1e3});return new(b("Promise"))(function(f,g){__p&&__p();var j=function d(j){k.getUserMedia(a).then(function(d){return b("RTCMediaStreamValidator").validate(d,a,c,e).then(function(a){return f({stream:a})})["catch"](function(a){if(a.message===h||a.message===i)f({stream:d,err:a});else{k.stopMediaStream(d);throw a}})},g)["catch"](function(a){j>0?d(j-1):g(a)})};j(d)})},isFullScreen:function(){return Boolean(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},requestFullScreen:function(a){a===void 0&&(a=document.documentElement),typeof a.requestFullscreen==="function"?a.requestFullscreen():typeof a.msRequestFullscreen==="function"?a.msRequestFullscreen():typeof a.mozRequestFullScreen==="function"?a.mozRequestFullScreen():typeof a.webkitRequestFullscreen==="function"&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},exitFullScreen:function(){typeof document.exitFullscreen==="function"?document.exitFullscreen():typeof document.msExitFullscreen==="function"?document.msExitFullscreen():typeof document.mozCancelFullScreen==="function"?document.mozCancelFullScreen():typeof document.webkitExitFullscreen==="function"&&document.webkitExitFullscreen()},toggleFullScreen:function(){k.isFullScreen()?k.exitFullScreen():k.requestFullScreen()},endCallReasonFromHangupReason:function(a){return b("RTCEndCallReason").fromHangupReason(a).getReasonID()},endCallReasonFromDismissRequest:function(a){return b("RTCEndCallReason").fromDismissRequest(a).getReasonID()},endCallReasonFromResponseStatusCode:function(a){return b("RTCEndCallReason").fromResponseStatusCode(a).getReasonID()},stopMediaStream:function(a){if(!a.active&&"active"in a)return;a.getTracks().forEach(function(a){a.readyState!=="ended"&&(a.stop(),a.dispatchEvent(new Event("ended")))})},transferAudioTracks:function(a,b){__p&&__p();for(var c=b.getAudioTracks(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;a.addTrack(f);b.removeTrack(f)}},payloadParticipantsToRTCUsers:function(a){return a.map(function(a){var c=a.big_image_src||a.image_src;a.fbid||g(0,1174);return new(b("RTCUser"))({FBID:a.fbid,profileUrl:new(b("URI"))(a.href),profilePictureUrl:c,isMessengerUser:!!a.is_messenger_user,isPartiesUser:!!a.is_parties_user,userName:a.name,userShortName:a.short_name,vanity:a.vanity||""})})},getStreamVideoResolution:function(a){return new(b("Promise"))(function(c,d){var e=document.createElement("video");b("FBRTCUtils").attachMediaStream(e,a);var f=function(){e.removeEventListener("loadedmetadata",g),e.removeEventListener("error",h),b("FBRTCUtils").attachMediaStream(e,null)},g=function(){c({height:e.videoHeight,width:e.videoWidth}),f()},h=function(){d(e.error),f()};e.addEventListener("loadedmetadata",g);e.addEventListener("error",h)})},limitFrameRate:function(a){a=a.getVideoTracks();a=a[0];if(a.applyConstraints){var b=a.getConstraints();b.frameRate=15;a.applyConstraints(b)}},isScreenSharingSupported:function(){return b("UserAgent").isBrowser("Chrome")||this.isVCScreenSharingSupported()},isVCScreenSharingSupported:function(){return b("FBRTCConfig").isVCEndpointCall()&&b("RTCConfig").CollabWhitelistedBrowserGK},filterDevicesByKind:function(a,b){return a?a.filter(function(a){return a.kind===b}):[]}};e.exports=k}),null);
__d("FBRTCStatsHelpers",["Promise"],(function(a,b,c,d,e,f){__p&&__p();var g=!1,h=function(a){if(a==="host"||a==="local")return"local";if(a==="serverreflexive")return"srflx";if(a==="peerreflexive")return"prflx";return a==="relayed"||a==="relay"?"relay":"unknown"},i={UNKNOWN_CONNECTION:"l:unknown-unknown;r:unknown-unknown",connectionType:function(a,b,c,d){return a!==null&&a!==undefined&&b!==null&&c!==null&&c!==undefined&&d!==null?["l:",h(a),"-",b,";","r:",h(c),"-",d].join(""):null},getVideoCapabilitiesInfo:function(a){__p&&__p();a=a.getVideoTracks();a=a[0];if(a==null)return null;if(typeof a.getCapabilities!=="function")return null;a=a.getCapabilities();var b=a.aspectRatio,c=a.facingMode,d=a.frameRate,e=a.height;a=a.width;return{facing_mode:(c=c)!=null?c:null,max_aspect_ratio:(c=b==null?void 0:b.max)!=null?c:null,max_frame_rate:(c=d==null?void 0:d.max)!=null?c:null,max_height:(d=e==null?void 0:e.max)!=null?d:null,max_width:(c=a==null?void 0:a.max)!=null?c:null,min_aspect_ratio:(e=b==null?void 0:b.min)!=null?e:null}},getMediaInputs:function(a){var b={audio_inputs:[],video_inputs:[]};a.forEach(function(a){switch(a.kind){case"videoinput":b.video_inputs.push(a.label);break;case"audioinput":b.audio_inputs.push(a.label);break}});return b},logCapabilities:function(a,b,c){a.setVideoCapabilities(i.getVideoCapabilitiesInfo(b)),a.setMediaInputs(i.getMediaInputs(c))},internalGetWindow:function(){return window},getBatteryStats:function(){return new(b("Promise"))(function(a,b){var c=i.internalGetWindow().navigator.getBattery;typeof c==="function"?a(c.call(navigator)):b()}).then(function(a){a.charging?g=!0:a.onchargingchange=function(event){event.target.charging&&(g=!0),event.target.onchargingchange=null};return{level:a.level*100,wasCharged:g}})["catch"](function(){return{placeholder:!0,level:-1,wasCharged:!1}})}};e.exports=i}),null);
__d("RTCCallActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CALL:"CALL",CALL_SUCCESS:"CALL_SUCCESS",CALL_ERROR:"CALL_ERROR",INCOMING_CALL_SUCCESS:"INCOMING_CALL_SUCCESS",INIT:"INIT",RESET:"RESET",RESET_FOR_REDIAL:"RESET_FOR_REDIAL",CALL_COLLISION:"CALL_COLLISION",WAIT_FOR_USER_INPUT:"WAIT_FOR_USER_INPUT",SET_CALL_SUMMARY:"SET_CALL_SUMMARY",SET_MW_CALL_TYPE:"SET_MW_CALL_TYPE",SET_LAYOUT:"SET_LAYOUT",SET_DOMINANT_SPEAKER:"SET_DOMINANT_SPEAKER",SET_PINNED_SPEAKER:"SET_PINNED_SPEAKER",SET_USE_DOMINANT_SPEAKE_VIEW:"SET_USE_DOMINANT_SPEAKE_VIEW",SET_GRID_VIEW:"SET_GRID_VIEW",SET_STRIP_VIEW:"SET_STRIP_VIEW",INIT_THREAD:"INIT_THREAD",ON_PARTICIPANT_LEFT:"ON_PARTICIPANT_LEFT",ON_PARTICIPANTS_ADDED:"ON_PARTICIPANTS_ADDED",ADD_PARTICIPANTS_TO_RING:"ADD_PARTICIPANTS_TO_RING",JOIN:"JOIN",JOIN_SUCCESS:"JOIN_SUCCESS",JOIN_ERROR:"JOIN_ERROR",HANGUP:"HANGUP",HANGUP_SUCCESS:"HANGUP_SUCCESS",HANGUP_ERROR:"HANGUP_ERROR",ON_CONFERENCE_STATE:"ON_CONFERENCE_STATE",DISMISS:"DISMISS",END_CALL:"END_CALL",ON_JOIN_REQUEST_SENT:"ON_JOIN_REQUEST_SENT",ON_JOIN_RESPONSE:"ON_JOIN_RESPONSE",ON_RECEIVED_JOIN_RESPONSE:"ON_RECEIVED_JOIN_RESPONSE",ON_PROCESSED_JOIN_RESPONSE:"ON_PROCESSED_JOIN_RESPONSE",ON_SERVER_MEDIA_UPDATE_SUCCESS:"ON_SERVER_MEDIA_UPDATE_SUCCESS",ON_CLIENT_MEDIA_UPDATE_RESPONSE:"ON_CLIENT_MEDIA_UPDATE_RESPONSE",INIT_LOCAL_USER:"INIT_LOCAL_USER",INIT_REMOTE_USERS:"INIT_REMOTE_USERS",UPDATE_REMOTE_USERS:"UPDATE_REMOTE_USERS",ADD_REMOTE_STREAM:"ADD_REMOTE_STREAM",REMOVE_REMOTE_STREAM:"REMOVE_REMOTE_STREAM",REMOVE_ALL_REMOTE_STREAMS:"REMOVE_ALL_REMOTE_STREAMS",ADD_REMOTE_TRACK:"ADD_REMOTE_TRACK",REMOVE_REMOTE_TRACK:"REMOVE_REMOTE_TRACK",AUDIO_MUTED:"AUDIO_MUTED",AUDIO_UNMUTED:"AUDIO_UNMUTED",VIDEO_MUTED:"VIDEO_MUTED",VIDEO_UNMUTED:"VIDEO_UNMUTED",REMOTE_AUDIO_MUTED:"REMOTE_AUDIO_MUTED",REMOTE_AUDIO_UNMUTED:"REMOTE_AUDIO_UNMUTED",REMOTE_VIDEO_MUTED:"REMOTE_VIDEO_MUTED",REMOTE_VIDEO_UNMUTED:"REMOTE_VIDEO_UNMUTED",SELF_VIEW_COLLAPSED:"SELF_VIEW_COLLAPSED",SELF_VIEW_UNCOLLAPSED:"SELF_VIEW_UNCOLLAPSED",ADD_LOCAL_STREAM:"ADD_LOCAL_STREAM",REMOVE_LOCAL_STREAM:"REMOVE_LOCAL_STREAM",REPLACE_LOCAL_STREAM:"REPLACE_LOCAL_STREAM",REMOVE_ALL_LOCAL_STREAMS:"REMOVE_ALL_LOCAL_STREAMS",STOP_LOCAL_STREAM:"STOP_LOCAL_STREAM",ADD_LOCAL_SCREEN_STREAM:"ADD_LOCAL_SCREEN_STREAM",REMOVE_LOCAL_SCREEN_STREAM:"REMOVE_LOCAL_SCREEN_STREAM",REMOVE_ALL_LOCAL_SCREEN_STREAMS:"REMOVE_ALL_LOCAL_SCREEN_STREAMS",REPLACE_LOCAL_SCREEN_STREAM:"REPLACE_LOCAL_SCREEN_STREAM",ADD_REMOTE_SCREEN_STREAM:"ADD_REMOTE_SCREEN_STREAM",REMOVE_REMOTE_SCREEN_STREAM:"REMOVE_REMOTE_SCREEN_STREAM",TOGGLE_REMOTE_STREAM:"TOGGLE_REMOTE_STREAM",SUBMIT_RATING:"SUBMIT_RATING",SUBMIT_FEEDBACK:"SUBMIT_FEEDBACK",SUBMIT_SURVEY_CHOICE:"SUBMIT_SURVEY_CHOICE",RATING_SHOWN:"RATING_SHOWN",FEEDBACK_SHOWN:"FEEDBACK_SHOWN",SET_CONFERENCE_STATE:"SET_CONFERENCE_STATE",SET_END_CALL_REASON:"SET_END_CALL_REASON",FLOOR_STATUS:"FLOOR_STATUS"})}),null);
__d("RTCConferenceState",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AWAITING_USER_START:"AWAITING_USER_START",CONNECTED:"CONNECTED",CONNECTING:"CONNECTING",NEW:"NEW",RENEGOTIATING:"RENEGOTIATING",TERMINATED:"TERMINATED",TERMINATING:"TERMINATING"})}),null);
__d("FBRTCCallSummaryReducer",["FBRTCCallSummaryStore","FBRTCLogger","FBRTCMediaMetricParser","FBRTCStatsHelpers","RTCCallActionTypes","RTCCallStore","RTCConferenceState","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCLogger").Key;a={setCallSummary:function(a,c){switch(c.type){case b("RTCCallActionTypes").SET_CALL_SUMMARY:return a.set("callSummary",c.callSummary)}return a},onCallStarted:function(a,c){switch(c.type){case b("RTCCallActionTypes").INCOMING_CALL_SUCCESS:case b("RTCCallActionTypes").CALL_SUCCESS:c=function c(){var d=b("RTCCallStore").getState().callInfo.conferenceState;d!==b("RTCConferenceState").TERMINATED&&(a.callSummary.save(b("FBRTCCallSummaryStore").getInstance()),window.setTimeout(c,1e4))};c();b("FBRTCMediaMetricParser").startCollectingMediaStats();return a}return a},onMessageSignaling:function(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").ON_JOIN_REQUEST_SENT:a.callSummary.setJoinRequestSent();a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").ON_RECEIVED_JOIN_RESPONSE:a.callSummary.setJoinResponseReceived();a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").ON_JOIN_RESPONSE:a.callSummary.setServerInfoData(c.serverInfoData);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").ON_PROCESSED_JOIN_RESPONSE:a.callSummary.setJoinResponseProcessed();a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a}return a},onCallEnded:function(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").CALL_ERROR:case b("RTCCallActionTypes").HANGUP:case b("RTCCallActionTypes").END_CALL:a.callSummary.onCallEnded(c.endCallReason,!1,!1,c.endCallSubreason);b("promiseDone")(b("FBRTCStatsHelpers").getBatteryStats(),function(c){a.callSummary.addExtraInfo(g.BATTERY_END,c.level),a.callSummary.setDeviceCharged(c.wasCharged),a.callSummary.save(b("FBRTCCallSummaryStore").getInstance())});a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").DISMISS:a.callSummary.onCallEnded(c.endCallReason,!0,!1,c.endCallSubreason);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a}return a},onSurveyResult:function(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").RATING_SHOWN:a.callSummary.addExtraInfo(g.RATING_SHOWN,"1");a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").FEEDBACK_SHOWN:a.callSummary.addExtraInfo(g.SURVEY_SHOWN,"1");a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").SUBMIT_RATING:a.callSummary.addExtraInfo(g.RATING,c.rating);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").SUBMIT_FEEDBACK:a.callSummary.addExtraInfo(g.SURVEY_DETAILS,c.feedback);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").SUBMIT_SURVEY_CHOICE:a.callSummary.addExtraInfo(g.SURVEY_CHOICE,c.surveyChoice);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a}return a}};e.exports=a}),null);
__d("RTCCallStoreState",["CurrentUser","FBRTCCallSummary","RTCConferenceState","RTCUser","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;d={debugID:0,callID:"",conferenceState:b("RTCConferenceState").NEW,conferenceName:"",protocol:"",serverInfoData:""};g=babelHelpers.inherits(a,b("immutable").Record(d));g&&g.prototype;a.prototype.isInCall=function(){return this.conferenceState===b("RTCConferenceState").CONNECTING||this.conferenceState===b("RTCConferenceState").CONNECTED};function a(){g.apply(this,arguments)}f={connections:b("immutable").Set(),localUser:new(b("RTCUser"))({FBID:b("CurrentUser").getID()}),remoteUsers:b("immutable").Set(),callInfo:new a(),callSummary:b("FBRTCCallSummary").nullSummary(),mediaStatus:b("immutable").Map()};h=babelHelpers.inherits(c,b("immutable").Record(f));h&&h.prototype;function c(){h.apply(this,arguments)}e.exports=c}),null);
__d("RTCGroupCallEscalationActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GROUP_ESCALATION_START:"GROUP_ESCALATION_START",GROUP_ESCALATION_SUCCESS:"GROUP_ESCALATION_SUCCESS",GROUP_ESCALATION_CANCEL:"GROUP_ESCALATION_CANCEL",GROUP_ESCALATION_SET_USERS_TO_RING:"GROUP_ESCALATION_SET_USERS_TO_RING",GROUP_ESCALATION_CLEAR_P2P_CONNECTION:"GROUP_ESCALATION_CLEAR_P2P_CONNECTION",GROUP_ESCALATION_SET_P2P_CALLSUMMARY:"GROUP_ESCALATION_SET_P2P_CALLSUMMARY",GROUP_ESCALATION_ADD_LOCAL_STREAM:"GROUP_ESCALATION_ADD_LOCAL_STREAM"})}),null);
__d("RTCCallReducer",["invariant","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCConstants","FBRTCParticipantCallState","FBRTCRtcResponseStatusCode","FBRTCScreenSharingUtils","RTCCallActionTypes","RTCCallStore","RTCCallStoreState","RTCConferenceState","RTCGroupCallEscalationActionTypes","RTCUser","RTCUtils","URI","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").SignalingProtocol;function a(a,c){switch(c.type){case b("RTCCallActionTypes").INIT:return a.set("callInfo",a.callInfo.set("callID",c.callID).set("conferenceName",c.conferenceName).set("serverInfoData",c.serverInfoData).set("protocol",c.protocol));case b("RTCCallActionTypes").RESET:return new(b("RTCCallStoreState"))();case b("RTCCallActionTypes").RESET_FOR_REDIAL:return a.set("callInfo",a.callInfo.set("conferenceState",b("RTCConferenceState").NEW).set("callID",c.callID).set("conferenceName",c.conferenceName)).set("callSummary",b("FBRTCCallSummary").nullSummary()).set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case b("RTCCallActionTypes").CALL_COLLISION:return a.set("callInfo",a.callInfo.set("conferenceState",b("RTCConferenceState").NEW).set("callID",c.conferenceName).set("conferenceName",c.conferenceName)).set("callSummary",b("FBRTCCallSummary").nullSummary()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}))}return a}function c(a,c){switch(c.type){case b("RTCCallActionTypes").CALL:return a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").CONNECTING).set("connections",a.connections.add(c.peerConnection));case b("RTCCallActionTypes").CALL_ERROR:return a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").TERMINATED);case b("RTCCallActionTypes").CALL_SUCCESS:return c.connected?a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").CONNECTED):a}return a}function d(a,c){switch(c.type){case b("RTCCallActionTypes").INCOMING_CALL_SUCCESS:return a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").CONNECTED)}return a}function f(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").HANGUP:a.connections.forEach(function(a){return a.close()});return a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").TERMINATING).set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case b("RTCCallActionTypes").DISMISS:c.transaction.sendResponse(c.request.createResponse(b("FBRTCRtcResponseStatusCode").OK,{callID:a.callInfo.callID}));case b("RTCCallActionTypes").END_CALL:a.connections.forEach(function(a){return a.close()});return a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").TERMINATED).set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case b("RTCCallActionTypes").HANGUP_ERROR:case b("RTCCallActionTypes").HANGUP_SUCCESS:return a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").TERMINATED)}return a}function i(a,c){__p&&__p();switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_CLEAR_P2P_CONNECTION:var d=b("RTCCallStore").getConnection(h.P2P);if(d){c=d.getRemoteStreams();var e=c[0];d.close();var f=a.localUser;if(!b("FBRTCScreenSharingUtils").isGroupCallScreenSharingSupported()){c=f.getScreenStream();if(c){var g=f.getStream();g&&b("RTCUtils").transferAudioTracks(g,c);b("RTCUtils").stopMediaStream(c);f=f.removeScreenStream(c)}}return a.withMutations(function(a){a.set("connections",a.connections.remove(d)).set("localUser",f).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeStream(e)}))})}}return a}function j(a,c){__p&&__p();switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_CANCEL:var d=b("RTCCallStore").getConnection(h.MULTIWAY);if(d){var e=d.getRemoteStreams(),f=e[0],g=a.callSummary;c.p2pCallSummary&&(g=c.p2pCallSummary,b("FBRTCCallSummaryStore").getInstance().removeCallSummary(a.callSummary.peerID,a.callSummary.callID));d.close();return a.withMutations(function(a){a.set("callInfo",a.callInfo.set("conferenceState",b("RTCConferenceState").CONNECTED).set("conferenceName",g.callID).set("protocol","p2p").set("serverInfoData","")).set("callSummary",g).set("connections",a.connections.remove(d)).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeStream(f)}))})}}return a}function k(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").ON_PARTICIPANTS_ADDED:var d=a.remoteUsers.map(function(a){return a.FBID});return a.set("remoteUsers",a.remoteUsers.union(Object.keys(c.participants).filter(function(a){return!d.has(c.participants[a].fbid)}).map(function(a){var d=c.participants[a],e=d.big_image_src||d.image_src;c.images&&c.images[a]&&(e=c.images[a]);d.fbid||g(0,1174);return new(b("RTCUser"))({FBID:d.fbid,profileUrl:new(b("URI"))(d.href),profilePictureUrl:e,isMessengerUser:!!d.is_messenger_user,isPartiesUser:!!d.is_parties_user,userName:d.name,userShortName:d.short_name,vanity:d.vanity})})))}return a}function l(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").ON_CONFERENCE_STATE:var d=c.transaction,e=c.request,f=c.request.conferenceStateRequest();if(c.conferenceStateVersion>=f.version){d.sendResponse(e.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ConferenceStateResponse:{currentVerison:c.conferenceStateVersion}},callID:a.callInfo.callID}));return a}c.resolve(f.version);var g=a.remoteUsers.map(function(a){var b=f.participantStates[a.FBID];return b?a.setParticipantState(b):a}),h=g.some(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED});h=h?b("RTCConferenceState").CONNECTED:a.callInfo.conferenceState;d.sendResponse(e.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ConferenceStateResponse:{currentVerison:c.conferenceStateVersion}},callID:a.callInfo.callID}));return a.setIn(["remoteUsers"],g).setIn(["callInfo","conferenceState"],h)}return a}function m(a,c){switch(c.type){case b("RTCCallActionTypes").ON_JOIN_RESPONSE:return a.setIn(["callInfo","serverInfoData"],c.serverInfoData)}return a}function n(a,c){switch(c.type){case b("RTCCallActionTypes").INIT_LOCAL_USER:return a.set("localUser",c.localUser);case b("RTCCallActionTypes").INIT_REMOTE_USERS:case b("RTCCallActionTypes").UPDATE_REMOTE_USERS:return a.set("remoteUsers",c.remoteUsers)}return a}function o(a,c){switch(c.type){case b("RTCCallActionTypes").AUDIO_MUTED:case b("RTCCallActionTypes").AUDIO_UNMUTED:return a.set("localUser",a.localUser.toggleMuteAudio());case b("RTCCallActionTypes").VIDEO_MUTED:return a.set("localUser",a.localUser.toggleMuteVideo(!0));case b("RTCCallActionTypes").VIDEO_UNMUTED:return a.set("localUser",a.localUser.toggleMuteVideo(!1));default:return a}}function p(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").ADD_LOCAL_STREAM:return a.set("localUser",a.localUser.addStream(c.stream));case b("RTCCallActionTypes").REMOVE_LOCAL_STREAM:return a.set("localUser",a.localUser.removeStream(c.stream));case b("RTCCallActionTypes").REPLACE_LOCAL_STREAM:var d=c.oldStream.getAudioTracks();d=d[0];if(d!=null)for(var e=c.newStream.getAudioTracks(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;h.enabled=d.enabled}return a.set("localUser",a.localUser.replaceStream(c.oldStream,c.newStream));case b("RTCCallActionTypes").STOP_LOCAL_STREAM:return a.set("localUser",a.localUser.stopVideo());case b("RTCCallActionTypes").REMOVE_ALL_LOCAL_STREAMS:if(c.stopStreams)for(var h=a.localUser.streams,g=Array.isArray(h),f=0,h=g?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(f>=h.length)break;e=h[f++]}else{f=h.next();if(f.done)break;e=f.value}d=e;b("RTCUtils").stopMediaStream(d)}return a.set("localUser",a.localUser.removeAllStreams())}return a}function q(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").ADD_LOCAL_SCREEN_STREAM:return a.set("localUser",a.localUser.addScreenStream(c.stream));case b("RTCCallActionTypes").REMOVE_LOCAL_SCREEN_STREAM:return a.set("localUser",a.localUser.removeScreenStream(c.stream));case b("RTCCallActionTypes").REMOVE_ALL_LOCAL_SCREEN_STREAMS:if(c.stopStreams)for(var d=a.localUser.screenStreams,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b("RTCUtils").stopMediaStream(g)}return a.set("localUser",a.localUser.removeAllScreenStreams());case b("RTCCallActionTypes").REPLACE_LOCAL_SCREEN_STREAM:return a.set("localUser",a.localUser.replaceScreenStream(c.oldStream,c.newStream))}return a}function r(a,c){__p&&__p();var d;switch(c.type){case b("RTCCallActionTypes").ADD_REMOTE_STREAM:d=v(a,c);if(!d)return a;var e=a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.addStream(c.stream)));return u(e,{type:b("RTCCallActionTypes").TOGGLE_REMOTE_STREAM,mediaStatus:e.mediaStatus.toJS()});case b("RTCCallActionTypes").REMOVE_REMOTE_STREAM:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.removeStream(c.stream)));case b("RTCCallActionTypes").REMOVE_ALL_REMOTE_STREAMS:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.removeAllStreams().removeAllScreenStreams()))}return a}function s(a,c){var d;switch(c.type){case b("RTCCallActionTypes").ADD_REMOTE_TRACK:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.clone()));case b("RTCCallActionTypes").REMOVE_REMOTE_TRACK:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.clone()))}return a}function t(a,c){var d;switch(c.type){case b("RTCCallActionTypes").ADD_REMOTE_SCREEN_STREAM:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.addScreenStream(c.stream)));case b("RTCCallActionTypes").REMOVE_REMOTE_SCREEN_STREAM:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.removeScreenStream(c.stream)))}return a}function u(a,c){__p&&__p();var d;switch(c.type){case b("RTCCallActionTypes").TOGGLE_REMOTE_STREAM:return a.set("remoteUsers",Object.entries(c.mediaStatus).reduce(function(b,c){__p&&__p();var d=c[0];c=c[1];var e=b.reduce(function(b,a){var c=a.streams.map(function(a){return a.getTracks().find(function(a){return a.id===d})}).find(Boolean);return c?{user:a,track:c}:b},{}),a=e.user;e=e.track;if(a&&e){if(e.kind==="audio"&&a.isAudioMuted()===c)return b["delete"](a).add(a.toggleMuteAudio());if(e.kind==="video"&&a.isVideoMuted()===c)return b["delete"](a).add(a.toggleMuteVideo(!a.isVideoMuted()))}return b},a.remoteUsers)).set("mediaStatus",b("immutable").Map(c.mediaStatus));case b("RTCCallActionTypes").REMOTE_AUDIO_MUTED:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteAudio(!0)));case b("RTCCallActionTypes").REMOTE_AUDIO_UNMUTED:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteAudio(!1)));case b("RTCCallActionTypes").REMOTE_VIDEO_MUTED:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteVideo(!0)));case b("RTCCallActionTypes").REMOTE_VIDEO_UNMUTED:d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteVideo(!1)))}return a}function v(a,b){return a.remoteUsers.find(function(a){return b.userID?a.FBID==b.userID:a.FBID===b.stream.id.split(":")[0]})}function w(a,c){switch(c.type){case b("RTCCallActionTypes").WAIT_FOR_USER_INPUT:return a.callInfo.conferenceState===b("RTCConferenceState").NEW?a.setIn(["callInfo","conferenceState"],b("RTCConferenceState").AWAITING_USER_START):a}return a}e.exports={abortMultiwayEscalationProcess:j,callInit:a,callStart:c,callEnd:f,completeTransitionToMultiway:i,onParticipantsChanged:k,incomingCallStart:d,processUsers:n,toggleLocalStream:o,processLocalStream:p,processLocalScreenStream:q,processRemoteStream:r,processRemoteScreenStream:t,processRemoteTrack:s,toggleRemoteStream:u,processConferenceState:l,processJoinResponse:m,waitForUserInput:w}}),null);
__d("RTCCoExperienceActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TOGGLE_CHAT_WINDOW:"TOGGLE_CHAT_WINDOW",SET_FILTER:"SET_FILTER"})}),null);
__d("RTCExpressionIntent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({EFFECT:"effect",CHAT:"chat",SCREENSHARE:"screenshare"})}),null);
__d("RTCExpressionAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ENABLED:"enabled",DISABLED:"disabled"})}),null);
__d("RtcExpressionWWWTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:RtcExpressionWWWLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:RtcExpressionWWWLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RtcExpressionWWWLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAuthFlag=function(a){this.$1.auth_flag=a;return this};a.prototype.setBundleID=function(a){this.$1.bundle_id=a;return this};a.prototype.setCallID=function(a){this.$1.call_id=a;return this};a.prototype.setConferenceName=function(a){this.$1.conference_name=a;return this};a.prototype.setOsBuildNumber=function(a){this.$1.os_build_number=a;return this};a.prototype.setPeerID=function(a){this.$1.peer_id=a;return this};a.prototype.setRadioType=function(a){this.$1.radio_type=a;return this};a.prototype.setRawClientTime=function(a){this.$1.raw_client_time=a;return this};a.prototype.setRtcExpressionAction=function(a){this.$1.rtc_expression_action=a;return this};a.prototype.setRtcExpressionDuration=function(a){this.$1.rtc_expression_duration=a;return this};a.prototype.setRtcExpressionID=function(a){this.$1.rtc_expression_id=a;return this};a.prototype.setRtcExpressionIntent=function(a){this.$1.rtc_expression_intent=a;return this};a.prototype.setRtcExpressionName=function(a){this.$1.rtc_expression_name=a;return this};a.prototype.setRtcExpressionParticipantCount=function(a){this.$1.rtc_expression_participant_count=a;return this};a.prototype.setRtcExpressionType=function(a){this.$1.rtc_expression_type=a;return this};a.prototype.setSamplingFrequency=function(a){this.$1.sampling_frequency=a;return this};c={auth_flag:!0,bundle_id:!0,call_id:!0,conference_name:!0,os_build_number:!0,peer_id:!0,radio_type:!0,raw_client_time:!0,rtc_expression_action:!0,rtc_expression_duration:!0,rtc_expression_id:!0,rtc_expression_intent:!0,rtc_expression_name:!0,rtc_expression_participant_count:!0,rtc_expression_type:!0,sampling_frequency:!0};e.exports=a}),null);
__d("RTCExpressionWWWLogger",["invariant","FBRTCConsoleLogger","FBRTCParticipantCallState","RTCCallStoreState","RTCExpressionAction","RtcExpressionWWWTypedLogger","immutable","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").Map;function a(){this.$1=h()}a.prototype.logStartTimer=function(event){var a=b("performanceNow")(),c=event.rtcExpressionIntent;this.$1=this.$1.set(c,a);event.rtcExpressionAction=b("RTCExpressionAction").ENABLED;this.logEvent(event);this.$2(c,{startTime:a})};a.prototype.$3=function(a){var c=this.$1.get(a);c||g(0,2586);this.$1=this.$1.remove(a);return parseInt(b("performanceNow")()-c,10)};a.prototype.logStopTimer=function(event){var a=event.rtcExpressionIntent;a=this.$3(a);event.rtcExpressionDuration=a;event.rtcExpressionAction=b("RTCExpressionAction").DISABLED;this.logEvent(event);return a};a.prototype.logEvent=function(event){var a=new(b("RtcExpressionWWWTypedLogger"))().setCallID(event.callID||123).setConferenceName(event.conferenceName).setPeerID(event.peerID).setRawClientTime(b("performanceNow")()).setRtcExpressionAction(event.rtcExpressionAction).setRtcExpressionDuration(event.rtcExpressionDuration).setRtcExpressionID(event.rtcExpressionId).setRtcExpressionIntent(event.rtcExpressionIntent).setRtcExpressionName(event.rtcExpressionName).setRtcExpressionParticipantCount(event.rtcExpressionParticipantCount).setRtcExpressionType(event.rtcExpressionType),c=a.getData();this.$2(event.rtcExpressionName,c);a.log()};a.prototype.getExpressionLoggerInfoFromStore=function(a){var c=a.callInfo,d=c.callID;c=c.conferenceName;a=a.remoteUsers;a=a.filter(function(a){return a.getParticipantState()===b("FBRTCParticipantCallState").CONNECTED}).size+1;return{callID:d,conferenceName:c,rtcExpressionParticipantCount:a}};a.prototype.$2=function(a,b){};e.exports=new a()}),null);
__d("RTCCoExperienceReducer",["RTCCallActionTypes","RTCCallStore","RTCCoExperienceActionTypes","RTCCoExperienceStore","RTCExpressionIntent","RTCExpressionWWWLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){switch(c.type){case b("RTCCoExperienceActionTypes").TOGGLE_CHAT_WINDOW:c=b("RTCExpressionWWWLogger").getExpressionLoggerInfoFromStore(b("RTCCallStore").getState());a.chatWindowVisible?b("RTCExpressionWWWLogger").logStopTimer(babelHelpers["extends"]({},c,{rtcExpressionName:"chat",rtcExpressionIntent:b("RTCExpressionIntent").CHAT})):b("RTCExpressionWWWLogger").logStartTimer(babelHelpers["extends"]({},c,{rtcExpressionName:"chat",rtcExpressionIntent:b("RTCExpressionIntent").CHAT}));return a.set("chatWindowVisible",!a.chatWindowVisible);default:return a}}function c(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").HANGUP:case b("RTCCallActionTypes").END_CALL:case b("RTCCallActionTypes").HANGUP_ERROR:case b("RTCCallActionTypes").HANGUP_SUCCESS:case b("RTCCoExperienceActionTypes").SET_FILTER:var d=b("RTCExpressionWWWLogger").getExpressionLoggerInfoFromStore(b("RTCCallStore").getState()),e=a.currentVideoFilter,f=a.videoFilterHistory;if(e){var g=b("RTCExpressionWWWLogger").logStopTimer(babelHelpers["extends"]({},d,{rtcExpressionName:e,rtcExpressionIntent:b("RTCExpressionIntent").EFFECT})),h=f.get(e)||0;f=f.set(e,h+g);b("RTCCoExperienceStore").logCoExperienceDurationToSummary(f)}c.filter&&b("RTCExpressionWWWLogger").logStartTimer(babelHelpers["extends"]({},d,{rtcExpressionName:c.filter,rtcExpressionIntent:b("RTCExpressionIntent").EFFECT}));return a.set("currentVideoFilter",c.filter).set("videoFilterHistory",f);default:return a}}e.exports={processChatWindowToggle:a,processSetVideoFilter:c}}),null);
__d("RTCAppDispatcher",["ExplicitRegistrationDispatcher","objectValues"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationDispatcher"));g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}a.prototype.explicitlyRegisterStoresInMap=function(a){"use strict";this.explicitlyRegisterStores(b("objectValues")(a))};e.exports=new a({strict:!0})}),null);
__d("RTCCallStore",["FBRTCCallSummaryReducer","FBRTCCallSummaryStore","FluxReduceStore","RTCAppDispatcher","RTCCallReducer","RTCCallStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("FBRTCCallSummaryReducer").onCallEnded,b("FBRTCCallSummaryReducer").onCallStarted,b("FBRTCCallSummaryReducer").onMessageSignaling,b("FBRTCCallSummaryReducer").onSurveyResult,b("FBRTCCallSummaryReducer").setCallSummary,b("RTCCallReducer").abortMultiwayEscalationProcess,b("RTCCallReducer").callEnd,b("RTCCallReducer").callInit,b("RTCCallReducer").callStart,b("RTCCallReducer").completeTransitionToMultiway,b("RTCCallReducer").incomingCallStart,b("RTCCallReducer").onParticipantsChanged,b("RTCCallReducer").processConferenceState,b("RTCCallReducer").processJoinResponse,b("RTCCallReducer").processLocalScreenStream,b("RTCCallReducer").processLocalStream,b("RTCCallReducer").processRemoteScreenStream,b("RTCCallReducer").processRemoteStream,b("RTCCallReducer").processRemoteTrack,b("RTCCallReducer").processUsers,b("RTCCallReducer").toggleLocalStream,b("RTCCallReducer").toggleRemoteStream,b("RTCCallReducer").waitForUserInput];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("RTCCallStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.prototype.hasRemoteVideo=function(){return this.getState().remoteUsers.some(function(a){return a.hasStream()&&!a.areAllTracksMuted(a.streams.first().getVideoTracks())})};a.prototype.hasLocalVideo=function(){var a=this.getState();a=a.localUser;return a.hasStream()&&!a.areAllTracksMuted(a.streams.first().getVideoTracks())};a.prototype.getConnection=function(a){var b=this.getState();b=b.connections;a&&(b=b.filter(function(b){return b.getSignalingProtocol()===a}));return b.first()};a.prototype.mutateCallSummary=function(a){var c=this.getState();c=c.callSummary;a(c);c.save(b("FBRTCCallSummaryStore").getInstance())};a.prototype.getSortedRemoteUsers=function(){return this.getState().remoteUsers.toList().sort(function(a,b){return a.lastConnectedAt===b.lastConnectedAt?a.FBID>b.FBID?1:-1:a.lastConnectedAt-b.lastConnectedAt})};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCCoExperienceStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={chatWindowVisible:!1,currentVideoFilter:null,videoFilterHistory:b("immutable").Map()};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("RTCCoExperienceStore",["FBRTCCallSummaryStore","FluxReduceStore","RTCAppDispatcher","RTCCallStore","RTCCoExperienceReducer","RTCCoExperienceStoreState","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("RTCCoExperienceReducer").processChatWindowToggle,b("RTCCoExperienceReducer").processSetVideoFilter];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("RTCCoExperienceStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.prototype.logCoExperienceDurationToSummary=function(a){var c=b("RTCCallStore").getState();c=c.callSummary;c.setEffectCount(a.size);var d=0;a.reduce(function(a,b){d+=b},0);c.setTotalVideoFilterDuration(d);c.setCoExperienceEffectDuration(d);c.save(b("FBRTCCallSummaryStore").getInstance())};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCCoExperienceActions",["RTCAppDispatcher","RTCCoExperienceActionTypes"],(function(a,b,c,d,e,f){"use strict";a={toggleChatWindow:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCoExperienceActionTypes").TOGGLE_CHAT_WINDOW})},setVideoFilter:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCoExperienceActionTypes").SET_FILTER,filter:a})},removeVideoFilter:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCoExperienceActionTypes").SET_FILTER,filter:null})}};e.exports=a}),null);
__d("RTCVideoFilterRenderer",["invariant","FBRTCUtils","RTCCallStore","RTCCoExperienceActions","RTCCoExperienceStore","RTCVideoFilterConfig"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCUtils").attachMediaStream,i=b("RTCVideoFilterConfig").config,j=30;k.initStreamForFilters=function(a){a=k.initFilters(a);return a};k.applyStreamEffect=function(a){k.createEffectElement(a),b("RTCCoExperienceActions").setVideoFilter(a),k.applyFilters()};k.removeStreamEffect=function(){b("RTCCoExperienceActions").removeVideoFilter(),k.applyFilters()};k.initCanvas=function(a){__p&&__p();var b=document.createElement("canvas"),c=document.createElement("video");b.className="filteredCanvas";c.className="filteredVideo";h(c,a);c.muted=!0;c.play();b.width=a.getVideoTracks()[0].getSettings().width;b.height=a.getVideoTracks()[0].getSettings().height;a=document;a=a.body;a!=null||g(0,2402);a.append(b);a.append(c);return{cvs:b,vid:c}};k.initFilters=function(a){__p&&__p();var b;!document.querySelector("canvas.filteredCanvas")||!document.querySelector("video.filteredVideo")?b=k.initCanvas(a).cvs:b=document.querySelector("canvas.filteredCanvas");if(b===null)return a;b=b.captureStream(j).getVideoTracks()[0];if(!b)return a;k.startApplyingFilters(a);var c=new MediaStream([a.getAudioTracks()[0],b]);b.addEventListener("ended",function(b){a.getVideoTracks().forEach(function(a){a.readyState!=="ended"&&a.stop()})});return c};k.startApplyingFilters=function(a){if(window.MediaRecorder!==undefined){a=new MediaRecorder(a);a.ondataavailable=k.applyFilters;a.start(Math.floor(1e3/j))}else{a=function a(){k.applyFilters(),requestAnimationFrame(a)};a()}};k.applyFilters=function(){__p&&__p();var a=b("RTCCallStore").getState().localUser.isVideoMuted(),c=document.querySelector("canvas.filteredCanvas"),d=document.querySelector("video.filteredVideo");if(a||c==null||d==null)return;a=d.videoWidth;var e=d.videoHeight;if(a>0&&e>0){c=c.getContext("2d");c.drawImage(d,0,0,a,e);d=b("RTCCoExperienceStore").getState().currentVideoFilter;if(d){d=document.querySelector("video."+(d?d:""));c.drawImage(d,0,0,a,e)}else if(window.native_bindings&&window.enable_native_filter_demo){d=c.getImageData(0,0,a,e);window.native_bindings.process_frame(d.data,a,e,120);c.putImageData(d,0,0)}}};k.createEffectElement=function(a){__p&&__p();if(document.querySelector("video."+a))return null;var b=document.createElement("video");b.className=a;b.crossOrigin="anonymous";b.src=i[a].video_url;b.play();b.autoplay=!0;b.loop=!0;a=document;a=a.body;a!=null||g(0,2402);a.append(b);return b};function k(){}e.exports=k}),null);
__d("FBRTCVersionDetection",["UserAgent","UserAgentData"],(function(a,b,c,d,e,f){__p&&__p();a={isChrome:function(){return b("UserAgent").isBrowser("Chrome")},isFirefox:function(){return b("UserAgent").isBrowser("Firefox")},isChromium:function(){return!!navigator.webkitGetUserMedia},webrtcVersion:function(){if(this.isFirefox()||this.isChrome())return b("UserAgentData").browserVersion||0;if(this.isChromium()){var a=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return a!=null?parseInt(a[2],10):999}return 0}};e.exports=a}),null);
__d("FBRTCScreenSharingUtils",["FBRTCExperiment","FBRTCExperimentName","FBRTCSupport","FBRTCVersionDetection","RTCConfig","RTCUtils"],(function(a,b,c,d,e,f){"use strict";a={isGroupCallScreenSharingSupported:function(){return b("RTCConfig").ScreenSharingToGroupGK},isSupportedBrowser:function(){return b("FBRTCVersionDetection").isChrome()&&b("FBRTCVersionDetection").webrtcVersion()>=34},canUserReceiveScreenSharing:function(){return!b("FBRTCSupport").isMobileDevice()&&(b("FBRTCVersionDetection").isChromium()&&b("FBRTCVersionDetection").webrtcVersion()>=34||b("RTCUtils").isVCScreenSharingSupported())},canPeerReceiveScreenSharing:function(a){if(a.remoteSupport("screen_sharing"))return!0;return!a.remoteSupport("www")&&!a.remoteSupport("mweb")?b("RTCConfig").ScreenSharingToMobileGK?!0:b("FBRTCExperiment").gen(b("FBRTCExperimentName").ENABLE_SCREEN_SHARING).getBool("can_share_to_mobile",!1):!1}};e.exports=a}),null);
__d("VFWebLocalStorage",["WebStorage","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=1e3*60*5,h="vfweb_session_id",i="vfweb_session_activity_time",j="vfweb_device_id";function a(){this.$1=this.$3()||this.$4(),this.$2=this.$5()}a.prototype.$4=function(){var a={sessionID:b("uuid")(),lastSessionActivityTime:Date.now()},c=b("WebStorage").getSessionStorage();c&&(c.setItem(h,a.sessionID),c.setItem(i,String(a.lastSessionActivityTime)));return a};a.prototype.$5=function(){var a=b("WebStorage").getLocalStorage(),c=a&&a.getItem(j);if(typeof c==="string")return c;else{c=b("uuid")().toUpperCase();a&&a.setItem(j,c);return c}};a.prototype.$3=function(){var a=b("WebStorage").getSessionStorageForRead(),c=a&&a.getItem(h);a=a&&Number(a.getItem(i));return typeof c==="string"&&a?{sessionID:c,lastSessionActivityTime:a}:null};a.prototype.$6=function(){var a=Date.now(),c=b("WebStorage").getSessionStorage(),d=a-g;if(this.$1.lastSessionActivityTime<d)return this.$4().sessionID;else{this.$1.lastSessionActivityTime=a;c&&c.setItem(i,String(a));return this.$1.sessionID}};a.prototype.getSessionID=function(){return this.$6()};a.prototype.getDeviceID=function(){return this.$2};e.exports=new a()}),null);
__d("VFDesktopHelper",["regeneratorRuntime","VFWebLocalStorage"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={isDesktopApp:function(){return window.messengervideo!==undefined},injectBridge:function(a){if(window.messengervideo===undefined)return;if(typeof window.messengervideo.injectBridge!=="function")return;window.messengervideo.injectBridge(a)},getDeviceID:function(){return g.isDesktopApp()&&typeof window.messengervideo.getDeviceID==="function"?window.messengervideo.getDeviceID():b("VFWebLocalStorage").getDeviceID()},getSessionID:function(){return g.isDesktopApp()&&typeof window.messengervideo.getSessionID==="function"?window.messengervideo.getSessionID():b("VFWebLocalStorage").getSessionID()},getScreenSharingSourceID:function(){return window.messengervideo.getScreenSharingSourceID()},stopScreenSharing:function(){return window.messengervideo.stopScreenSharing()},restoreFromMiniView:function(){window.messengervideo!==undefined&&window.messengervideo.restoreFromMiniView()},getOpenAtLogin:function(){return window.messengervideo.getOpenAtLogin()},setOpenAtLogin:function(a){g.isDesktopApp()&&window.messengervideo.setOpenAtLogin(a)},openContextMenu:function(a){if(g.isDesktopApp()){a=a.map(function(a){var b=a.label;a=babelHelpers.objectWithoutProperties(a,["label"]);return babelHelpers["extends"]({},a,{label:b.toString()})});window.messengervideo.openContextMenu(a)}},showIncomingCallDialog:function(a,c,d,e){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:return b.abrupt("return",window.messengervideo.showIncomingCallDialog(a,c,d,e));case 1:case"end":return b.stop()}},null,this)},dismissIncomingCallDialog:function(){window.messengervideo.dismissIncomingCallDialog()},showMissedCallDialog:function(a){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:return b.abrupt("return",window.messengervideo.showMissedCallDialog(a));case 1:case"end":return b.stop()}},null,this)},dismissMissedCallDialog:function(){window.messengervideo.dismissMissedCallDialog()},hideSplash:function(){g.isDesktopApp()&&window.messengervideo.hideSplash!==undefined&&window.messengervideo.hideSplash()},hideSplashAfterLoad:function(){window.addEventListener("load",this.hideSplash)}};e.exports=g}),null);
__d("RTCScreenSharing",["Promise","CollabRTCChromeScreenSharing","RTCUserMediaConstraints","RTCUtils","UserAgent","VFDesktopHelper","WorkplaceChatHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="SCREEN_SHARING_NOT_SUPPORTED",h="UNEXPECTED_ERROR",i={SCREEN_SHARING_NOT_SUPPORTED:g,getUserMedia:function(a,c,d){__p&&__p();if(b("UserAgent").isBrowser("Chrome")){var e;b("WorkplaceChatHelper").isDesktopChatApp()?e=b("WorkplaceChatHelper").getScreenSharingSourceID():b("VFDesktopHelper").isDesktopApp()?e=b("VFDesktopHelper").getScreenSharingSourceID():e=b("CollabRTCChromeScreenSharing").getSourceID(d,c);return e.then(function(c){return b("RTCUtils").getUserMedia(b("RTCUserMediaConstraints").chromeMediaSource(a,c))}).then(function(a){__p&&__p();for(var b=a.getTracks(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.addEventListener("ended",function(b){return window.setTimeout(function(){a.active||i.stop()})})}return a})}else if(b("RTCUtils").isVCScreenSharingSupported()&&navigator.mediaDevices&&typeof navigator.mediaDevices.getUserMedia==="function")return b("Promise").resolve(navigator.mediaDevices.getUserMedia(a)["catch"](function(a){if(a.name==="NotAllowedError")throw new Error(g)}));return b("Promise").reject(new Error(g))},stop:function(){if(b("UserAgent").isBrowser("Chrome")){if(b("WorkplaceChatHelper").isDesktopChatApp())return b("WorkplaceChatHelper").stopScreenSharing();return b("VFDesktopHelper").isDesktopApp()?b("VFDesktopHelper").stopScreenSharing():b("CollabRTCChromeScreenSharing").stop()}return b("Promise").reject(new Error(h))}};e.exports=i}),null);
__d("FBRTCMediaStatsReport",["FBRTCStatsHelpers"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return}a.prototype.parseStatString=function(a,b){return a&&a[b]!=null&&a[b]!==""?a[b]:null};a.prototype.parseMediaStat=function(a,b){return a&&a[b]!=null&&a[b]!==""?Number(a[b]):null};a.prototype.getAccelerateRate=function(a){return null};a.prototype.getAudioBytesReceived=function(a){return null};a.prototype.getAudioBytesSent=function(a){return null};a.prototype.getAudioDecodingCNG=function(a){return null};a.prototype.getAudioDecodingNormal=function(a){return null};a.prototype.getAudioDecodingPLC=function(a){return null};a.prototype.getAudioDecodingPLCCNG=function(a){return null};a.prototype.getAudioJitter=function(a){return null};a.prototype.getAudioPacketsReceived=function(a){return null};a.prototype.getAudioPacketsReceivedLost=function(a){return null};a.prototype.getAudioPacketsSent=function(a){return null};a.prototype.getAudioPacketsSentLost=function(a){return null};a.prototype.getAudioReceivedRtt=function(a){return null};a.prototype.getAudioRecvKeys=function(){return[]};a.prototype.getAudioSendCodec=function(a){return null};a.prototype.getAudioSendKeys=function(){return[]};a.prototype.getAudioSendRtt=function(a){return null};a.prototype.getConnectionType=function(){return b("FBRTCStatsHelpers").UNKNOWN_CONNECTION};a.prototype.getDiscardRate=function(a){return null};a.prototype.getExpandRate=function(a){return null};a.prototype.getFramesDecoded=function(a){return null};a.prototype.getFramesEncoded=function(a){return null};a.prototype.getInboundQpSum=function(a){return null};a.prototype.getJitterBufferDelay=function(a){return null};a.prototype.getOutboundQpSum=function(a){return null};a.prototype.getPreemptiveExpandRate=function(a){return null};a.prototype.getVideoBweKeys=function(){return[]};a.prototype.getVideoBweRetransmitBitrate=function(a){return null};a.prototype.getVideoBweSendBandwidth=function(a){return null};a.prototype.getVideoBweTransmitBitrate=function(a){return null};a.prototype.getVideoBytesReceived=function(a){return null};a.prototype.getVideoBytesSent=function(a){return null};a.prototype.getVideoFrameHeightReceived=function(a){return null};a.prototype.getVideoFrameHeightSent=function(a){return null};a.prototype.getVideoFrameRateReceived=function(a){return null};a.prototype.getVideoFrameRateSent=function(a){return null};a.prototype.getVideoFrameWidthReceived=function(a){return null};a.prototype.getVideoFrameWidthSent=function(a){return null};a.prototype.getVideoPacketsReceived=function(a){return null};a.prototype.getVideoPacketsReceivedLost=function(a){return null};a.prototype.getVideoPacketsSent=function(a){return null};a.prototype.getVideoPacketsSentLost=function(a){return null};a.prototype.getVideoRecvCodec=function(a){return null};a.prototype.getVideoRecvCodecImplementationName=function(a){return null};a.prototype.getVideoRecvKeys=function(){return[]};a.prototype.getVideoSendCodec=function(a){return null};a.prototype.getVideoSendCodecImplementationName=function(a){return null};a.prototype.getVideoSendKeys=function(){return[]};a.prototype.getVideoSentRtt=function(a){return null};a.prototype.getVideoRecvCodecForConnection=function(){var a=null;this.getVideoRecvKeys().forEach(function(b){var c=this.getVideoRecvCodec(b);b=this.getVideoRecvCodecImplementationName(b);c!=null&&c!==""&&b!=null&&b!==""&&(a=c+b)}.bind(this));return a};a.prototype.getVideoSendCodecForConnection=function(){var a=null;this.getVideoSendKeys().forEach(function(b){var c=this.getVideoSendCodec(b);b=this.getVideoSendCodecImplementationName(b);c!=null&&c!==""&&b!=null&&b!==""&&(a=c+b)}.bind(this));return a};a.prototype.getAudioSendCodecForConnection=function(){var a=null;this.getAudioSendKeys().forEach(function(b){b=this.getAudioSendCodec(b);b!=null&&b!==""&&(a=b)}.bind(this));return a};e.exports=a}),null);
__d("FBRTCChromeMediaStatsReport",["FBRTCMediaStatsReport","FBRTCStatsHelpers"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FBRTCMediaStatsReport"));g=c&&c.prototype;function a(a){__p&&__p();g.constructor.call(this,a);this.$FBRTCChromeMediaStatsReport1={};this.$FBRTCChromeMediaStatsReport2={};this.$FBRTCChromeMediaStatsReport3={};this.$FBRTCChromeMediaStatsReport4={};this.$FBRTCChromeMediaStatsReport5={};this.$FBRTCChromeMediaStatsReport6=[];if(a)for(var a=a.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.type==="ssrc"&&d.audioOutputLevel!=null&&d.audioOutputLevel!==""?this.$FBRTCChromeMediaStatsReport1[d.id]=d:d.type==="ssrc"&&d.audioInputLevel!=null&&d.audioInputLevel!==""?this.$FBRTCChromeMediaStatsReport2[d.id]=d:d.type==="ssrc"&&d.mediaType==="video"?d.bytesReceived!=null?this.$FBRTCChromeMediaStatsReport3[d.id]=d:this.$FBRTCChromeMediaStatsReport4[d.id]=d:d.type==="VideoBwe"?this.$FBRTCChromeMediaStatsReport5[d.id]=d:d.type==="googCandidatePair"&&d.googActiveConnection!==null&&d.googActiveConnection==="true"&&this.$FBRTCChromeMediaStatsReport6.push(d)}}a.prototype.getAudioSendKeys=function(){return Object.keys(this.$FBRTCChromeMediaStatsReport2)};a.prototype.getAudioRecvKeys=function(){return Object.keys(this.$FBRTCChromeMediaStatsReport1)};a.prototype.getVideoRecvKeys=function(){return Object.keys(this.$FBRTCChromeMediaStatsReport3)};a.prototype.getVideoSendKeys=function(){return Object.keys(this.$FBRTCChromeMediaStatsReport4)};a.prototype.getVideoBweKeys=function(){return Object.keys(this.$FBRTCChromeMediaStatsReport5)};a.prototype.getAudioBytesSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport2[a],"bytesSent")};a.prototype.getAudioDecodingPLC=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googDecodingPLC")};a.prototype.getAudioDecodingPLCCNG=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googDecodingPLCCNG")};a.prototype.getAudioDecodingCNG=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googDecodingCNG")};a.prototype.getAudioDecodingNormal=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googDecodingNormal")};a.prototype.getAudioPacketsSentLost=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport2[a],"packetsLost")};a.prototype.getAudioPacketsSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport2[a],"packetsSent")};a.prototype.getAudioSendCodec=function(a){return this.parseStatString(this.$FBRTCChromeMediaStatsReport2[a],"googCodecName")};a.prototype.getAudioSendRtt=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport2[a],"googRtt")};a.prototype.getAudioBytesReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"bytesReceived")};a.prototype.getAudioPacketsReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"packetsReceived")};a.prototype.getAudioPacketsReceivedLost=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"packetsLost")};a.prototype.getAudioReceivedRtt=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googRtt")};a.prototype.getVideoBytesReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"bytesReceived")};a.prototype.getVideoPacketsReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"packetsReceived")};a.prototype.getVideoPacketsReceivedLost=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"packetsLost")};a.prototype.getFramesDecoded=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"framesDecoded")};a.prototype.getInboundQpSum=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"qpSum")};a.prototype.getVideoFrameHeightReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"googFrameHeightReceived")};a.prototype.getVideoFrameRateReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"googFrameRateReceived")};a.prototype.getVideoFrameWidthReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"googFrameWidthReceived")};a.prototype.getFramesEncoded=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"framesEncoded")};a.prototype.getVideoBytesSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"bytesSent")};a.prototype.getVideoFrameHeightSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"googFrameHeightSent")};a.prototype.getVideoFrameRateSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"googFrameRateSent")};a.prototype.getVideoFrameWidthSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"googFrameWidthSent")};a.prototype.getVideoPacketsSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"packetsSent")};a.prototype.getVideoPacketsSentLost=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"packetsLost")};a.prototype.getVideoSentRtt=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"googRtt")};a.prototype.getOutboundQpSum=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"qpSum")};a.prototype.getAudioJitter=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googJitterReceived")};a.prototype.getJitterBufferDelay=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googCurrentDelayMs")};a.prototype.getAccelerateRate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googAccelerateRate")};a.prototype.getPreemptiveExpandRate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googPreemptiveExpandRate")};a.prototype.getExpandRate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googExpandRate")};a.prototype.getDiscardRate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googSecondaryDiscardedRate")};a.prototype.getVideoBweRetransmitBitrate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport5[a],"googRetransmitBitrate")};a.prototype.getVideoBweSendBandwidth=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport5[a],"googAvailableSendBandwidth")};a.prototype.getVideoBweTransmitBitrate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport5[a],"googTransmitBitrate")};a.prototype.getVideoRecvCodec=function(a){return this.parseStatString(this.$FBRTCChromeMediaStatsReport3[a],"googCodecName")};a.prototype.getVideoRecvCodecImplementationName=function(a){return this.parseStatString(this.$FBRTCChromeMediaStatsReport3[a],"codecImplementationName")};a.prototype.getVideoSendCodec=function(a){return this.parseStatString(this.$FBRTCChromeMediaStatsReport4[a],"googCodecName")};a.prototype.getVideoSendCodecImplementationName=function(a){return this.parseStatString(this.$FBRTCChromeMediaStatsReport4[a],"codecImplementationName")};a.prototype.getConnectionType=function(){var a=null;this.$FBRTCChromeMediaStatsReport6.some(function(c){a=b("FBRTCStatsHelpers").connectionType(this.parseStatString(c,"googLocalCandidateType"),this.parseStatString(c,"googTransportType"),this.parseStatString(c,"googRemoteCandidateType"),this.parseStatString(c,"googTransportType"));return a!==null}.bind(this));if(a!==null)return a;else return b("FBRTCStatsHelpers").UNKNOWN_CONNECTION};e.exports=a}),null);
__d("FBRTCMozMediaStatsReport",["FBRTCMediaStatsReport","FBRTCStatsHelpers"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FBRTCMediaStatsReport"));g=c&&c.prototype;function a(a){__p&&__p();g.constructor.call(this,a);this.$FBRTCMozMediaStatsReport1={};this.$FBRTCMozMediaStatsReport2={};this.$FBRTCMozMediaStatsReport3={};this.$FBRTCMozMediaStatsReport4={};this.$FBRTCMozMediaStatsReport5={};this.$FBRTCMozMediaStatsReport6={};for(var a=a.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.type==="inbound-rtp"&&d.mediaType==="audio"&&d.isRemote===!1?this.$FBRTCMozMediaStatsReport1[d.id]=d:d.type==="outbound-rtp"&&d.mediaType==="audio"&&d.isRemote===!1?this.$FBRTCMozMediaStatsReport2[d.id]=d:d.type==="inbound-rtp"&&d.mediaType==="video"&&d.isRemote===!1?this.$FBRTCMozMediaStatsReport3[d.id]=d:d.type==="outbound-rtp"&&d.mediaType==="video"&&d.isRemote===!1?this.$FBRTCMozMediaStatsReport4[d.id]=d:d.type==="candidate-pair"&&d.state==="succeeded"?this.$FBRTCMozMediaStatsReport6[d.id]=d:(d.type==="local-candidate"||d.type==="remote-candidate")&&(this.$FBRTCMozMediaStatsReport5[d.id]=d)}}a.prototype.getAudioSendKeys=function(){return Object.keys(this.$FBRTCMozMediaStatsReport2)};a.prototype.getAudioRecvKeys=function(){return Object.keys(this.$FBRTCMozMediaStatsReport1)};a.prototype.getVideoRecvKeys=function(){return Object.keys(this.$FBRTCMozMediaStatsReport3)};a.prototype.getVideoSendKeys=function(){return Object.keys(this.$FBRTCMozMediaStatsReport4)};a.prototype.getAudioBytesSent=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport2[a],"bytesSent")};a.prototype.getAudioPacketsSent=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport2[a],"packetsSent")};a.prototype.getAudioBytesReceived=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"bytesReceived")};a.prototype.getAudioPacketsReceived=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"packetsReceived")};a.prototype.getAudioPacketsReceivedLost=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"packetsLost")};a.prototype.getAudioReceivedRtt=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"roundTripTime")};a.prototype.getFramesDecoded=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport3[a],"framesDecoded")};a.prototype.getFramesEncoded=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport4[a],"framesEncoded")};a.prototype.getVideoBytesReceived=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport3[a],"bytesReceived")};a.prototype.getVideoFrameRateReceived=function(a){var b=this.getFramesDecoded(a);return b==null||b===0?null:this.parseMediaStat(this.$FBRTCMozMediaStatsReport3[a],"framerateMean")};a.prototype.getVideoPacketsReceived=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport3[a],"packetsReceived")};a.prototype.getVideoPacketsReceivedLost=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport3[a],"packetsLost")};a.prototype.getVideoBytesSent=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport4[a],"bytesSent")};a.prototype.getVideoFrameRateSent=function(a){var b=this.getFramesEncoded(a);return b==null||b===0?null:this.parseMediaStat(this.$FBRTCMozMediaStatsReport4[a],"framerateMean")};a.prototype.getVideoPacketsSent=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport4[a],"packetsSent")};a.prototype.getAudioJitter=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"jitter")};a.prototype.getJitterBufferDelay=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"mozJitterBufferDelay")};a.prototype.getConnectionType=function(){__p&&__p();var a=null;Object.keys(this.$FBRTCMozMediaStatsReport6).forEach(function(c){c=this.$FBRTCMozMediaStatsReport6[c];var d=this.parseStatString(c,"localCandidateId");c=this.parseStatString(c,"remoteCandidateId");d!==undefined&&d!==null&&c!==undefined&&c!==null&&(a=b("FBRTCStatsHelpers").connectionType(this.parseStatString(this.$FBRTCMozMediaStatsReport5[d],"candidateType"),this.parseStatString(this.$FBRTCMozMediaStatsReport5[d],"transport"),this.parseStatString(this.$FBRTCMozMediaStatsReport5[c],"candidateType"),this.parseStatString(this.$FBRTCMozMediaStatsReport5[c],"transport")));return a!==null}.bind(this));if(a!==null)return a;else return b("FBRTCStatsHelpers").UNKNOWN_CONNECTION};e.exports=a}),null);
__d("RTCWebMediaLoggingStreamsTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({VIDEO:"video",AUDIO:"audio"})}),null);
__d("RTCWebMediaStreamsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:RTCWebMediaStreamsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:RTCWebMediaStreamsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RTCWebMediaStreamsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setBytes=function(a){this.$1.bytes=a;return this};a.prototype.setCallID=function(a){this.$1.call_id=a;return this};a.prototype.setCallType=function(a){this.$1.call_type=a;return this};a.prototype.setConferenceName=function(a){this.$1.conference_name=a;return this};a.prototype.setFrameHeight=function(a){this.$1.frame_height=a;return this};a.prototype.setFrameWidth=function(a){this.$1.frame_width=a;return this};a.prototype.setFrames=function(a){this.$1.frames=a;return this};a.prototype.setFramesPerSecond=function(a){this.$1.frames_per_second=a;return this};a.prototype.setIsLocal=function(a){this.$1.is_local=a;return this};a.prototype.setJitter=function(a){this.$1.jitter=a;return this};a.prototype.setJitterBufferDelay=function(a){this.$1.jitter_buffer_delay=a;return this};a.prototype.setPackets=function(a){this.$1.packets=a;return this};a.prototype.setPacketsLost=function(a){this.$1.packets_lost=a;return this};a.prototype.setQpSum=function(a){this.$1.qp_sum=a;return this};a.prototype.setRtt=function(a){this.$1.rtt=a;return this};a.prototype.setStreamID=function(a){this.$1.stream_id=a;return this};a.prototype.setStreamType=function(a){this.$1.stream_type=a;return this};a.prototype.setTimeElapsed=function(a){this.$1.time_elapsed=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={bytes:!0,call_id:!0,call_type:!0,conference_name:!0,frame_height:!0,frame_width:!0,frames:!0,frames_per_second:!0,is_local:!0,jitter:!0,jitter_buffer_delay:!0,packets:!0,packets_lost:!0,qp_sum:!0,rtt:!0,stream_id:!0,stream_type:!0,time_elapsed:!0,vc:!0};e.exports=a}),null);
__d("FBRTCMediaMetricParser",["FBRTCChromeMediaStatsReport","FBRTCConstants","FBRTCLogger","FBRTCMediaMetricsConst","FBRTCMozMediaStatsReport","RTCCallStore","RTCConferenceState","RTCWebMediaLoggingStreamsTypes","RTCWebMediaStreamsTypedLogger","RTWebLoggingCallType","UserAgent","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").SignalingProtocol;function h(){if(b("gkx")("678354")){var a=b("RTCCallStore").getState(),c=a.callInfo;a=a.callSummary;return new(b("RTCWebMediaStreamsTypedLogger"))().setCallID(c.callID).setTimeElapsed(a.getCurrentTimeFromCallConnected()).setConferenceName(c.conferenceName).setCallType(c.protocol===g.MULTIWAY?b("RTWebLoggingCallType").MW:b("RTWebLoggingCallType").P2P)}return null}function i(a,c){a.getVideoSendKeys().forEach(function(d){var e=a.getOutboundQpSum(d),f=a.getFramesEncoded(d),g=a.getVideoBytesSent(d),i=a.getVideoPacketsSent(d),j=a.getVideoPacketsSentLost(d);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").OUTBOUND_QP,e);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").FRAMES_ENCODED,f);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_BYTES_SENT,g);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_PKTS_SENT,i);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_PKTS_SEND_LOST,j);var k=h();k&&k.setIsLocal(!0).setStreamType(b("RTCWebMediaLoggingStreamsTypes").VIDEO).setStreamID(d).setFrames(f).setQpSum(e).setBytes(g).setPackets(i).setPacketsLost(j).setFrameHeight(a.getVideoFrameHeightSent(d)).setFramesPerSecond(a.getVideoFrameRateSent(d)).setFrameWidth(a.getVideoFrameWidthSent(d)).log()})}function j(a,c){a.getVideoBweKeys().forEach(function(d){var e=a.getVideoBweSendBandwidth(d),f=a.getVideoBweTransmitBitrate(d),g=a.getVideoBweRetransmitBitrate(d);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEOBWE_SEND_BANDWIDTH,e);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEOBWE_TRANSMIT_BITRATE,f);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEOBWE_RETRANSMIT_BITRATE,g);f=h();f&&f.setIsLocal(!0).setStreamType(b("RTCWebMediaLoggingStreamsTypes").VIDEO).setStreamID(d).setBytes(e).log()})}function k(a,c){a.getVideoRecvKeys().forEach(function(d){var e=a.getInboundQpSum(d),f=a.getFramesDecoded(d),g=a.getVideoBytesReceived(d),i=a.getVideoPacketsReceived(d),j=a.getVideoPacketsReceivedLost(d);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_BYTES_RECEIVED,g);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").INBOUND_QP,e);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").FRAMES_DECODED,f);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_PKTS_RECEIVED,i);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_PKTS_RECV_LOST,j);var k=h();k&&k.setIsLocal(!1).setStreamType(b("RTCWebMediaLoggingStreamsTypes").VIDEO).setStreamID(d).setBytes(g).setFrames(f).setQpSum(e).setPackets(i).setPacketsLost(j).setFrameHeight(a.getVideoFrameHeightReceived(d)).setFramesPerSecond(a.getVideoFrameRateReceived(d)).setFrameWidth(a.getVideoFrameWidthReceived(d)).log()})}function l(a,c){a.getAudioSendKeys().forEach(function(d){var e=a.getAudioBytesSent(d),f=a.getAudioPacketsSent(d),g=a.getAudioPacketsSentLost(d),i=a.getAudioSendRtt(d);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_BYTES_SENT,e);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT,f);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT_LOST,g);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_RTT_SENT,i);var j=h();j&&j.setIsLocal(!0).setStreamType(b("RTCWebMediaLoggingStreamsTypes").AUDIO).setStreamID(d).setPackets(f).setBytes(e).setRtt(i).setPacketsLost(g).log()})}function m(a,c){__p&&__p();a.getAudioRecvKeys().forEach(function(d){__p&&__p();var e=a.getJitterBufferDelay(d),f=a.getAudioJitter(d),g=a.getAccelerateRate(d),i=a.getExpandRate(d),j=a.getPreemptiveExpandRate(d),k=a.getDiscardRate(d),l=a.getAudioBytesReceived(d),m=a.getAudioPacketsReceived(d),n=a.getAudioPacketsReceivedLost(d),o=a.getAudioReceivedRtt(d);c.addJitterBufferDelay(d,e);c.addMetricStat(d,b("FBRTCMediaMetricsConst").JITTER,f);c.addMetricStat(d,b("FBRTCMediaMetricsConst").ACCELERATE_RATE,g);c.addMetricStat(d,b("FBRTCMediaMetricsConst").DISCARD_RATE,k);c.addMetricStat(d,b("FBRTCMediaMetricsConst").EXPAND_RATE,i);c.addMetricStat(d,b("FBRTCMediaMetricsConst").PREEMPTIVE_RATE,j);c.addMetricStat(d,b("FBRTCMediaMetricsConst").DECODING_PLC,a.getAudioDecodingPLC(d));c.addMetricStat(d,b("FBRTCMediaMetricsConst").DECODING_CNG,a.getAudioDecodingCNG(d));c.addMetricStat(d,b("FBRTCMediaMetricsConst").DECODING_NORMAL,a.getAudioDecodingNormal(d));c.addMetricStat(d,b("FBRTCMediaMetricsConst").DECODING_PLC_CNG,a.getAudioDecodingPLCCNG(d));c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_BYTES_RECEIVED,l);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED,m);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED_LOST,n);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_RTT_RECEIVED,o);g=h();g&&g.setIsLocal(!1).setStreamType(b("RTCWebMediaLoggingStreamsTypes").AUDIO).setStreamID(d).setJitter(f).setJitterBufferDelay(e).setBytes(l).setPackets(m).setRtt(o).setPacketsLost(n).log()})}var n={parseStats:function(a,c){a.getStats().then(function(a){var d=null;b("UserAgent").isBrowser("Chrome")?d=new(b("FBRTCChromeMediaStatsReport"))(a):b("UserAgent").isBrowser("Firefox")&&(d=new(b("FBRTCMozMediaStatsReport"))(a));d&&n.parseStatsWithReport(d,c)})["catch"](function(a){b("FBRTCLogger").getInstance().logToConsole("error parsing RTCStatsReport")})},parseStatsWithReport:function(a,b){__p&&__p();var c=b.getMediaMetricTracker();m(a,c);l(a,c);k(a,c);i(a,c);j(a,c);b.setConnectionType(a.getConnectionType());c=a.getVideoRecvCodecForConnection();c!=null&&c!==""&&b.setVideoReceivedCodec(c);c=a.getVideoSendCodecForConnection();c!=null&&c!==""&&b.setVideoSentCodec(c);c=a.getAudioSendCodecForConnection();c!=null&&c!==""&&b.setAudioSentCodec(c)},startCollectingMediaStats:function(){var a=b("RTCCallStore").getState().callInfo.conferenceState,c=b("RTCCallStore").getState().callSummary,d=b("RTCCallStore").getState().connections.first();a!==b("RTCConferenceState").TERMINATED&&(d&&n.parseStats(d,c),window.setTimeout(n.startCollectingMediaStats,5e3))}};e.exports=n}),null);
__d("RTCSignalingExperiments",["CurrentUser","FBRTCConfig","FBRTCExperiment","FBRTCExperimentName","FBRTCScreenSharingUtils","FBRTCSupport","FBRTCVersionDetection","UserAgent","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){this.$2=new Set(),this.$1=new Set(g.getLocal()),a&&(this.$2=new Set(a))}g.prototype.getLocal=function(){return Array.from(this.$1)};g.prototype.setRemote=function(a){return!a?this:new g(a)};g.prototype.getRemote=function(){return Array.from(this.$2)};g.prototype.support=function(a){return this.localSupport(a)&&this.remoteSupport(a)};g.prototype.localSupport=function(a){return this.$1.has(a)};g.prototype.remoteSupport=function(a){return this.$2.has(a)};g.getLocal=function(){var a=[];(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera")||b("UserAgent").isBrowser("Firefox >= 38"))&&a.push("sdp_update");h()&&a.push("multiple_streams_plan_b");b("FBRTCScreenSharingUtils").canUserReceiveScreenSharing()&&a.push("screen_sharing");i()&&a.push("multiple_streams_unified");b("FBRTCSupport").isMobileDevice()?a.push("mweb"):a.push("www");b("FBRTCSupport").videoEscalationByUnmuteWorkaround()&&a.push("video_escalation_by_unmute");return a};g.shouldSendDuplicateAck=function(){return b("FBRTCExperiment").gen(b("FBRTCExperimentName").RETRIABLE_MESSAGES).getBool("send_dup_ack",!1)};g.passesRTCWebSignalingHoldOut=function(){return!b("gkx")("692459")};g.shouldCapMWBitrate=function(){return b("FBRTCExperiment").gen(b("FBRTCExperimentName").MW_VIDEO_QUALITY).getBool("cap_bitrate",!1)};g.fixActiveConnLogging=function(){return b("gkx")("718754")};g.shouldPreferIsac=function(){return b("FBRTCConfig").isVCEndpointCall()||b("CurrentUser").isWorkUser()?!0:b("FBRTCExperiment").getMediaQualityExperiments().getBool("prefer_isac",!0)};g.shouldSupportCallCollision=function(){return b("gkx")("716314")};function h(){return(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera"))&&b("FBRTCVersionDetection").webrtcVersion()>=34}function i(){return b("UserAgent").isBrowser("Firefox")&&b("FBRTCVersionDetection").webrtcVersion()>=40}e.exports=g}),null);
__d("XCollabCallSendMessageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/collab/sendmessage/",{recipient_id:{type:"Int",required:!0},msg_id:{type:"Int",required:!0},message_info:{type:"String",required:!0},webrtc_fbtrace:{type:"Int"}})}),null);
__d("XVideoCallSendMessageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/sendmessage/",{recipient_id:{type:"Int",required:!0},msg_id:{type:"Int",required:!0},message_info:{type:"String",required:!0},webrtc_fbtrace:{type:"Int"}})}),null);
__d("generateRTCSignalingMessageID",["randomInt"],(function(a,b,c,d,e,f){"use strict";function a(){return b("randomInt")(0,4294967294)+1}e.exports=a}),null);
__d("FBRTCMessageSender",["errorCode","CurrentUser","FBRTCConfig","FBRTCConstants","FBRTCLocalUploadLogLevel","FBRTCLogger","FBRTCSupport","FBRTCUtils","Fbtrace","PresenceProperties","RTCAppData","RTCSignalingExperiments","SiteData","XCollabCallSendMessageController","XVideoCallSendMessageController","generateRTCSignalingMessageID"],(function(a,b,c,d,e,f,g){__p&&__p();var h=0;function a(){"use strict";this.onSendFailure=null,this.$1=b("FBRTCLogger").getInstance()}a.prototype.sendOffer=function(a,c,d,e,f,g){"use strict";return this.$2(b("FBRTCConstants").PayloadType.OFFER,a,c,d,e,f,null,g)};a.prototype.sendAnswer=function(a,c,d,e,f,g){"use strict";return this.$2(b("FBRTCConstants").PayloadType.ANSWER,a,c,d,e,f,g)};a.prototype.sendPCRestartOffer=function(a,c,d,e,f){"use strict";return this.$2(b("FBRTCConstants").PayloadType.PCRESTART_OFFER,a,c,d,e,f)};a.prototype.sendSdpUpdate=function(a,c,d,e,f){"use strict";return this.$2(b("FBRTCConstants").PayloadType.SDP_UPDATE,a,c,d,e,f)};a.prototype.resendSdpMessage=function(a,b){"use strict";b.flag=1,this.$3(a,b)};a.prototype.resendPayload=function(a,b){"use strict";b.flag=1,this.$4(a,b)};a.prototype.$2=function(a,c,d,e,f,g,h,i){"use strict";__p&&__p();d=this.$5(d,a);d.sdp=e;a===b("FBRTCConstants").PayloadType.OFFER&&(d.browser_supports_escalation=b("FBRTCSupport").isGroupCallWebtrcSupported(),d.handlescollision=!0,d.pranswer=!1,i&&(d.call_trigger=i));a===b("FBRTCConstants").PayloadType.ANSWER&&h&&(d.escalation_conference_name=h.escalationConferenceName,d.negotiated_escalation_support=h.negotiatedEscalationSupport);(a===b("FBRTCConstants").PayloadType.OFFER||a===b("FBRTCConstants").PayloadType.ANSWER||a===b("FBRTCConstants").PayloadType.PCRESTART_OFFER)&&(d.icerestart=!1,d.experiments=b("RTCSignalingExperiments").getLocal());d.videoon=f;d.attributes=g;d.ull=b("FBRTCConstants").convertFromUploadLogLevel(b("FBRTCLocalUploadLogLevel").getLocalUploadLogLevel());this.$3(c,d);return d};a.prototype.sendIceCandidate=function(a,c,d){"use strict";c=this.$5(c,b("FBRTCConstants").PayloadType.ICE_CANDIDATE);c.sdp_mid=d.sdpMid;c.label=d.sdpMLineIndex;c.sdp=d.candidate;this.$4(a,c)};a.prototype.sendHangup=function(a,c,d,e,f){"use strict";c=this.$5(c,b("FBRTCConstants").PayloadType.HANGUP);c.reason=b("FBRTCConstants").callEndReasonString(d);c.subreason=f||"";this.$4(a,c,e,!0)};a.prototype.sendOtherDismiss=function(a){"use strict";a=this.$5(a,b("FBRTCConstants").PayloadType.OTHER_DISMISS);this.$4(b("CurrentUser").getID(),a)};a.prototype.sendOfferAck=function(a,c,d,e){e===void 0&&(e=new Map()),this.$6(a,c,d,b("FBRTCConstants").PayloadType.OFFER_ACK,e)};a.prototype.sendOfferNack=function(a,c,d){"use strict";this.$6(a,c,d,b("FBRTCConstants").PayloadType.OFFER_NACK,new Map([["error_code",1356043]]))};a.prototype.sendAnswerAck=function(a,c,d){"use strict";this.$6(a,c,d,b("FBRTCConstants").PayloadType.ANSWER_ACK)};a.prototype.sendAck=function(a,c,d){"use strict";this.$6(a,c,d,b("FBRTCConstants").PayloadType.ACK,new Map([["ack_type",d.type]]))};a.prototype.sendMuteStateUpdate=function(a,c,d){"use strict";c=this.$5(c,b("FBRTCConstants").PayloadType.SET_VIDEO);c.videoon=d;this.$4(a,c)};a.prototype.sendVideoEscalationRequest=function(a,b,c){"use strict";return this.sendVideoRequestResponse(a,b,0,c)};a.prototype.sendVideoRequestResponse=function(a,c,d,e){"use strict";c=this.$5(c,b("FBRTCConstants").PayloadType.VIDEO_REQUEST);c.ack_id=d;c.videoon=e;c.capability=b("PresenceProperties").getProperties();this.$4(a,c);return c};a.prototype.sendMsgAck=function(){"use strict"};a.prototype.sendOk=function(){"use strict"};a.prototype.sendPranswer=function(){"use strict"};a.prototype.sendIcerestartAnswer=function(){"use strict"};a.prototype.$5=function(a,c){"use strict";var d=b("generateRTCSignalingMessageID")();a={version:h,type:c,call_id:a,msg_id:d};this.$7(c)&&(a.supports_video_interop=!0);return a};a.prototype.$7=function(a){"use strict";return a===b("FBRTCConstants").PayloadType.OFFER||a===b("FBRTCConstants").PayloadType.ANSWER||a===b("FBRTCConstants").PayloadType.PRANSWER||a===b("FBRTCConstants").PayloadType.ICERESTART_OFFER||a===b("FBRTCConstants").PayloadType.ICERESTART_ANSWER||a===b("FBRTCConstants").PayloadType.PCRESTART_OFFER||a===b("FBRTCConstants").PayloadType.PCRESTART_ANSWER||a===b("FBRTCConstants").PayloadType.SDP_UPDATE||a===b("FBRTCConstants").PayloadType.SET_VIDEO||a===b("FBRTCConstants").PayloadType.VIDEO_REQUEST};a.prototype.$3=function(a,b){"use strict";this.$4(a,b,!1,!0,!0)};a.prototype.$6=function(a,c,d,e){"use strict";var f=(arguments.length<=4?undefined:arguments[4])||new Map(),g=this.$5(c,e);g.ack_id=d.msg_id;d.flag===1&&(g.flag=1);g.ull=b("FBRTCConstants").convertFromUploadLogLevel(b("FBRTCLocalUploadLogLevel").getLocalUploadLogLevel());f.forEach(function(a,b,c){g[b]=a});this.$4(a,g)};a.prototype.$4=function(a,c,d,e,f){"use strict";__p&&__p();var g=c.msg_id,h={peer_id:a,call_id:c.call_id,msg_id:g,msg_type:c.type},i={call_id:c.call_id,msg_id:g,user_id:b("CurrentUser").getID(),recipient_id:a,msg_type:c.type,app_id:b("RTCAppData").getAppID(),app_version:String(b("SiteData").client_revision||"dev"),op:"sendServerRequest:"+c.type,policy:"WebRTC"};i=b("Fbtrace").requestReceive("browser",String(b("SiteData").client_revision||"dev"),i);var j=b("FBRTCUtils").isPeerVCEndpoint(a);j&&(b("FBRTCConfig").getMeetingID()!=null&&(c.meeting_id=b("FBRTCConfig").getMeetingID()),b("FBRTCConfig").getMeetingPassword()!=null&&(c.meeting_pass=b("FBRTCConfig").getMeetingPassword()));var k=(j?b("XCollabCallSendMessageController"):b("XVideoCallSendMessageController")).getURIBuilder().setInt("recipient_id",a).setInt("msg_id",g).setString("message_info",JSON.stringify(c)).setInt("webrtc_fbtrace",i.isOn()?1:0).getURI();j=null;e&&(j=this.$4.bind(this,a,c,d,!1,f));var l=this.$8.bind(this,h),m=this.$9.bind(this,h,j,f);b("Fbtrace").withDefaultNode(i,function(){b("FBRTCUtils").sendServerRequest(k,l,m,d)});this.onMessageSent&&this.onMessageSent(a,c);this.$1.logSentMessage(a,c.call_id,c)};a.prototype.$8=function(a){"use strict";this.$1.logSentMessageSuccess(a.peer_id,a.call_id,a.msg_type,a.msg_id)};a.prototype.$9=function(a,c,d,e){"use strict";__p&&__p();var f="UNKNOWN_ERROR";e&&(f=e.getError?e.getError():e);this.$1.logSentMessageFailure(a.peer_id,a.call_id,a.msg_type,a.msg_id,f);e=null;f===1356001||f===1356049?e=b("FBRTCConstants").CallEndReason.NO_PERMISSION:f===1356046||f===1356045?e=b("FBRTCConstants").CallEndReason.CALLER_NOT_VISIBLE:(f===1356003||f===1356002||f===1356044)&&(e=b("FBRTCConstants").CallEndReason.OTHER_NOT_CAPABLE);if(!e&&c){c();return}d&&this.onSendFailure&&(e||(e=b("FBRTCConstants").CallEndReason.SIGNALING_MESSAGE_FAILED),this.onSendFailure(e,f,a.msg_type))};e.exports=a}),null);
__d("FBRTCPCConfig",["FBRTCConfig","FBRTCVersionDetection"],(function(a,b,c,d,e,f){__p&&__p();var g="stun:stun.fbsbx.com:3478";function h(a,c,d){if(b("FBRTCVersionDetection").isChrome()&&b("FBRTCVersionDetection").webrtcVersion()>=34){var e={urls:a};c!==undefined&&d!==undefined&&(e.username=c,e.credential=d);return[e]}e=[];for(var f=0;f<a.length;f++)c!==undefined&&d!==undefined?e.push({url:a[f],username:c,credential:d}):e.push({url:a[f]});return e}function a(){"use strict";this.sslPort="",this.tcpPort="",this.turnIP="",this.turnPassword="",this.turnUsername="",this.udpPort=""}a.prototype.setTurnCredentials=function(a){"use strict";this.turnIP=a.ip,this.udpPort=a.udp_port,this.tcpPort=a.tcp_port,this.sslPort=a.ssl_tcp_port,this.turnUsername=a.username,this.turnPassword=a.password};a.prototype.getConfig=function(){"use strict";if(b("FBRTCConfig").isVCEndpointCall())return{iceServers:[]};var a=h([g]).concat(h(this.$1(),this.turnUsername,this.turnPassword));return{iceServers:a}};a.prototype.getConstraints=function(a){a===void 0&&(a=!1);var c=!0;b("FBRTCVersionDetection").isChromium()&&b("FBRTCVersionDetection").webrtcVersion()<57&&a&&(c=!1);return{mandatory:{},optional:[{DtlsSrtpKeyAgreement:c}]}};a.prototype.$2=function(a){"use strict";__p&&__p();a=function(a){switch(a){case"tcp":return{ip:this.turnIP,port:this.tcpPort,transport:a};case"udp":return{ip:this.turnIP,port:this.udpPort,transport:a};case"ssl":return{ip:this.turnIP,port:this.sslPort,transport:"tcp"};default:return{ip:this.turnIP,port:this.udpPort,transport:null}}}.bind(this)(a);var b=a.ip,c=a.port;a=a.transport;return!((b==null?void 0:b.length)&&(c==null?void 0:c.length))?null:a!=null&&a.length>0?"turn:"+b+":"+c+"?transport="+a:"turn:"+b+":"+c};a.prototype.$1=function(){"use strict";if(b("FBRTCVersionDetection").isFirefox()&&b("FBRTCVersionDetection").webrtcVersion()<27)return[this.$2()].filter(Boolean);else return[this.$2("udp"),this.$2("tcp"),this.$2("ssl")].filter(Boolean)};e.exports=new a()}),null);
__d("FBRTCPeerConnectionHelper",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={resetLocalStreams:function(a,b){var c=!1,d=a.getLocalStreams(),e=d.filter(function(a){return!b.includes(a)}),f=b.filter(function(a){return!d.includes(a)});(e.length>0||f.length>0)&&(c=!0);e.forEach(function(b){return a.removeStream(b)});f.forEach(function(b){return a.addStream(b)});return c},resetLocalStreamWithTrackAPI:function(a,b,c){__p&&__p();var d=!1,e=b.getVideoTracks().length>0?b.getVideoTracks()[0]:null,f=b.getAudioTracks().length>0?b.getAudioTracks()[0]:null,g=a.getSenders(),h=g.filter(function(a){return a.track&&a.track.kind==="video"}),i=g.filter(function(a){return a.track&&a.track.kind==="audio"});h=h.length===(e===null?0:1)&&i.length===(f===null?0:1);if(c||!h){g.filter(function(a){return a.track!==e&&a.track!==e}).forEach(function(b){d=!0,a.removeTrack(b)});f&&!g.some(function(a){return a.track===f})&&(d=!0,a.addTrack(f,b));e&&!g.some(function(a){return a.track===e})&&(d=!0,a.addTrack(e,b));return d}a.getSenders().forEach(function(a){a.track&&a.track.kind==="video"&&e!==a.track?a.replaceTrack(e):a.track&&a.track.kind==="audio"&&f!==a.track&&a.replaceTrack(f)});return d}};e.exports=a}),null);
__d("FBRTCRetriableMessage",["FBRTCConstants","RTCSignalingExperiments","clearTimeout","mixInEventEmitter","setTimeout"],(function(a,b,c,d,e,f){__p&&__p();var g=1e4,h=7e3;function a(a){"use strict";this.$1=a,this.$2=g,this.$3=b("RTCSignalingExperiments").passesRTCWebSignalingHoldOut()?2:1,this.$6=null}a.prototype.sendMessage=function(a,c,d,e){"use strict";__p&&__p();var f=e.sdp,g=e.hasVideo,i=e.attributes,j=e.multiwayInfo;e=e.callTrigger;this.$4=c;switch(a){case b("FBRTCConstants").PayloadType.PCRESTART_OFFER:this.$5=this.$1.sendPCRestartOffer(c,d,f,g,i);break;case b("FBRTCConstants").PayloadType.OFFER:this.$5=this.$1.sendOffer(c,d,f,g,i,e);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$2=h;this.$5=this.$1.sendAnswer(c,d,f,g,i,j);break}this.$7()};a.prototype.isAckMsg=function(a){"use strict";return this.$5&&this.$5.msg_id===a.ack_id};a.prototype.stopRetrying=function(){"use strict";this.$6&&(b("clearTimeout")(this.$6),this.$4=null,this.$5=null,this.$6=null)};a.prototype.$7=function(){"use strict";this.$6=b("setTimeout")(this.$8.bind(this),this.$2)};a.prototype.$8=function(){"use strict";this.$3<1?this.emit("timeoutFailure"):(this.emit("sendingRetry"),this.$1.resendSdpMessage(this.$4,this.$5),this.$7(),this.$3-=1)};b("mixInEventEmitter")(a,{sendingRetry:!0,timeoutFailure:!0});e.exports=a}),null);
__d("FBRTCSoundController",["RTCConfig","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingEvent","RTWebLoggingSurface","RTWebUserActionLogger","Sound"],(function(a,b,c,d,e,f){__p&&__p();var g=[b("RTCConfig").ringtone_mp3_url,b("RTCConfig").ringtone_ogg_url],h=[b("RTCConfig").ringback_mp3_url,b("RTCConfig").ringback_ogg_url],i=[b("RTCConfig").leave_mp3_url,b("RTCConfig").leave_ogg_url];a={playIncomingRingtone:function(a,c,d){var e=d.loop,f=d.isP2P;d=d.isUnsupportedDialog;d=d===void 0?!1:d;c=["incoming_ringtone",a.toString(),c].join("_");b("Sound").play(g,c,e);b("RTWebUserActionLogger").logEvent({callID:a.toString(),callType:f?b("RTWebLoggingCallType").P2P:b("RTWebLoggingCallType").MW,component:b("RTWebLoggingComponent").INCOMING_RING_TONE,eventName:b("RTWebLoggingEvent").RING_TONE_PLAYED,surface:d?b("RTWebLoggingSurface").MISSED_CALL_DIALOG:b("RTWebLoggingSurface").INCOMING_DIALOG})},stopIncomingRingtone:function(){b("Sound").stop(g)},playRingbackTone:function(){b("Sound").play(h,null,!0)},stopRingbackTone:function(){b("Sound").stop(h)},playLeaveCallSound:function(){b("Sound").play(i,null,!1)}};e.exports=a}),null);
__d("FBRTCStreamWrapper",["FBRTCUtils","mixInEventEmitter"],(function(a,b,c,d,e,f){__p&&__p();var g=100,h=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,i;function j(){"use strict";this.$1=!0,this.$2=!0,this.$3=null,this.$4=null}j.prototype.setStream=function(a,b){b===void 0&&(b=!0);var c=this.hasStream();this.stop();this.$5();this.$6();b&&(a.onaddtrack=this.$7.bind(this),a.onremovetrack=this.$7.bind(this),a.onended=this.$8.bind(this),c&&this.emit("tracksChanged"));this.$3=a};j.prototype.getStreamId=function(){"use strict";return this.$3!=null?this.$3.id:null};j.prototype.getStream=function(){"use strict";return this.$3};j.prototype.hasStream=function(){"use strict";return!!this.$3};j.prototype.stop=function(){"use strict";this.$3&&(j.stopStream(this.$3),this.$3=null)};j.prototype.hasVideoTracks=function(){"use strict";return this.$3&&this.$3.getVideoTracks?this.$3.getVideoTracks().length>0:!0};j.prototype.hasVideo=function(){"use strict";return this.$2&&this.hasVideoTracks()};j.prototype.hasAudioTracks=function(){"use strict";return this.$3&&this.$3.getAudioTracks?this.$3.getAudioTracks().length>0:!0};j.prototype.hasAudio=function(){"use strict";return this.$1&&this.hasAudioTracks()};j.prototype.attachToVideoTag=function(a){"use strict";this.$3&&(a instanceof HTMLVideoElement&&(this.$4=a,b("FBRTCUtils").attachMediaStream(a,this.$3),this.$9(a)))};j.prototype.getAudioAnalyser=function(){"use strict";if(this.$3){var a=this.$10(),b=a.createMediaStreamSource(this.$3);a=a.createAnalyser();a.fftSize=2048;b.connect(a);return a}return null};j.prototype.$10=function(){"use strict";i||(i=new h());return i};j.prototype.toggleMuteAudio=function(){"use strict";if(!this.hasAudioTracks())return;this.$1=!this.$1;this.$5()};j.prototype.$5=function(){"use strict";if(this.$3){var a=this.$3.getAudioTracks();for(var b=0;b<a.length;b++)a[b].enabled=this.$1}};j.prototype.toggleMuteVideo=function(){"use strict";this.$2=!this.$2,this.$2?this.$6():setTimeout(this.$6.bind(this),500),this.$7()};j.prototype.$6=function(){"use strict";if(this.$3){var a=this.$3.getVideoTracks();for(var b=0;b<a.length;b++)a[b].enabled=this.$2}};j.prototype.setVideoEnabled=function(a){"use strict";this.$2=a,this.$6(),this.$7()};j.prototype.$9=function(a){"use strict";!this.hasVideo()||a.currentTime>0?this.$11(a):setTimeout(this.$9.bind(this,a),g)};j.prototype.$11=function(a){"use strict";this.emit("streamStarted")};j.prototype.$8=function(){"use strict";this.emit("streamEnded")};j.prototype.$7=function(event){"use strict";this.$12(event)&&(this.$4!=null&&this.attachToVideoTag(this.$4)),this.emit("tracksChanged")};j.prototype.$12=function(a){"use strict";return this.$4!=null&&a!=null&&a.type==="addtrack"&&a.track.kind==="video"};j.stopStream=function(a){"use strict";a.active!=null&&a.active?a.getTracks().forEach(function(a){a.stop()}):a.stop!=null&&typeof a.stop==="function"&&a.stop()};b("mixInEventEmitter")(j,{streamStarted:!0,streamEnded:!0,tracksChanged:!0});e.exports=j}),null);
__d("XVideoCallTurnDiscoveryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/turndiscovery/",{version:{type:"Int",required:!0},call_id:{type:"String"}})}),null);
__d("FBRTCTurnDiscovery",["Promise","FBRTCLogger","FBRTCUtils","XVideoCallTurnDiscoveryController"],(function(a,b,c,d,e,f){__p&&__p();var g=3,h=null;a={requestTurnCreds:function(a,c,d){__p&&__p();d===void 0&&(d=g);if(h)return h;var e=1,f=b("XVideoCallTurnDiscoveryController").getURIBuilder().setInt("version",e).setString("call_id",a).getURI();h=new(b("Promise"))(function(e,g){h(d);function h(d){b("FBRTCUtils").sendServerRequest(f,function(a){a=a.payload;return e(a)},function(){d>0?(b("FBRTCLogger").getInstance().logError(c,a,"Failed turn; going to retry"),h(d-1)):g(new Error("failed"))})}});return h}};e.exports=a}),null);
__d("XGroupCallController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groupcall/{?call_context}/",{call_context:{type:"String",required:!0},call_id:{type:"Int"},users_to_ring:{type:"FBIDSet",defaultValue:[]},has_video:{type:"Bool",defaultValue:!0},initialize_video:{type:"Bool",defaultValue:!0},server_info_data:{type:"String"},nonce:{type:"String"},multiway_www_tier:{type:"String"},multiway_core_tier:{type:"String"}})}),null);
__d("XGroupCallSigningController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groupcall/init/",{call_context:{type:"String",required:!0},call_id:{type:"Int"},users_to_ring:{type:"FBIDSet",defaultValue:[]},has_video:{type:"Bool",defaultValue:!1},initialize_video:{type:"Bool",defaultValue:!1},server_info_data:{type:"String"},nonce:{type:"String"},multiway_www_tier:{type:"String"},multiway_core_tier:{type:"String"}})}),null);
__d("XVideoCallController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/incall/",{peer_id:{type:"FBID",required:!0},call_id:{type:"Int"},is_caller:{type:"Bool",defaultValue:!1},audio_only:{type:"Bool",defaultValue:!1},nonce:{type:"String"},meeting_id:{type:"Int"},meeting_pass:{type:"Int"},initialize_video:{type:"Bool",defaultValue:!0}})}),null);
__d("XWirelessScreenSharingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/screen_sharing/{?session_id}/",{nonce:{type:"String"},peer_id:{type:"FBID",required:!0},session_id:{type:"Int"}})}),null);
__d("FBRTCUrlManager",["regeneratorRuntime","Promise","CurrentUser","FBRTCConfig","FBRTCLogger","FBRTCUtils","URI","XGroupCallController","XGroupCallSigningController","XVideoCallController","XWirelessScreenSharingController"],(function(a,b,c,d,e,f){__p&&__p();function g(a){b("FBRTCLogger").getInstance().logCallAction(a,undefined,b("FBRTCLogger").CallAction.OLD_URI);return b("XVideoCallController").getURIBuilder().setFBID("peer_id",a).getURI()}function h(a){if(b("CurrentUser").isEmployee()){a=a.setSubdomain(b("CurrentUser").hasWorkUser()||b("CurrentUser").isWorkUser()?"fb":"www");var c="/intern/";return b("URI").getRequestURI().getPath().substr(0,c.length)!==c?a:a.setDomain(a.getDomain().toString().replace(/\.(intern|internmc|cstools)\./,"."))}return a}function i(a){__p&&__p();var c,d,e,f,g,h,i,j,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:c=a.callContext,d=a.callID,e=a.usersToRing,f=a.hasVideo,g=a.initializeVideo,h=a.multiwayCoreTier,i=a.multiwayWwwTier,j=a.nonce,k=a.serverInfoData;l=b("XGroupCallSigningController").getURIBuilder().setString("call_context",c).setInt("call_id",d).setFBIDSet("users_to_ring",e).setBool("has_video",f).setBool("initialize_video",g).setString("server_info_data",k).setString("nonce",j).setString("multiway_www_tier",i).setString("multiway_core_tier",h).getURI();return m.abrupt("return",new(b("Promise"))(function(a,c){b("FBRTCUtils").sendServerRequest(l,function(b){a(b.payload.uri)},function(a){c(a)})}));case 3:case"end":return m.stop()}},null,this)}var j=function(a){if(b("FBRTCConfig").disableURLManager())return;window.history.replaceState({},"",a)};function k(a){var c=b("XVideoCallController").getURIBuilder().setFBID("peer_id","0").getURI().getPath();return a.getPath()===c}a={init:function(a){this._peerID=a},onCallStarted:function(){k(new(b("URI"))(window.location))&&j(g(this._peerID))},getGroupCallUri:function(a,c,d,e,f,g,h,j,k){__p&&__p();var l;return b("regeneratorRuntime").async(function(m){__p&&__p();while(1)switch(m.prev=m.next){case 0:l=0;case 1:if(!(l<3)){m.next=14;break}m.prev=2;m.next=5;return b("regeneratorRuntime").awrap(i({callContext:a,callID:c,usersToRing:d,hasVideo:e,initializeVideo:f,multiwayCoreTier:g,multiwayWwwTier:h,nonce:j,serverInfoData:k}));case 5:return m.abrupt("return",m.sent);case 8:m.prev=8,m.t0=m["catch"](2),b("FBRTCLogger").getInstance().logToConsole(m.t0);case 11:l++;m.next=1;break;case 14:return m.abrupt("return",b("XGroupCallController").getURIBuilder().setString("call_context",a).setInt("call_id",c).setFBIDSet("users_to_ring",d).setBool("has_video",e).setBool("initialize_video",f).setString("server_info_data",k).setString("nonce",j).setString("multiway_www_tier",h).setString("multiway_core_tier",g).getURI());case 15:case"end":return m.stop()}},null,this,[[2,8]])},getP2PCallUriWithNonce:function(a,c,d,e,f,g,i){i===void 0&&(i="");c=b("XVideoCallController").getURIBuilder().setFBID("peer_id",a).setInt("call_id",c).setBool("is_caller",d).setBool("audio_only",e).setString("nonce",f).setBool("initialize_video",g).getURI();return b("FBRTCUtils").isPeerVCEndpoint(a)||b("FBRTCUtils").isCollabTrigger(i)?h(c):c},getWirelessScreenSharingUri:function(a,c,d){c=b("XWirelessScreenSharingController").getURIBuilder().setFBID("peer_id",c).setInt("session_id",d).setString("nonce",a).getURI();return h(c)}};e.exports=a}),null);
__d("FBRTCUserSettings",["Promise","RTCMediaDevices","mixInEventEmitter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={audioInput:"",audioOutput:"default",videoInput:"",remoteStream:null,_audioInputLabel:null,_videoInputLabel:null,isEnabled:function(){return Boolean(b("RTCMediaDevices").isSupported("enumerateDevices"))},selectAudioInputByLabel:function(a){this.audioInput||(this.audioInput=this._selectByLabel(a,this._audioInputLabel));return this.audioInput},selectVideoInputByLabel:function(a){this.videoInput||(this.videoInput=this._selectByLabel(a,this._videoInputLabel));return this.videoInput},_selectByLabel:function(a,b){__p&&__p();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(b&&b===e.label)return e.deviceId}return null},previewStart:function(){this.emit("previewStarted")},previewEnd:function(){this.emit("previewEnded")},save:function(a){var c=a.audioInput,d=a.audioOutput,e=a.videoInput;return new(b("Promise"))(function(a){var b=!!(c&&this.audioInput!==c||e&&this.videoInput!==e);this.audioInput=c;this.audioOutput=d;this.videoInput=e;this.emit("saved",b);a(b)}.bind(this))},updateForLocalStream:function(a){__p&&__p();if(a.videoMediaSourceId)this.videoInput=a.videoMediaSourceId;else{var b=a.getVideoTracks();b=b[0];b&&(this._videoInputLabel=b.label)}if(a.audioMediaSourceId)this.audioInput=a.audioMediaSourceId;else{b=a.getAudioTracks();a=b[0];a&&(this._audioInputLabel=a.label)}},updateForRemoteStream:function(a){this.remoteStream=a,this.emit("remoteStreamChanged")},addListener:function(){},emit:function(){}};b("mixInEventEmitter")(a,{previewStarted:!0,previewEnded:!0,remoteStreamChanged:!0,saved:!0});e.exports=a}),null);
__d("BonfireUserFetcherQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"userId",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"userId",type:"ID!"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"display_name",args:null,storageKey:null},e={kind:"ScalarField",alias:null,name:"username",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"profile_picture_uri",args:null,storageKey:null},g={kind:"ScalarField",alias:null,name:"is_viewer_friend",args:null,storageKey:null};return{kind:"Request",operationKind:"query",name:"BonfireUserFetcherQuery",id:"2128247880523200",text:null,metadata:{},fragment:{kind:"Fragment",name:"BonfireUserFetcherQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"InlineFragment",type:"User",selections:[c,{kind:"LinkedField",alias:null,name:"bonfire_user",storageKey:null,args:null,concreteType:"BonfireUser",plural:!1,selections:[c,d,e,f,{kind:"FragmentSpread",name:"BonfireParticipantRow_participant",args:null}]}]}]}]},operation:{kind:"Operation",name:"BonfireUserFetcherQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},c,{kind:"InlineFragment",type:"User",selections:[{kind:"LinkedField",alias:null,name:"bonfire_user",storageKey:null,args:null,concreteType:"BonfireUser",plural:!1,selections:[c,d,e,f,{kind:"ScalarField",alias:null,name:"account_id",args:null,storageKey:null},g,{kind:"ScalarField",alias:null,name:"is_blocked_by_viewer",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"last_active_time",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"facebook_user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[g,c]},{kind:"LinkedField",alias:null,name:"active_friend_request_with_viewer",storageKey:null,args:null,concreteType:"BonfireFriendRequest",plural:!1,selections:[c]}]}]}]}]}}}();e.exports=a}),null);
__d("BonfireUserFetcher",["regeneratorRuntime","Promise","LogHistory","RelayFBEnvironment","RelayModern","RTCUser","immutable","nullthrows","BonfireUserFetcherQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("RelayModern").fetchQuery;b("RelayModern").graphql;var i=b("immutable").List,j=b("immutable").Map;b("immutable").Set;function k(a){__p&&__p();return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:c.prev=0;c.next=3;return b("regeneratorRuntime").awrap(h(b("RelayFBEnvironment"),g||(g=function(){return b("BonfireUserFetcherQuery.graphql")}),{userId:a}));case 3:return c.abrupt("return",c.sent);case 6:c.prev=6;c.t0=c["catch"](0);b("LogHistory").getInstance("bonfire_fetcher").error("fetch_error",JSON.stringify(c.t0));throw c.t0;case 10:case"end":return c.stop()}},null,this,[[0,6]])}function l(a){__p&&__p();var c,d,e;a=a.node;e=(e=a)!=null?(e=e.bonfire_user)!=null?e.id:e:e;d=(d=a)!=null?d.id:d;if(!e||!d)return null;e=b("nullthrows")((e=a)!=null?(e=e.bonfire_user)!=null?e.display_name:e:e);c=b("nullthrows")((c=a)!=null?(c=c.bonfire_user)!=null?c.username:c:c);a=b("nullthrows")((a=a)!=null?(a=a.bonfire_user)!=null?a.profile_picture_uri:a:a);return new(b("RTCUser"))({FBID:d,profileUrl:null,profilePictureUrl:a,isMessengerUser:!1,userName:e,userShortName:c})}function m(a){__p&&__p();var b,c,d;a=a.node;d=(d=a)!=null?(d=d.bonfire_user)!=null?d.id:d:d;c=(c=a)!=null?c.id:c;if(!d||!c)return null;d=(d=(d=a)!=null?(d=d.bonfire_user)!=null?d.display_name:d:d)!=null?d:"";b=(b=(b=a)!=null?(b=b.bonfire_user)!=null?b.username:b:b)!=null?b:"";a=(a=(a=a)!=null?(a=a.bonfire_user)!=null?a.profile_picture_uri:a:a)!=null?a:"";return{accepts_messenger_user_feedback:!1,big_image_src:a,employee:!1,fbid:c,gender:0,href:null,id:"fbid:"+c,image_src:a,is_business_enabled:null,is_employee_away:null,is_friend:null,is_messenger_user:null,is_messenger_platform_bot:null,is_parties_user:!0,is_verified:null,name:d,short_name:d,user_type:null,vanity:b,timezone:null,personal_id:null,work_id:null}}function n(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(k(a));case 2:c=d.sent;return d.abrupt("return",m(c));case 4:case"end":return d.stop()}},null,this)}function a(a){__p&&__p();var c,d,e,f;return b("regeneratorRuntime").async(function(g){__p&&__p();while(1)switch(g.prev=g.next){case 0:c=i(a);d=c.map(function(a){return n(a)}).toArray();g.next=4;return b("regeneratorRuntime").awrap(b("Promise").all(d));case 4:e=g.sent;f=j(c.zip(e));return g.abrupt("return",f.mapKeys(function(a,b){return b&&b.id||a}));case 7:case"end":return g.stop()}},null,this)}function c(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(n(a));case 2:c=d.sent;return d.abrupt("return",b("nullthrows")(c));case 4:case"end":return d.stop()}},null,this)}function d(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(k(a));case 2:c=d.sent;return d.abrupt("return",l(c));case 4:case"end":return d.stop()}},null,this)}e.exports={fetchAllParticipants:a,fetchParticipant:c,fetchUser:d}}),null);
__d("RTCSVGIcon.react",["React"],(function(a,b,c,d,e,f){"use strict";var g=b("React").Children;a=function(a){var c=a.children;a=babelHelpers.objectWithoutProperties(a,["children"]);return b("React").cloneElement(g.only(c),babelHelpers["extends"]({preserveAspectRatio:"xMidYMid meet"},a))};e.exports=a}),null);
__d("RTCAbstractButton.react",["cx","AbstractButton.react","React","RTCSVGIcon.react","joinClasses","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(event){var a=this.props.disabled;if(a){event.preventDefault();return}this.props.shouldThrottle?this.$2():this.props.onClick()}.bind(this),this.$2=b("throttle")(function(){this.props.onClick()}.bind(this),500),c}a.prototype.render=function(){var a=this.props,c=a.children,d=a.className,e=a.disabled,f=a.highlighted,g=a.title;a=babelHelpers.objectWithoutProperties(a,["children","className","disabled","highlighted","title"]);c=b("React").createElement(b("RTCSVGIcon.react"),{className:"_4uwr"},c);return b("React").createElement(b("AbstractButton.react"),babelHelpers["extends"]({"aria-disabled":e,className:b("joinClasses")(d,"_4uwq"+(!e&&f?" highlighted":"")),"data-hover":e?"none":"tooltip",image:c,label:g},a,{onClick:this.$1}))};a.defaultProps={highlighted:!1,disabled:!1,labelIsHidden:!0,shouldThrottle:!0};e.exports=a}),null);
__d("RTCCallControlsButton.react",["React","RTCAbstractButton.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){var a=this.props,c=a.title;a=babelHelpers.objectWithoutProperties(a,["title"]);return b("React").createElement(b("RTCAbstractButton.react"),babelHelpers["extends"]({"data-tooltip-alignh":"center","data-tooltip-content":c,label:c,labelIsHidden:this.props.labelIsHidden,title:c},a))};function a(){g.apply(this,arguments)}a.defaultProps={highlighted:!1,disabled:!1,shouldThrottle:!0,labelIsHidden:!0};e.exports=a}),null);
__d("RTCUIScreenIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){var c=a.variant;a=babelHelpers.objectWithoutProperties(a,["variant"]);return b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 48 48"},b("React").createElement(g,{variant:c})))};var g=function(a){a=a.variant;switch(a){case"strike-through":return b("React").createElement("path",{d:"M18.475 17H12v14h14.887l-.6-1H13V18h6.076l-.6-1zm3.5 0H36v14h-5.613l-.6-1H35V18H22.576l-.6-1zm5.513 15H19v1h9.09l-.602-1zm-7.81-13H14v10h11.685l-6.008-10zm3.5 0H34v10h-4.815l-6.008-10zm7.183 16.087l.86-.515L18.858 14l-.858.515 12.36 20.572z"});case"x":return b("React").createElement("path",{d:"M24.706 18l3.182 3.183a.5.5 0 0 1-.707.707L24 18.708l-3.182 3.182a.5.5 0 0 1-.707-.707L23.292 18l-3.182-3.182a.5.5 0 0 1 .707-.707L24 17.294l3.182-3.182a.5.5 0 0 1 .707.707zM28.999 17v1h6v12h-22V18h6v-1h-7v14h24V17h-7zm-10 15h10v1h-10z"});case"normal":default:return b("React").createElement("path",{d:"M12 17v14h24V17H12zm23 13H13V18h22v12zm-16.001 2h10v1h-10zm-4.986-13.005h20.018v10.009H14.013z"})}};e.exports=a}),null);
__d("ScreenSharingWebDriverIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SHARE_SCREEN_BUTTON:"shareScreenButton",INSTALL_EXT_DIALOG:"install_extension_dialog"})}),null);
__d("RTCCallControlsScreenSharingButton.react",["cx","React","RTCCallControlsButton.react","RTCUIScreenIcon.react","ScreenSharingWebDriverIDs","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.className,d=a.disabled;d=d===void 0?!1:d;var e=a.sharing;a=babelHelpers.objectWithoutProperties(a,["className","disabled","sharing"]);var f=d?"strike-through":e?"x":"normal";return b("React").createElement(b("RTCCallControlsButton.react"),babelHelpers["extends"]({className:b("joinClasses")(c,"semiopaque icon-48"),"data-testid":b("ScreenSharingWebDriverIDs").SHARE_SCREEN_BUTTON,disabled:d,highlighted:e},a),b("React").createElement(b("RTCUIScreenIcon.react"),{variant:f}))}e.exports=a}),null);
__d("RTCDialog.react",["fbt","LayerFadeOnHide","LayerTabIsolation","React","XUIDialog.react"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c,d=a.children,e=a.label;a=babelHelpers.objectWithoutProperties(a,["children","label"]);return b("React").createElement(b("XUIDialog.react"),babelHelpers["extends"]({behaviors:{LayerFadeOnHide:b("LayerFadeOnHide"),LayerTabIsolation:b("LayerTabIsolation")},hideOnEscape:!0,label:(c=e)!=null?c:g._("Real time communication {child_label}",[g._param("child_label",e)]),shown:!0},a),d)};e.exports=a}),null);
__d("RTCDialogList.react",["React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){return b("React").createElement("ul",null,this.props.children)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("RTCDialogListItem.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=b("joinClasses")("_4gtz",this.props.className);return b("React").createElement("li",babelHelpers["extends"]({onClick:this.props.onClick},{className:a}),this.props.children)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("RTCCallControlsScreenSharingDialog.react",["cx","fbt","React","RTCDialog.react","RTCDialogList.react","RTCDialogListItem.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){var c=a.cancelLabel,d=a.dialogWidth;d=d===void 0?350:d;var e=a.onDialogHide,f=a.onDialogToggle,g=a.onStopScreenSharingClick,i=a.onUpdateScreenSharingClick,j=a.shareDifferentWindowLabel;a=a.stopScreenSharingLabel;j=j||h._("Share a Different Window");a=a||h._("Stop Screen Sharing");c=c||h._("Cancel");return b("React").createElement(b("RTCDialog.react"),{className:"_1z6a",label:"Screen sharing call controls",onToggle:f,width:d},b("React").createElement(b("RTCDialogList.react"),null,b("React").createElement(b("RTCDialogListItem.react"),{onClick:i},j),b("React").createElement(b("RTCDialogListItem.react"),{className:"_1z6b",onClick:g},a),b("React").createElement(b("RTCDialogListItem.react"),{onClick:e},c)))}e.exports=a}),null);
__d("RTWebCollabClientFeatureGating",["FBRTCConfig","gkx"],(function(a,b,c,d,e,f){"use strict";a={showPreCallSetup:function(a){var c=b("FBRTCConfig").getMeetingID()!=null;return!a&&!c?!1:b("FBRTCConfig").isVCEndpointCall()},showPushToTalk:function(){return b("FBRTCConfig").isVCEndpointCall()},showParticipantsRoster:function(){var a=b("FBRTCConfig").getMeetingID()!=null;return!a?!1:b("gkx")("721113")}};e.exports=a}),null);
__d("RTCHotKeysConfig",["fbt","FBRTCConfig","RTWebCollabClientFeatureGating","keyMirror","objectValues"],(function(a,b,c,d,e,f,g){"use strict";var h=b("keyMirror")({CAMERA_CONTROL:null,END_CALL:null,FULL_SCREEN:null,PUSH_TO_TALK:null,SCREEN_SHARE:null,SETTINGS:null,TOGGLE_MUTE_AUDIO:null,TOGGLE_VIDEO:null}),i=(a={},a[h.CAMERA_CONTROL]={altKey:!0,key:"c",label:g._("Camera Control")},a[h.END_CALL]={altKey:!0,key:"e",label:g._("End Call")},a[h.FULL_SCREEN]={altKey:!0,key:"f",label:g._("Full Screen")},a[h.PUSH_TO_TALK]={altKey:!1,key:"m",label:g._("Push to Talk")},a[h.SCREEN_SHARE]={altKey:!0,key:"s",label:g._("Share Screen")},a[h.SETTINGS]={altKey:!0,key:"p",label:g._("Settings")},a[h.TOGGLE_MUTE_AUDIO]={altKey:!0,key:"m",label:g._("Toggle Mute")},a[h.TOGGLE_VIDEO]={altKey:!0,key:"v",label:g._("Toggle Video")},a);c=function(){var a=i;b("FBRTCConfig").isVCEndpointCall()||delete a[h.CAMERA_CONTROL];b("RTWebCollabClientFeatureGating").showPushToTalk()||delete a[h.PUSH_TO_TALK];return b("objectValues")(a)};e.exports={RTCHotKey:h,config:i,getSupportedHotKeys:c}}),null);
__d("RTCHotKeys",["KeyEventController","RTCHotKeysConfig"],(function(a,b,c,d,e,f){__p&&__p();var g=b("RTCHotKeysConfig").config;function a(){"use strict";this.$1=[]}a.prototype.register=function(a,c,d){"use strict";var e={key:a,keyHandler:b("KeyEventController").registerKey(g[a].key,c,d!==undefined?d:function(event){return event.type==="keyup"?!1:event.altKey===g[a].altKey})};this.$1.push(e);return{remove:function(){return this.$2(e)}.bind(this)}};a.prototype.unregister=function(a){"use strict";var b=this.$1.find(function(b){return b.key===a});b&&this.$2(b)};a.prototype.$2=function(a){"use strict";a.keyHandler.remove(),this.$1.splice(this.$1.indexOf(a),1)};e.exports=new a()}),null);
__d("CollabCallMessengerBrowserEventEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CALL_CONNECTED:"call: connected",CALL_ENDED:"call: ended",CALL_PROCESS_STARTED:"call: start process",CALL_START_TRY:"call: try",SET_CALLER_MISMATCH:"caller mismatch",CONNECTION_INFO:"connection info",CONNECTION_RECOVERY:"connection recovery",HANGUP_CALL_ID_MISSMATCH:"hangup callID missmatch",TURN_CREDENTIALS_RECEIVED:"TURN credentials received",OFFER_ACCEPTED:"offer accepted",OFFER_IGNORED:"offer ignored",RENEGOTIATION:"offer renegotiation",LOCAL_MESSAGE_QUEUE:"local message queue updates",LOCAL_STREAM_READY:"local stream: ready",LOCAL_STREAM_SET:"local stream: set",LOCAL_STREAM_STARTED:"local stream: started",LOCAL_STREAM_TRACKS_CHANGED:"local stream: tracks changed",FLOOR_STATUS_CHANGE:"floor status change",LOCAL_SCREEN_STREAM_SET:"screen stream: set",SCREEN_SHARING_CANCELLED:"screen sharing: cancelled",SCREEN_SHARING_DIALOG_CANCEL:"screen sharing: dialog cancel",SCREEN_SHARING_DIALOG_SUCCESS:"screen sharing: dialog success",SCREEN_SHARING_ERROR:"screen sharing: error",SCREEN_SHARING_EXT_DIALOG:"screen sharing: extension install dialog",SCREEN_SHARING_EXT_LINK:"screen sharing: user clicked on install link",SCREEN_SHARING_NOT_SUPPORTED:"screen sharing: not supported",SCREEN_SHARING_TOGGLED:"screen sharing: toggled",SCREEN_TRACK_ADD:"add screen track",SCREEN_TRACK_REMOVE:"remove screen track",SCREEN_TRACK_REPLACE:"replace screen track",REMOTE_STREAM_ADDED:"remote stream: added",REMOTE_STREAM_MUTE_TOGGLED:"remote steam: mute toggled",REMOTE_STREAM_REMOVED:"remote stream: removed",REMOTE_STREAM_SET:"remote stream: set",REMOTE_STREAM_STARTED:"remote stream: started",REMOTE_STREAM_TRACKS_CHANGED:"remote stream: tracks changed",CALL_CONTROLLER_INIT:"call controller init",FAIL_BROWSER_NOT_SUPPORTED:"browser not supported",REQUEST_USER_MEDIA:"request user media",ICE_CANDIDATE_ERROR:"ICE candidate error",ICE_CONNECTION_STATE_CHANGE:"ICE connection state change",ICE_GATHERING_STATE_CHANGE:"ICE gathering state change",MESSAGE_RECEIVED:"message received",MESSAGE_SENT:"message sent",RTC_ERROR:"RTC error",SDP_UPDATE:"SDP update",USER_SETTINGS_CHANGED:"user settings change",AUDIO_FALLBACK:"audio fallback",GET_USER_MEDIA_ERROR:"get user media: error",INIT_STREAM_ERROR:"init stream error",INIT_USER_MEDIA_CONSTRAINT:"init user media constraint",STAR_RATING:"call rating",SURVEY_DETAILS:"survey_details",ON_MEDIA_TRACK_EVENT:"on media track event"})}),null);
__d("MessengerDialogBody.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:b("joinClasses")("_4eb-",this.props.className)},this.props.children)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("RTCInstallExtensionDialog.react",["fbt","Bootloader","CollabCallMessengerBrowserEventEnum","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerDialogTitle.react","React","RTCCallStore","ScreenSharingWebDriverIDs","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PureComponent;d=babelHelpers.inherits(a,c);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$2=function(){this.props.onToggle(!1)}.bind(this),this.$3=function(){this.$1(b("CollabCallMessengerBrowserEventEnum").SCREEN_SHARING_EXT_LINK),b("promiseDone")(this.props.onInstall(),function(){return this.$2()}.bind(this))}.bind(this),c}a.prototype.componentDidMount=function(){this.$1(b("CollabCallMessengerBrowserEventEnum").SCREEN_SHARING_EXT_DIALOG)};a.prototype.render=function(){return b("React").createElement(b("MessengerDialog.react"),{layerHideOnBlur:!1,onToggle:this.props.onToggle,width:544},b("React").createElement(b("MessengerDialogHeader.react"),null,b("React").createElement(b("MessengerDialogTitle.react"),null,g._("Add Facebook Screen Sharing Extension"))),b("React").createElement(b("MessengerDialogBody.react"),{"data-testid":b("ScreenSharingWebDriverIDs").INSTALL_EXT_DIALOG},b("React").createElement("div",null,g._("To share your screen during video calls on Messenger, Facebook and Workplace, you'll need to add the Facebook Screen Sharing extension. The extension will not save images of your screen during your call or share your data with other apps or websites. You can also share your screen during your Facebook Live videos."))),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogCancelButton.react"),{onClick:this.$2}),b("React").createElement(b("MessengerDialogButton.react"),{action:"confirm",label:g._("Add Extension"),onClick:this.$3,type:"primary",use:"default"})))};a.prototype.$1=function(event){b("Bootloader").loadModules(["CollabMessengerLogger"],function(a){var c=b("RTCCallStore").getState(),d=c.remoteUsers;c=c.callInfo;a.log(event,{peerID:d.first().FBID,callID:c.conferenceName})},"RTCInstallExtensionDialog.react")};e.exports=a}),null);
__d("RTCDialogBody.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.children,d=a.className;a=babelHelpers.objectWithoutProperties(a,["children","className"]);return b("React").createElement("div",babelHelpers["extends"]({className:b("joinClasses")(d,"_zbh")},a),c)};e.exports=a}),null);
__d("RTCDialogHeader.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.children,d=a.className;a=babelHelpers.objectWithoutProperties(a,["children","className"]);return b("React").createElement("header",babelHelpers["extends"]({className:b("joinClasses")(d,"_7xt")},a),c)};e.exports=a}),null);
__d("RTCDialogHeaderButton.react",["cx","AbstractButton.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.className;a=babelHelpers.objectWithoutProperties(a,["className"]);return b("React").createElement(b("AbstractButton.react"),babelHelpers["extends"]({className:b("joinClasses")(c,"_4py8"),type:"button"},a))};e.exports=a}),null);
__d("RTCUnsupportedBrowserDialog.react",["cx","fbt","ix","FBRTCVersionDetection","Image.react","Layout.react","Link.react","React","RTCDialog.react","RTCDialogBody.react","RTCDialogHeader.react","RTCDialogHeaderButton.react","XUIText.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("Layout.react").Column;c=b("React").PureComponent;d=babelHelpers.inherits(a,c);j=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.$3=function(){this.props.onToggle(!1)}.bind(this),b}a.prototype.render=function(){return b("React").createElement(b("RTCDialog.react"),{label:"Screen sharing update browser",layerHideOnBlur:!1,onToggle:this.props.onToggle,width:640},this.$1(),this.$2())};a.prototype.$1=function(){var a=null;b("FBRTCVersionDetection").isChrome()?a=h._("Update Browser to Share Your Screen"):a=h._("Switch Browsers to Share Your Screen");return b("React").createElement(b("RTCDialogHeader.react"),null,b("React").createElement("h1",{className:"_10mm"},a),b("React").createElement(b("RTCDialogHeaderButton.react"),{label:h._("Cancel"),onClick:this.$3}))};a.prototype.$2=function(){var a=b("FBRTCVersionDetection").isChrome()?this.$4():this.$5();return b("React").createElement(b("RTCDialogBody.react"),null,b("React").createElement("div",null,b("React").createElement("p",{className:"_2gx8"},a),this.$6()))};a.prototype.$4=function(){return h._("Screen sharing doesn't work in the older version of Google Chrome you're using. To share your screen, please update Google Chrome.")};a.prototype.$5=function(){if(b("FBRTCVersionDetection").isFirefox())return h._("Screen sharing doesn't work in Mozilla Firefox yet. To share your screen, please open Facebook in Google Chrome.");else return h._("Screen sharing doesn't work in your browser yet. To share your screen, please open Facebook in Google Chrome.")};a.prototype.$6=function(){return b("React").createElement(b("Layout.react"),null,b("React").createElement(k,{style:{width:"100%",textAlign:"center"}},b("React").createElement(b("Link.react"),{href:"https://www.google.com/chrome/index.html",target:"_blank"},b("React").createElement(b("Image.react"),{alt:"Chrome",className:"_4_if",src:i("28180"),width:"64"}),b("React").createElement(b("XUIText.react"),{display:"block"},"Google Chrome"))))};e.exports=a}),null);
__d("RTCCallControlsToggleScreenSharingButton.react",["fbt","Promise","CollabRTCChromeScreenSharingExtension","React","RTCCallControlsScreenSharingButton.react","RTCCallControlsScreenSharingDialog.react","RTCChromeScreenSharingUtils","RTCConfig","RTCHotKeys","RTCHotKeysConfig","RTCInstallExtensionDialog.react","RTCScreenSharing","RTCUnsupportedBrowserDialog.react","RTCUtils","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","UserAgent","WorkplaceChatHelper","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("RTCChromeScreenSharingUtils").getMediaRequestSourceAppId,j=b("RTCHotKeysConfig").RTCHotKey;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$2=function(){__p&&__p();b("RTWebUserActionLogger").logClick({callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").SCREENSHARING,conferenceState:this.props.conferenceState,surface:b("RTWebLoggingSurface").CALL_CONTROLS});this.props.onClick!=null&&this.props.onClick();if(!b("RTCUtils").isScreenSharingSupported()){this.$3(b("React").createElement(b("RTCUnsupportedBrowserDialog.react"),{onToggle:function(){return this.$4()}.bind(this)}));return}if(this.props.stream!=null){this.$3(b("React").createElement(b("RTCCallControlsScreenSharingDialog.react"),{onDialogHide:function(){this.$4(),this.props.onDialogDismiss!=null&&this.props.onDialogDismiss()}.bind(this),onDialogToggle:this.$4,onStopScreenSharingClick:this.$5,onUpdateScreenSharingClick:this.$6}));this.props.onDialogShow!=null&&this.props.onDialogShow();return}this.$7()}.bind(this),this.$8=function(){this.$4();return this.props.onExtensionInstallStart().then(function(){this.props.onExtensionInstallComplete&&this.props.onExtensionInstallComplete(null),window.focus(),this.$7()}.bind(this))["catch"](function(a){this.props.onExtensionInstallComplete&&this.props.onExtensionInstallComplete(a),window.focus()}.bind(this))}.bind(this),this.$5=function(){var a=this.props.stream;if(a==null)return;this.$4();this.props.onShareStop!=null&&this.props.onShareStop(a);b("RTCScreenSharing").stop()}.bind(this),this.$6=function(){this.$4();var a=this.props.stream;if(a==null)return;this.props.onShareUpdateAttempt!=null&&this.props.onShareUpdateAttempt();this.$9().then(function(b){return this.props.onShareStreamUpdate(a,b)}.bind(this))["catch"](this.$10)}.bind(this),this.$10=function(a){this.$4();var c=a.message;switch(c){case b("CollabRTCChromeScreenSharingExtension").EXTENSION_NOT_FOUND:this.$3(b("React").createElement(b("RTCInstallExtensionDialog.react"),{onInstall:this.$8,onToggle:this.$4}));break;case b("CollabRTCChromeScreenSharingExtension").DIALOG_USER_CANCEL:break;case b("RTCScreenSharing").SCREEN_SHARING_NOT_SUPPORTED:this.$3(b("React").createElement(b("RTCUnsupportedBrowserDialog.react"),{onToggle:this.$4}));break}this.props.onShareError!=null&&this.props.onShareError(a)}.bind(this),this.$4=function(){var a=this.context;a!=null&&typeof a.dialogHide==="function"&&a.dialogHide()}.bind(this),c}a.prototype.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").SCREENSHARING,conferenceState:this.props.conferenceState,surface:b("RTWebLoggingSurface").CALL_CONTROLS}),this.$1=b("RTCHotKeys").register(j.SCREEN_SHARE,this.props.onClick?this.props.onClick:this.$2)};a.prototype.render=function(){var a=this.props.stream;return b("React").createElement(b("RTCCallControlsScreenSharingButton.react"),{disabled:this.props.disabled,onClick:this.$2,sharing:a!=null,title:a!=null?g._("Screen sharing options"):g._("Share your screen")})};a.prototype.$7=function(){this.props.onShareStartAttempt!=null&&this.props.onShareStartAttempt(),this.$4(),this.$9()["catch"](this.$10)};a.prototype.$9=function(){return b("UserAgent").isBrowser("Chrome")&&!b("WorkplaceChatHelper").isDesktopChatApp()&&!b("CollabRTCChromeScreenSharingExtension").isInstalled()?b("Promise").reject(new Error(b("CollabRTCChromeScreenSharingExtension").EXTENSION_NOT_FOUND)):b("RTCUtils").getUserScreenMedia({audio:!1,video:babelHelpers["extends"]({},b("RTCConfig").CollaborationCallQuality.screen_v2||b("RTCConfig").CollaborationCallQuality.screen,{mediaSource:"screen"})},i()).then(function(a){b("promiseDone")(k(a),this.$5);this.props.onShareStarted(a);return a}.bind(this))};a.prototype.$3=function(a){var b=this.context;b!=null&&typeof b.dialogShow==="function"&&b.dialogShow(a)};a.prototype.componentWillUnmount=function(){this.$4(),this.$1&&this.$1.remove()};a.defaultProps={disabled:!1};a.contextTypes={dialogHide:c.func,dialogShow:c.func};function k(a){return b("Promise").all(a.getVideoTracks().map(function(a){return new(b("Promise"))(function(b){return a.addEventListener("ended",b)})}))}e.exports=a}),null);
__d("RTCCallControlsToggleScreenSharingWithFunnelButton.react",["Promise","CollabRTCChromeScreenSharingExtension","FBRTCConfig","FBRTCConstants","FunnelLogger","React","RTCCallControlsToggleScreenSharingButton.react","RTCCallStore","RTCScreenSharing","UserAgentData","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("FBRTCConstants").SignalingProtocol,i="WEB_RTC_SCREEN_SHARING_FUNNEL",j=Object.freeze({START_IN_P2P:"p2p_call",START_IN_MW:"mw_call",START_IN_VC:"vc_call",BUTTON_DISABLED:"button_disabled",BUTTON_ENABLED:"button_enabled",BUTTON_MOUNTED:"button_mounted",BUTTON_CLICK:"button_click",DIALOG_SHOW:"dialog_show",DIALOG_CANCEL:"dialog_cancel",START_SHARING:"start_sharing",UPDATE_SHARING:"update_sharing",STOP_SHARING:"stop_sharing",STREAM_ENDED:"stream_ended",SCREEN_SUCCEEDED:"screen_succeeded",SCREEN_FAILED:"screen_failed",FAILED_REASON_NO_EXTENSION:"no_extension",FAILED_REASON_NOT_SUPPORTED:"not_supported",FAILED_REASON_NO_PERMISSION:"no_permission",FAILED_REASON_OTHER:"other_reason",EXTENSION_INSTALL_START:"extension_install_start",EXTENSION_INSTALL_SUCCEED:"extension_install_succeed",EXTENSION_INSTALL_FAIL:"extension_install_fail"});c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=function(){l(j.BUTTON_CLICK),this.props.onClick!=null&&this.props.onClick()}.bind(this),this.$2=function(){l(j.DIALOG_CANCEL),this.props.onDialogDismiss!=null&&this.props.onDialogDismiss()}.bind(this),this.$3=function(){l(j.DIALOG_SHOW),this.props.onDialogShow!=null&&this.props.onDialogShow()}.bind(this),this.$5=function(){l(j.EXTENSION_INSTALL_START);return this.props.onExtensionInstallStart()}.bind(this),this.$4=function(a){a?m(j.EXTENSION_INSTALL_FAIL,a.toString()):l(j.EXTENSION_INSTALL_SUCCEED),this.props.onExtensionInstallComplete&&this.props.onExtensionInstallComplete(a)}.bind(this),this.$6=function(a){l(j.SCREEN_FAILED);switch(a.message){case b("CollabRTCChromeScreenSharingExtension").EXTENSION_NOT_FOUND:l(j.FAILED_REASON_NO_EXTENSION);break;case b("RTCScreenSharing").SCREEN_SHARING_NOT_SUPPORTED:l(j.FAILED_REASON_NOT_SUPPORTED);break;default:l(j.FAILED_REASON_OTHER);break}this.props.onShareError!=null&&this.props.onShareError(a)}.bind(this),this.$7=function(){l(j.START_SHARING),this.props.onShareStartAttempt!=null&&this.props.onShareStartAttempt()}.bind(this),this.$8=function(a){l(j.SCREEN_SUCCEEDED),b("promiseDone")(n(a),function(){b("FunnelLogger").appendAction(i,j.STREAM_ENDED)}),this.props.onShareStarted(a)}.bind(this),this.$9=function(a){l(j.STOP_SHARING),this.props.onShareStop(a)}.bind(this),this.$10=function(){this.props.onShareUpdateAttempt!=null&&this.props.onShareUpdateAttempt(),l(j.UPDATE_SHARING)}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("RTCCallControlsToggleScreenSharingButton.react"),{conferenceState:this.props.conferenceState,isP2P:this.props.isP2P,onClick:this.$1,onDialogDismiss:this.$2,onDialogShow:this.$3,onExtensionInstallComplete:this.$4,onExtensionInstallStart:this.$5,onShareError:this.$6,onShareStartAttempt:this.$7,onShareStarted:this.$8,onShareStop:this.$9,onShareUpdateAttempt:this.$10,disabled:this.props.disabled,onShareStreamUpdate:this.props.onShareStreamUpdate,stream:this.props.stream})};a.prototype.componentDidMount=function(){k(),l(j.BUTTON_MOUNTED),l(this.props.disabled?j.BUTTON_DISABLED:j.BUTTON_ENABLED)};a.prototype.componentDidUpdate=function(a){a.disabled!==this.props.disabled&&l(this.props.disabled?j.BUTTON_DISABLED:j.BUTTON_ENABLED)};a.prototype.componentWillUnmount=function(){b("FunnelLogger").endFunnel(i)};function k(){__p&&__p();b("FunnelLogger").startFunnel(i);b("FunnelLogger").addFunnelTag(i,"bn:"+(b("UserAgentData").browserName||"unknown"));b("FunnelLogger").addFunnelTag(i,"os:"+(b("UserAgentData").platformName||"unknown"));b("FBRTCConfig").isVCEndpointCall()&&l(j.START_IN_VC);var a=b("RTCCallStore").getState();a=a.callInfo;switch(a.protocol){case h.P2P:l(j.START_IN_P2P);break;case h.MULTIWAY:l(j.START_IN_MW);break}}function l(a){b("FunnelLogger").appendAction(i,a)}function m(a,c){b("FunnelLogger").appendActionWithTag(i,a,c)}function n(a){return b("Promise").all(a.getVideoTracks().map(function(a){return new(b("Promise"))(function(b){return a.addEventListener("ended",b)})}))}e.exports=a}),null);
__d("FBRTCCallControlPopover.react",["AlignmentEnum","PositionEnum","React","RTCCallControlsButton.react","RTCCallControlsToggleScreenSharingWithFunnelButton.react","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogTitle.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$2=function(){return this.props.referenceElement}.bind(this),b}a.prototype.render=function(){if(!this.props.referenceElement)return null;return!this.props.title&&!this.props.body?null:b("React").createElement(b("XUIContextualDialog.react"),babelHelpers["extends"]({label:this.props.label},this.$1()),this.props.title?b("React").createElement(b("XUIContextualDialogTitle.react"),{className:this.props.className},this.props.title):null,this.props.body?b("React").createElement(b("XUIContextualDialogBody.react"),{className:this.props.className},this.props.body):null)};a.prototype.$1=function(){var a={alignment:b("AlignmentEnum").left,contextRef:this.$2,dialogRole:"dialog",hasActionableContext:!1,hideOnBlur:this.props.hideOnBlur,hideOnEscape:!0,hoverContextRef:this.$2,position:b("PositionEnum").above,shown:!1,width:this.props.width};return a};e.exports=a}),null);
__d("FBRTCCallTimer.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PureComponent;d=babelHelpers.inherits(a,c);g=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.state={secondsElapsed:Math.floor(Date.now()/1e3)-this.props.start},this.$2=function(){this.setState({secondsElapsed:Math.floor(Date.now()/1e3)-this.props.start})}.bind(this),b}a.prototype.componentDidMount=function(){this.$1=window.setInterval(this.$2,1e3)};a.prototype.componentWillUnmount=function(){window.clearInterval(this.$1)};a.prototype.render=function(){var a=this.state.secondsElapsed;return b("React").createElement("span",null,a>=3600?("0"+Math.floor(a/3600)).slice(-2)+":":"",("0"+Math.floor(a%3600/60)).slice(-2),":",("0"+a%60).slice(-2))};e.exports=a}),null);
__d("FBRTCVideo.react",["cx","FBRTCStreamWrapper","FBRTCUtils","React","ReactDOM","joinClasses","shallowEqual"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=b("React").Component;f=babelHelpers.inherits(a,d);h=f&&f.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={currentStream:null},this.streamListener=null,b}a.prototype.UNSAFE_componentWillReceiveProps=function(a){a=a.stream;a!==this.props.stream&&(this.streamListener&&this.streamListener.remove(),this.streamListener=a?a.addListener("streamStarted",function(){return this.$1()}.bind(this)):null)};a.prototype.shouldComponentUpdate=function(a){return!b("shallowEqual")(this.props,a)||this.$2(a)};a.prototype.$2=function(a){a=a.stream;a=a?a.getStream():null;return a!==this.state.currentStream};a.prototype.render=function(){return b("React").createElement("video",{autoPlay:!0,className:b("joinClasses")(this.props.className,"_1yvx"+(this.props.mirrorVideo?" _6olb":"")),"data-testid":this.props["data-testid"],muted:this.props.muted,onContextMenu:function(a){return a.preventDefault()},onMouseDown:this.props.onMouseDown,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,onTouchEnd:this.props.onTouchEnd,onTouchMove:this.props.onTouchMove,onTouchStart:this.props.onTouchStart})};a.prototype.componentDidMount=function(){this.$3(),this.$1()};a.prototype.componentDidUpdate=function(a){(this.$2(a)||a.mediaStream!==this.props.mediaStream)&&this.$3(),a.audioSinkID!==this.props.audioSinkID&&this.$1()};a.prototype.$3=function(){var a=this.props,c=a.stream;a=a.mediaStream;var d=b("ReactDOM").findDOMNode(this);d&&(c?(c.attachToVideoTag(d),this.setState({currentStream:c.getStream()})):a&&b("FBRTCUtils").attachMediaStream(d,a))};a.prototype.$1=function(){var a=this.props.audioSinkID,c=b("ReactDOM").findDOMNode(this);a&&c&&typeof c.setSinkId==="function"&&c.setSinkId(a)};a.defaultProps={muted:!1};a.propTypes={audioSinkID:c.string,className:c.string,mediaStream:c.any,muted:c.bool,stream:c.instanceOf(b("FBRTCStreamWrapper"))};e.exports=a}),null);
__d("RTCUIXIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){return b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 48 48"},b("React").createElement("path",{d:"M24 25.4l-4.9 4.9c-.4 .4-1 .4-1.4 0c-.4-.4-.4-1 0-1.4L22.6 24L17.6 19.1c-.4-.4-.4-1 0-1.4c.4-.4 1-.4 1.4 0L24 22.6l4.9-4.9c.4-.4 1-.4 1.4 0c.4 .4 .4 1 0 1.4L25.4 24l4.9 4.9c.4 .4 .4 1 0 1.4c-.4 .4-1 .4-1.4 0L24 25.4z"})))};e.exports=a}),null);
__d("RTCCloseChatPanelButton.react",["cx","fbt","React","RTCCallControlsButton.react","RTCCoExperienceActions","RTCUIXIcon.react","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";function i(){b("RTCCoExperienceActions").toggleChatWindow()}a=function(){return b("React").createElement(b("RTCCallControlsButton.react"),{className:"icon-30 _31j4","data-testid":b("VideoCallWebDriverIDs").CLOSE_CHAT_BUTTON,onClick:function(){return i()},title:h._("Close Chat")},b("React").createElement(b("RTCUIXIcon.react"),null))};e.exports=a}),null);
__d("RTCChatPanel.react",["cx","JSResource","MercurySyncEnvironment","MessengerReasonDialogContainerReact.bs","MessengerState.bs","Placeholder.react","React","RTCCloseChatPanelButton.react","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","WorkModeConfig","XUISpinner.react","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerReasonDialogContainerReact.bs").jsComponent,j=b("lazyLoadComponent")(b("JSResource")("MessengerDetailView.react").__setRef("RTCChatPanel.react")),k="chat_panel",l=!1;function m(){l||(b("MercurySyncEnvironment").setUp(),l=!0)}var n=function(a){var c=!b("WorkModeConfig").is_work_user;return b("React").createElement("div",null,b("React").createElement(b("MessengerState.bs").jsComponent,{fbid:a.fbId},function(d){return b("React").createElement(b("Placeholder.react"),{fallback:b("React").createElement(b("XUISpinner.react"),null)},b("React").createElement(j,{activeThreadID:a.threadID,deliveryReceipts:b("MessengerState.bs").deliveryReceipts(d),hostProps:{renderMinimal:!0,hideActions:!0,messageSentCallback:function(){b("RTWebUserActionLogger").logClick({component:b("RTWebLoggingComponent").CHAT_PANEL_MESSAGE,surface:b("RTWebLoggingSurface").CHAT_PANEL})}},isWorkUser:c,messengerState:d,readReceipts:b("MessengerState.bs").readReceiptsPerThread(d),viewer:a.fbId}))}),b("React").createElement(i,null))};h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.componentDidMount=function(){b("RTWebUserActionLogger").startTimer(k)};a.prototype.componentWillUnmount=function(){b("RTWebUserActionLogger").logStopTimer({timerName:k,event:{component:b("RTWebLoggingComponent").TOGGLE_CHAT,surface:b("RTWebLoggingSurface").CHAT_PANEL}})};a.prototype.render=function(){m();return b("React").createElement("div",null,b("React").createElement("div",{className:"_1a7p"},this.props.title,b("React").createElement(b("RTCCloseChatPanelButton.react"),null)),b("React").createElement("div",{className:"_1a7y"},b("React").createElement(n,this.props)))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("RTCChatViewWrapper.react",["cx","fbt","InnerPane.react","React","RTCChatPanel.react","SplitPane.react"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var c=a.chatWindowVisible?.3:0;return b("React").createElement("div",{className:"_2txj"},b("React").createElement(b("SplitPane.react"),{className:"_6glo"+(a.chatWindowVisible?"":" _6glp"),heightPolicy:"full",proportion:c,widthPolicy:"full"},b("React").createElement(b("InnerPane.react"),{className:"_1a7z"},a.chatWindowVisible?b("React").createElement(b("RTCChatPanel.react"),{fbId:a.callerID,threadID:a.threadID,title:h._("Chat")}):null),b("React").createElement(b("InnerPane.react"),null,b("React").createElement("div",{className:"_2tz1"},a.children))))}e.exports=a}),null);
__d("RTCAppSpinner.react",["cx","MessengerSpinner.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){a=a.className;return b("React").createElement(b("MessengerSpinner.react"),{className:b("joinClasses")("_4ywx",a),color:"blue",size:32})};e.exports=a}),null);
__d("RTCUIM4VideoCameraIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){a=babelHelpers["extends"]({},a);return b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 24 24"},b("React").createElement("path",{d:"M13.3333333 16H3.55555556C1.592 16 0 14.408 0 12.4444444V3.55555556C0 1.592 1.592 0 3.55555556 0h9.77777774c1.9635556 0 3.5555556 1.592 3.5555556 3.55555556v8.88888884C16.8888889 14.408 15.2968889 16 13.3333333 16m9.38-3.2004444l-3.3097777-1.6564445c-.4515556-.2257778-.7368889-.688-.7368889-1.19377777V6.05155556c0-.50533334.2853333-.968.7368889-1.19377778l3.3097777-1.65644445C23.3048889 2.90577778 24 3.336 24 3.99733333v8.00622227c0 .6617777-.6951111 1.0915555-1.2866667.796",fill:"#ffffff",fillRule:"evenodd"})))};e.exports=a}),null);
__d("FBRTCEnterRoomLinkButton.react",["cx","fbt","AbstractButton.react","FBRTCSupport","React","RTCAppSpinner.react","RTCUIM4VideoCameraIcon.react","RTCUtils","XUIText.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){var c=babelHelpers["extends"]({},a);a=c.errorMessage;var d=c.isLoading,e=c.isGuest,f=c.isRejoin;if(d===!0)return b("React").createElement("div",{className:"_6qy3"},b("React").createElement(b("RTCAppSpinner.react"),null));d=e===!0?"Internal Only: Join Call as Guest":f===!0?h._("Join Again"):h._("Join Video Chat");return b("React").createElement("div",{className:"_6qy3"},a===null?null:b("React").createElement(b("XUIText.react"),{color:"negative",size:"body3"},a),b("React").createElement(b("AbstractButton.react"),{className:b("joinClasses")(c.className,"_6qy2"),image:b("React").createElement(b("RTCUIM4VideoCameraIcon.react"),{className:"_6_r- _6_r_"}),label:d,onClick:function(){b("FBRTCSupport").isMobileDevice()&&b("RTCUtils").requestFullScreen(),c.onClick&&c.onClick()}}))};e.exports=a}),null);
__d("RTCGroupCallAddUserWarningDialog.react",["fbt","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerDialogTitle.react","React"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.handleRing,d=a.onToggle,e=a.unMountParent;return b("React").createElement(b("MessengerDialog.react"),{onToggle:d},b("React").createElement(b("MessengerDialogHeader.react"),null,b("React").createElement(b("MessengerDialogTitle.react"),null,g._("Ring Members Warning"))),b("React").createElement(b("MessengerDialogBody.react"),null,g._("You are trying to ring blocked users.")),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogCancelButton.react"),null),b("React").createElement(b("MessengerDialogButton.react"),{label:g._("Ring"),onClick:function(){d(),e(),c()},type:"primary",use:"default"})))};e.exports=a}),null);
__d("RTCGroupCallIncomingBlockedUserWarningDialog.react",["fbt","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerDialogTitle.react","React"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.leaveCall,d=a.onAddStream,e=a.onToggle;return b("React").createElement(b("MessengerDialog.react"),{onToggle:e},b("React").createElement(b("MessengerDialogHeader.react"),null,b("React").createElement(b("MessengerDialogTitle.react"),null,g._("Incoming Blocked User Warning"))),b("React").createElement(b("MessengerDialogBody.react"),null,g._("Blocked member is entering the call. Do you want to leave?")),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{label:g._("Leave Call"),onClick:function(){e(),c()},type:"primary",use:"default"}),b("React").createElement(b("MessengerDialogButton.react"),{label:g._("Stay"),onClick:function(){e(),d()},type:"primary",use:"default"})))};e.exports=a}),null);
__d("RTCGroupCallDialogController",["DOM","FBRTCGroupCallVideoEscalationDialog.react","React","ReactDOM","RTCGroupCallAddMembersDialog.react","RTCGroupCallAddUserWarningDialog.react","RTCGroupCallIncomingBlockedUserWarningDialog.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={_container:b("DOM").create("div"),_blockedContainer:b("DOM").create("div"),showAddGroupMembersDialog:function(a,c,d,e,f){b("ReactDOM").render(b("React").createElement(b("RTCGroupCallAddMembersDialog.react"),{isEscalatedCall:f,onUnmount:function(){return this._onUnmount()}.bind(this),participantStates:c,participants:a,thread:d,viewerID:e}),this._container)},showVideoEscalationDialog:function(a,c){b("ReactDOM").render(b("React").createElement(b("FBRTCGroupCallVideoEscalationDialog.react"),{onToggle:function(){this._onUnmount(),c()}.bind(this),userName:a}),this._container)},showBlockedUserWarningDialog:function(a,c){b("ReactDOM").render(b("React").createElement(b("RTCGroupCallAddUserWarningDialog.react"),{handleRing:a,onToggle:function(){this._onBlockedDialogUnmount()}.bind(this),unMountParent:c}),this._blockedContainer)},showIncomingBlockedUserWarningDialog:function(a,c,d,e){b("ReactDOM").render(b("React").createElement(b("RTCGroupCallIncomingBlockedUserWarningDialog.react"),{leaveCall:a,onAddStream:function(){c(d,e)},onToggle:function(){this._onUnmount()}.bind(this)}),this._container)},_onUnmount:function(){b("ReactDOM").unmountComponentAtNode(this._container)},_onBlockedDialogUnmount:function(){b("ReactDOM").unmountComponentAtNode(this._blockedContainer)}};e.exports=a}),null);
__d("RTCGroupCallActions",["RTCAppDispatcher","RTCCallActionTypes","RTCUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={setLayout:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").SET_LAYOUT,layout:a})},setDominantSpeaker:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").SET_DOMINANT_SPEAKER,dominantSpeakerFBID:a})},setPinnedSpeaker:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").SET_PINNED_SPEAKER,pinnedSpeakerFBID:a})},initThread:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").INIT_THREAD,thread:a,participants:c})},onParticipantLeft:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").ON_PARTICIPANT_LEFT,participantFBID:a})},onParticipantsAdded:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").ON_PARTICIPANTS_ADDED,participants:a,images:c})},addParticipantsToRing:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").ADD_PARTICIPANTS_TO_RING,participantFBIDs:a})},toggleRemoteStream:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").TOGGLE_REMOTE_STREAM,mediaStatus:a})},handleDismissRequest:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").DISMISS,transaction:a,request:c,endCallReason:b("RTCUtils").endCallReasonFromDismissRequest(c.dismissRequest())})},handleConferenceStateRequest:function(a,c,d,e){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").ON_CONFERENCE_STATE,transaction:a,request:c,conferenceStateVersion:d,resolve:e})},onJoinRequestSent:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").ON_JOIN_REQUEST_SENT})},onReceivedJoinResponse:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").ON_RECEIVED_JOIN_RESPONSE})},onJoinResponse:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").ON_JOIN_RESPONSE,serverInfoData:a})},onProcessedJoinResponse:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").ON_PROCESSED_JOIN_RESPONSE})},onServerMediaUpdateSuccess:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").ON_SERVER_MEDIA_UPDATE_SUCCESS})},onClientMediaUpdateResponse:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").ON_CLIENT_MEDIA_UPDATE_RESPONSE,responseStatusCode:a,currentVersion:c})}};e.exports=a}),null);
__d("RTCMWSessionDescription",["Promise","FBRTCConsoleLogger","FBRTCConstants","FBRTCMediaType","RTCCallStore","RTCGroupCallActions","RTCGroupCallDialogController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").SignalingProtocol;a={_videoEnabled:{},serverMediaUpdate:function(a,c){__p&&__p();var d=a.fromVersion,e=a.toVersion,f=a.mediaUpdates,h=b("RTCCallStore").getConnection(g.MULTIWAY);if(!h)return;var i=h.getLocalDescription(),j=h.getRemoteDescription(),k=j.sessionDescription.getVersion();if(k!==d){c(k);return}a=function(){__p&&__p();f.forEach(function(a){j.processServerMediaUpdate(a),a.media.forEach(function(c){var d=c.type;c=c.enabled;d===b("FBRTCMediaType").VIDEO&&(this._videoEnabled[a.sourceKey]=c)}.bind(this))}.bind(this)),j.sessionDescription.setVersion(e),b("Promise").all([h.setLocalDescription(i),h.setRemoteDescription(j)]).then(function(){var a;b("RTCGroupCallActions").toggleRemoteStream((a=[]).concat.apply(a,f.map(function(a){a=a.media;return a})).reduce(function(a,b){var c=b.id;b=b.enabled;a[c]=b;return a},{}));c(e)},function(){return c(k)})["catch"](function(a){})}.bind(this);d=f.find(function(a){var c=a.sourceKey;a=a.media;return!this._videoEnabled[c]&&a.some(function(a){var c=a.type;a=a.enabled;return c===b("FBRTCMediaType").VIDEO&&a})}.bind(this));if(!b("RTCCallStore").getState().localUser.hasVideo()&&d){d=d.sourceKey.split(":");var l=d[0];d=b("RTCCallStore").getState().remoteUsers.find(function(a){return a.FBID===l});b("RTCGroupCallDialogController").showVideoEscalationDialog(d.userName,a)}else a()}};e.exports=a}),null);
__d("FBRTCMultiwayMessage",["ChannelManager","CurrentUser","FBRTCMessageType","RTCAppData","RTCUtils"],(function(a,b,c,d,e,f){__p&&__p();b("ChannelManager").startChannelManager();function g(a){"use strict";this.$1=a}g.prototype.isRequest=function(){"use strict";return this.$1.jsonPayload.header.responseStatusCode==null};g.prototype.isType=function(a){"use strict";return this.type()==a};g.prototype.transactionId=function(){"use strict";return this.$1.jsonPayload.header.transactionId};g.prototype.conferenceName=function(){"use strict";return this.$1.jsonPayload.header.conferenceName};g.prototype.serverInfoData=function(){"use strict";return this.$1.jsonPayload.header.serverInfoData};g.prototype.message=function(){"use strict";return this.$1};g.prototype.type=function(){"use strict";return this.header().type};g.prototype.endpoint=function(){"use strict";return this.$1.endpoint};g.prototype.header=function(){"use strict";return this.$1.jsonPayload.header};g.prototype.body=function(){"use strict";return this.$1.jsonPayload.body};g.prototype.incrementRetryCount=function(){"use strict";this.$1.jsonPayload.header.retryCount++};g.prototype.ringRequest=function(){"use strict";return this.isRequest()&&this.isType(b("FBRTCMessageType").RING)?this.body().ringRequest:null};g.prototype.dismissRequest=function(){"use strict";return this.isRequest()&&this.isType(b("FBRTCMessageType").DISMISS)?this.body().dismissRequest:null};g.prototype.serverMediaUpdateRequest=function(){"use strict";return this.isRequest()&&this.isType(b("FBRTCMessageType").SERVER_MEDIA_UPDATE)?this.body().serverMediaUpdateRequest:null};g.prototype.conferenceStateRequest=function(){"use strict";return this.isRequest()&&this.isType(b("FBRTCMessageType").CONFERENCE_STATE)?this.body().conferenceStateRequest:null};g.prototype.createResponse=function(a,c){"use strict";var d=c.body;c=c.callID;a={endpoint:{appId:b("RTCAppData").getMWAppID(),deviceId:b("ChannelManager").getCompleteConfig().sessionID,userId:b("CurrentUser").getID()},jsonPayload:{header:b("RTCUtils").createResponseHeader(this.header(),a,c?c:""),body:d||{}}};return new g(a)};e.exports=g}),null);
__d("XGroupCallSendMessageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groupcall/sendmessage/",{webrtc_fbtrace:{type:"Int"}})}),null);
__d("RTCMessageSender",["Promise","AsyncRequest","CurrentUser","Fbtrace","RTCAppData","SiteData","XGroupCallSendMessageController"],(function(a,b,c,d,e,f){__p&&__p();var g=6e3;a.prototype.send=function(a){"use strict";__p&&__p();return new(b("Promise"))(function(c,d){__p&&__p();var e=a.jsonPayload.header.conferenceName;e={conference_name:e,user_id:b("CurrentUser").getID(),message:a,app_id:b("RTCAppData").getAppID(),app_version:String(b("SiteData").client_revision||"dev"),op:"RTCMessageSender.send",policy:"WebRTC"};e=b("Fbtrace").requestReceive("browser",String(b("SiteData").client_revision||"dev"),e);var f=b("XGroupCallSendMessageController").getURIBuilder().setInt("webrtc_fbtrace",e.isOn()?1:0).getURI();b("Fbtrace").withDefaultNode(e,function(){var e=new(b("AsyncRequest"))(f).setMethod("POST").setData({message:JSON.stringify(a)}).setAllowCrossPageTransition(!0).setHandler(function(a){c(a)}).setErrorHandler(function(a){a=a.getErrorDescription();a=Error(a!=null?a.toString():"AsyncRequest error");d(a)}).setTimeoutHandler(g,function(){d("Timeout")});e.send()})})};function a(){"use strict"}e.exports=a}),null);
__d("FBRTCTransactions",["Promise","FBRTCConsoleLogger","RTCMessageSender","clearTimeout","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=6e4,h=Object.freeze({INIT:0,PROCESSING:1,COMPLETED:2,TERMINATED:3});function a(){this.$1=new Map()}a.prototype.findTransaction=function(a){return this.$1.get(a)};a.prototype.addTransaction=function(a){this.$1.set(a.id,a)};a.prototype.removeTransaction=function(a){this.$1["delete"](a.id)};a.prototype.getTransaction=function(a){return this.findTransaction(a.transactionId())||new i(this,a)};function i(a,c){this.id=c.transactionId(),this.$1=h.INIT,this.$2=c,this.$3=null,this.$4=a,this.$5=new Error("Unknown"),this.$6=null,this.$7=new(b("RTCMessageSender"))(),this.$8(),this.$4.addTransaction(this)}i.prototype.start=function(){__p&&__p();if(this.$1==h.INIT){this.$9(h.PROCESSING);return b("Promise").resolve(this.$2)}else if(this.$1==h.PROCESSING)return b("Promise").resolve(null);else if(this.$1==h.COMPLETED){this.$10();return b("Promise").resolve(null)}return b("Promise").reject(this.$5)};i.prototype.sendResponse=function(a){this.$3=a;this.$9(h.COMPLETED);return this.$7.send(a.message()).then(function(a){},function(a){this.$5=a,this.$9(h.TERMINATED)}.bind(this))};i.prototype.$10=function(){if(this.$3!=null){var a=this.$3;a.incrementRetryCount();this.sendResponse(a)}};i.prototype.$9=function(a){a!=this.$1&&(this.$1=a,this.$1!=h.TERMINATED&&this.$8(),this.$1==h.TERMINATED&&(this.$5=new Error("Terminated"),this.$4.removeTransaction(this)))};i.prototype.$8=function(){this.$6&&(b("clearTimeout")(this.$6),this.$6=null),this.$6=b("setTimeout")(function(){this.$9(h.TERMINATED)}.bind(this),g)};e.exports={FBRTCTransactionOwner:a,FBRTCServerTransaction:i}}),null);
__d("RTCProxyUserActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SET_PROXY_USER_MAP:"SET_PROXY_USER_MAP"})}),null);
__d("RTCProxyUserActions",["RTCAppDispatcher","RTCProxyUserActionTypes"],(function(a,b,c,d,e,f){"use strict";a={setProxyUsers:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCProxyUserActionTypes").SET_PROXY_USER_MAP,proxyUserID:a,proxyingAsUserID:c})}};e.exports=a}),null);
__d("RTCProxyUserReducer",["RTCProxyUserActionTypes"],(function(a,b,c,d,e,f){"use strict";function a(a,c){switch(c.type){case b("RTCProxyUserActionTypes").SET_PROXY_USER_MAP:var d=c.proxyUserID;c=c.proxyingAsUserID;if(!a.proxyUserToProxyingAs.has(d))return a.set("proxyingAsToProxyUser",a.proxyingAsToProxyUser.set(c,d)).set("proxyUserToProxyingAs",a.proxyUserToProxyingAs.set(d,c))}return a}e.exports={setProxyUsers:a}}),null);
__d("RTCProxyUserStoreState",["immutable"],(function(a,b,c,d,e,f){var g;g=babelHelpers.inherits(a,b("immutable").Record({proxyingAsToProxyUser:b("immutable").Map(),proxyUserToProxyingAs:b("immutable").Map()}));g&&g.prototype;function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("RTCProxyUserStore",["FluxReduceStore","RTCAppDispatcher","RTCProxyUserReducer","RTCProxyUserStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("RTCProxyUserReducer").setProxyUsers];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("RTCProxyUserStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCProxyUserUtils",["ImmutableObject","MercuryIDs","RTCProxyUserActions","RTCProxyUserStore","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={setProxyingAsUsersFromMessage:function(a){__p&&__p();a=a.appMessages;if(a){var c=new Map();a.forEach(function(a){__p&&__p();var d;d=(d=a)!=null?(d=d.body)!=null?(d=d.genericMessage)!=null?d.topic:d:d:d;a=(a=a)!=null?(a=a.body)!=null?(a=a.genericMessage)!=null?a.data:a:a:a;if(d==="aloha_proxying_as_users"&&a!=null){d=JSON.parse(a);for(var e in d){a=d[e][0].id.toString();a&&(b("RTCProxyUserActions").setProxyUsers(e,a),c.set(e,a))}}});return c}return null},transformProxyUserParticipantsToProxyingAs:function(a,c){__p&&__p();for(var d in a){var e=a[d].fbid;if(c.has(e)){var f=a[d];delete a[d];e=c.get(e);var g=b("MercuryIDs").getParticipantIDFromUserID(e);f=b("ImmutableObject").setProperty(f,"fbid",e);f=b("ImmutableObject").setProperty(f,"id",g);a[g]=f}}return a},getUserIDToFetch:function(a){var c=b("RTCProxyUserStore").getState();c=c.proxyUserToProxyingAs;return c.has(a)?c.get(a):a}};e.exports=a}),null);
__d("MultiwayParticipantFetcher",["Promise","regeneratorRuntime","BonfireUserFetcher","ImmutableObject","MercuryIDs","MercuryParticipantsConstants","MessengerParticipants.bs","RTCProxyUserUtils","RTCUtils","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("immutable").Map;b("immutable").Set;function g(a,c){var d=a.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});return new(b("Promise"))(function(a,e){try{b("MessengerParticipants.bs").getBigImageMultiWithSize(d.toArray(),function(c){a(b("immutable").fromJS(c))},c)}catch(a){e(a)}})}function h(a,c){var d=a.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});return new(b("Promise"))(function(a,e){try{b("MessengerParticipants.bs").getMulti(d.toArray(),function(d){c&&c.proxyingAsToProxyUser!=null&&c.proxyingAsToProxyUser!==undefined&&c.proxyingAsToProxyUser.size>0&&(d=b("RTCProxyUserUtils").transformProxyUserParticipantsToProxyingAs(d,c.proxyingAsToProxyUser)),a(b("immutable").fromJS(d))})}catch(a){e(a)}})}function i(a,c){__p&&__p();var d,e;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(h(a,c));case 2:d=f.sent;if(!c.profileImageSize){f.next=8;break}f.next=6;return b("regeneratorRuntime").awrap(g(a,c.profileImageSize));case 6:e=f.sent;return f.abrupt("return",d.withMutations(function(a){e.forEach(function(c,d){var e=a.get(d);if(e){e=b("ImmutableObject").setProperty(e,"big_image_src",c);a.set(d,e)}})}));case 8:return f.abrupt("return",d);case 9:case"end":return f.stop()}},null,this)}function j(a){__p&&__p();var c,d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=b("immutable").Set([a]);d=b("MercuryIDs").getParticipantIDFromUserID(a);f.next=4;return b("regeneratorRuntime").awrap(i(c,{profileImageSize:b("MercuryParticipantsConstants").WWW_INCALL_THUMBNAIL_SIZE}));case 4:e=f.sent;return f.abrupt("return",e.get(d));case 6:case"end":return f.stop()}},null,this)}a={fetchParticipant:function(a,c){__p&&__p();return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:if(!b("RTCUtils").isBonfireCall(a)){d.next=6;break}d.next=3;return b("regeneratorRuntime").awrap(b("BonfireUserFetcher").fetchParticipant(c));case 3:return d.abrupt("return",d.sent);case 6:d.next=8;return b("regeneratorRuntime").awrap(j(c));case 8:return d.abrupt("return",d.sent);case 9:case"end":return d.stop()}},null,this)},fetchAllParticipants:function(a,c,d){__p&&__p();return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:d===void 0&&(d={});if(!b("RTCUtils").isBonfireCall(a)){e.next=7;break}e.next=4;return b("regeneratorRuntime").awrap(b("BonfireUserFetcher").fetchAllParticipants(c));case 4:return e.abrupt("return",e.sent);case 7:e.next=9;return b("regeneratorRuntime").awrap(i(c,d));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},null,this)}};e.exports=a}),null);
__d("RTCCallActions",["invariant","RTCAppDispatcher","RTCCallActionTypes","RTCGroupCallEscalationActionTypes","RTCUtils","RTWebLoggingCallType","RTWebUserActionLogger","emptyFunction","mixInEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={addListener:b("emptyFunction"),emit:b("emptyFunction"),initialize:function(a){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"RTCCallActions_initialize",callID:String(a.callID),conferenceName:a.conferenceName,callType:a.protocol==="p2p"?b("RTWebLoggingCallType").P2P:b("RTWebLoggingCallType").MW}),b("RTCAppDispatcher").dispatch(babelHelpers["extends"]({type:b("RTCCallActionTypes").INIT},a))},reset:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").RESET})},resetForRedial:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").RESET_FOR_REDIAL,conferenceName:a,callID:c})},callCollision:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").CALL_COLLISION,conferenceName:a,peerID:c})},setCallSummary:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").SET_CALL_SUMMARY,callSummary:a})},call:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").CALL,usersToRing:a,peerConnection:c})},callSuccess:function(a){a===void 0&&(a=!1),b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").CALL_SUCCESS,connected:a})},incomingCallSuccess:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").INCOMING_CALL_SUCCESS})},callError:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").CALL_ERROR,endCallReason:b("RTCUtils").endCallReasonFromResponseStatusCode(a),endCallSubreason:"Call error: "+(a||0)})},completeTransitionToMultiway:function(){b("RTCAppDispatcher").dispatch({type:b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_CLEAR_P2P_CONNECTION})},hangupSuccess:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").HANGUP_SUCCESS})},hangupError:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").HANGUP_ERROR})},join:function(a){h.call([],a)},hangup:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").HANGUP,hangupReason:a,detailedReasonString:c,endCallReason:a})},initLocalUser:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").INIT_LOCAL_USER,localUser:a})},initRemoteUsers:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").INIT_REMOTE_USERS,remoteUsers:a})},updateRemoteUsers:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").UPDATE_REMOTE_USERS,remoteUsers:a})},addLocalStream:function(a){a!=null||g(0,11208),b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").ADD_LOCAL_STREAM,stream:a})},removeLocalStream:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").REMOVE_LOCAL_STREAM,stream:a})},replaceLocalStream:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").REPLACE_LOCAL_STREAM,oldStream:a,newStream:c})},removeAllLocalStreams:function(a){a===void 0&&(a=!1),b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").REMOVE_ALL_LOCAL_STREAMS,stopStreams:a})},removeAllLocalScreenStreams:function(a){a===void 0&&(a=!1),b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").REMOVE_ALL_LOCAL_SCREEN_STREAMS,stopStreams:a})},addRemoteStream:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").ADD_REMOTE_STREAM,stream:a,userID:c})},removeRemoteStream:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").REMOVE_REMOTE_STREAM,stream:a,userID:c})},removeAllRemoteStreams:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").REMOVE_ALL_REMOTE_STREAMS,userID:a})},addRemoteTrack:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").ADD_REMOTE_TRACK,stream:a,track:c})},removeRemoteTrack:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").REMOVE_REMOTE_TRACK,stream:a,track:c})},addLocalScreenStream:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").ADD_LOCAL_SCREEN_STREAM,stream:a})},removeLocalScreenStream:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").REMOVE_LOCAL_SCREEN_STREAM,stream:a})},replaceLocalScreenStream:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").REPLACE_LOCAL_SCREEN_STREAM,oldStream:a,newStream:c})},addRemoteScreenStream:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").ADD_REMOTE_SCREEN_STREAM,stream:a,userID:c})},removeRemoteScreenStream:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").REMOVE_REMOTE_SCREEN_STREAM,stream:a,userID:c})},endCall:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").END_CALL,endCallReason:a,endCallSubreason:c})},waitForUserInput:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").WAIT_FOR_USER_INPUT})},toggleMuteAudio:function(a){b("RTCAppDispatcher").dispatch({type:a?b("RTCCallActionTypes").AUDIO_UNMUTED:b("RTCCallActionTypes").AUDIO_MUTED})},toggleMuteVideo:function(a){b("RTCAppDispatcher").dispatch({type:a?b("RTCCallActionTypes").VIDEO_UNMUTED:b("RTCCallActionTypes").VIDEO_MUTED})},stopLocalVideo:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").STOP_LOCAL_STREAM})},toggleMuteRemoteAudio:function(a,c){b("RTCAppDispatcher").dispatch({type:a?b("RTCCallActionTypes").REMOTE_AUDIO_MUTED:b("RTCCallActionTypes").REMOTE_AUDIO_UNMUTED,userID:c})},toggleMuteRemoteVideo:function(a,c){b("RTCAppDispatcher").dispatch({type:a?b("RTCCallActionTypes").REMOTE_VIDEO_MUTED:b("RTCCallActionTypes").REMOTE_VIDEO_UNMUTED,userID:c})},toggleSelfView:function(a){b("RTCAppDispatcher").dispatch({type:a?b("RTCCallActionTypes").SELF_VIEW_COLLAPSED:b("RTCCallActionTypes").SELF_VIEW_UNCOLLAPSED})},submitRating:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").SUBMIT_RATING,rating:a})},submitFeedback:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").SUBMIT_FEEDBACK,feedback:a})},submitSurveyChoice:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").SUBMIT_SURVEY_CHOICE,surveyChoice:a})},ratingShown:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").RATING_SHOWN})},feedbackShown:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").FEEDBACK_SHOWN})},setEndCallReason:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").SET_END_CALL_REASON,endCallReason:a})},setConferenceState:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").SET_CONFERENCE_STATE,conferenceState:a})},setFloorStatus:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").FLOOR_STATUS,status:a})}};b("mixInEventEmitter")(h,{onIceConnectionStateChange:!0});e.exports=h}),null);
__d("RTCMultiwayMessageHandler",["Arbiter","ChannelConstants","CurrentUser","FBRTCCapability","FBRTCDeviceStatus","FBRTCHangupReason","FBRTCLogger","FBRTCMultiwayMessage","FBRTCRtcResponseStatusCode","FBRTCTransactions","MultiwayParticipantFetcher","RTCCallActions","RTCCallStore","RTCGroupCallActions","RTCMWProtocolHandler","RTCMWSessionDescription","RTCProxyUserStore","RTCProxyUserUtils","generateRTCCallID","immutable","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCTransactions").FBRTCServerTransaction,h=b("FBRTCTransactions").FBRTCTransactionOwner;function i(){this.$3=-1,this.$7()}i.prototype.initialize=function(a,b,c,d){this.$1=a,this.$2=b,this.$4=c,this.$5=d};i.initHandler=function(a,b,c,d){c===void 0&&(c=!1),d===void 0&&(d=!1),new i().initialize(a,b,c,d)};i.close=function(){i.$6&&(b("Arbiter").unsubscribe(i.$6),i.$6=null)};i.prototype.$7=function(){i.$6=b("Arbiter").subscribe([b("ChannelConstants").getArbiterType("rtc_live_json"),b("ChannelConstants").getArbiterType("rtc_multi_json")],function(a,b){this.$8(b.obj)}.bind(this))};i.prototype.$8=function(a){__p&&__p();var c=new(b("FBRTCMultiwayMessage"))(a);a=b("RTCCallStore").getState().callID;b("FBRTCLogger").getInstance().logMultiwayMessageReceived(c,a);if(!c.isRequest())return;if(this.$1===c.conferenceName())this.$9(c);else if(c.ringRequest()&&!this.$4){var d=new g(new h(),c);b("promiseDone")(d.start(),function(a){var e=b("generateRTCCallID")();b("promiseDone")(d.sendResponse(this.$10(a,e)),function(){return b("RTCMWProtocolHandler").otherUserInAnotherCall(c.conferenceName(),c.serverInfoData(),b("FBRTCHangupReason").IN_ANOTHER_CALL,e.toString(),"InAnotherCall")})}.bind(this))}};i.prototype.$10=function(a,c){var d=a.ringRequest(),e=a.serverInfoData();if(d==null||e==null)return a.createResponse(b("FBRTCRtcResponseStatusCode").BAD_REQUEST,{});d={deviceCapabilities:[b("FBRTCCapability").SUPPORT_AUDIO_DEPRECATED,b("FBRTCCapability").SUPPORT_VIDEO_DEPRECATED],deviceStatus:b("FBRTCDeviceStatus").OK};return a.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ringResponse:d},callID:c.toString()})};i.prototype.$9=function(a){__p&&__p();var c=new g(new h(),a);b("promiseDone")(c.start().then(function(a){__p&&__p();if(a!=null){var d=b("RTCCallStore").getState(),e=d.callInfo;if(a.dismissRequest()!=null)a.serverInfoData()===e.serverInfoData&&(b("RTCGroupCallActions").handleDismissRequest(c,a),i.close(),d.connections.forEach(function(a){return a.close()}),this.$5||b("RTCCallActions").removeAllLocalStreams(!0));else if(a.serverMediaUpdateRequest()!=null)b("RTCProxyUserUtils").setProxyingAsUsersFromMessage(a.serverMediaUpdateRequest()),b("RTCMWSessionDescription").serverMediaUpdate(a.serverMediaUpdateRequest(),function(d){b("RTCGroupCallActions").onServerMediaUpdateSuccess(),c.sendResponse(a.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{serverMediaUpdateResponse:{currentVersion:d}},callID:e.callID}))});else if(a.conferenceStateRequest()!=null){d=b("RTCCallStore").getState();d=d.remoteUsers;var f=d.map(function(a){return a.FBID});d=Object.keys(a.conferenceStateRequest().participantStates);d=d.filter(function(a){return a!==b("CurrentUser").getID()&&!f.has(a)});if(d.length>0){var g=b("RTCProxyUserUtils").setProxyingAsUsersFromMessage(a.conferenceStateRequest()),h=new Set(d);g!=null&&g.forEach(function(a,b){h["delete"](b),a!==null&&!h.has(a)&&h.add(a)});d=b("RTCProxyUserStore").getState();g=d.proxyingAsToProxyUser;b("promiseDone")(b("MultiwayParticipantFetcher").fetchAllParticipants(this.$1,b("immutable").Set(h),{profileImageSize:100,proxyingAsToProxyUser:g}),function(d){b("RTCGroupCallActions").onParticipantsAdded(d.toJS()),b("RTCGroupCallActions").handleConferenceStateRequest(c,a,this.$3,function(a){this.$3=a}.bind(this))}.bind(this))}else b("RTCGroupCallActions").handleConferenceStateRequest(c,a,this.$3,function(a){this.$3=a}.bind(this))}}}.bind(this)))};e.exports=i}),null);
__d("RTCP2PConnectionStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CONNECTED:"CONNECTED",CONNECTING:"CONNECTING",CONTACTING:"CONTACTING",DISCONNECTED:"DISCONNECTED",ESCALATING_TO_BJN:"ESCALATING_TO_BJN",INIT:"INIT",RECONNECTING:"RECONNECTING",RINGING:"RINGING"})}),null);
__d("RTCP2PCallWindowHandler",["RTCCallStore","RTCP2PCallStore","RTCP2PConnectionStatus","RTWebUserActionLogger","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a={init:function(a){this._isWindowOpened()&&this.close(),g=a,this.updateCallInProgressIndicator(),this._monitorOpenerForChanges()},updateCallInProgressIndicator:function(a){if(!this._isWindowOpened())return;var c=b("RTCCallStore").getState();c=c.remoteUsers;a=a?a:b("RTCP2PCallStore").getState().connectionStatus;!c.count()||a===b("RTCP2PConnectionStatus").DISCONNECTED?g.rtcCallInProgessWith=null:g.rtcCallInProgessWith=c.first().FBID.toString()},reload:function(){this._isWindowOpened()&&g.location.reload()},close:function(){this._isWindowOpened()&&g.close()},_monitorOpenerForChanges:function(){if(g.opener)try{g.opener.addEventListener("unload",function(event){this._passWindowToOpener()}.bind(this))}catch(a){}},_passWindowToOpener:function(a){__p&&__p();a===void 0&&(a=10),b("setTimeout")(function(){if(!this._isWindowOpened()||a<=1)return;try{if(g.opener&&!g.opener.closed){g.opener.rtcCallChildWindow=g;return}}catch(a){b("RTWebUserActionLogger").logErrorOnceforDomain("RTCP2PCallWindowHandler__passWindowToOpener",a)}this._passWindowToOpener(a-1)}.bind(this),1e3)},_isWindowOpened:function(){return!!(g&&!g.closed)}};e.exports=a}),null);
__d("XScreenSharingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/screen_sharing/",{peer_id:{type:"FBID",required:!0},version:{type:"Int"}})}),null);
__d("RTCScreenSharingWindowHandler",["RTCP2PCallActions","RTCUtils","XScreenSharingController","promiseDone"],(function(a,b,c,d,e,f){__p&&__p();var g=540,h=960,i;a={open:function(a,c){i=window.open("about:blank","Screen Sharing",this._getWindowFeatures()),b("promiseDone")(b("RTCUtils").getStreamVideoResolution(c)["catch"](function(b){this._setupScreenSharingWindow(a,c,null)}.bind(this)),function(b){this._setupScreenSharingWindow(a,c,b)}.bind(this))},_setupScreenSharingWindow:function(a,b,c){__p&&__p();window.getRemoteMediaStream=function(){return b};window.closeScreenSharingWindow=this._onUnload;if(c){c=this._getConstrainedSize(c.width,c.height);var d=c.width,e=c.height;i.resizeTo(d,e);window.setTimeout(function(){this._adjustScreenSize({width:d,height:e})}.bind(this),200)}i.location=this._getUnsignedUri(a);window.focus&&this.isWindowOpened()&&i.focus()},_adjustScreenSize:function(a){if(!i)return;i.resizeTo(a.width,a.height+(a.height-i.innerHeight))},close:function(){if(i){var a=null;i.opener&&!i.opener.closed&&(a=i.opener);i.close();i=null;a&&a.postMessage({recipient:"SC_CONTENT_SCRIPT",type:"SC_RESET_PORT",text:"reset comm port"},"*")}},isWindowOpened:function(){return!!(i&&!i.closed)},_onUnload:function(){b("RTCP2PCallActions").togglePopOutScreenContent()},_getWindowFeatures:function(){var a=screen.availLeft,b=screen.availTop,c=this._getConstrainedSize(Math.min(h,screen.width-a),Math.min(g,screen.height-b)),d=c.width;c=c.height;c={height:"height="+c.toString(),width:"width="+d.toString(),top:"top="+b.toString(),left:"left="+a.toString()};return["menubar=no","location=no","scrollbars=no","status=no","personalbar=no",c.height,c.width,c.top,c.left].join(",")},_getConstrainedSize:function(a,b){var c;a>h&&(c=h/a,b*=c,a*=c);b>g&&(c=g/b,a*=c,b*=c);return{width:a,height:b}},_getUnsignedUri:function(a){return b("XScreenSharingController").getURIBuilder().setFBID("peer_id",a).setInt("version",2).getURI()}};e.exports=a}),null);
__d("RTCP2PCallActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({P2P_PROCESS_MESSAGE:"P2P_PROCESS_MESSAGE",P2P_SET_IS_CALLER:"P2P_SET_IS_CALLER",P2P_STAR_RATING_DONE:"P2P_STAR_RATING_DONE",POP_IN_SCREEN_CONTENT:"POP_IN_SCREEN_CONTENT",POP_OUT_SCREEN_CONTENT:"POP_OUT_SCREEN_CONTENT",SET_CALL_TYPE:"SET_CALL_TYPE",SET_CONNECTION_STATUS:"SET_CONNECTION_STATUS",SET_MULTIWAY_ESCALATION_SUPPORT:"SET_MULTIWAY_ESCALATION_SUPPORT",SET_REMOTE_SIGNALING_EXPERIMENTS:"SET_REMOTE_SIGNALING_EXPERIMENTS"})}),null);
__d("RTCP2PCallActions",["RTCAppDispatcher","RTCP2PCallActionTypes","RTCP2PCallWindowHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={reload:function(){b("RTCP2PCallWindowHandler").reload()},setCallType:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallActionTypes").SET_CALL_TYPE,callType:a})},setConnectionStatus:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallActionTypes").SET_CONNECTION_STATUS,connectionStatus:a})},setMultiwayEscalationSupport:function(a,c){b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallActionTypes").SET_MULTIWAY_ESCALATION_SUPPORT,offerEscalationSupport:a,escalationConferenceName:c})},setRemoteSignalingExperiments:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallActionTypes").SET_REMOTE_SIGNALING_EXPERIMENTS,remoteSignalingExperiments:a})},togglePopOutScreenContent:function(a){b("RTCAppDispatcher").dispatch({type:a?b("RTCP2PCallActionTypes").POP_OUT_SCREEN_CONTENT:b("RTCP2PCallActionTypes").POP_IN_SCREEN_CONTENT,stream:a})},processMessage:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallActionTypes").P2P_PROCESS_MESSAGE,message:a})},setIsCaller:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallActionTypes").P2P_SET_IS_CALLER,isCaller:a})},starRatingDone:function(a){a===void 0&&(a=!0),b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallActionTypes").P2P_STAR_RATING_DONE,done:a})}};e.exports=a}),null);
__d("FBRTCClientMediaUpdateReducer",["FBRTCConstants","FBRTCRtcResponseStatusCode","RTCCallActionTypes","RTCCallStore","RTCMWProtocolHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={configureAudio:function(a,c){switch(c.type){case b("RTCCallActionTypes").AUDIO_MUTED:return g(a,"audio",!1);case b("RTCCallActionTypes").AUDIO_UNMUTED:return g(a,"audio",!0)}return a},configureVideo:function(a,c){switch(c.type){case b("RTCCallActionTypes").VIDEO_MUTED:return g(a,"video",!1);case b("RTCCallActionTypes").VIDEO_UNMUTED:return g(a,"video",!0)}return a},onClientMediaUpdateResponse:function(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").ON_CLIENT_MEDIA_UPDATE_RESPONSE:if(c.responseStatusCode!==b("FBRTCRtcResponseStatusCode").OK)return a;a=a.setIn(["clientMediaUpdateInfo","lastSyncedClientVersion"],c.currentVersion);if(a.clientMediaUpdateInfo.pendingResponse){a=a.setIn(["clientMediaUpdateInfo","pendingResponse"],!1);if(a.clientMediaUpdateInfo.pendingUpdate)return h(a.setIn(["clientMediaUpdateInfo","pendingUpdate"],!1))}return a}return a}};function g(a,c,d){var e=b("RTCCallStore").getConnection(b("FBRTCConstants").SignalingProtocol.MULTIWAY);if(!e)return a;e=e.getLocalStreams()[0].getTracks().reduce(function(a,b){a[b.id]=b.kind===c?d:b.enabled;return a},{});return h(a.setIn(["clientMediaUpdateInfo","localMediaUpdates"],a.clientMediaUpdateInfo.localMediaUpdates.push({mediaStatus:e})))}function h(a){if(a.clientMediaUpdateInfo.pendingResponse)return a.setIn(["clientMediaUpdateInfo","pendingUpdate"],!0);var c=a.clientMediaUpdateInfo.localMediaUpdates.reduce(function(b,c,d){d>=a.clientMediaUpdateInfo.lastSyncedClientVersion&&b.push(c);return b},[]);if(c.length===0)return a;b("RTCMWProtocolHandler").clientMediaUpdate(b("RTCCallStore").getState().callInfo.conferenceName,b("RTCCallStore").getState().callInfo.serverInfoData,a.clientMediaUpdateInfo.lastSyncedClientVersion,a.clientMediaUpdateInfo.localMediaUpdates.size,c);return a.setIn(["clientMediaUpdateInfo","pendingResponse"],!0)}e.exports=a}),null);
__d("FBRTCGroupCallParticipantsReducer",["MercuryIDs","RTCCallActionTypes","RTCCallStore","RTCMWProtocolHandler","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={_participantsToRing:new Set(),initThread:function(a,c){switch(c.type){case b("RTCCallActionTypes").INIT_THREAD:return a.merge({participants:c.participants,thread:c.thread})}return a},onParticipantsChanged:function(a,c){switch(c.type){case b("RTCCallActionTypes").ON_PARTICIPANT_LEFT:return a.set("participants",a.participants["delete"](b("MercuryIDs").getParticipantIDFromUserID(c.participantFBID)));case b("RTCCallActionTypes").ON_PARTICIPANTS_ADDED:var d=Object.keys(c.participants).map(function(a){return c.participants[a].fbid}).filter(function(a){return g._participantsToRing.has(a)});d.length!==0&&(d.forEach(function(a){return g._participantsToRing["delete"](a)}),b("RTCMWProtocolHandler").addParticipants(b("RTCCallStore").getState().callInfo.conferenceName,b("RTCCallStore").getState().callInfo.serverInfoData,d));return a.set("participants",a.participants.merge(b("immutable").Map(c.participants)))}return a},addParticipantsToRing:function(a,c){switch(c.type){case b("RTCCallActionTypes").ADD_PARTICIPANTS_TO_RING:c.participantFBIDs.forEach(function(a){return g._participantsToRing.add(a)});return a}return a}};e.exports=g}),null);
__d("FBRTCGroupCallReducer",["FBRTCConstants","FBRTCParticipantCallState","RTCCallActionTypes","RTCCallStore","RTCEndCallReason","RTCMWProtocolHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").SignalingProtocol;a={setDominantSpeaker:function(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").SET_DOMINANT_SPEAKER:return a.set("dominantSpeakerFBID",c.dominantSpeakerFBID);case b("RTCCallActionTypes").SET_PINNED_SPEAKER:var d=b("RTCCallStore").getState();d=d.callInfo;var e=b("RTCCallStore").getConnection(g.MULTIWAY);if(!e)return a;b("RTCMWProtocolHandler").subscription(d.conferenceName,d.serverInfoData,e.getRemoteStreams(),a.layout,c.pinnedSpeakerFBID);return a.set("pinnedSpeakerFBID",c.pinnedSpeakerFBID);case b("RTCCallActionTypes").ON_CONFERENCE_STATE:d=c.request.conferenceStateRequest();e=d.participantStates;c=e[a.pinnedSpeakerFBID];return c&&c.state!==b("FBRTCParticipantCallState").CONNECTED?a.set("pinnedSpeakerFBID",null):a}return a},setLayout:function(a,c){switch(c.type){case b("RTCCallActionTypes").SET_LAYOUT:var d=b("RTCCallStore").getState();d=d.callInfo;var e=b("RTCCallStore").getConnection(g.MULTIWAY);e&&b("RTCMWProtocolHandler").subscription(d.conferenceName,d.serverInfoData,e.getRemoteStreams(),c.layout,a.pinnedSpeakerFBID);return a.set("layout",c.layout)}return a},processEndCallReason:function(a,c){switch(c.type){case b("RTCCallActionTypes").CALL_ERROR:case b("RTCCallActionTypes").HANGUP:case b("RTCCallActionTypes").END_CALL:case b("RTCCallActionTypes").DISMISS:return a.set("endCallReason",a.endCallReason||new(b("RTCEndCallReason"))(c.endCallReason))}return a}};e.exports=a}),null);
__d("RTCGroupCallEscalationStoreReducer",["FBRTCParticipantCallState","RTCCallActionTypes","RTCCallStore","RTCGroupCallEscalationActionTypes","RTCGroupCallEscalationStore","RTCMWProtocolHandler","RTCP2PCallStore","RTWebUserActionLogger","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Set([b("FBRTCParticipantCallState").UNKNOWN,b("FBRTCParticipantCallState").DISCONNECTED,b("FBRTCParticipantCallState").NO_ANSWER,b("FBRTCParticipantCallState").REJECTED,b("FBRTCParticipantCallState").UNREACHABLE,b("FBRTCParticipantCallState").CONNECTION_DROPPED,b("FBRTCParticipantCallState").PARTICIPANT_LIMIT_REACHED,b("FBRTCParticipantCallState").IN_ANOTHER_CALL,b("FBRTCParticipantCallState").RING_TYPE_UNSUPPORTED]);function a(a,c){switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_CANCEL:b("RTWebUserActionLogger").logCheckpoint({checkpoint:"group_escalation_cancel"});return a.withMutations(function(a){a.set("aborted",!0).set("inProgress",!1).set("toRing",!1).set("readyToTransition",!1).set("usersToRing",null)})}return a}function c(a,c){switch(c.type){case b("RTCCallActionTypes").HANGUP:case b("RTCCallActionTypes").END_CALL:case b("RTCCallActionTypes").HANGUP_ERROR:case b("RTCCallActionTypes").HANGUP_SUCCESS:return a.withMutations(function(a){a.set("aborted",!1).set("inProgress",!1).set("toRing",!1).set("usersToRing",null)})}return a}function d(a,c){switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_SET_P2P_CALLSUMMARY:var d=c.p2pCallSummary;if(d)return a.withMutations(function(a){a.set("p2pCallSummary",d)})}return a}function f(a,c){switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_START:b("RTWebUserActionLogger").logCheckpoint({checkpoint:"group_escalation_start"});return a.set("inProgress",!0).set("readyToTransition",!1)}return a}function h(a,c){if(!a.readyToTransition&&a.inProgress)switch(c.type){case b("RTCCallActionTypes").ON_JOIN_REQUEST_SENT:b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(a){return a.setEscalationConnectingToMultiway()});break;case b("RTCCallActionTypes").ON_JOIN_RESPONSE:b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(a){a.setEscalationConnectedToMultiway(),c.serverInfoData&&a.setServerInfoData(c.serverInfoData)});break}return a}function i(a,c){__p&&__p();if(!a.readyToTransition&&a.inProgress)switch(c.type){case b("RTCCallActionTypes").ON_CONFERENCE_STATE:c=c.request.conferenceStateRequest();if(c){var d=c.participantStates;c=a.toRing;var e=!1,f=Object.keys(d).every(function(a){return d[a].state===b("FBRTCParticipantCallState").CONNECTED});if(f){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"group_escalation_success"});b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(a){a.setEscalationPeerConnectedToMultiway(),a.setEscalationConnectedToMultiway(),a.setReadyToEscalate()});var h=b("RTCP2PCallStore").getState();h=h.protocolHandler;h.shutDownP2PListenersForMultiwayEscalation();if(a.usersToRing&&c){h=a.usersToRing.valueSeq().map(function(a){return a.fbid}).filter(Boolean).toArray();b("RTCMWProtocolHandler").addParticipants(b("RTCCallStore").getState().callInfo.conferenceName,b("RTCCallStore").getState().callInfo.serverInfoData,h);c=!1}}else e=Object.keys(d).some(function(a){return g.has(d[a].state)}),e&&b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(a){return a.setInvalidP2PEscalationState()});return a.set("aborted",e).set("readyToTransition",f).set("toRing",c)}}return a}function j(a,c){switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_SET_USERS_TO_RING:if(c.usersToRing)return a.set("usersToRing",c.usersToRing).set("toRing",!0)}return a}e.exports={abortEscalation:a,callStart:f,clearStore:c,onMultiwayConnectionSignaling:h,onParticipantsConnected:i,setP2PCallSummary:d,setUsersToRing:j}}),null);
__d("RTCCallType",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({AUDIO_ONLY:"AUDIO_ONLY",VIDEO_ONLY:"VIDEO_ONLY",AUDIO_VIDEO:"AUDIO_VIDEO",NO_AUDIO_VIDEO:"NO_AUDIO_VIDEO"});e.exports=a}),null);
__d("RTCP2PCallEscalationActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({P2P_CALL_ESCALATION_ACK:"P2P_CALL_ESCALATION_ACK",P2P_CALL_ESCALATION_FAILURE:"P2P_CALL_ESCALATION_FAILURE",P2P_CALL_ESCALATION_SET_REQUEST:"P2P_CALL_ESCALATION_SET_REQUEST",P2P_CALL_ESCALATION_SET_RESPONSE:"P2P_CALL_ESCALATION_SET_RESPONSE",P2P_CALL_ESCALATION_START:"P2P_CALL_ESCALATION_START",P2P_CALL_ESCALATION_SUCCESS:"P2P_CALL_ESCALATION_SUCCESS",SET_P2P_CALL_ESCALATION_MEDIA:"SET_P2P_CALL_ESCALATION_MEDIA"})}),null);
__d("RTCP2PCallEscalationStoreState",["FBRTCConstants","FBRTCMessage","immutable"],(function(a,b,c,d,e,f){var g;c=b("FBRTCConstants").CallType;g=babelHelpers.inherits(a,b("immutable").Record({awaitingACK:!1,callType:c.VOIP,escalated:!1,escalateMediaStream:null,failureReason:null,initiatedEscalation:!1,inProgress:!1,request:null,response:null,token:null}));g&&g.prototype;function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("RTCP2PCallEscalationStoreReducers",["FBRTCConstants","RTCCallActionTypes","RTCCallType","RTCP2PCallActionTypes","RTCP2PCallEscalationActionTypes","RTCP2PCallEscalationStoreState","RTCP2PCallEscalator","RTCP2PCallStore","RTWebUserActionLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").CallType;a=function(a,c){__p&&__p();switch(c.type){case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_START:if(a.inProgress)return a;if(a.escalated||!b("RTCP2PCallStore").isAudioOnly())return a;b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_start"});return a.withMutations(function(a){a.set("awaitingACK",!0).set("initiatedEscalation",!0).set("failureReason",null).set("inProgress",!0).set("token",b("RTCP2PCallStore").getState().protocolHandler.generateEscalationRequestToken(!0))});case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SUCCESS:if(!a.inProgress)return a;else if("token"in c&&c.token!==a.token)return a;b("RTCP2PCallEscalator").onEscalationSucceeded();b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_success"});return a.withMutations(function(a){a.set("awaitingACK",!1).set("callType",g.ESCALATED).set("escalated",!0).set("inProgress",!1).set("request",null).set("response",!0).set("token",null)});case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_FAILURE:if(!a.inProgress)return a;else if("token"in c&&c.token!==a.token)return a;b("RTCP2PCallEscalator").onEscalationFailed();if(c.reason==="denied"){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_denied"});return a.withMutations(function(a){a.set("awaitingACK",!1).set("initiatedEscalation",!1).set("callType",g.ESCALATION_DECLINED).set("escalated",!1).set("failureReason",c.reason||null).set("inProgress",!1).set("request",null).set("response",c.response||null).set("token",null).set("escalateMediaStream",null)})}else c.reason==="cancelled"?b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_cancelled"}):c.reason==="timeout"?b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_timeout"}):b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_failed"});b("RTCP2PCallStore").getState().protocolHandler.generateEscalationRequestToken(!1);return a.withMutations(function(a){a.set("awaitingACK",!1).set("inProgress",!1).set("initiatedEscalation",!1).set("callType",g.ESCALATION_DECLINED).set("escalated",!1).set("failureReason",c.reason).set("token",null).set("escalateMediaStream",null)});case b("RTCP2PCallEscalationActionTypes").SET_P2P_CALL_ESCALATION_MEDIA:return a.set("escalateMediaStream",c.stream);default:return a}};c=function(a,c){__p&&__p();switch(c.type){case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SET_REQUEST:var d=c.request;if(d==null)return a;return!b("RTCP2PCallEscalator").requestVideoOn(d.msg)?a.withMutations(function(a){a.set("awaitingACK",!1).set("inProgress",!1).set("request",null).set("response",null).set("token",null)}):a.withMutations(function(a){a.set("inProgress",!0).set("request",c.request).set("response",null).set("token",null)});case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SET_RESPONSE:if(c.response==null)return a;else if(a.request==null)return a;return a.withMutations(function(a){a.set("awaitingACK",!0).set("callType",c.response?g.ESCALATED:g.ESCALATION_DECLINED).set("response",c.response).set("token",b("RTCP2PCallStore").getState().protocolHandler.generateEscalationResponseToken(a.request,c.response))});case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_ACK:if(c.token==null)return a;return a.response==null||a.request==null||c.token!==a.token||!a.awaitingACK?a:a.withMutations(function(a){a.set("awaitingACK",!1).set("callType",a.response?g.ESCALATED:g.ESCALATION_DECLINED).set("escalated",a.response).set("inProgress",!1).set("request",null).set("response",null).set("token",null)});default:return a}};d=function(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").RESET:return new(b("RTCP2PCallEscalationStoreState"))();case b("RTCP2PCallActionTypes").SET_CALL_TYPE:switch(c.callType){case b("RTCCallType").AUDIO_VIDEO:case b("RTCCallType").VIDEO_ONLY:return a.set("callType",g.DIRECT_VIDEO)}return a;case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_ACK:if(c.token==null)return a;if(!a.awaitingACK)return a;else if(c.token!==a.token)return a;return a.set("awaitingACK",!1);default:return a}};e.exports={Alice:a,Bob:c,common:d}}),null);
__d("RTCP2PCallReducer",["FBRTCConsoleLogger","FBRTCConstants","RTCAppDispatcher","RTCCallActionTypes","RTCCallStore","RTCCallType","RTCP2PCallActionTypes","RTCP2PCallEscalationActionTypes","RTCP2PCallEscalationStore","RTCP2PCallStoreState","RTCP2PCallWindowHandler","RTCP2PConnectionStatus","RTCP2PProtocolHandler","RTCScreenSharingWindowHandler","RTCSignalingExperiments"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").SignalingProtocol;function a(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").INIT:var d=c.callType,e=c.isCaller,f=c.protocol;return f===g.P2P&&d&&e!=null?a.set("protocolHandler",a.protocolHandler||new(b("RTCP2PProtocolHandler"))()).set("isCaller",e).set("callType",d):a;case b("RTCCallActionTypes").RESET:return new(b("RTCP2PCallStoreState"))();case b("RTCCallActionTypes").RESET_FOR_REDIAL:b("RTCAppDispatcher").waitFor([b("RTCCallStore").getDispatchToken()]);f=b("RTCCallStore").getState().remoteUsers.first();if(f==null)return a;a.protocolHandler.destroy();return a.set("connectionStatus",b("RTCP2PConnectionStatus").INIT).set("endCallReason",null).set("protocolHandler",new(b("RTCP2PProtocolHandler"))().init(f.FBID,Number(c.conferenceName))).set("signalingExperiments",new(b("RTCSignalingExperiments"))());case b("RTCCallActionTypes").CALL_COLLISION:b("RTCAppDispatcher").waitFor([b("RTCCallStore").getDispatchToken()]);a.protocolHandler.init(c.peerID,Number(c.conferenceName));return a.set("connectionStatus",b("RTCP2PConnectionStatus").INIT).set("endCallReason",null).set("signalingExperiments",new(b("RTCSignalingExperiments"))());default:return a}}function c(a,c){switch(c.type){case b("RTCCallActionTypes").HANGUP:case b("RTCCallActionTypes").DISMISS:case b("RTCCallActionTypes").HANGUP_ERROR:case b("RTCCallActionTypes").HANGUP_SUCCESS:case b("RTCCallActionTypes").END_CALL:case b("RTCCallActionTypes").REMOVE_REMOTE_SCREEN_STREAM:case b("RTCCallActionTypes").RESET_FOR_REDIAL:b("RTCScreenSharingWindowHandler").close();return a.set("isScreenContentPoppedOut",b("RTCScreenSharingWindowHandler").isWindowOpened());default:return a}}function d(a,c){switch(c.type){case b("RTCP2PCallActionTypes").SET_CALL_TYPE:return a.set("callType",c.callType);case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SET_RESPONSE:b("RTCAppDispatcher").waitFor([b("RTCP2PCallEscalationStore").getDispatchToken()]);return a.set("callType",c.response?b("RTCCallType").AUDIO_VIDEO:b("RTCCallType").AUDIO_ONLY);case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_FAILURE:return a.set("callType",b("RTCCallType").AUDIO_ONLY);case b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SUCCESS:b("RTCAppDispatcher").waitFor([b("RTCP2PCallEscalationStore").getDispatchToken()]);return b("RTCP2PCallEscalationStore").isEscalated()?a.set("callType",b("RTCCallType").AUDIO_VIDEO):a;default:return a}}function f(a,c){switch(c.type){case b("RTCP2PCallActionTypes").SET_CONNECTION_STATUS:if(a.connectionStatus!==c.connectionStatus){b("RTCP2PCallWindowHandler").updateCallInProgressIndicator(c.connectionStatus);return a.set("connectionStatus",c.connectionStatus)}default:return a}}function h(a,c){switch(c.type){case b("RTCCallActionTypes").SET_END_CALL_REASON:return a.set("endCallReason",c.endCallReason);default:return a}}function i(a,c){switch(c.type){case b("RTCP2PCallActionTypes").SET_MULTIWAY_ESCALATION_SUPPORT:a=a.set("offerEscalationSupport",c.offerEscalationSupport);c.escalationConferenceName&&(a=a.set("escalationConferenceName",c.escalationConferenceName));return a;default:return a}}function j(a,c){switch(c.type){case b("RTCP2PCallActionTypes").POP_IN_SCREEN_CONTENT:b("RTCScreenSharingWindowHandler").close();return a.set("isScreenContentPoppedOut",b("RTCScreenSharingWindowHandler").isWindowOpened());case b("RTCP2PCallActionTypes").POP_OUT_SCREEN_CONTENT:var d=b("RTCCallStore").getState().remoteUsers.first().FBID;b("RTCScreenSharingWindowHandler").open(d,c.stream);return a.set("isScreenContentPoppedOut",b("RTCScreenSharingWindowHandler").isWindowOpened());default:return a}}function k(a,c){switch(c.type){case b("RTCP2PCallActionTypes").SET_REMOTE_SIGNALING_EXPERIMENTS:return a.set("signalingExperiments",a.signalingExperiments.setRemote(c.remoteSignalingExperiments));default:return a}}function l(a,c){switch(c.type){case b("RTCP2PCallActionTypes").P2P_PROCESS_MESSAGE:return a.set("isRemoteVideoSupported",c.message.isRemoteVideoSupported()).set("isPeerOnMobile",c.message.isFromMobile());default:return a}}function m(a,c){switch(c.type){case b("RTCP2PCallActionTypes").P2P_SET_IS_CALLER:return a.set("isCaller",c.isCaller);case b("RTCCallActionTypes").CALL_COLLISION:return a.set("isCaller",!0);default:return a}}function n(a,c){switch(c.type){case b("RTCP2PCallActionTypes").SET_CONNECTION_STATUS:return c.connectionStatus===b("RTCP2PConnectionStatus").CONNECTED?a.set("wasConnected",!0):a;case b("RTCCallActionTypes").RESET_FOR_REDIAL:return a.set("wasConnected",!1);case b("RTCCallActionTypes").CALL_COLLISION:return a.set("wasConnected",!1);default:return a}}function o(a,c){switch(c.type){case b("RTCP2PCallActionTypes").P2P_STAR_RATING_DONE:return a.set("wasStarRatingDone",c.done);case b("RTCCallActionTypes").RESET_FOR_REDIAL:return a.set("wasStarRatingDone",!1);default:return a}}e.exports={callInit:a,callEnd:c,processCallType:d,processConnectionStatus:f,processEndCallReason:h,processIsCaller:m,processMessage:l,processMultiwayEscalationSupport:i,processPoppedOutScreenContent:j,processSignalingExperiments:k,processWasConnected:n,processWasStarRatingDone:o}}),null);
__d("RTCStreamDurationTracker",["performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){a===void 0&&(a="mixed"),this.$3=0,this.$4=0,this.$5=!1,this.update=function(){if(!this.$5)return;this.$6()?this.$4===0&&(this.$4=b("performanceNow")()):this.pause(this.$2)}.bind(this),this.$1=a}a.prototype.isStarted=function(){return this.$5};a.prototype.track=function(a){__p&&__p();if(a===this.$2){this.update();return}if(this.$2&&this.$5){var b=this.$2;b.removeEventListener("addtrack",this.update);b.removeEventListener("removetrack",this.update)}a?(this.$5&&this.$6()&&(this.$3=this.getDuration()),this.$2=a,this.$5&&this.start()):this.stop()};a.prototype.$6=function(){return!this.$2?!1:this.$7().some(function(a){return a.enabled})};a.prototype.$7=function(){if(!this.$2)return[];switch(this.$1){case"audio":return this.$2.getAudioTracks();case"video":return this.$2.getVideoTracks();case"screen":return this.$2.getVideoTracks();default:return this.$2.getTracks()}};a.prototype.pause=function(a){if(!this.$5)return;if(this.$2!==a)return;this.$3=this.getDuration();this.$4=0};a.prototype.getDuration=function(){return this.$4===0?this.$3:this.$3+b("performanceNow")()-this.$4};a.prototype.start=function(){this.$5=!0;this.$6()&&(this.$4=b("performanceNow")());if(this.$2){var a=this.$2;a.addEventListener("addtrack",this.update);a.addEventListener("removetrack",this.update)}};a.prototype.stop=function(){__p&&__p();if(!this.$5)return;this.$3=this.getDuration();this.$5=!1;this.$4=0;if(this.$2){var a=this.$2;a.removeEventListener("addtrack",this.update);a.removeEventListener("removetrack",this.update)}};e.exports=a}),null);
__d("FBRTCGroupCallStoreState",["RTCStreamDurationTracker","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;d={localVideoDurationTracker:new(b("RTCStreamDurationTracker"))("video"),remoteVideoDurationTracker:new(b("RTCStreamDurationTracker"))("video"),localScreenDurationTracker:new(b("RTCStreamDurationTracker"))("screen")};g=babelHelpers.inherits(a,b("immutable").Record(d));g&&g.prototype;function a(){g.apply(this,arguments)}f={dominantSpeakerFBID:null,endCallReason:null,layout:null,participants:b("immutable").Map(),pinnedSpeakerFBID:null,thread:null,videoDurationTrackerInfo:new a()};h=babelHelpers.inherits(c,b("immutable").Record(f));h&&h.prototype;function c(){h.apply(this,arguments)}e.exports=c}),null);
__d("FBRTCVideoDurationTrackerReducer",["FBRTCCallSummaryStore","RTCCallActionTypes","RTCCallStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={track:function(a,c){__p&&__p();var d=a.videoDurationTrackerInfo,e=d.localVideoDurationTracker,f=d.remoteVideoDurationTracker;d=d.localScreenDurationTracker;switch(c.type){case b("RTCCallActionTypes").ADD_LOCAL_SCREEN_STREAM:d.track(c.stream),d.isStarted()||d.start();case b("RTCCallActionTypes").ADD_LOCAL_STREAM:e.track(c.stream);e.isStarted()||e.start();return a;case b("RTCCallActionTypes").REMOVE_LOCAL_SCREEN_STREAM:d.pause(c.stream);return a;case b("RTCCallActionTypes").REPLACE_LOCAL_SCREEN_STREAM:d.track(c.newStream);e.track(c.newStream);return a;case b("RTCCallActionTypes").ADD_REMOTE_STREAM:case b("RTCCallActionTypes").TOGGLE_REMOTE_STREAM:d=b("RTCCallStore").getState();e=d.remoteUsers;c=e.find(function(a){return!a.isVideoMuted()});f.stop();f.start();f.track(c&&c.streams.first());return a}return a},update:function(a,c){switch(c.type){case b("RTCCallActionTypes").VIDEO_MUTED:case b("RTCCallActionTypes").VIDEO_UNMUTED:a.videoDurationTrackerInfo.localVideoDurationTracker.update()}return a},stop:function(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").DISMISS:case b("RTCCallActionTypes").END_CALL:case b("RTCCallActionTypes").HANGUP:c=a.videoDurationTrackerInfo;var d=b("RTCCallStore").getState();d=d.callSummary;c.localVideoDurationTracker.stop();c.remoteVideoDurationTracker.stop();c.localScreenDurationTracker.stop();d.setVideoDurations(c.localVideoDurationTracker.getDuration(),c.remoteVideoDurationTracker.getDuration());d.setScreenDuration(c.localScreenDurationTracker.getDuration());d.save(b("FBRTCCallSummaryStore").getInstance());return a}return a}};e.exports=a}),null);
__d("FBRTCGroupCallStore",["FBRTCGroupCallParticipantsReducer","FBRTCGroupCallReducer","FBRTCGroupCallStoreState","FBRTCVideoDurationTrackerReducer","FluxReduceStore","RTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("FBRTCGroupCallParticipantsReducer").addParticipantsToRing,b("FBRTCGroupCallParticipantsReducer").initThread,b("FBRTCGroupCallParticipantsReducer").onParticipantsChanged,b("FBRTCGroupCallReducer").processEndCallReason,b("FBRTCGroupCallReducer").setDominantSpeaker,b("FBRTCGroupCallReducer").setLayout,b("FBRTCVideoDurationTrackerReducer").track,b("FBRTCVideoDurationTrackerReducer").update,b("FBRTCVideoDurationTrackerReducer").stop];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("FBRTCGroupCallStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.prototype.hadVideoDuration=function(){var a=this.getState().videoDurationTrackerInfo,b=a.localVideoDurationTracker;a=a.remoteVideoDurationTracker;return b.getDuration()>0||a.getDuration()>0};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("FBRTCMWProtocolStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;d={pendingResponse:!1,pendingUpdate:!1,lastSyncedClientVersion:2,localMediaUpdates:b("immutable").List([{mediaStatus:{}},{mediaStatus:{}}])};g=babelHelpers.inherits(a,b("immutable").Record(d));g&&g.prototype;function a(){g.apply(this,arguments)}f={clientMediaUpdateInfo:new a()};h=babelHelpers.inherits(c,b("immutable").Record(f));h&&h.prototype;function c(){h.apply(this,arguments)}e.exports=c}),null);
__d("FBRTCMWProtocolStore",["FBRTCClientMediaUpdateReducer","FBRTCMWProtocolStoreState","FluxReduceStore","RTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("FBRTCClientMediaUpdateReducer").configureAudio,b("FBRTCClientMediaUpdateReducer").configureVideo,b("FBRTCClientMediaUpdateReducer").onClientMediaUpdateResponse];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("FBRTCMWProtocolStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCGroupCallEscalationStoreState",["immutable"],(function(a,b,c,d,e,f){var g;g=babelHelpers.inherits(a,b("immutable").Record({aborted:!1,inProgress:!1,toRing:!1,p2pCallSummary:null,readyToTransition:!1,usersToRing:null}));g&&g.prototype;function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("RTCGroupCallEscalationStore",["FBRTCCallSummaryStore","FluxReduceStore","RTCAppDispatcher","RTCGroupCallEscalationStoreReducer","RTCGroupCallEscalationStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("RTCGroupCallEscalationStoreReducer").abortEscalation,b("RTCGroupCallEscalationStoreReducer").callStart,b("RTCGroupCallEscalationStoreReducer").clearStore,b("RTCGroupCallEscalationStoreReducer").onMultiwayConnectionSignaling,b("RTCGroupCallEscalationStoreReducer").onParticipantsConnected,b("RTCGroupCallEscalationStoreReducer").setP2PCallSummary,b("RTCGroupCallEscalationStoreReducer").setUsersToRing];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("RTCGroupCallEscalationStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.prototype.isInProgress=function(){return this.getState().inProgress};a.prototype.isEscalated=function(){return this.getState().readyToTransition};a.prototype.logToP2PCallSummary=function(a){var c=this.getState();c=c.p2pCallSummary;c&&(a(c),c.save(b("FBRTCCallSummaryStore").getInstance()))};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCP2PCallEscalationStore",["FluxReduceStore","RTCAppDispatcher","RTCP2PCallEscalationStoreReducers","RTCP2PCallEscalationStoreState","RTCP2PCallStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("RTCP2PCallEscalationStoreReducers").Alice,b("RTCP2PCallEscalationStoreReducers").Bob,b("RTCP2PCallEscalationStoreReducers").common];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("RTCP2PCallEscalationStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.prototype.didCurrentUserInitiate=function(){return this.getState().initiatedEscalation};a.prototype.isInProgress=function(){return this.getState().inProgress};a.prototype.isEscalated=function(){return this.getState().escalated};a.prototype.getEscalateMediaStream=function(){return this.getState().escalateMediaStream};a.prototype.remoteWillNotInitSDPUpdate=function(){return b("RTCP2PCallStore").getState().isPeerOnMobile||b("RTCP2PCallStore").getState().signalingExperiments.remoteSupport("video_escalation_by_unmute")};a.prototype.isNegotiationAllowed=function(){var a=this.getState();return this.remoteWillNotInitSDPUpdate()||!a.request};a.prototype.isStarted=function(){var a=this.getState();return a.inProgress&&a.token!==null};a.prototype.getToken=function(){return this.getState().token};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCP2PCallAdminMessageReducers",["FBRTCAdminMessage","FBRTCCallConstants","RTCAppDispatcher","RTCCallActionTypes","RTCCallStore","RTCCallType","RTCP2PCallActionTypes","RTCP2PConnectionStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCCallConstants").FBRTCCallType;function a(a,c){switch(c.type){case b("RTCCallActionTypes").SET_CALL_SUMMARY:b("RTCAppDispatcher").waitFor([b("RTCCallStore").getDispatchToken()]);c=b("RTCCallStore").getState();c=c.callSummary;return a.set("adminMessage",new(b("FBRTCAdminMessage"))(c.peerID,c.callID));default:return a}}function c(a,c){switch(c.type){case b("RTCP2PCallActionTypes").SET_CONNECTION_STATUS:var d=a.adminMessage;d&&c.connectionStatus===b("RTCP2PConnectionStatus").CONNECTED&&d.onCallConnected();return a;default:return a}}function d(a,c){switch(c.type){case b("RTCCallActionTypes").SET_END_CALL_REASON:var d=a.adminMessage,e=a.escalationConferenceName;d&&(d.onCallEnded(),a.isCaller&&d.submit(a.callType===b("RTCCallType").AUDIO_ONLY?g.VOICE_CALL:g.VIDEO_CALL,c.endCallReason.getReasonID(),e));return a;default:return a}}e.exports={processCallInit:a,processCallStart:c,processCallEnd:d}}),null);
__d("RTCP2PCallStore",["FluxReduceStore","RTCAppDispatcher","RTCCallType","RTCP2PCallAdminMessageReducers","RTCP2PCallReducer","RTCP2PCallStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("RTCP2PCallReducer").callEnd,b("RTCP2PCallReducer").callInit,b("RTCP2PCallReducer").processCallType,b("RTCP2PCallReducer").processConnectionStatus,b("RTCP2PCallReducer").processEndCallReason,b("RTCP2PCallReducer").processPoppedOutScreenContent,b("RTCP2PCallReducer").processMultiwayEscalationSupport,b("RTCP2PCallReducer").processSignalingExperiments,b("RTCP2PCallReducer").processMessage,b("RTCP2PCallReducer").processIsCaller,b("RTCP2PCallReducer").processWasConnected,b("RTCP2PCallReducer").processWasStarRatingDone,b("RTCP2PCallAdminMessageReducers").processCallInit,b("RTCP2PCallAdminMessageReducers").processCallStart,b("RTCP2PCallAdminMessageReducers").processCallEnd];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("RTCP2PCallStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.prototype.isAudioOnly=function(){return this.getState().callType===b("RTCCallType").AUDIO_ONLY};a.prototype.isCaller=function(){return this.getState().isCaller};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCP2PCallStoreState",["RTCCallType","RTCP2PConnectionStatus","RTCP2PProtocolHandler","RTCSignalingExperiments","immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={adminMessage:null,callType:b("RTCCallType").AUDIO_ONLY,connectionStatus:b("RTCP2PConnectionStatus").INIT,endCallReason:null,escalationConferenceName:null,isCaller:!1,isPeerOnMobile:!1,isRemoteVideoSupported:!0,isScreenContentPoppedOut:!1,offerEscalationSupport:!1,protocolHandler:new(b("RTCP2PProtocolHandler"))(),signalingExperiments:new(b("RTCSignalingExperiments"))(),wasConnected:!1,wasStarRatingDone:!1};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("RTCGroupCallEscalationActions",["RTCAppDispatcher","RTCGroupCallEscalationActionTypes","immutable"],(function(a,b,c,d,e,f){"use strict";a={start:function(){b("RTCAppDispatcher").dispatch({type:b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_START})},cancel:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_CANCEL,p2pCallSummary:a})},approve:function(){b("RTCAppDispatcher").dispatch({type:b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_SUCCESS})},setUsersToRing:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_SET_USERS_TO_RING,usersToRing:a})},setP2PCallSummary:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_SET_P2P_CALLSUMMARY,p2pCallSummary:a})}};e.exports=a}),null);
__d("RTCGroupCallEscalator",["CurrentUser","FBRTCConsoleLogger","FBRTCConstants","FBRTCGroupCallStore","FBRTCMWProtocolStore","FBRTCScreenSharingUtils","MercuryIDs","MessengerParticipants.bs","RTCAppDispatcher","RTCCallStore","RTCGroupCallActions","RTCGroupCallEscalationActions","RTCGroupCallEscalationStore","RTCMWProtocolHandler","RTCUtils","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").GroupVideoViewLayout,h=45e3;function a(a,c,d,e){this.$11=null,this.$4=a,this.$5=c,this.$9=d,this.$1=String(e),b("RTCGroupCallEscalationActions").setP2PCallSummary(b("RTCCallStore").getState().callSummary),this.$10=[d],this.$13=null}a.prototype.getParticipants=function(){return this.$13};a.prototype.$14=function(){return window.setTimeout(function(){b("RTCGroupCallEscalationStore").getState().readyToTransition||(i("Group Escalation timed out"),b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(a){a.setEscalationTimedOut(),b("RTCGroupCallEscalationActions").cancel(a)}))},h)};a.prototype.startEscalationToMultiway=function(){__p&&__p();i("Escalating P2P call to Multiway call %o",this.$4);var a=b("RTCGroupCallEscalationStore").getState().inProgress;if(a)return;b("RTCGroupCallEscalationActions").start();this.$3=this.$14();this.$12=new(b("RTCMWProtocolHandler"))();b("RTCAppDispatcher").explicitlyRegisterStores([b("FBRTCGroupCallStore"),b("FBRTCMWProtocolStore")]);b("RTCGroupCallActions").setLayout(g.GRID);var c=b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID());b("MessengerParticipants.bs").get(c,function(a){var d={};d[c]=a;a=b("immutable").Map(d);this.$13=a;b("RTCGroupCallActions").initThread(null,a);this.$15()}.bind(this))};a.prototype.$15=function(){var a=b("RTCCallStore").getState().localUser.getStream(),c=b("RTCCallStore").getState().localUser.getScreenStream(),d=a;c&&b("FBRTCScreenSharingUtils").isGroupCallScreenSharingSupported()&&(a&&b("RTCUtils").transferAudioTracks(c,a),d=c);d&&this.$12.onStreamReady(d,this.$10,this.$4,!0,{callTrigger:"multiway_escalation",p2pCallID:this.$1})};a.ESCALATION_TIMEOUT=h;function i(){}e.exports=a}),null);
__d("RTCIceCandidate",[],(function(a,b,c,d,e,f){"use strict";e.exports=window.RTCIceCandidate||window.mozRTCIceCandidate}),null);
__d("RTCPeerConnection",[],(function(a,b,c,d,e,f){"use strict";e.exports=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection}),null);
__d("RTCSessionDescription",["invariant","FBRTCConfig","FBRTCConstants","FBRTCMediaType","FBRTCSdpUtils","RTCSignalingExperiments"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").SignalingProtocol,i=window.RTCSessionDescription||window.mozRTCSessionDescription,j=2,k="o",l="m",m="a",n="rtpmap",o="ssrc-group",p="ssrc",q="cname",r="msid",s="mslabel",t="label",u="sendonly",v="recvonly",w="sendrecv",x="inactive",y="offer",z="answer",A="=",B=" ",C=":",D="\r\n",E="audio",F="video",G="application",H=function(a,b){return a.startsWith(b+A)},I=function(a){return a.substr(j)},J=function(a,b){return a.startsWith(b+D)||a.startsWith(b+C)},K=function(a,b){return a.substr(b.length+1)};function L(a){this.$1=[],this.$2="-",this.$3="multiway",this.$4=1,this.$5="IN",this.$6="IP4",this.$7="127.0.0.1",a.forEach(function(a){if(H(a,k)){var b=I(a).split(B);b.length==6&&(this.$2=b[0],this.$3=b[1],this.$4=parseInt(b[2],10),this.$5=b[3],this.$6=b[4],this.$7=b[5])}this.$1.push(a)}.bind(this))}L.prototype.setVersion=function(a){this.$4=a};L.prototype.getVersion=function(){return this.$4};L.prototype.toSdp=function(){return this.$1.map(function(a){if(H(a,k))return k+A+this.$2+B+this.$3+B+this.$4+B+this.$5+B+this.$6+B+this.$7;else return a}.bind(this)).join(D)};function M(a,b,c){__p&&__p();c===void 0&&(c={});this.$1=[];var d={},e=[],f=[];a.forEach(function(a){__p&&__p();var b=I(a);H(a,l)&&(this.$4=b.split(B)[0]);if(H(a,m)&&J(b,n)){var c=K(b,n);c=c.split(B);var g=c[0];c=c[1];d[c]=g}H(a,m)&&J(b,p)?this.$6(b,e):H(a,m)&&J(b,o)?this.$7(b,f):H(a,m)&&(b===u||b===v||b===w||b===x)?this.$5=b:this.$1.push(a)}.bind(this));Object.keys(c).forEach(function(a){if(d[a]){var b=Object.keys(c[a]).map(function(b){return b+"="+c[a][b]}).join(";");this.$1.push("a=fmtp:"+d[a]+" "+b)}}.bind(this));this.$3={};this.$2={};e.forEach(function(a){if(Object.prototype.hasOwnProperty.call(a,q)){var b=a.cname;!this.$3[b]?this.$3[b]=[a]:this.$3[b].push(a);a=this.findSsrcGroupForSsrc(f,a.ssrc);a&&(!this.$2[b]?this.$2[b]=[a]:this.$2[b].push(a),this.removeSsrcGroup(a,f))}}.bind(this));this.$4!==G&&(b===y?e.length===0?this.$5=v:this.$5=w:b===z&&(this.$5=w))}M.prototype.getMediaType=function(){return this.$4};M.prototype.findSsrcGroupForSsrc=function(a,b){return a.find(function(a){a=a.ssrcs;return a.some(function(a){return a===b})})};M.prototype.addStreamsForEndpoint=function(a,b){this.$3[a]=b};M.prototype.addSsrcGroupsForEndpoint=function(a,b){this.$3[a].forEach(function(c){c=c.ssrc;c=this.findSsrcGroupForSsrc(b,c);c&&(!this.$2[a]?this.$2[a]=[c]:this.$2[a].push(c),this.removeSsrcGroup(c,b))}.bind(this))};M.prototype.removeSsrcGroup=function(a,b){a=b.indexOf(a);a!==-1&&b.splice(a,1)};M.prototype.$7=function(a,b){a=K(a,o);if(a){a=a.split(B);var c=a[0];a=a.slice(1);b.push({semantics:c,ssrcs:a.map(function(a){return parseInt(a,10)})})}};M.prototype.$6=function(a,b){__p&&__p();var c=a.indexOf(B),d=a.substr(0,c),e=parseInt(K(d,p),10);d=a.substr(c+1);a=b.find(function(a){return a.ssrc===e});a||(a={},a.ssrc=e,b.push(a));if(J(d,q))a.cname=K(d,q);else if(J(d,r)){c=K(d,r).split(B);a.msid={id:c[0],appdata:c[1]}}else J(d,s)?a.mslabel=K(d,s):J(d,t)&&(a.label=K(d,t))};M.prototype.toSdp=function(){__p&&__p();var a=[];this.$1.forEach(function(b){a.push(b)});for(var b in this.$2)this.$2[b].forEach(function(b){a.push(m+A+o+C+b.semantics+B+b.ssrcs.join(B))});a.push(m+A+this.$5);for(var c in this.$3)this.$3[c].forEach(function(b){b.cname&&a.push(m+A+p+C+b.ssrc+B+q+C+b.cname),b.msid&&a.push(m+A+p+C+b.ssrc+B+r+C+b.msid.id+(b.msid.appdata?B+b.msid.appdata:"")),b.mslabel&&a.push(m+A+p+C+b.ssrc+B+s+C+b.mslabel),b.label&&a.push(m+A+p+C+b.ssrc+B+t+C+b.label)});return a.join(D)};function a(a,b,c){__p&&__p();b===void 0&&(b={});c===void 0&&(c={});b=b;var d=b.type;d=d===void 0?"offer":d;b=b.sdp;b=b===void 0?"":b;this.$2=a;this.type=d;switch(a){case h.CUSTOM:this.$1=b;return;case h.MULTIWAY:this.$3(b,c);return;case h.P2P:this.$4(b,c);return}}a.prototype.$3=function(a,c){__p&&__p();this.type=="offer"&&(a=b("FBRTCSdpUtils").removeUnknownRtpHeaderExtensions(a),c.OFFER_SDP_TRANSFORM&&(a=c.OFFER_SDP_TRANSFORM.reduce(function(a,b){return b(a)},a)));a=a.trim().split(D);var d=[],e=0;while(e<a.length&&!H(a[e],l))d.push(a[e]),e++;this.sessionDescription=new L(d);this.mediaDescriptions=[];while(e<a.length){d=[];d.push(a[e]);e++;while(e<a.length&&!H(a[e],l))d.push(a[e]),e++;this.mediaDescriptions.push(new M(d,this.type,c.FORMAT_PARAMETERS))}};a.prototype.$4=function(a,c){__p&&__p();var d=[function(a){return b("FBRTCSdpUtils").addIceOptionToSdp(a,"fb-force-5245")},function(a){return b("FBRTCSdpUtils").useDTLSOverCrypto(a)}];if(this.type==="offer"){c.DISABLE_VIDEO&&d.push(function(a){return b("FBRTCSdpUtils").disableVideo(a)});var e=b("RTCSignalingExperiments").shouldPreferIsac();e&&d.push(function(a){return b("FBRTCSdpUtils").preferIsac(a)});d.push(function(a){return b("FBRTCSdpUtils").replaceRTPSAVPFProfile(a)},function(a){return b("FBRTCSdpUtils").addSetup(a)},function(a){return b("FBRTCSdpUtils").removeUnknownRtpHeaderExtensions(a)});b("FBRTCConfig").isVCEndpointCall()||d.push(function(a){return b("FBRTCSdpUtils").removeSdparta(a)});c.ADD_AUDIO_NACK&&d.push(function(a){return b("FBRTCSdpUtils").addAudioNack(a)});if(c.FORMAT_PARAMETERS){var f=Object.entries(c.FORMAT_PARAMETERS);e=function(){__p&&__p();var a=f[h],c=a[0];a=a[1];var e=Object.entries(a);a=function(){var a=e[i],f=a[0],h=a[1];typeof h==="string"||g(0,4169);d.push(function(a){return b("FBRTCSdpUtils").addFmtp(a,c,f,h)})};for(var i=0;i<e.length;i++)a()};for(var h=0;h<f.length;h++)e()}d.push(function(a){return b("FBRTCSdpUtils").clearFirefoxInactiveDataChannelBlock(a)})}c.ADD_FB_FEATURES!=null&&d.push(function(a){Array.isArray(c.ADD_FB_FEATURES)||g(0,4170);return b("FBRTCSdpUtils").addFBFeatures.apply(b("FBRTCSdpUtils"),[a].concat(c.ADD_FB_FEATURES))});c.DISABLE_OPUS_STEREO&&d.push(function(a){return b("FBRTCSdpUtils").addFmtp(a,"opus","stereo","0")});var i=c.SSRC_CONTENT_TYPE;i&&d.push(function(a){return b("FBRTCSdpUtils").addSSRCContentType(a,i)});this.$1=d.reduce(function(a,b){return b(a)},a)};a.prototype.processServerMediaUpdate=function(a){var c=a.sourceKey,d=a.media,e=a.ssrcGroups,f=[],g=[];d.forEach(function(a){a.ssrcs.forEach(function(d){d={ssrc:d,cname:c,msid:{id:c,appdata:a.id},label:a.id,mslabel:c};b("FBRTCMediaType").AUDIO===a.type?f.push(d):b("FBRTCMediaType").VIDEO===a.type&&g.push(d)})});this.mediaDescriptions.forEach(function(a){a.getMediaType()===E?(a.addStreamsForEndpoint(c,f),a.addSsrcGroupsForEndpoint(c,e)):a.getMediaType()===F&&(a.addStreamsForEndpoint(c,g),a.addSsrcGroupsForEndpoint(c,e))})};a.prototype.toDesc=function(){return new i({type:this.type,sdp:this.toSdp()})};a.prototype.toSdp=function(){var a=this.$2;switch(a){case h.MULTIWAY:return[this.sessionDescription.toSdp(),this.mediaDescriptions.map(function(a){return a.toSdp()}).join(D),""].join(D);case h.CUSTOM:case h.P2P:default:return this.$1}};a.prototype.strongDiff=function(a){var b=this.toSdp();a=a.toSdp();return b!==a&&this.$5(b)!==this.$5(a)};a.prototype.$5=function(a){return this.$6(a).split("\r\n").filter(function(a){return!/^a=(candidate|setup):/.test(a)}).join("\r\n")};a.prototype.$6=function(a){return a.replace(/(o=\S+\s\S+)\s\S+\s/,"$1 - ")};e.exports=a}),null);
__d("FBRTCPeerConnection",["Promise","regeneratorRuntime","FBRTCConfig","FBRTCConsoleLogger","FBRTCExperiment","FBRTCExperimentName","FBRTCSdpUtils","RTCConfig","RTCIceCandidate","RTCPeerConnection","RTCSessionDescription","UserAgent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();g.isGetSendersSupported=function(){return q("getSenders")};g.isReplaceTrackSupported=function(){return typeof window.RTCRtpSender==="function"&&typeof window.RTCRtpSender.prototype.replaceTrack==="function"};function g(a,b,c){__p&&__p();b===void 0&&(b={}),c===void 0&&(c={}),this.$3=[],this.$4=[],this.$7=new Map(),this.addEventListener=function(a,b){var c=this.$7.get(a);Array.isArray(c)||(c=[],this.$7.set(a,c));c.push(b);this.$5.addEventListener(a,b)},this.removeEventListener=function(a,b){var c=this.$7.get(a);Array.isArray(c)&&(c=c.filter(function(a){return a!==b}),c.length<1?this.$7["delete"](a):this.$7.set(a,c));this.$5.removeEventListener(a,b)},this.$11=function(a){a=a.candidate;a&&this.$4.push(a)}.bind(this),this.$12=function(a){a=a.channel;this.$14(a)}.bind(this),this.$6=a,this.$1=b,this.$2=c,this.$5=this.$10()}g.prototype.$10=function(){__p&&__p();var a=new(b("RTCPeerConnection"))(babelHelpers["extends"]({},this.$1,{sdpSemantics:"plan-b"}),this.$2);a.addEventListener("icecandidate",this.$11);a.addEventListener("datachannel",this.$12);for(var c=this.$7.entries(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];for(var f=f,h=Array.isArray(f),i=0,f=h?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=f.length)break;j=f[i++]}else{i=f.next();if(i.done)break;j=i.value}j=j;a.addEventListener(g,j)}}return a};g.prototype.removeAllListeners=function(){__p&&__p();for(var a=this.$7.entries(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;var e=d[0];d=d[1];for(var d=d,f=Array.isArray(d),g=0,d=f?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=d.length)break;h=d[g++]}else{g=d.next();if(g.done)break;h=g.value}h=h;this.$5.removeEventListener(e,h)}}this.$5.removeEventListener("datachannel",this.$12);this.$5.removeEventListener("icecandidate",this.$11)};g.prototype.reset=function(){__p&&__p();var a=this.getSenders(),c=this.$5;for(var d=this.$7.entries(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;var h=g[0];g=g[1];for(var g=g,i=Array.isArray(g),j=0,g=i?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=g.length)break;k=g[j++]}else{j=g.next();if(j.done)break;k=j.value}k=k;c.removeEventListener(h,k)}}c.removeEventListener("datachannel",this.$12);c.removeEventListener("icecandidate",this.$11);this.$3=[];this.$4=[];this.$5=this.$10();for(var k=c.getLocalStreams(),j=Array.isArray(k),i=0,k=j?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(j){if(i>=k.length)break;g=k[i++]}else{i=k.next();if(i.done)break;g=i.value}h=g;this.$13(h,a)&&this.addStream(h)}return b("Promise").race([new(b("Promise"))(function(a){var b=this.$5,d=function d(e){e=e.target;e.iceConnectionState!=="checking"&&e.iceConnectionState!=="new"&&(a(),b.removeEventListener("iceconnectionstatechange",d),p(c))};b.addEventListener("iceconnectionstatechange",d)}.bind(this)),new(b("Promise"))(function(a){return window.setTimeout(a,5e3)})])["catch"](function(a){return b("Promise").resolve()}).then(function(){p(c)})};g.prototype.$13=function(a,c){return!b("FBRTCConfig").isVCEndpointCall()||!b("RTCConfig").CollabWhitelistedBrowserGK?!0:g.isFirefoxSupportAddTrack()?a.getTracks().some(function(a){return c!=null?c.some(function(b){return b.track===a}):!1}):a.active};g.prototype.close=function(){p(this.$5)};g.prototype.getCreatedIceCandidates=function(){return this.$4};g.prototype.$14=function(a){a.addEventListener("close",function(){this.$3=this.$3.filter(function(b){return b!==a})}.bind(this)),this.$3.push(a)};g.prototype.transformRemoteIceCandidateMid=function(a){return this.$9&&this.$9[a]||a};g.prototype.transformLocalIceCandidateMid=function(a){return this.$8&&this.$8[a]||a};g.prototype.transformOfferSdp=function(a){return b("FBRTCSdpUtils").transformSdpMids(a,this.$8)};g.prototype.transformAnswerSdp=function(a){return b("FBRTCSdpUtils").transformSdpMids(a,this.$9)};g.prototype.onReceivedRemoteIceCandidate=function(a){var c=a.sdp,d=a.label;a=a.sdp_mid;a=this.transformRemoteIceCandidateMid(a);d=new(b("RTCIceCandidate"))({sdpMLineIndex:d,candidate:b("FBRTCSdpUtils").fixMobileIceSdp(c),sdpMid:a});return b("Promise").resolve(this.$5.addIceCandidate(d))};g.prototype.getSignalingProtocol=function(){return this.$6};g.prototype.getLocalStreams=function(){return this.$5.getLocalStreams()};g.prototype.getRemoteStreams=function(){return this.$5.getRemoteStreams()};g.isFirefoxSupportAddTrack=function(){return b("UserAgent").isBrowser("Firefox")&&q("addTrack")&&g.isGetSendersSupported()};g.isFirefoxSupporRemoveTrack=function(){return b("UserAgent").isBrowser("Firefox")&&q("removeTrack")&&g.isGetSendersSupported()};g.isTrackAPISupported=function(){return q("removeTrack")&&q("addTrack")&&g.isReplaceTrackSupported()&&g.isGetSendersSupported()};g.prototype.addStream=function(a,b){__p&&__p();var c=this;if(g.isFirefoxSupportAddTrack()){var d=this.getSenders(),e=function(){__p&&__p();if(h){if(i>=f.length)return"break";j=f[i++]}else{i=f.next();if(i.done)return"break";j=i.value}var e=j,g=d.find(function(a){return a.track===e});g===undefined&&(g=c.$5.addTrack(e,a));b&&g&&b(g)};for(var f=a.getTracks(),h=Array.isArray(f),i=0,f=h?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j,k=e();if(k==="break")break}}else this.$5.addStream(a)};g.prototype.removeStream=function(a){__p&&__p();if(g.isFirefoxSupporRemoveTrack()){var b=a.getTracks(),c=this.getSenders().filter(function(a){return b.includes(a.track)});for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;this.$5.removeTrack(f)}}else this.$5.removeStream(a)};g.prototype.removeTrack=function(a){this.$5.removeTrack(a)};g.prototype.addTrack=function(a,b){return this.$5.addTrack(a,b)};g.prototype.createOffer=function(a,c,d){__p&&__p();return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:a===void 0&&(a={});c===void 0&&(c={});d===void 0&&(d={});return e.abrupt("return",i(this.$5,a).then(function(b){return v(b,d,a)}).then(function(a){var c=b("FBRTCSdpUtils").constructMidMap(a.sdp);this.$8=c.offerSdpMap;this.$9=c.answerSdpMap;return a}.bind(this)).then(function(a){return new(b("RTCSessionDescription"))(this.$6,a,c)}.bind(this)));case 4:case"end":return e.stop()}},null,this)};g.prototype.createAnswer=function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:a===void 0&&(a={});return c.abrupt("return",j(this.$5).then(function(c){return new(b("RTCSessionDescription"))(this.$6,c,a)}.bind(this)));case 2:case"end":return c.stop()}},null,this)};g.prototype.setLocalDescription=function(a){var c;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:c=a.toDesc();return b.abrupt("return",n(this.$5,c).then(function(){return a}));case 2:case"end":return b.stop()}},null,this)};g.prototype.setRemoteDescription=function(a){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:return b.abrupt("return",o(this.$5,a.toDesc()).then(function(){return a}));case 1:case"end":return b.stop()}},null,this)};g.prototype.getLocalDescription=function(){return new(b("RTCSessionDescription"))(this.$6,this.$5.localDescription||{})};g.prototype.getRemoteDescription=function(){return new(b("RTCSessionDescription"))(this.$6,this.$5.remoteDescription||{})};g.prototype.getSignalingState=function(){return this.$5.signalingState};g.prototype.getIceGatheringState=function(){return this.$5.iceGatheringState};g.prototype.getIceConnectionState=function(){return this.$5.iceConnectionState};g.prototype.getSenders=function(){return g.isGetSendersSupported()===!1?[]:this.$5.getSenders()};g.prototype.getStats=function(a){__p&&__p();return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:if(!(a!=null)){c.next=2;break}return c.abrupt("return",b("Promise").reject(new Error("getStats() doesn't support selector (yet)")));case 2:if(!b("UserAgent").isBrowser("Edge")){c.next=4;break}return c.abrupt("return",b("Promise").resolve(new Map()));case 4:if(!b("UserAgent").isBrowser("Firefox")){c.next=6;break}return c.abrupt("return",b("Promise").resolve(this.$5.getStats()).then(function(a){return b("UserAgent").isBrowser("Firefox >= 48")?a:s(a)}).then(function(a){__p&&__p();if(b("UserAgent").isBrowser("Firefox >= 53"))return a;try{a.forEach(function(a){a.type=t(a.type)})}catch(b){if(b.name!=="TypeError")throw b;a.forEach(function(b,c){a.set(c,babelHelpers["extends"]({},b,{type:t(b.type)}))})}return a}));case 6:if(!(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera"))){c.next=8;break}return c.abrupt("return",new(b("Promise"))(function(a,b){this.$5.getStats(a,b)}.bind(this)).then(function(a){__p&&__p();var b={};for(var a=a.result(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f={id:e.id,timestamp:e.timestamp,type:t(e.type)};for(var g=e.names(),h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=g.length)break;j=g[i++]}else{i=g.next();if(i.done)break;j=i.value}j=j;f[j]=e.stat(j)}b[f.id]=f}return b}).then(s));case 8:return c.abrupt("return",b("Promise").reject(new Error("getStats() not supported")));case 9:case"end":return c.stop()}},null,this)};g.prototype.createDataChannel=function(a,b){if(this.$5.createDataChannel){a=this.$5.createDataChannel(a,b);this.$14(a);return a}return null};g.prototype.getDataChannelByLabel=function(a){return this.$3.find(function(b){return b.label===a})};g.prototype.getSdpMidMaps=function(){return{offerSdpMap:this.$8,answerSdpMap:this.$9}};var h=b("UserAgent").isBrowser("Chrome < 59")||b("UserAgent").isBrowser("Opera < 46")||b("UserAgent").isBrowser("Firefox < 37");function i(a,c){return h?new(b("Promise"))(function(b,d){return a.createOffer(b,d,l(c))}):b("Promise").resolve(a.createOffer(l(c)))}function j(a){return h?new(b("Promise"))(function(b,c){return a.createAnswer(b,c)}):b("Promise").resolve(a.createAnswer())}var k=b("UserAgent").isBrowser("Chrome < 38")||b("UserAgent").isBrowser("Opera < 26");function l(a){var b=a.offerToReceiveAudio;b=b===void 0?!0:b;var c=a.offerToReceiveVideo;c=c===void 0?!0:c;a=babelHelpers.objectWithoutProperties(a,["offerToReceiveAudio","offerToReceiveVideo"]);return k?Object.keys(a).length>0?{mandatory:{OfferToReceiveAudio:b,OfferToReceiveVideo:c},optional:babelHelpers["extends"]({},r(a))}:{mandatory:{OfferToReceiveAudio:b,OfferToReceiveVideo:c}}:babelHelpers["extends"]({offerToReceiveAudio:b,offerToReceiveVideo:c},a)}var m=b("UserAgent").isBrowser("Chrome < 51")||b("UserAgent").isBrowser("Opera < 38")||b("UserAgent").isBrowser("Firefox < 37");function n(a,c){return m?new(b("Promise"))(function(b,d){return a.setLocalDescription(c,b,d)}):b("Promise").resolve(a.setLocalDescription(c))}function o(a,c){return m?new(b("Promise"))(function(b,d){return a.setRemoteDescription(c,b,d)}):b("Promise").resolve(a.setRemoteDescription(c))}function p(a){a&&a.signalingState!=="closed"&&a.close()}function q(a){return typeof b("RTCPeerConnection").prototype[a]==="function"}function r(a){var b={},c=Object.keys(a);for(var d=0;d<c.length;d++){var e=c[d],f=""+e.substr(0,1).toUpperCase()+e.substr(1);b[f]=a[e]}return b}function s(a){return new Map(Object.keys(a).map(function(b){return[b,a[b]]}))}function t(a){switch(a){case"inbound-rtp":return"inboundrtp";case"outbound-rtp":return"outboundrtp";case"candidate-pair":return"candidatepair";case"local-candidate":return"localcandidate";case"remote-candidate":return"remotecandidate";default:return a}}function u(a,c){if(b("FBRTCConfig").isVCEndpointCall())return!1;a=a.video&&a.video.match(/H264/);if(!a&&!c.preserveH264){a=b("FBRTCExperiment").gen(b("FBRTCExperimentName").USE_H264);return a.getParam("allow_h264","no")!=="yes"}return!1}function v(a,c,d){d===void 0&&(d={});var e=c.audio,f=c.video,g=a.sdp;a=a.type;u(c,d)&&(g=b("FBRTCSdpUtils").removeH264(g));e&&(g=b("FBRTCSdpUtils").preferCodec(g,e,!1));f&&(g=b("FBRTCSdpUtils").preferCodec(g,f,!0));return b("Promise").resolve({sdp:g,type:a})}e.exports=g}),null);
__d("RTCP2PCallEscalationActions",["RTCAppDispatcher","RTCCallActionTypes","RTCP2PCallEscalationActionTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={start:function(){b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_START})},setRequest:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SET_REQUEST,request:a})},cancel:function(){b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_FAILURE,reason:"cancelled"})},timeout:function(){b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_FAILURE,reason:"timeout"})},handleACK:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_ACK,token:a})},approve:function(){b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SUCCESS})},decline:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_FAILURE,reason:"denied",token:a,response:!1})},setResponse:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SET_RESPONSE,response:a})},parseResponse:function(a,c){a?b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SUCCESS,token:c}):b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_FAILURE,reason:"denied",token:c,response:!1})},muteRemoteVideo:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCallActionTypes").REMOTE_VIDEO_MUTED})},setEscalateToMediaStream:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCP2PCallEscalationActionTypes").SET_P2P_CALL_ESCALATION_MEDIA,stream:a})}};e.exports=a}),null);
__d("RTCP2PCallEscalator",["Promise","FBRTCCallSummaryStore","FBRTCConsoleLogger","FBRTCConstants","FBRTCPeerConnection","FBRTCSupport","RTCCallActions","RTCCallStore","RTCP2PCallEscalationActions","RTCP2PCallEscalationStore","RTCP2PCallStore","RTCP2PProtocolHandler","RTCUtils","dangerouslyBypassDispatchError"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").PayloadType,h=25e3;i.initVideoInAudioCall=function(){return b("FBRTCSupport").videoEscalationByUnmuteWorkaround()};i.isEscalated=function(){return b("RTCP2PCallEscalationStore").isEscalated()};i.isNegotiationAllowed=function(){return b("RTCP2PCallEscalationStore").isNegotiationAllowed()};function i(a,b,c){this.$3=a,this.$1=b,this.$2=c,this.$6()}i.prototype.$6=function(){__p&&__p();var a=b("RTCP2PCallEscalationStore").getState();this.$4=b("RTCP2PCallEscalationStore").addListener(function(){__p&&__p();var c=b("RTCP2PCallEscalationStore").getState();if(c===a)return;!c.awaitingACK&&c.awaitingACK!==a.awaitingACK&&!c.inProgress&&window.clearTimeout(this.$5);if(c.callType!==a.callType&&c.inProgress){var d=b("RTCCallStore").getState();d=d.callSummary;d.setCallType(c.callType);d.save(b("FBRTCCallSummaryStore").getInstance())}a=c}.bind(this))};i.prototype.destroy=function(){j("P2P Escalator %o","destroy"),this.$4.remove(),window.clearTimeout(this.$5)};i.prototype.generateRequestToken=function(a){__p&&__p();var c=b("RTCP2PCallEscalationStore").getState();c=c.token;if(c!=null&&a){j("P2P Escalator %o","request token","reuse");return c}j("P2P Escalator %o","request token");c=this.$2.sendVideoEscalationRequest(this.$3,this.$1,a);window.clearTimeout(this.$5);this.$5=this.$7();return c.msg_id.toString()};i.prototype.generateResponseToken=function(a,c){__p&&__p();var d=b("RTCP2PCallEscalationStore").getState();d=d.token;if(d!=null){j("P2P Escalator %o","response token","reuse");return d}j("P2P Escalator %o %o %o","response token",c,a);d=a.peerID;var e=a.callID;a=a.msgID;d=this.$2.sendVideoRequestResponse(d,e,a,c);window.clearTimeout(this.$5);var f=d.msg_id.toString();!c?b("dangerouslyBypassDispatchError")(function(){return b("RTCP2PCallEscalationActions").decline(f)}):this.$5=this.$7();return f};i.prototype.$7=function(){return window.setTimeout(b("RTCP2PCallEscalationActions").timeout,h)};i.prototype.parseMessage=function(a){j("P2P Escalator %o","parse message",this.$3,a.msgType);switch(a.msgType){case g.VIDEO_REQUEST:a.ackID?this.$8(a):this.$9(a);break;case g.ACK:a.msg.ack_type===g.VIDEO_REQUEST&&b("RTCP2PCallEscalationActions").handleACK(a.ackID.toString());break}};i.prototype.$8=function(a){j("P2P Escalator %o","parse response",a);var c=a.ackID.toString();b("RTCP2PCallEscalationStore").getToken()===c&&this.$10(a);b("RTCP2PCallEscalationActions").parseResponse(i.requestVideoOn(a.msg),c);window.clearTimeout(this.$5)};i.prototype.$9=function(a){__p&&__p();j("P2P Escalator %o","parse request",a);if(b("RTCP2PCallEscalationStore").isInProgress()&&!i.requestVideoOn(a.msg)){b("RTCP2PCallEscalationStore").didCurrentUserInitiate()?b("RTCP2PCallEscalationActions").cancel():(this.$10(a),b("RTCP2PCallEscalationActions").setRequest(a));return}if(b("RTCP2PCallEscalationStore").isInProgress()&&b("RTCP2PCallEscalationStore").didCurrentUserInitiate()){j("P2P Escalator %o","auto-approve","mutual consent");b("RTCP2PCallEscalationActions").approve();this.$10(a);this.generateResponseToken(a,!0);return}if(b("RTCP2PCallEscalationStore").isEscalated()){i.requestVideoOn(a.msg)?(j("P2P Escalator %o","auto-approve"),this.$10(a),this.generateResponseToken(a,!0),window.clearTimeout(this.$5)):(j("P2P Escalator %o","mute remote video"),b("RTCP2PCallEscalationActions").muteRemoteVideo());return}j("P2P Escalator %o %o","request",a);this.$10(a);b("RTCP2PCallEscalationActions").setRequest(a)};i.prototype.$10=function(a){var b=a.peerID,c=a.callID;a=a.msg;j("P2P Escalator %o","ACK","sent");this.$2.sendAck(b,c,a)};i.requestVideoOn=function(a){var b=a.reqVideoOn;a=a.videoon;return Boolean(b||a)};i.initEscalation=function(){__p&&__p();var a=b("RTCP2PCallStore").getState(),c=a.protocolHandler;a=b("RTCCallStore").getState();var d=a.localUser;a=a.remoteUsers;var e=a.first(),f=d.getStream();a=d.hasVideo();return(f&&a?b("Promise").resolve(f).then(function(a){c.updateLocalVideoTracker();return a}):b("RTCP2PProtocolHandler").initStream(!0).then(function(a){c.startLocalVideoTracker(a);return a})).then(function(a){e&&!e.hasFunctioningVideoTrack()?(b("RTCP2PCallEscalationActions").setEscalateToMediaStream(a),b("RTCP2PCallEscalationActions").start()):f?b("RTCCallActions").replaceLocalStream(f,a):b("RTCCallActions").addLocalStream(a);return a})};i.onEscalationSucceeded=function(){__p&&__p();var a=b("RTCP2PCallEscalationStore").getEscalateMediaStream(),c=b("RTCCallStore").getState();c=c.localUser;if(c.getStream()===a){var d=b("RTCCallStore").getState();d=d.remoteUsers;c.toggleMuteVideo(!1);d.first()&&d.first().toggleMuteVideo(!1)}else a&&b("dangerouslyBypassDispatchError")(function(){i.updateEscalationStream(a)})};i.onEscalationFailed=function(){__p&&__p();var a=b("RTCP2PCallEscalationStore").getEscalateMediaStream(),c=b("RTCCallStore").getState();c=c.localUser;if(c.getStream()===a){var d=b("RTCCallStore").getState();d=d.remoteUsers;c.toggleMuteVideo(!0);d.first()&&d.first().toggleMuteVideo(!0)}else if(a){b("RTCUtils").stopMediaStream(a);c=b("RTCP2PCallStore").getState();d=c.protocolHandler;d.updateLocalVideoTracker()}};i.acceptEscalation=function(a){__p&&__p();var c=b("RTCCallStore").getState(),d=c.localUser;c=c.remoteUsers;a=Boolean(a==null?void 0:a.muteVideo);if(d.hasVideo()){d.toggleMuteVideo(a);c.first()&&c.first().toggleMuteVideo(!1);c=b("RTCP2PCallStore").getState();c=c.protocolHandler;c.updateLocalVideoTracker();b("RTCP2PCallEscalationActions").setResponse(!0);return b("Promise").resolve(d.streams.first())}else return b("RTCP2PProtocolHandler").initStream(!a).then(function(a){b("RTCP2PCallEscalationActions").setResponse(!0);i.updateEscalationStream(a);return a})};i.declineEscalation=function(){b("RTCP2PCallEscalationActions").setResponse(!1)};i.updateEscalationStream=function(a){__p&&__p();var c=b("RTCCallStore").getState().localUser.getStream();if(b("FBRTCPeerConnection").isFirefoxSupportAddTrack()&&c){for(var d=a.getVideoTracks(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;c.addTrack(g)}g=b("RTCP2PCallStore").getState();f=g.protocolHandler;f.updateAddedTracksForFirefoxVideoEscalation(c)}else b("RTCP2PProtocolHandler").replaceLocalStream(a)};i.ACK_TIMEOUT=h;function j(){}e.exports=i}),null);
__d("FBRTCGroupCallVideoEscalationDialog.react",["fbt","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogFooter.react","React","RTCMWProtocolHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.userName,d=a.onToggle;return b("React").createElement(b("MessengerDialog.react"),{onToggle:d},b("React").createElement(b("MessengerDialogBody.react"),null,g._("{name} added video chat. Would you like to share your video?",[g._param("name",c)])),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogCancelButton.react"),null),b("React").createElement(b("MessengerDialogButton.react"),{label:g._("Share Video"),onClick:function(){b("RTCMWProtocolHandler").escalateLocalStream(),d()},type:"primary",use:"default"})))};e.exports=a}),null);
__d("RTCGroupCallAdminModelErrorDialogController",["cx","fbt","DOM","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","React","ReactDOM"],(function(a,b,c,d,e,f,g,h){"use strict";var i=300;a={_container:b("DOM").create("div"),showAdminModelErrorDialog:function(){b("ReactDOM").render(b("React").createElement(b("MessengerDialog.react"),{onToggle:function(){return this._onUnmount()}.bind(this),type:"default",width:i},b("React").createElement(b("MessengerDialogBody.react"),{className:"_233q"},h._("Only the admin can add people to the call who are not in this group")),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{className:"_30vt _233r",label:h._("Ok"),onClick:function(){return this._onUnmount()}.bind(this),type:"primary",use:"default"}))),this._container)},_onUnmount:function(){b("ReactDOM").unmountComponentAtNode(this._container)}};e.exports=a}),null);
__d("RTCGroupCallAddMembersDialog.react",["cx","fbt","FluxContainer","MercuryIDs","MercuryLogMessageType","MercuryMessageActions","MercuryMessageObject","MercuryTriodeSourceUtil","MessengerAdminGroupUtils","MessengerApprovalModeTypes","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogHeader.react","MessengerDialogTitle.react","MessengerGraphQLTokenizer.react","MessengerParticipants.bs","MessengerRTCGroupCallContactList.react","MessengerRTCGroupCallThreadRow.react","React","RTCAppDispatcher","RTCCallStore","RTCConferenceState","RTCGroupCallActions","RTCGroupCallAdminModelErrorDialogController","RTCGroupCallDialogController","RTCGroupCallEscalationActions","RTCMWProtocolHandler","RTCP2PCallStore","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs","immutable","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PureComponent;var j=460;d=babelHelpers.inherits(a,c);i=d&&d.prototype;a.getStores=function(){return[b("RTCCallStore")]};a.calculateState=function(){return{conferenceState:b("RTCCallStore").getState().callInfo.conferenceState,remoteUsers:b("RTCCallStore").getState().remoteUsers}};function a(a){__p&&__p();i.constructor.call(this,a),this.state={conferenceState:b("RTCConferenceState").NEW,isParticipantSelected:this.props.participants.mapEntries(function(a){var b=a[0];a[1];return[this.$1(b),!1]}.bind(this)),newParticipants:b("immutable").List(),remoteUsers:b("immutable").Set()},this.$2=function(a){var c=!this.state.isParticipantSelected.get(a);this.setState({isParticipantSelected:this.state.isParticipantSelected.set(a,c)});a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logClick(babelHelpers["extends"]({},a,{callType:this.props.isEscalatedCall?b("RTWebLoggingCallType").ESCALATED:b("RTWebLoggingCallType").MW,conferenceName:b("RTCCallStore").getState().callInfo.conferenceName,surface:b("RTWebLoggingSurface").GROUP_CALL_ADD_MEMBERS_DIALOG,component:c?b("RTWebLoggingComponent").PARTICIPANT_ROW_SELECT:b("RTWebLoggingComponent").PARTICIPANT_ROW_UNSELECT}))}.bind(this),this.$11=function(){__p&&__p();var a=this.props,c=a.onUnmount,d=a.thread;a=a.viewerID;c();c=this.state.newParticipants.toArray().map(function(a){return a.getUniqueID()});var e=this.$3().map(function(a){a=a.fbid;return a||""});if(this.props.isEscalatedCall){var f=[].concat(c,e).map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});b("MessengerParticipants.bs").getMulti(f,function(a){b("RTCGroupCallEscalationActions").setUsersToRing(b("immutable").Map(a));a=b("RTCP2PCallStore").getState();a=a.protocolHandler;a.escalateToMultiway()});return}d&&(c.length>0&&d.approval_mode===b("MessengerApprovalModeTypes").APPROVALS&&d.admins&&d.admins[a]===undefined?b("RTCGroupCallAdminModelErrorDialogController").showAdminModelErrorDialog():(b("RTCGroupCallActions").addParticipantsToRing(c),this.$8(d)));b("RTCMWProtocolHandler").addParticipants(b("RTCCallStore").getState().callInfo.conferenceName,b("RTCCallStore").getState().callInfo.serverInfoData,[].concat(c,e))}.bind(this),this.$4=function(){var a=this.state.newParticipants.toArray().map(function(a){return a.getUniqueID()}),c=this.$3().map(function(a){a=a.fbid;return a||""});a=[].concat(a,c).map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});b("MessengerParticipants.bs").getMulti(a,function(a){a=this.$12(b("immutable").Map(a).valueSeq().toArray());b("gkx")("678352")&&a?b("RTCGroupCallDialogController").showBlockedUserWarningDialog(this.$11,this.props.onUnmount):this.$11()}.bind(this))}.bind(this),this.$5=function(a){this.setState({newParticipants:this.state.newParticipants.push(a)})}.bind(this),this.$7=function(a){var b=a.getUniqueID();a=this.state.newParticipants;var c=a.findIndex(function(a){return a.getUniqueID()===b});c!==-1&&this.setState({newParticipants:a["delete"](c)})}.bind(this),this.$6=function(){this.setState({newParticipants:b("immutable").List()})}.bind(this),b("RTCAppDispatcher").explicitlyRegisterStores([b("RTCCallStore")])}a.prototype.render=function(){__p&&__p();var a=this.props,c=a.participants,d=a.thread;a=a.viewerID;var e=this.state.conferenceState;if(e===b("RTCConferenceState").TERMINATED||e===b("RTCConferenceState").TERMINATING)return null;e=b("React").createElement("div",{className:"_2t45"},b("React").createElement("div",{className:"_225b"},h._("Group Members")),b("React").createElement(b("MessengerRTCGroupCallContactList.react"),{isParticipantSelected:this.state.isParticipantSelected,onClick:this.$2,participantStates:b("immutable").Map(this.state.remoteUsers.map(function(a){return[a.FBID,a.participantState]})),remoteUsers:this.state.remoteUsers.toArray().sort(function(a,b){return a.userName.localeCompare(b.userName)})}));return b("React").createElement(b("MessengerDialog.react"),{onToggle:this.props.onUnmount,type:"default",width:j},b("React").createElement("div",{className:"_5zad"},b("React").createElement(b("MessengerDialogHeader.react"),null,b("React").createElement(b("MessengerDialogCancelButton.react"),{dataTestID:b("VideoCallWebDriverIDs").RTC_PICKER_DIALOG_CANCEL_BUTTON}),b("React").createElement(b("MessengerDialogTitle.react"),null,h._("Add Group Members")),b("React").createElement(b("MessengerDialogButton.react"),{dataTestID:b("VideoCallWebDriverIDs").RTC_PICKER_DIALOG_RING_BUTTON,disabled:this.$3().length+this.state.newParticipants.size===0,label:h._("Ring"),onClick:this.$4,type:"primary"})),this.props.isEscalatedCall?null:b("React").createElement(b("MessengerRTCGroupCallThreadRow.react"),{displayAddMemberWarning:!0,participants:c,thread:d,viewerID:a}),b("React").createElement(b("MessengerGraphQLTokenizer.react"),{autoFocus:!!this.props.isEscalatedCall,className:"_2el3",context:null,defaultEntries:e,enableMessageSearch:!1,entries:this.state.newParticipants,excludeGroups:!0,excludePages:!0,forGroup:!0,forceHideClearButton:!0,hasHoverState:!1,hideViewWithEntries:!1,onAddEntryAttempt:this.$5,onClear:this.$6,onRemoveEntryAttempt:this.$7,originalEntryIDs:b("immutable").Set(this.props.participants.keySeq().toArray().map(function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)||a})),placeholder:h._("Add to group:"),scrollableViewClassName:"_2el2",shouldQueryInternalBot:!1,shouldQueryVCEndpoint:!1,showDefaultEntries:!0,useLayer:!1,viewer:this.props.viewerID,width:j})))};a.prototype.$8=function(a){if(this.state.newParticipants.size)if(b("MessengerAdminGroupUtils").isJoinableThread(a))this.state.newParticipants.forEach(function(c){c=b("MercuryIDs").getThreadIDFromUserID(c.getUniqueID());this.$9().send(this.$10().constructUserGeneratedMessageObject(a.joinable_mode.link,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),c))}.bind(this));else{var c="thread:"+(a.thread_fbid||a.thread_id.split(".")[1]);this.$9().send(this.$10().constructLogMessageObject(b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),c,b("MercuryLogMessageType").SUBSCRIBE,{added_participants:this.state.newParticipants.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.getUniqueID())}).toArray()}))}};a.prototype.$9=function(){return b("MercuryMessageActions").getForFBID(this.props.viewerID)};a.prototype.$10=function(){return b("MercuryMessageObject").getForFBID(this.props.viewerID)};a.prototype.$12=function(a){return a.some(function(a){return a.is_messenger_blocked||a.is_facebook_blocked})};a.prototype.$3=function(){return this.props.participants.filter(function(a,b){return this.state.isParticipantSelected.get(this.$1(b))}.bind(this)).toArray()};a.prototype.$1=function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)||""};e.exports=b("FluxContainer").create(a)}),null);
__d("MessengerChatLinksFunnelLogger",["UserAgentData","WebFunnelLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="MessengerVideoChatLinksFunnelDefinition",h="defaultSessionKey",i="marker",j,k;function a(a){var b=m(),c=l();a&&(k=c=[].concat(c,a));b.setFunnelTags(c);b.markStart().setAction(i).log()}function l(){var a={bn:b("UserAgentData").browserName,bv:b("UserAgentData").browserVersion,os:b("UserAgentData").platformName},c=Object.keys(a).map(function(b){return b+":"+((b=a[b])!=null?b:"unknown")});return c}function c(a,b){var c=m();c.setAction(a);b&&b.actionTag&&c.setActionTag(b.actionTag);b&&b.funnelTags&&(k=(k||[]).concat(b.funnelTags),c.setFunnelTags(k));c.log()}function d(a){j=(a=a)!=null?a:h}function m(){return new(b("WebFunnelLogger"))(g).setSessionKey(j)}f={startFunnel:a,appendAction:c,setSessionKey:d};e.exports=f}),null);
__d("XGroupCallSendRequestController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groupcall/sendrequest/",{webrtc_fbtrace:{type:"Int"}})}),null);
__d("MultiwayRequests",["Promise","AsyncRequest","FBRTCCapability","FBRTCMessageType","RTCUtils","XGroupCallSendRequestController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=15e3;a.prototype.sendJoinRequest=function(a,c,d,e,f,g,h,i){__p&&__p();var j=h.callID,k=h.numParticipants;h=h.callTrigger;var l=i.userToEscalate,m=i.isEscalator;i=i.escP2PCallID;c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").JOIN,c,d,j,i);d={offer:{sdpString:e.toSdp()},deviceCapabilities:[b("FBRTCCapability").SUPPORT_AUDIO_DEPRECATED,b("FBRTCCapability").SUPPORT_VIDEO_DEPRECATED]};j=b("RTCUtils").createClientContextMessage(k,h?h:"");d.appMessages=[j];f&&f.length>0&&!l&&(d.usersToCall=f);l&&m&&(d.userToEscalate=l);g&&(d.mediaStatus=g);i={joinRequest:d};e=this.$1(a,c,i);return this.$2(e)};a.prototype.sendHangupRequest=function(a,c,d,e,f,g){c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").HANGUP,c,d,g);d={reason:e,detailedReasonString:f};g={hangupRequest:d};e=this.$1(a,c,g);return this.$2(e)};a.prototype.sendAddParticipantsRequest=function(a,c,d,e,f){c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").ADD_PARTICIPANTS,c,d,f);d={usersToInvite:e};f={addParticipantsRequest:d};e=this.$1(a,c,f);return this.$2(e)};a.prototype.sendRemoveParticipantsRequest=function(a,c,d,e,f){c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").REMOVE_PARTICIPANTS,c,d,f);d={usersToRemove:e};f={removeParticipantsRequest:d};e=this.$1(a,c,f);return this.$2(e)};a.prototype.sendSubscriptionRequest=function(a,c,d,e,f){c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").SUBSCRIPTION,c,d,f);d={subscriptions:e};f={subscriptionRequest:d};e=this.$1(a,c,f);return this.$2(e)};a.prototype.sendClientMediaUpdateRequest=function(a,c,d,e,f,g,h){c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").CLIENT_MEDIA_UPDATE,c,d,h);d={fromVersion:e,toVersion:f,mediaUpdates:g};h={clientMediaUpdateRequest:d};e=this.$1(a,c,h);return this.$2(e)};a.prototype.$2=function(a){return new(b("Promise"))(function(c,d){var e=b("XGroupCallSendRequestController").getURIBuilder().getURI();e=new(b("AsyncRequest"))(e).setMethod("POST").setData({request:JSON.stringify(a)}).setAllowCrossPageTransition(!0).setHandler(function(a){c(a.payload)}).setErrorHandler(function(a){a=a.getErrorDescription();a=Error(a!=null?a.toString():"AsyncRequest error");d(a)}).setTimeoutHandler(g,function(){d("Timeout")});e.send()})};a.prototype.$1=function(a,b,c){return{endpoint:a,jsonPayload:{header:b,body:c}}};function a(){}e.exports=new a()}),null);
__d("RTCMWProtocolHandler",["invariant","Promise","regeneratorRuntime","BonfireFeatureGating","ChannelManager","CurrentUser","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCConstants","FBRTCExperiment","FBRTCExperimentName","FBRTCGroupCallStore","FBRTCHangupReason","FBRTCLogger","FBRTCPeerConnection","FBRTCRtcResponseStatusCode","FBRTCSdpUtils","FBRTCStatsHelpers","FBRTCVideoQuality","MercuryIDs","MessengerChatLinksFunnelLogger","MultiwayParticipantFetcher","MultiwayRequests","RTCAppData","RTCCallActions","RTCCallStore","RTCGroupCallActions","RTCGroupCallDialogController","RTCGroupCallEscalationStore","RTCMultiwayMessageHandler","RTCProxyUserStore","RTCProxyUserUtils","RTCSessionDescription","RTCSignalingExperiments","RTCUserMediaConstraints","RTCUtils","RTWebClientFeatureGating","clearTimeout","emptyFunction","generateRTCCallID","gkx","immutable","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").CallEndReason,i=b("FBRTCConstants").GroupVideoViewLayout,j=b("FBRTCConstants").SignalingProtocol,k=b("FBRTCConstants").VideoQuality,l=18e4,m={appId:b("RTCAppData").getMWAppID(),deviceId:b("ChannelManager").getCompleteConfig().sessionID,userId:b("CurrentUser").getID()};function n(a){__p&&__p();this.$5=!1;this.$6=!1;this.$7=!1;this.$8=b("FBRTCLogger").getInstance();this.$12=function(a){__p&&__p();a=a.target;a=a.iceConnectionState;b("RTCCallActions").emit("onIceConnectionStateChange",a);switch(a){case"connected":a=b("RTCCallStore").getState();a=a.callSummary;a&&(a.onNetworkReady(),a.save(b("FBRTCCallSummaryStore").getInstance()));break;case"disconnected":case"failed":this.$3||(this.$3=window.setTimeout(function(){b("RTCCallActions").endCall(h.CONNECTION_DROPPED,"ConnectionDropped"),this.$16()}.bind(this),l));break;default:window.clearTimeout(this.$3),this.$3=null}}.bind(this);this.$1=(a=a)!=null?a:b("generateRTCCallID")();this.$2="MW_PEER_ID"}n.prototype.setKeepLocalStreamsOnClose=function(a){this.$6=a;return this};n.prototype.setAllowIncomingCalls=function(a){this.$7=a;return this};n.prototype.startCall=function(a,c,d,e){__p&&__p();var f=e.addStreamCallback;f=f===void 0?b("emptyFunction"):f;var g=e.callTrigger,h=e.formatParameters;h=h===void 0?{}:h;var i=e.preferredCodecs;i=i===void 0?{}:i;var k=e.offerSdpTransform,l=e.serverInfoData,m=e.shouldSetDescriptions;m=m===void 0?!0:m;var n=e.isEscalatedCall;n=n===void 0?!1:n;var o=e.connectedOnJoin;o=o===void 0?!1:o;e=e.escP2PCallID;e=e===void 0?"":e;b("RTCCallActions").initialize({protocol:j.MULTIWAY,conferenceName:d,serverInfoData:l,callID:this.$1.toString(),callTrigger:g});b("MessengerChatLinksFunnelLogger").appendAction("init_mw_call",{funnelTags:["conf_name:"+d,"call_id:"+this.$1]});var p=b("FBRTCCallSummary").restoreOrInitialize(b("FBRTCCallSummaryStore").getInstance(),this.$2,this.$1,!1);g&&p.onCallStarted(g);p.setJoinWithSID(l!=null);p.setActiveConnection("mws");p.setCallType("mws");p.onPopupOpened();p.setConferenceName(d);p.setServerInfoData(l);if(n){var q=b("RTCCallStore").getState().callSummary;p.setEscalationP2PCallID(q.callID)}this.$9(p);p.save(b("FBRTCCallSummaryStore").getInstance());b("RTCCallActions").setCallSummary(p);q={mandatory:{},optional:[{DtlsSrtpKeyAgreement:!1},{googNumUnsignalledRecvStreams:10},{googHighBitrate:!0},{googVeryHighBitrate:!0},{RtpDataChannels:!0}]};q=new(b("FBRTCPeerConnection"))(j.MULTIWAY,{iceServers:[]},q);if(d.split(":")[0]!=="LIVE"){var r=q.createDataChannel("data");r&&(r.onmessage=function(a){a=a.data;try{a=JSON.parse(a);a=a.body;this.$10(a)}catch(a){this.$8.logError(this.$2,this.$1,a)}}.bind(this))}q.addEventListener("addstream",function(event){this.$11(d,event.stream)}.bind(this));q.addEventListener("removestream",function(event){b("RTCCallActions").removeRemoteStream(event.stream)});q.addEventListener("iceconnectionstatechange",this.$12);this.$13(q,c,d,l,a,f,h,i,m,n,o,e,g?g:p.getCallTrigger(),k);!l?b("RTCCallActions").call(a,q):b("RTCCallActions").join(q);return q};n.prototype.$9=function(a){b("promiseDone")(b("FBRTCStatsHelpers").getBatteryStats(),function(c){a.addExtraInfo(b("FBRTCLogger").Key.BATTERY_START,c.level)})};n.prototype.$11=function(a,c){__p&&__p();c.onaddtrack=function(a){var c=a.target;a=a.track;b("RTCCallActions").addRemoteTrack(c,a)};c.onremovetrack=function(a){var c=a.target;a=a.track;b("RTCCallActions").removeRemoteTrack(c,a)};var d=c.id.split(":")[0],e=b("MercuryIDs").getParticipantIDFromUserID(d);if(d!==b("CurrentUser").getID()){d=b("RTCProxyUserUtils").getUserIDToFetch(d);var f=b("RTCProxyUserStore").getState();f=f.proxyingAsToProxyUser;b("promiseDone")(b("MultiwayParticipantFetcher").fetchAllParticipants(a,b("immutable").Set([d]),{proxyingAsToProxyUser:f}),function(a){a=a.get(e);var d=a&&(a.is_messenger_blocked||a.is_facebook_blocked);b("gkx")("678352")&&d?b("RTCGroupCallDialogController").showIncomingBlockedUserWarningDialog(function(){return n.endCall(b("RTCCallStore").getState().callInfo.conferenceName,b("RTCCallStore").getState().callInfo.serverInfoData,b("FBRTCHangupReason").HANGUP_CALL)},function(b,a){return this.$14(e,b,a)}.bind(this),a,c):this.$14(e,a,c)}.bind(this))}};n.prototype.$14=function(a,c,d){__p&&__p();var e={};e[a]=c;b("RTCGroupCallActions").onParticipantsAdded(e);b("RTCCallActions").addRemoteStream(d);a=b("RTCCallStore").getState();c=a.callInfo;e=b("FBRTCGroupCallStore").getState();d=e.layout;a=e.pinnedSpeakerFBID;e=b("RTCCallStore").getConnection(j.MULTIWAY);e&&n.subscription(c.conferenceName,c.serverInfoData,e.getRemoteStreams(),d,a)};n.prototype.$10=function(a){if(a.dominantSpeakerNotification){a=a.dominantSpeakerNotification.userId;b("RTCGroupCallActions").setDominantSpeaker(a)}};n.prototype.setDescriptions=function(){this.$5=!0;var a=b("RTCCallStore").getConnection(j.MULTIWAY);this.$4&&a&&a.setRemoteDescription(this.$4)};n.escalateLocalStream=function(a){__p&&__p();a===void 0&&(a=!0);return n.initStream(a).then(function(c){__p&&__p();var d=b("RTCCallStore").getState(),e=d.callInfo,f=e.conferenceName;e=e.serverInfoData;var g=d.localUser;d=b("RTCCallStore").getConnection(j.MULTIWAY);if(!d)return;var h=null;a&&(c.getTracks().forEach(function(a){a.kind==="audio"&&(a.enabled=!g.isAudioMuted())}),h=g.streams.first(),d.removeStream(h));return o(d,[c],f,e,[]).then(function(){h&&b("RTCCallActions").removeLocalStream(h),b("RTCCallActions").addLocalStream(c)})})};n.prototype.onStreamReady=function(a,c,d,e,f){var g={};e||b("RTCCallActions").addLocalStream(a);g.isEscalatedCall=e;f.p2pCallID&&(g.escP2PCallID=f.p2pCallID);f.serverInfoData&&(g.serverInfoData=f.serverInfoData);f.callTrigger&&(g.callTrigger=f.callTrigger);b("RTWebClientFeatureGating").preferIsacForGroupCalls()&&(g.preferredCodecs={audio:"ISAC/16000"});this.startCall(c,[a],d,g)};n.initStream=function(a,c,d,e,f){d===void 0&&(d=!0);var g=b("FBRTCExperiment").gen(b("FBRTCExperimentName").MW_AUDIO_FALLBACK);g=g.getBool("use_audio_fallback",!1);d={audio:d&&b("RTCUserMediaConstraints").audio(e),video:a?babelHelpers["extends"]({},p(b("RTCUserMediaConstraints").video(c?c:k.HD_VIDEO,f))):!1};e={optionalConstraintsOnly:!0,supportFilteredStreams:a&&b("RTWebClientFeatureGating").canUseMWVideoFilters()};c=g?b("RTCUtils").getUserMediaWithAudioFallback:b("RTCUtils").getUserMedia;return c(d,e)};n.startScreenStream=function(a){__p&&__p();var c=b("RTCCallStore").getState(),d=c.callInfo,e=d.conferenceName;d=d.serverInfoData;var f=c.localUser;c=b("RTCCallStore").getConnection(j.MULTIWAY);if(!c)return;for(var g=f.screenStreams,h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(h){if(i>=g.length)break;k=g[i++]}else{i=g.next();if(i.done)break;k=i.value}k=k;k!==a&&b("RTCUtils").transferAudioTracks(a,k)}for(var k=f.streams,i=Array.isArray(k),h=0,k=i?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(i){if(h>=k.length)break;g=k[h++]}else{h=k.next();if(h.done)break;g=h.value}g=g;b("RTCUtils").transferAudioTracks(a,g)}b("promiseDone")(o(c,[a],e,d,[]),function(){__p&&__p();for(var c=f.screenStreams,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(d){if(e>=c.length)break;g=c[e++]}else{e=c.next();if(e.done)break;g=e.value}g=g;g!==a&&(b("RTCCallActions").removeLocalScreenStream(g),b("RTCUtils").stopMediaStream(g))}b("RTCCallActions").addLocalScreenStream(a)})};n.updateScreenStream=function(a,b){n.startScreenStream(b)};n.stopScreenStream=function(a){__p&&__p();var c=b("RTCCallStore").getState(),d=c.callInfo,e=d.conferenceName,f=d.serverInfoData;d=c.localUser;var g=b("RTCCallStore").getConnection(j.MULTIWAY);if(!g)return;c=d.getStream();c?d=b("Promise").resolve(c):d=n.initStream(!0,undefined,!1).then(function(a){b("RTCCallActions").addLocalStream(a);return a});b("promiseDone")(d,function(c){b("RTCUtils").transferAudioTracks(c,a),b("promiseDone")(o(g,[c],e,f,[]),function(){b("RTCUtils").stopMediaStream(a),b("RTCCallActions").removeLocalScreenStream(a)})})};n.endCall=function(a,c,d,e){e===void 0&&(e=""),b("promiseDone")(n.genEndCall(a,d,{serverInfoData:c,detailedReasonString:e,keepLocalStream:!1}))};n.genEndCall=function(a,c,d){b("RTCMultiwayMessageHandler").close();d.keepLocalStream||b("RTCCallActions").removeAllLocalStreams(!0);var e=d.detailedReasonString||"Hangup by user";b("RTCCallActions").hangup(b("RTCUtils").endCallReasonFromHangupReason(c),e);return b("MultiwayRequests").sendHangupRequest(m,a,d.serverInfoData,c,e,b("RTCCallStore").getState().callInfo.callID).then(function(){b("RTCCallActions").hangupSuccess()})["catch"](function(a){b("RTCCallActions").hangupError();throw a})};n.otherUserInAnotherCall=function(a,c,d,e,f){f===void 0&&(f=""),b("promiseDone")(b("MultiwayRequests").sendHangupRequest(m,a,c,d,f||"User receiving this call is in another call",e))};n.prototype.iceRestart=function(a,c){var d=b("RTCCallStore").getConnection(j.MULTIWAY);d&&o(d,[],a,c,[],{iceRestart:!0})};n.addParticipants=function(a,c,d){return b("MultiwayRequests").sendAddParticipantsRequest(m,a,c,d,b("RTCCallStore").getState().callInfo.callID)};n.removeParticipants=function(a,c,d){return b("MultiwayRequests").sendRemoveParticipantsRequest(m,a,c,d,b("RTCCallStore").getState().callInfo.callID)};n.subscription=function(a,c,d,e,f){var g=e===i.DOMINANT_SPEAKER?b("FBRTCVideoQuality").LOW:e===i.GRID?b("FBRTCVideoQuality").MEDIUM:b("FBRTCVideoQuality").HIGH;d=d.map(function(a){a=a.id;return{cname:a,options:{videoQuality:e===i.DOMINANT_SPEAKER&&f===a.split(":")[0]?b("FBRTCVideoQuality").HIGH:g}}});e===i.DOMINANT_SPEAKER&&!f&&d.push({cname:""});b("MultiwayRequests").sendSubscriptionRequest(m,a,c,d,b("RTCCallStore").getState().callInfo.callID)};n.clientMediaUpdate=function(a,c,d,e,f){b("MultiwayRequests").sendClientMediaUpdateRequest(m,a,c,d,e,f,b("RTCCallStore").getState().callInfo.callID).then(function(a){var c=a.header.responseStatusCode;a=a.body.clientMediaUpdateResponse.currentVersion;return b("RTCGroupCallActions").onClientMediaUpdateResponse(c,a)})["catch"](function(a){b("FBRTCLogger").getInstance().logError(null,b("RTCCallStore").getState().callInfo.callID,a)})};n.prototype.$13=function(a,c,d,e,f,g,h,i,j,k,l,m,n,p){this.$15(d,e),b("promiseDone")(o(a,c,d,e,f,{},g,h,i,j,k,m,n,p),function(a){this.$4=a,this.$5&&this.setDescriptions(),b("RTCCallActions").callSuccess(l)}.bind(this),function(a){b("RTCCallActions").callError(a),this.$16()}.bind(this))};n.prototype.$16=function(){var a=b("RTCCallStore").getConnection(j.MULTIWAY);b("RTCMultiwayMessageHandler").close();a&&a.close();this.$6||b("RTCCallActions").removeAllLocalStreams(!0)};n.prototype.$15=function(a,c){b("RTCMultiwayMessageHandler").initHandler(a,c,this.$7,this.$6)};n.maybeLimitBitrate=function(a){a=a.getSenders().filter(function(a){return a.track&&a.track.kind==="video"});if(a.length>0&&b("RTCSignalingExperiments").shouldCapMWBitrate()){a=a[0];var c=a.getParameters();c.encodings[0].maxBitrate=72e4;b("Promise").resolve(a.setParameters(c))}};function o(a,c,d,e,f,g,h,i,k,l,o,p,q,r){__p&&__p();var s,t,u,v,w,x,y,z,A,B,C;return b("regeneratorRuntime").async(function(D){__p&&__p();while(1)switch(D.prev=D.next){case 0:g===void 0&&(g={}),h===void 0&&(h=b("emptyFunction")),i===void 0&&(i={}),k===void 0&&(k={}),l===void 0&&(l=!0),o===void 0&&(o=!1),p===void 0&&(p=""),q===void 0&&(q=""),r===void 0&&(r=[]),s={},t=[],(u=a.getLocalStreams()||[],v=Array.isArray(u),w=0,u=v?u:u[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 12:if(!v){D.next=18;break}if(!(w>=u.length)){D.next=15;break}return D.abrupt("break",26);case 15:x=u[w++];D.next=22;break;case 18:w=u.next();if(!w.done){D.next=21;break}return D.abrupt("break",26);case 21:x=w.value;case 22:y=x,a.removeStream(y);case 24:D.next=12;break;case 26:c.forEach(function(b){t=t.concat(b.getTracks()),a.addStream(b,h)});t.forEach(function(a){s[a.id]=a.enabled});D.next=30;return b("regeneratorRuntime").awrap(a.createOffer(babelHelpers["extends"]({preserveH264:b("RTCUtils").isWatchPartyCall(d)||b("RTCUtils").isBonfireCall(d)&&b("BonfireFeatureGating").shouldUseH264()},g),{FORMAT_PARAMETERS:i,OFFER_SDP_TRANSFORM:r},k));case 30:z=D.sent;if(b("FBRTCSdpUtils").validateOfferSdp(d,z.toSdp())){D.next=33;break}throw b("FBRTCRtcResponseStatusCode").BAD_REQUEST;case 33:D.next=35;return b("regeneratorRuntime").awrap(a.setLocalDescription(z));case 35:b("RTCGroupCallActions").onJoinRequestSent();(b("RTCUtils").isGroupCall(d)||b("RTCUtils").isMessengerCall(d))&&n.maybeLimitBitrate(a);D.next=39;return b("regeneratorRuntime").awrap(b("MultiwayRequests").sendJoinRequest(m,d,e,z,f.length>0?f:null,t.length>0?s:null,{callID:b("RTCCallStore").getState().callInfo.callID,callTrigger:q,numParticipants:b("RTCCallStore").getState().remoteUsers.size},{userToEscalate:o&&f.length>0?f[0]:null,isEscalator:b("RTCGroupCallEscalationStore").getState().toRing,escP2PCallID:p}));case 39:A=D.sent;b("RTCGroupCallActions").onReceivedJoinResponse();B=A.header.responseStatusCode;if(!(B!==b("FBRTCRtcResponseStatusCode").OK)){D.next=44;break}return D.abrupt("return",new(b("Promise"))(function(a,b){b(B)}));case 44:b("RTCGroupCallActions").onJoinResponse(A.header.serverInfoData);b("RTCProxyUserUtils").setProxyingAsUsersFromMessage(A.body.joinResponse);C=new(b("RTCSessionDescription"))(j.MULTIWAY,{type:"answer",sdp:A.body.joinResponse.answer.sdpString},{FORMAT_PARAMETERS:i});if(!l){D.next=50;break}D.next=50;return b("regeneratorRuntime").awrap(a.setRemoteDescription(C));case 50:b("RTCGroupCallActions").toggleRemoteStream(A.body.joinResponse.mediaStatus);b("RTCGroupCallActions").onProcessedJoinResponse();return D.abrupt("return",C);case 53:case"end":return D.stop()}},null,this)}function p(a){a instanceof Object||g(0,444);return a}e.exports=n}),null);
__d("RTCCallNUXActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DISMISS_NUX:"DISMISS_NUX",INIT_NUX_STATE:"INIT_NUX_STATE",MARK_NUX_VIEWED:"MARK_NUX_VIEWED"})}),null);
__d("XRTCCallNUXController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/rtc/call/nuxstatus/",{})}),null);
__d("RTCCallNUXActions",["FBRTCLogger","FBRTCUtils","RTCAppDispatcher","RTCCallNUXActionTypes","XRTCCallNUXController","dangerouslyBypassDispatchError"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={refreshNUXState:function(){b("FBRTCUtils").sendServerRequest(b("XRTCCallNUXController").getURIBuilder().getURI(),function(a){a=a.payload;b("RTCAppDispatcher").dispatch({type:b("RTCCallNUXActionTypes").INIT_NUX_STATE,payload:a})},function(){})},markNUXViewed:function(a){try{b("RTCAppDispatcher").dispatch({type:b("RTCCallNUXActionTypes").MARK_NUX_VIEWED,nuxID:a})}catch(c){b("dangerouslyBypassDispatchError")(function(){return b("RTCAppDispatcher").dispatch({type:b("RTCCallNUXActionTypes").MARK_NUX_VIEWED,nuxID:a})})}},dismissNUX:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCallNUXActionTypes").DISMISS_NUX,nuxID:a})}};e.exports=a}),null);
__d("RTCOneVCActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({STORE_PARTICIPANTS:"STORE_PARTICIPANTS"})}),null);
__d("RTCOneVCActions",["RTCAppDispatcher","RTCOneVCActionTypes"],(function(a,b,c,d,e,f){"use strict";a={storeParticipants:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCOneVCActionTypes").STORE_PARTICIPANTS,participants:a})}};e.exports=a}),null);
__d("RTCPeerConnectionQueue",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1=[],this.$2=[]}a.prototype.push=function(a,b){switch(a){case"add":this.$1.push(b);break;case"remove":this.$2.push(b);break}};a.prototype.drain=function(){this.$3(this.$2),this.clear("remove"),this.$3(this.$1),this.clear("add")};a.prototype.$3=function(a){__p&&__p();if(a.length<1)return;for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;try{d()}catch(a){}}};a.prototype.clear=function(a){switch(a){case"add":this.$1=[];break;case"remove":this.$2=[];break;default:this.$1=[],this.$2=[]}};e.exports=a}),null);
__d("RTCP2PProtocolHandler",["invariant","Promise","Bootloader","CollabCallMessengerBrowserEventEnum","CurrentUser","DateConsts","ErrorUtils","FBLogger","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCConfig","FBRTCConsoleLogger","FBRTCConstants","FBRTCIceCache","FBRTCLocalMessageQueue","FBRTCLocalUploadLogLevel","FBRTCLogger","FBRTCMessage","FBRTCMessageDedup","FBRTCMessageListener","FBRTCMessageSender","FBRTCPCConfig","FBRTCPeerConnection","FBRTCPeerConnectionHelper","FBRTCRetriableMessage","FBRTCSdpUtils","FBRTCStatsHelpers","FBRTCSupport","FBRTCTurnDiscovery","FBRTCUrlManager","FBRTCUserSettings","RTCCallActions","RTCCallNUXActions","RTCCallStore","RTCCallType","RTCConferenceState","RTCConfig","RTCEndCallReason","RTCGroupCallEscalationStore","RTCGroupCallEscalator","RTCOneVCActions","RTCP2PCallActions","RTCP2PCallEscalationActions","RTCP2PCallEscalationStore","RTCP2PCallEscalator","RTCP2PCallStore","RTCP2PCallWindowHandler","RTCP2PConnectionStatus","RTCPeerConnectionQueue","RTCSessionDescription","RTCSignalingExperiments","RTCStreamDurationTracker","RTCUserMediaConstraints","RTCUtils","RTWebClientFeatureGating","RTWebUserActionLogger","UserAgent","clearTimeout","debounce","gkx","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("DateConsts").MS_PER_MIN;c=b("DateConsts").MS_PER_SEC;var h=b("FBRTCConstants").CallEndReason,i=b("FBRTCConstants").CallType,j=b("FBRTCConstants").SignalingProtocol,k=b("FBRTCConstants").VideoQuality,l=1*a,m=15*c,n=30*c;function o(){__p&&__p();this.$4={streams:{}},this.$5=b("FBRTCLogger").getInstance(),this.$7=!1,this.$8=!0,this.$9=!1,this.$10="passive",this.$11=new(b("FBRTCMessageSender"))(),this.$16=new(b("FBRTCIceCache"))(),this.$17=!1,this.$18=[],this.$19=!1,this.$22=null,this.$23=null,this.$25=new(b("RTCStreamDurationTracker"))("video"),this.$26=new(b("RTCStreamDurationTracker"))("video"),this.$27=new(b("RTCStreamDurationTracker"))("screen"),this.$28=!1,this.$29=new(b("RTCPeerConnectionQueue"))(),this.$49=function(a){a=a.candidate;a&&this.$63(a)}.bind(this),this.$50=function(a){__p&&__p();a=a.target;a=a.iceConnectionState;this.$33("PC iceconnectionstatechange: "+a);(this.$23==="disconnected"||this.$23==="failed")&&a==="connected"&&this.$32(b("CollabCallMessengerBrowserEventEnum").CONNECTION_RECOVERY,this.$23);this.$32(b("CollabCallMessengerBrowserEventEnum").ICE_CONNECTION_STATE_CHANGE,a);b("clearTimeout")(this.$22);switch(a){case"checking":this.$9=!0;break;case"connected":case"completed":this.$64();this.$65();break;case"failed":this.$22=b("setTimeout")(function(){if(b("RTCConfig").CollaborationBrowserConfig.ICE_recovery&&b("FBRTCConfig").isVCEndpointCall()){this.$66("ICE failure");return}this.$62(new Error("ICE failed"));b("RTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").DISCONNECTED)}.bind(this),b("RTCConfig").CollaborationBrowserConfig.ICE_failed_timeout);break;case"disconnected":this.$22=b("setTimeout")(function(){this.$36(h.CONNECTION_DROPPED,!1,!0,!1)}.bind(this),b("RTCConfig").CollaborationBrowserConfig.ICE_disconnected_timeout);break;case"closed":break}}.bind(this),this.$69=function(){var a=this.$3.getCreatedIceCandidates();for(var b=0;b<a.length;b++)this.$63(a[b])}.bind(this),this.$51=function(a){a=a.target;a=a.iceGatheringState;this.$33("PC icegatheringstatechange: "+a);this.$32(b("CollabCallMessengerBrowserEventEnum").ICE_GATHERING_STATE_CHANGE,a)}.bind(this),this.$52=function(a){var c=a.errorCode,d=a.errorText,e=a.hostCandidate;a=a.url;this.$33("PC icecandidateerror "+c+": "+d+". candidate: "+e);this.$32(b("CollabCallMessengerBrowserEventEnum").ICE_CANDIDATE_ERROR,{errorCode:c,errorText:d,hostCandidate:e,url:a})}.bind(this),this.$70=function(){var a;this.$24?a=h.UNSUPPORTED_VERSION:a=h.OTHER_NOT_CAPABLE;this.$36(a,!1,!0,!1,"TimedOut")}.bind(this),this.$55=b("debounce")(function(a){__p&&__p();var c=a.target;this.$32(b("CollabCallMessengerBrowserEventEnum").RENEGOTIATION,{iceConnectionState:c.iceConnectionState,isNegotiationExpected:this.$8});if(c.iceConnectionState==="closed"){r("P2P:PC negotiationneeded pc is %o",c.iceConnectionState);return}else if(!this.$8){this.$32(b("CollabCallMessengerBrowserEventEnum").RENEGOTIATION,"ignore");r("P2P:PC negotiationneeded %o","ignore");return}else if(!b("RTCP2PCallEscalator").isNegotiationAllowed()){this.$32(b("CollabCallMessengerBrowserEventEnum").RENEGOTIATION,"not allowed - escalating");r("P2P:PC negotiationneeded %o","not allowed","escalating");return}else if(this.$7){this.$32(b("CollabCallMessengerBrowserEventEnum").RENEGOTIATION,"retry");r("P2P:PC SDP lock %o, will retry in a bit","on");b("setTimeout")(function(){return this.$55(a)}.bind(this),100);return}else r("P2P:PC SDP lock %o","off");this.$8=!1;var d=[];r("P2P:PC negotiationneeded @ signalingState %o",c.signalingState);if(c.signalingState==="stable"){if(this.$9){c=b("RTCP2PCallStore").getState();c=c.signalingExperiments;if(!c.support("sdp_update"))this.internalResetConnection(),d.push("new offer");else{c=o.supportMultipleStreams();d.push("SDP update",c?"plan B":null)}this.$10="passive"}this.$32(b("CollabCallMessengerBrowserEventEnum").RENEGOTIATION,"create offer");this.$67().then(function(a){if(a.strongDiff(this.$3.getLocalDescription())){r("P2P SDP difference %o - set offer","strong");this.$32(b("CollabCallMessengerBrowserEventEnum").RENEGOTIATION,d);return a}r("P2P SDP difference %o - noop","weak");return null}.bind(this)).then(function(a){a&&(this.$9&&b("RTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").RECONNECTING),this.$68(a)),this.$10="active"}.bind(this))["catch"](function(a){this.$62(new Error("Failed to create offer onNegotiationNeeded: "+a.message))}.bind(this))}}.bind(this),50),this.$56=function(a){__p&&__p();if(this.$28){this.$29.push("add",function(){return this.$56(a)}.bind(this));return}var c=a.stream,d=this.$61(c),e=this.$1;d===b("FBRTCConstants").StreamType.SCREEN_CONTENT?(b("RTCCallActions").addRemoteScreenStream(c,e),!o.supportMultipleStreams()&&c.getAudioTracks().length>0&&this.$26.track(c)):(b("FBRTCUserSettings").updateForRemoteStream(c),b("RTCCallActions").addRemoteStream(c,e),this.$26.track(c),b("RTCP2PCallStore").addListener(b("debounce")(function(){b("RTCP2PCallStore").getState().callType!==b("RTCCallType").AUDIO_ONLY&&this.$64()}.bind(this),50)));this.$19=!0;while(this.$18.length>0)this.$71(this.$18.shift());this.$32(b("CollabCallMessengerBrowserEventEnum").REMOTE_STREAM_ADDED,c);r("P2P:PC remote %o stream %o %o %o",d,"added",c,", tracks: ",c.getTracks())}.bind(this),this.$57=function(a){a=b("RTCCallStore").getState().remoteUsers.first();a&&!a.isVideoMuted()&&(b("RTCCallActions").toggleMuteRemoteVideo(!1,a.FBID),this.$32(b("CollabCallMessengerBrowserEventEnum").ON_MEDIA_TRACK_EVENT,{action:"toggleMuteRemoteVideo",muted:!1,remoteUserID:a.FBID}))}.bind(this),this.$58=function(a){__p&&__p();if(this.$28){this.$29.push("remove",function(){return this.$58(a)}.bind(this));return}var c=a.stream,d=this.$61(c),e=this.$1;if(d===b("FBRTCConstants").StreamType.SCREEN_CONTENT){b("RTCCallActions").removeRemoteScreenStream(c,e);var f=b("RTCCallStore").getState().remoteUsers.first();if(f){f=f.streams.first();f&&this.$26.track(f)}}else b("RTCCallActions").removeRemoteStream(c,e);this.$32(b("CollabCallMessengerBrowserEventEnum").REMOTE_STREAM_REMOVED,c);r("P2P:PC remote %o stream %o %o %o",d,"removed",c,", tracks: ",c.getTracks())}.bind(this),this.$34=function(a){this.$33("Received Turn Creds"),this.$32(b("CollabCallMessengerBrowserEventEnum").TURN_CREDENTIALS_RECEIVED,a),b("FBRTCPCConfig").setTurnCredentials(a)}.bind(this),this.$35=function(){this.$5.logError(this.$1,this.$2,"Failed to get turn creds"),this.$36(h.CLIENT_ERROR,!1,!b("RTCP2PCallStore").isCaller(),!1,"NoTurnCreds")}.bind(this),this.$42=function(a,b){this.$36(a,!1,!1,!1,b.toString())}.bind(this),this.$41=function(a,c){__p&&__p();var d=c.call_id;if(this.$80()){this.$5.logError(this.$1,this.$2,"Message sent after call ended: "+c.type);return}if(this.$1!==a||this.$2!==d)return;t(function(a){return a.onMessageSent(c)});this.$32(b("CollabCallMessengerBrowserEventEnum").MESSAGE_SENT,c)}.bind(this),this.$43=function(a){a=a.message+"; "+a.stackFrames[0].identifier;this.$5.logError(this.$1,this.$2,"JSError: "+a)}.bind(this),this.$32(b("CollabCallMessengerBrowserEventEnum").CALL_CONTROLLER_INIT),b("RTWebUserActionLogger").logCheckpoint({checkpoint:"RTCP2PProtocolHandler_constructed"})}o.prototype.init=function(a,c){__p&&__p();this.$1=a;this.$2=c;this.$33("init call");this.$6=new(b("FBRTCLocalMessageQueue"))();a=this.$6.getOffer(this.$1);this.$32(b("CollabCallMessengerBrowserEventEnum").LOCAL_MESSAGE_QUEUE,{action:"getOffer",cachedOffer:a,callID:this.$2});if(a){this.$32(b("CollabCallMessengerBrowserEventEnum").CALL_START_TRY,"not ready");c=new(b("FBRTCMessage"))(a);b("RTCP2PCallActions").processMessage(c)}return this};o.prototype.setPreserveLocalStream=function(a){this.$31=a;return this};o.prototype.fetchTURNCredentials=function(){if(b("FBRTCConfig").isVCEndpointCall()){this.$33("Skipping the TURN discovery");return b("Promise").resolve()}this.$32(b("CollabCallMessengerBrowserEventEnum").CALL_START_TRY,"not ready");return b("FBRTCTurnDiscovery").requestTurnCreds(this.$2.toString(),this.$1).then(this.$34,this.$35)};o.prototype.endCall=function(a,c,d){a===void 0&&(a=h.HANGUP_CALL),c===void 0&&(c=""),d===void 0&&(d=!1),b("RTCCallActions").hangup(a,c),this.$36(a,!1,!0,d,c)};o.prototype.startCall=function(a){__p&&__p();var c=b("RTCP2PCallStore").isCaller();this.$32(b("CollabCallMessengerBrowserEventEnum").CALL_PROCESS_STARTED,{callTrigger:a,userCallType:this.$37(),isCaller:b("RTCP2PCallStore").isCaller()});this.$3=this.$38();this.$39();this.$29=new(b("RTCPeerConnectionQueue"))();var d=this.$6.getOffer(this.$1);this.$32(b("CollabCallMessengerBrowserEventEnum").LOCAL_MESSAGE_QUEUE,{action:"getOffer",cachedOffer:d});var e=null;d?(this.$20=new(b("FBRTCMessage"))(d),b("FBRTCMessageDedup").check(this.$1,this.$20.callID,this.$20.msgID),e=!1):(e=!0,b("RTCP2PCallActions").setIsCaller(e));e!==c&&(this.$32(b("CollabCallMessengerBrowserEventEnum").SET_CALLER_MISMATCH,{initialValue:c,actualValue:e}),c?b("RTWebUserActionLogger").logCheckpoint({checkpoint:"offer_mismatch_caller_found_unexpected_cached_offer"}):b("RTWebUserActionLogger").logCheckpoint({checkpoint:"offer_mismatch_callee_did_not_find_cached_offer"}));this.$8=e;this.$20 instanceof b("FBRTCMessage")&&b("RTCP2PCallActions").processMessage(this.$20);this.$40(a,e);b("FBRTCUrlManager").init(this.$1);this.$11=new(b("FBRTCMessageSender"))();this.$11.onMessageSent=this.$41;this.$11.onSendFailure=this.$42;this.$30=new(b("RTCP2PCallEscalator"))(this.$1,this.$2,this.$11);b("ErrorUtils").addListener(this.$43,!0);b("FBRTCMessageListener").setMessageHandler(function(a){this.$44(a)}.bind(this));b("FBRTCConfig").isVCEndpointCall()&&b("FBRTCMessageListener").setOneVCMessegeHandler(function(a){this.$45(a)}.bind(this));this.$46();b("RTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").CONTACTING);b("RTCCallActions").call([this.$1],this.$3)};o.prototype.$40=function(a,c){c=b("FBRTCCallSummary").restoreOrInitialize(b("FBRTCCallSummaryStore").getInstance(),this.$1,this.$2,c,this.$20&&this.$20.msg,a);c.setCallType(b("RTCP2PCallStore").getState().callType===b("RTCCallType").AUDIO_ONLY?i.VOIP:i.DIRECT_VIDEO);c.setActiveConnection("p2p");this.$47(c);b("RTCCallActions").setCallSummary(c)};o.prototype.$47=function(a){b("promiseDone")(b("FBRTCStatsHelpers").getBatteryStats(),function(c){a.addExtraInfo(b("FBRTCLogger").Key.BATTERY_START,c.level)})};o.prototype.startScreenStream=function(a){if(!o.supportMultipleStreams()){var c=b("RTCCallStore").getState();c=c.localUser;c=c.streams.first();b("RTCUtils").transferAudioTracks(a,c)}b("RTCCallActions").addLocalScreenStream(a)};o.prototype.stopScreenStream=function(a){__p&&__p();var c=b("RTCCallStore").getState();c=c.localUser;if(!c.screenStreams.includes(a))return;if(!o.supportMultipleStreams()){c=c.streams.first();b("RTCUtils").transferAudioTracks(c,a)}b("RTCCallActions").removeLocalScreenStream(a);b("RTCUtils").stopMediaStream(a)};o.prototype.updateScreenStream=function(a,c){b("RTCUtils").transferAudioTracks(c,a),b("RTCCallActions").replaceLocalScreenStream(a,c),b("RTCUtils").stopMediaStream(a)};o.prototype.$48=function(a){if(!o.supportMultipleStreams()&&a.hasScreenStream())return!0;else return!a.isVideoMuted()};o.prototype.$38=function(){__p&&__p();var a=b("RTCP2PCallStore").getState();a=a.isPeerOnMobile;a=new(b("FBRTCPeerConnection"))(j.P2P,b("FBRTCPCConfig").getConfig(),b("FBRTCPCConfig").getConstraints(a));var c,d,e,f;b("RTCCallStore").addListener(b("debounce")(function(){__p&&__p();var a=b("RTCCallStore").getState();a=a.localUser;if(!a||a===c)return;c=a;var g=this.$48(a);d!==g&&d!==null&&this.$11&&this.$11.sendMuteStateUpdate(this.$1,this.$2,g);d=g;g=a.streams;a=a.screenStreams;var h=a!==f,i=g!==e;i||h?(e=g,f=a,this.$39(h)):this.$25.update()}.bind(this),50));b("FBRTCConfig").isVCEndpointCall()&&a.createDataChannel("noop");a.addEventListener("icecandidate",this.$49);a.addEventListener("iceconnectionstatechange",this.$50);a.addEventListener("icegatheringstatechange",this.$51);a.addEventListener("icecandidateerror",this.$52);a.addEventListener("connectionstatechange",this.$53);a.addEventListener("signalingstatechange",this.$54);a.addEventListener("negotiationneeded",this.$55);a.addEventListener("addstream",this.$56);a.addEventListener("track",this.$57);a.addEventListener("removestream",this.$58);a.addEventListener("datachannel",this.$59);this.$60(a);return a};o.supportMultipleStreams=function(){var a=b("RTCP2PCallStore").getState();a=a.signalingExperiments;return a.support("multiple_streams_plan_b")||a.support("multiple_streams_unified")};o.prototype.$39=function(a){__p&&__p();a===void 0&&(a=!1);if(this.$3.getSignalingState()==="closed")return;var c=b("RTCCallStore").getState();c=c.localUser;if(!c)return;var d=c.getStream();c=c.getScreenStream();var e=[];o.supportMultipleStreams()?(c?(e.push(c),this.$27.track(c)):this.$27.update(),d?(e.push(d),this.$25.track(d)):this.$25.update()):c?(this.$27.track(c),this.$25.track(c),e.push(c)):(this.$27.update(),d&&(this.$25.track(d),e.push(d)));if(b("FBRTCPeerConnection").isTrackAPISupported()&&b("RTWebClientFeatureGating").restartVideoWithTrackAPI()&&e.length===1){c=b("FBRTCPeerConnectionHelper").resetLocalStreamWithTrackAPI(this.$3,e[0],a);this.$8=this.$8||c;c&&r("P2P:PC local %o stream %o %o %o",this.$61(e[0]),"is assigned",e[0],", tracks: ",e[0].getTracks())}else{d=b("FBRTCPeerConnectionHelper").resetLocalStreams(this.$3,e);this.$8=this.$8||d;d&&e.forEach(function(a){return r("P2P:PC local %o stream %o %o %o",this.$61(a),"is assigned",a,", tracks: ",a.getTracks())}.bind(this))}};o.prototype.updateAddedTracksForFirefoxVideoEscalation=function(a){b("FBRTCPeerConnection").isFirefoxSupportAddTrack()||b("FBLogger")("rtc_www").mustfix("This function must be called within Firefox context"),this.$8=!0,this.$3.addStream(a),o.replaceLocalStream(a)};o.prototype.$62=function(a){this.$36(h.WEBRTC_ERROR,!1,!0,!1,a.message),s(a)};o.prototype.$66=function(a){this.$7=!0,this.$8=!1,this.$10="passive",this.internalResetConnection(),r("P2P:PC recovering from %o",a),this.$32(b("CollabCallMessengerBrowserEventEnum").CONNECTION_RECOVERY,a),this.$67().then(function(a){b("RTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").RECONNECTING),this.$68(a),this.$10="active"}.bind(this))["catch"](function(b){this.$62(new Error("Failed recovering from "+a))}.bind(this))};o.prototype.$67=function(){var a=!b("RTCP2PCallStore").isAudioOnly()||b("RTCP2PCallEscalator").initVideoInAudioCall(),c={DISABLE_OPUS_STEREO:b("RTWebClientFeatureGating").disableOpusStereo(),SSRC_CONTENT_TYPE:b("RTWebClientFeatureGating").addScreenContentTypeInSDP()?b("RTCCallStore").getState().localUser.getMediaTypeForTracks():undefined};return this.$3.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:a},c)};o.prototype.$63=function(a){var b=a.sdpMid;if(b!=null){b=this.$3.transformLocalIceCandidateMid(b);a.sdpMid=b}this.$11.sendIceCandidate(this.$1,this.$2,a)};o.prototype.$53=function(a){a=a.target;r("P2P:PC connectionstatechange %o",a.connectionState)};o.prototype.$54=function(a){a=a.target;r("P2P:PC signalingstatechange %o",a.signalingState)};o.prototype.internalResetConnection=function(){__p&&__p();this.$8=!1;var a=this.$1,c=b("RTCCallStore").getState().remoteUsers.first(),d=c.streams,e=c.screenStreams;this.$28=!0;this.$29.clear("add");this.$29.push("remove",function(){__p&&__p();for(var c=d,f=Array.isArray(c),g=0,c=f?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=c.length)break;h=c[g++]}else{g=c.next();if(g.done)break;h=g.value}h=h;b("RTCCallActions").removeRemoteStream(h,a)}for(var h=e,g=Array.isArray(h),f=0,h=g?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(f>=h.length)break;c=h[f++]}else{f=h.next();if(f.done)break;c=f.value}c=c;b("RTCCallActions").removeRemoteScreenStream(c,a)}});this.$3.reset().then(function(){this.$28=!1,this.$29.drain()}.bind(this))["catch"](function(a){this.$62(new Error("Failed to reset peer connection: "+a.message))}.bind(this));b("FBRTCConfig").isVCEndpointCall()&&this.$3.createDataChannel("noop")};o.prototype.$61=function(a){var c=b("FBRTCConstants").StreamType;try{switch(this.$4.streams[a.id].type){case c.SCREEN_CONTENT:return c.SCREEN_CONTENT;case c.AUDIO_VIDEO:return c.AUDIO_VIDEO;case c.AUDIO_ONLY:return c.AUDIO_ONLY;default:throw Error("no known stream type found, detecting")}}catch(b){return a.getVideoTracks().length>0?c.AUDIO_VIDEO:c.AUDIO_ONLY}};o.prototype.$64=function(){this.$25.isStarted()?this.$25.update():this.$25.start();var a=b("RTCP2PCallStore").getState();a=a.callType;a!==b("RTCCallType").AUDIO_ONLY&&(this.$26.isStarted()?this.$26.update():this.$26.start());this.$27.isStarted()?this.$27.update():this.$27.start()};o.prototype.$65=function(){var a=b("RTCP2PCallStore").getState().connectionStatus;if(a===b("RTCP2PConnectionStatus").ESCALATING_TO_BJN)return;b("RTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").CONNECTED);t(function(a){a.onCallConnected(),a.onNetworkReady()})};o.prototype.$59=function(a){a=a.channel;r("P2P:PC datachannel %o",a)};o.prototype.startLocalVideoTracker=function(a){this.$25.track(a)};o.prototype.updateLocalVideoTracker=function(){this.$25.update()};o.initStream=function(a,c,d){b("RTWebUserActionLogger").startTimer("RTCP2PProtocolHandler_initStream");return o.internalInitStream(a,c,d).then(function(a){b("RTWebUserActionLogger").logStopTimer({timerName:"RTCP2PProtocolHandler_initStream",checkpointName:"RTCP2PProtocolHandler_initStream_success"});return a})["catch"](function(a){b("RTWebUserActionLogger").logStopTimer({timerName:"RTCP2PProtocolHandler_initStream",checkpointName:"RTCP2PProtocolHandler_initStream_failed",event:{errorDomain:"get user media failed",errorType:a.message}});throw a})};o.internalInitStream=function(a,c,d){__p&&__p();var e=b("RTCP2PCallStore").getState();e=e.isPeerOnMobile;var f=o.getDefaultVideoQuality();e&&(f=k.LQ_VIDEO);e=!a&&b("RTCP2PCallEscalator").initVideoInAudioCall();f=b("RTCUserMediaConstraints").video(f,d||"");var g=a||e?babelHelpers["extends"]({aspectRatio:{ideal:Number((16/9).toFixed(10))}},q(f)):!1;return b("RTCUtils").getUserMediaWithAudioFallback({audio:b("RTCUserMediaConstraints").audio(c||""),video:g},{optionalConstraintsOnly:!1,supportFilteredStreams:a&&b("RTWebClientFeatureGating").canUseP2PVideoFilters()}).then(function(c){__p&&__p();c.getVideoTracks().forEach(function(b){b.enabled=a});if(a)try{var d=c.getVideoTracks();d=d[0];d||p(function(a){return a.log(b("CollabCallMessengerBrowserEventEnum").AUDIO_FALLBACK,{eventDetails:{videoConstraints:g}})})}catch(a){p(function(c){return c.log(b("CollabCallMessengerBrowserEventEnum").INIT_STREAM_ERROR,{eventDetails:{error:a.name,message:a.message,videoConstraints:g}})})}return c})};o.replaceLocalStream=function(a,c){c===void 0&&(c=!1);var d=b("RTCCallStore").getState().localUser.streams.first();b("RTCCallActions").replaceLocalStream(d,a);c&&b("RTCUtils").stopMediaStream(d)};o.prototype.escalateToMultiway=function(){var a=b("RTCP2PCallStore").getState(),c=a.callType,d=a.offerEscalationSupport;a=a.escalationConferenceName;if(d&&a){t(function(a){return a.setEscalationInitiated()});d=c!==b("RTCCallType").AUDIO_ONLY&&(b("RTCCallStore").hasRemoteVideo()||b("RTCCallStore").hasLocalVideo());c=new(b("RTCGroupCallEscalator"))(a,d,this.$1,this.$2);c.startEscalationToMultiway()}};o.prototype.handleSwitchToMultiway=function(){__p&&__p();var a=b("RTCP2PCallStore").getState(),c=a.callType,d=a.offerEscalationSupport;a=a.escalationConferenceName;this.$7=!1;if(d&&a){t(function(a){return a.setReceivedEscalationRequest()});d=c!==b("RTCCallType").AUDIO_ONLY&&(b("RTCCallStore").hasRemoteVideo()||b("RTCCallStore").hasLocalVideo());c=new(b("RTCGroupCallEscalator"))(a,d,this.$1,this.$2);c.startEscalationToMultiway()}};o.prototype.$72=function(a,c){var d=b("gkx")("678353"),e=a&&d&&b("FBRTCSupport").isGroupCallWebtrcSupported();this.$14=e;this.$15=c;b("RTCP2PCallActions").setMultiwayEscalationSupport(e,c);t(function(a){a.setConferenceName(c),e&&a.setEscalationAvailable()})};o.prototype.$46=function(){__p&&__p();b("FBRTCUrlManager").onCallStarted();r("P2P start call offer %o",this.$20);if(this.$20){this.$7=!0;this.$8=!1;var a=this.$20.msg,c=a.sdp,d=a.attributes,e=a.offer_escalation_support;a=a.escalation_conference_name;b("RTCP2PCallActions").setRemoteSignalingExperiments(this.$20.getSignalingExperiments());this.$72(!!e,a);this.$73(c,"offer",d);this.$6.removeOffer(this.$1);this.$32(b("CollabCallMessengerBrowserEventEnum").LOCAL_MESSAGE_QUEUE,{action:"removeOffer",offer:this.$20,callID:this.$2});this.$20=null}this.$32(b("CollabCallMessengerBrowserEventEnum").CALL_START_TRY,{initialOffer:this.$20})};o.prototype.$68=function(a){__p&&__p();r("P2P SDP %o created %o",a.type,a);this.$7=!0;return this.$3.setLocalDescription(a).then(function(a){return a.toDesc()}).then(function(a){var b=a.sdp;a=a.type;a==="offer"&&(b=this.$3.transformOfferSdp(b));return{type:a,sdp:b}}.bind(this)).then(function(a){__p&&__p();var c=a.sdp;a=a.type;r("P2P SDP %o set %o",a,{sdp:c});switch(a){case"offer":b("RTCP2PCallStore").getState().signalingExperiments.support("sdp_update")&&b("RTCCallStore").getState().callInfo.conferenceState===b("RTCConferenceState").CONNECTED?this.$74(c):this.$75(c);this.$17=!1;break;case"answer":this.$76(c);break;default:break}}.bind(this))["catch"](function(a){this.$62(new Error("Failed to set local description: unexpected SDP type"))}.bind(this))};o.prototype.$77=function(){return{streams:this.$78()}};o.prototype.$78=function(){__p&&__p();var a={},c=b("RTCCallStore").getState();c=c.localUser.screenStreams;for(var d=this.$3.getLocalStreams(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;var h=c.includes(g)?b("FBRTCConstants").StreamType.SCREEN_CONTENT:g.getVideoTracks().length?b("FBRTCConstants").StreamType.AUDIO_VIDEO:b("FBRTCConstants").StreamType.AUDIO_ONLY;a[g.id]={type:h}}return a};o.prototype.$74=function(a){var c=b("RTCCallStore").getState();c=c.localUser;this.$11.sendSdpUpdate(this.$1,this.$2,a,!b("RTCP2PCallStore").isAudioOnly()&&!c.isVideoMuted(),this.$77())};o.prototype.$75=function(a){__p&&__p();var c=this.$9?b("FBRTCConstants").PayloadType.PCRESTART_OFFER:b("FBRTCConstants").PayloadType.OFFER;r("P2P offer type %o",c);var d=b("RTCCallStore").getState();d=d.callSummary;d=d?d.getCallTrigger():"";this.$12=new(b("FBRTCRetriableMessage"))(this.$11);this.$12.addListener("sendingRetry",this.$69);this.$12.addListener("timeoutFailure",this.$70);this.$12.sendMessage(c,this.$1,this.$2,{sdp:a,hasVideo:!b("RTCP2PCallStore").isAudioOnly(),attributes:this.$77(),callTrigger:d});this.$21=b("setTimeout")(function(){this.$36(h.NO_ANSWER_TIMEOUT,!1,!0,!1,"NoAnswerTimeout")}.bind(this),l)};o.prototype.$79=function(a){__p&&__p();if(!Object.prototype.hasOwnProperty.call(a,"videoon"))return;a=!a.videoon;b("RTCCallActions").toggleMuteRemoteVideo(a,this.$1);for(var a=this.$3.getRemoteStreams(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(e.getAudioTracks().length>0){this.$32(b("CollabCallMessengerBrowserEventEnum").REMOTE_STREAM_MUTE_TOGGLED,e);return}}this.$26.update()};o.prototype.$76=function(a){this.$13=new(b("FBRTCRetriableMessage"))(this.$11);this.$13.addListener("sendingRetry",this.$69);var c={escalationConferenceName:this.$15,negotiatedEscalationSupport:this.$14};this.$13.sendMessage(b("FBRTCConstants").PayloadType.ANSWER,this.$1,this.$2,{sdp:a,hasVideo:!b("RTCP2PCallStore").isAudioOnly(),attributes:this.$77(),multiwayInfo:c})};o.prototype.processQueuedMessages=function(){new(b("FBRTCLocalMessageQueue"))().drainQueue(this.$1,function(a){this.$44(a,{skipDupeCheck:!0})}.bind(this))};o.prototype.$44=function(a,c){__p&&__p();var d;try{d=new(b("FBRTCMessage"))(a)}catch(b){this.$5.logError(this.$1,this.$2,"Unknown data: "+JSON.stringify(a));return}this.$5.logReceivedMessage(d.peerID,d.callID,d.msg);this.$32(b("CollabCallMessengerBrowserEventEnum").MESSAGE_RECEIVED,d.msg);if(this.$80()){this.$33("Ignoring message (call ended): "+d.msgID);return}if(!(c==null?void 0:c.skipDupeCheck)&&!b("FBRTCMessageDedup").check(d.peerID,d.callID,d.msgID)){this.$33("Ignoring message (duplicate): "+d.msgID);return}if(b("RTCCallStore").getState().callInfo.conferenceState===b("RTCConferenceState").AWAITING_USER_START){this.$33("Ignoring message (awaiting user start): "+d.msgID);return}if(this.$1&&this.$1!==d.peerID){d.isOffer()&&this.$81(d);this.$33("Ignoring message (different peer): "+d.msgID);return}if(!d.isForCall(this.$2,this.$15)){this.$33("Ignoring message (different call): "+d.msgID+"(callID: "+d.callID+")");return}r("P2P msg.get type:%o callID:%o %o",d.msgType,d.callID,d);this.$2&&this.$2===d.callID&&t(function(a){return a.onFullMessageReceived(d)});b("RTCP2PCallActions").setRemoteSignalingExperiments(d.getSignalingExperiments());a=b("RTCGroupCallEscalationStore").getState().inProgress;switch(d.msgType){case b("FBRTCConstants").PayloadType.ICERESTART_OFFER:case b("FBRTCConstants").PayloadType.PCRESTART_OFFER:this.internalResetConnection();this.$82(d);break;case b("FBRTCConstants").PayloadType.OFFER:this.$82(d);break;case b("FBRTCConstants").PayloadType.ANSWER:case b("FBRTCConstants").PayloadType.ICERESTART_ANSWER:case b("FBRTCConstants").PayloadType.PCRESTART_ANSWER:this.$83(d);break;case b("FBRTCConstants").PayloadType.SDP_UPDATE:this.$84(d);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$85(d);break;case b("FBRTCConstants").PayloadType.HANGUP:this.$86(d);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$87(d);break;case b("FBRTCConstants").PayloadType.OFFER_NACK:this.$24=!0;break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$88();break;case b("FBRTCConstants").PayloadType.MSG_ACK:this.$89(d);break;case b("FBRTCConstants").PayloadType.SET_VIDEO:this.$90(d);break;case b("FBRTCConstants").PayloadType.SWITCH_TO_MULTIWAY:!a?this.handleSwitchToMultiway():r("P2P Received %o while escalation is in progress %o",d.msgType,d);break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:case b("FBRTCConstants").PayloadType.ACK:case b("FBRTCConstants").PayloadType.OK:case b("FBRTCConstants").PayloadType.PING:case b("FBRTCConstants").PayloadType.PING_ACK:case b("FBRTCConstants").PayloadType.OTHER_DISMISS:case b("FBRTCConstants").PayloadType.PRANSWER:break;default:break}this.$30.parseMessage(d)};o.prototype.$45=function(a){__p&&__p();r("OneVC message received %s",a.msg_type);switch(a.msg_type){case"bjn_escalating":var c=b("RTCP2PCallStore").getState().connectionStatus;b("RTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").ESCALATING_TO_BJN);b("setTimeout")(function(){b("RTCP2PCallActions").setConnectionStatus(c)},m);break;case"participants":b("RTCOneVCActions").storeParticipants(JSON.parse(a.payload).list);break;default:break}};o.prototype.$81=function(a){__p&&__p();var c=a.peerID,d=a.callID;b("RTWebUserActionLogger").logCheckpoint({checkpoint:"collision_offer_from_another_peer"});var e=a.msg,f=new(b("FBRTCCallSummary"))({peerID:c,callID:d,isCaller:!1});f.setActiveConnection("p2p");f.onFullMessageReceived(a);f.setCallType(b("FBRTCSdpUtils").isVideoSupported(e.sdp)?i.DIRECT_VIDEO:i.VOIP);this.$11.sendOfferAck(c,d,e);f.onOfferAckSent(e);a=new(b("RTCEndCallReason"))(h.IN_ANOTHER_CALL);this.$91(c,d,a,!1);f.onCallEnded(a.getReasonID(),!1);f.save(b("FBRTCCallSummaryStore").getInstance())};o.prototype.$92=function(){return b("RTCSignalingExperiments").shouldSupportCallCollision()};o.prototype.$82=function(a){__p&&__p();r("P2P handle %o","offer");var c=a.msg;if(!this.$92()){r("Call collision fix NOT enabled");this.$2&&c.call_id!==this.$2&&b("RTWebUserActionLogger").logCheckpoint({checkpoint:"call_collision"});var d=this.$3.getSignalingState();if(d!=="stable"){r("P2P ignore %o; wrong signaling state: %o","offer",d);return}}if(c.calltype){this.$11.sendOfferNack(this.$1,c.call_id,c);return}this.$11.sendOfferAck(this.$1,c.call_id,c);this.$11.sendOtherDismiss(c.call_id);this.$93(c)?this.$94(a):this.$95(a)};o.prototype.handleCallCollision=function(a){a=a.msg;this.$92()&&(this.internalResetConnection(),b("RTCCallActions").callCollision(a.call_id.toString(),this.$1),this.$40("collision",!0),b("RTWebUserActionLogger").logCheckpoint({checkpoint:"handling_call_collision"}))};o.prototype.$94=function(a){__p&&__p();var c=a.msg;this.$79(c);this.$96();this.$97();this.$98();if(this.$2!==c.call_id){var d=new(b("RTCEndCallReason"))(h.OTHER_INSTANCE_HANDLED);this.$91(this.$1,this.$2,d,!1);t(function(a){a.onCallEnded(d.getReasonID(),!1)});var e=new(b("FBRTCCallSummary"))({peerID:this.$1,callID:c.call_id,isCaller:!1});b("RTCCallActions").setCallSummary(e);t(function(d){b("RTCSignalingExperiments").fixActiveConnLogging()&&d.setActiveConnection("p2p"),d.onFullMessageReceived(a),d.onOfferAckSent(c),d.setCallType(b("FBRTCSdpUtils").isVideoSupported(c.sdp)?i.DIRECT_VIDEO:i.VOIP)});this.$5.logEvent(this.$1,this.$2,"Handling offer collision");this.handleCallCollision(a)}else this.$5.logEvent(this.$1,this.$2,"Handling offer refresh");this.$17=!1;this.$20=a;b("RTCP2PCallActions").processMessage(a);this.$46();this.$32(b("CollabCallMessengerBrowserEventEnum").OFFER_ACCEPTED,a.msgID)};o.prototype.$95=function(a){r("P2P:PC ignoring offer %o",a),this.$5.logEvent(this.$1,this.$2,"Ignoring offer"),this.$32(b("CollabCallMessengerBrowserEventEnum").OFFER_IGNORED,a.msgID)};o.prototype.$84=function(a){__p&&__p();var c=a.msg;b("RTCP2PCallActions").processMessage(a);this.$79(c);switch(this.$3.getSignalingState()){case"stable":this.$73(this.$99("offer",a),"offer",c.attributes);break;case"have-local-offer":this.$73(this.$99("answer",a),"answer",c.attributes).then(function(){return this.$100()}.bind(this))["catch"](function(a){this.$62(new Error("Failed to handle sdp update when signaling state is 'have-local-offer': "+a.message))}.bind(this));break;case"have-remote-offer":b("setTimeout")(function(){return this.$84(a)}.bind(this),1e3);break;case"have-local-pranswer":case"have-remote-pranswer":r("P2P SDP update unexpected signalingState %o",this.$3.getSignalingState());break;case"closed":break}this.$32(b("CollabCallMessengerBrowserEventEnum").SDP_UPDATE,[c.sdp,c.attributes])};o.prototype.$99=function(a,c){c=c.msg;var d=b("RTCP2PCallStore").getState();d=d.isPeerOnMobile;var e=b("RTCP2PCallStore").isCaller();return a==="offer"?!d&&e&&b("UserAgent").isBrowser("Firefox")?b("FBRTCSdpUtils").setDtlsRole(c.sdp,this.$10):c.sdp:b("FBRTCSdpUtils").setDtlsRole(c.sdp,d&&!e?"passive":this.$10)};o.prototype.$100=function(){this.$7=!1};o.prototype.$73=function(a,c,d){__p&&__p();r("P2P SDP %o update %o %o",c,{sdp:a},d);this.$101(d);d=b("RTCP2PCallStore").getState();d=d.isPeerOnMobile;d&&(a=b("FBRTCSdpUtils").setVideoBitrateConstraint(a));c==="answer"&&(a=this.$3.transformAnswerSdp(a));return this.$3.setRemoteDescription(new(b("RTCSessionDescription"))(j.P2P,{type:c,sdp:a})).then(function(){r("P2P drain remote ICE"),this.$17=!0,this.$16.drainCandidates(this.$1,this.$2,function(a){return this.$3.onReceivedRemoteIceCandidate(a)}.bind(this))}.bind(this)).then(function(){this.$65();return c!=="offer"?undefined:this.$3.createAnswer({DISABLE_OPUS_STEREO:b("RTWebClientFeatureGating").disableOpusStereo()}).then(function(a){this.$68(a),this.$32(b("CollabCallMessengerBrowserEventEnum").SDP_UPDATE,{answer:a.toSdp()})}.bind(this))}.bind(this)).then(function(){this.$37()===b("RTCCallType").AUDIO_ONLY&&this.$11.sendMuteStateUpdate(this.$1,this.$2,!1)}.bind(this))["catch"](function(a){this.$62(a);throw a}.bind(this))};o.prototype.$101=function(a){__p&&__p();if(a){var c=a.streams;this.$4=babelHelpers["extends"]({},this.$4,a,{streams:babelHelpers["extends"]({},this.$4.streams,c)});Object.keys(c).some(function(a){if(c[a].type===b("FBRTCConstants").StreamType.SCREEN_CONTENT){b("RTCCallActions").removeAllLocalScreenStreams(!0);return!0}return!1})}};o.prototype.$93=function(a){return a.call_id===this.$2?!0:Boolean((this.$21||!this.$20)&&(!this.$2||a.call_id!==this.$2)&&b("RTCP2PCallStore").isCaller()&&(!a.handlescollision||a.call_id<this.$2))};o.prototype.$83=function(a){__p&&__p();r("P2P handle %o","answer");var c=this.$3.getSignalingState();if(c!=="have-local-offer"){r("P2P ignore %o; wrong signaling state: %o","answer",c);return}c=a.msg;this.$72(!!c.negotiated_escalation_support,c.escalation_conference_name);this.$96();this.$97();this.$11.sendAnswerAck(this.$1,this.$2,c);b("RTCP2PCallActions").processMessage(a);b("RTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").CONNECTING);this.$73(c.sdp,"answer",c.attributes).then(function(){this.$100(),b("RTCCallActions").callSuccess(!0)}.bind(this))["catch"](function(a){this.$62(new Error("Failed to handle answer on receiving remote SDP"))}.bind(this));this.$79(c)};o.prototype.$89=function(a){var b=a.msg;this.$12&&this.$12.isAckMsg(b)?(t(function(b){b.onMsgAckReceived(a,!0)}),this.$87(a)):this.$13&&this.$13.isAckMsg(b)&&(t(function(b){b.onMsgAckReceived(a,!1)}),this.$88())};o.prototype.$87=function(a){b("RTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").RINGING),t(function(c){c.setUploadLogLevel(b("FBRTCLocalUploadLogLevel").getUploadLogLevel(b("FBRTCConstants").convertToUploadLogLevel(a.msg.ull)))}),this.$96()};o.prototype.$88=function(){this.$98(),this.$100(),b("RTCCallActions").incomingCallSuccess()};o.prototype.$90=function(a){this.$19?this.$71(a):(this.$33("P2P message "+a.msgType+" queued for delay handling"),this.$18.push(a))};o.prototype.$71=function(a){b("RTCP2PCallStore").getState().isRemoteVideoSupported&&!b("RTCP2PCallStore").isAudioOnly()&&this.$79(a.msg)};o.prototype.$85=function(a){var b=a.msg;b.call_id===this.$2&&this.$17?this.$3.onReceivedRemoteIceCandidate(b)["catch"](function(a){this.$102(b)}.bind(this)):this.$102(b)};o.prototype.$102=function(a){this.$16.cacheCandidate(this.$1,a.call_id,a)};o.prototype.$86=function(a){a=a.msg;var c=a.call_id,d=a.reason;a=a.subreason;c===this.$2?this.$36(d,!0,!1,!1,a):(this.$5.logError(this.$1,this.$2,"Receiving hangup for a different call: "+c.toString()),this.$32(b("CollabCallMessengerBrowserEventEnum").HANGUP_CALL_ID_MISSMATCH,c.toString()))};o.prototype.$36=function(a,c,d,e,f){__p&&__p();var g=new(b("RTCEndCallReason"))(a).setSubreason(f).setRemoteEnded(c);b("RTCCallActions").setEndCallReason(g);b("RTCCallNUXActions").refreshNUXState();a=b("RTCP2PCallEscalationStore").getState().inProgress;a&&b("RTCP2PCallEscalationActions").cancel();this.$96();this.$97();this.$98();if(this.$80()){this.$5.logError(this.$1,this.$2,"Ending an already-ended call");return}this.$5.logCallAction(this.$1,this.$2,b("FBRTCLogger").CallAction.END_CALL,g.toStrName());this.$32(b("CollabCallMessengerBrowserEventEnum").CALL_ENDED,{reason:g.toStrName(),reasonID:g.getReasonID(),subReason:g.getSubreason(),isRemoteEnded:c,userCallType:this.$37(),isCaller:b("RTCP2PCallStore").isCaller()});d&&this.$91(this.$1,this.$2,g,e);this.$25.stop();this.$26.stop();this.$27.stop();this.$3&&this.$3.close();b("RTCCallActions").hangupSuccess();this.$31||b("RTCCallActions").removeAllLocalStreams(!0);b("RTCCallActions").removeAllLocalScreenStreams(!0);b("RTCCallActions").removeAllRemoteStreams(this.$1);b("RTCP2PCallActions").setConnectionStatus(b("RTCP2PConnectionStatus").DISCONNECTED);t(function(a){a.setCallType(b("RTCP2PCallEscalationStore").getState().callType),a.setVideoDurations(this.$25.getDuration(),this.$26.getDuration()),a.setScreenDuration(this.$27.getDuration()),a.onCallEnded(g.getReasonID(),c,null,g.getSubreason())}.bind(this));g.getReasonID()===h.HANGUP_CALL&&g.getSubreason()==="CallReset"&&c&&b("RTCP2PCallWindowHandler").close()};o.prototype.$37=function(){var a=b("RTCCallStore").getState();a=a.localUser;return a.isVideoMuted()&&a.isAudioMuted()?b("RTCCallType").NO_AUDIO_VIDEO:a.isVideoMuted()&&!a.isAudioMuted()?b("RTCCallType").AUDIO_ONLY:b("RTCCallType").AUDIO_VIDEO};o.prototype.shutDownP2PListenersForMultiwayEscalation=function(){this.$96(),this.$97(),this.$98(),this.$25.stop(),this.$26.stop(),this.$3&&this.$3.removeAllListeners(),b("setTimeout")(function(){b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(a){a.setCallType(b("RTCP2PCallEscalationStore").getState().callType),a.setVideoDurations(this.$25.getDuration(),this.$26.getDuration()),a.setScreenDuration(this.$27.getDuration()),a.onCallEnded(h.HANGUP_CALL,!1,!1,"multiway escalation")}.bind(this)),b("RTCCallActions").completeTransitionToMultiway()}.bind(this),100),this.destroy()};o.prototype.$91=function(a,b,c,d){if(!this.$11)return;this.$11.sendHangup(a,b,c.getReasonID(),d,c.getSubreason());this.$11.sendOtherDismiss(b)};o.prototype.$96=function(){this.$12&&this.$12.stopRetrying()};o.prototype.$98=function(){this.$13&&this.$13.stopRetrying()};o.prototype.$97=function(){this.$21&&b("clearTimeout")(this.$21),this.$21=null};o.prototype.$80=function(){return b("RTCCallStore").getState().callInfo.conferenceState===b("RTCConferenceState").TERMINATED};o.prototype.$60=function(a){__p&&__p();p(function(c){__p&&__p();c=c.logConnectionStats(function(){var c=a.getSignalingState();return c!=="closed"?a.getStats():b("Promise").reject("peer connection closed")},this.$1,this.$2);var d=c.start,e=c.stop,f=function(c){c=c.target;c=c.iceConnectionState;(c==="completed"||c==="connected")&&(r("P2P collab stats %o","start"),this.$33("Call Connected"),this.$32(b("CollabCallMessengerBrowserEventEnum").CALL_CONNECTED),d(),a.removeEventListener("iceconnectionstatechange",f),a.addEventListener("iceconnectionstatechange",g))}.bind(this),g=function b(c){c=c.target;c=c.iceConnectionState;c==="closed"&&(r("P2P collab stats %o","stop"),e(),a.removeEventListener("iceconnectionstatechange",b))};a.addEventListener("iceconnectionstatechange",f)}.bind(this))};o.prototype.$32=function(event,a){p(function(b){return b.log(event,{peerID:this.$1,callID:this.$2,eventDetails:a})}.bind(this))};o.prototype.destroy=function(){r("P2P %o","destroy()"),this.$29.clear(),b("FBRTCMessageListener").removeMessageHandler(),b("FBRTCConfig").isVCEndpointCall()&&b("FBRTCMessageListener").removeOneVCMessageHandler(),(this.$11.onMessageSent=null,this.$11.onSendFailure=null)};o.prototype.generateEscalationRequestToken=function(a){return this.$30.generateRequestToken(a)};o.prototype.generateEscalationResponseToken=function(a,b){return this.$30.generateResponseToken(a,b)};o.getDefaultVideoQuality=function(){return b("FBRTCConfig").isVCEndpointCall()||b("FBRTCConfig").useHDVideoQuality()?k.HD_VIDEO:b("CurrentUser").isWorkUser()?k.SD_VIDEO:k.LQ_VIDEO};o.showRedialButton=function(){var a=b("RTCP2PCallStore").getState();a=a.endCallReason;var c=b("RTCCallStore").getState();c=c.callSummary;return a!=null&&(a.getReasonID()===h.IGNORE_CALL||a.getReasonID()===h.NO_ANSWER_TIMEOUT)||c.getCallDuration()<=n};o.showStarRating=function(){if(b("RTWebClientFeatureGating").shouldAlwaysShowStarRating())return b("RTCP2PCallStore").getState().wasConnected===!0;else return!o.showRedialButton()};o.prototype.$33=function(a){this.$5.logInfo(this.$1,this.$2,a)};function p(a){if(!b("FBRTCConfig").isVCEndpointCall())return;b("Bootloader").loadModules(["CollabMessengerLogger"],a,"RTCP2PProtocolHandler")}function q(a){a instanceof Object||g(0,444);return a}function r(){}function s(){}function t(a){var c=b("RTCCallStore").getState();c=c.callSummary;a(c);c.save(b("FBRTCCallSummaryStore").getInstance())}e.exports=o}),null);
__d("FBRTCMobileDominantSpeakerView.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("React").createElement("div",null,b("React").createElement("div",{className:"_71gx"},a.renderUser(a.dominantSpeaker)),b("React").createElement("div",{className:"_71gy"},a.renderUser(a.localUser)))}e.exports=a}),null);
__d("RTCAudio.react",["cx","FBRTCUtils","MediaStream","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PureComponent;h=babelHelpers.inherits(a,c);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("audio",{autoPlay:!0,className:b("joinClasses")(this.props.className,"_8md"),controls:!1,muted:this.props.muted,ref:function(a){return this.$1=a}.bind(this)})};a.prototype.componentDidMount=function(){this.$2(),this.$3()};a.prototype.$2=function(){__p&&__p();if(!this.$1)return;var a=this.props.mediaStream;if(a&&a.getVideoTracks().length>0){var c=new(b("MediaStream"))();for(var d=a.getAudioTracks(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;c.addTrack(g)}b("FBRTCUtils").attachMediaStream(this.$1,c)}else b("FBRTCUtils").attachMediaStream(this.$1,a)};a.prototype.$3=function(){if(!this.$1)return;var a=this.props.audioSinkID;a&&this.$1.setSinkId&&this.$1.setSinkId(a)};a.prototype.componentDidUpdate=function(a){var b=a.audioSinkID;a=a.mediaStream;a!==this.props.mediaStream&&this.$2();b!==this.props.audioSinkID&&this.$3()};function a(){h.apply(this,arguments)}a.defaultProps={muted:!1};e.exports=a}),null);
__d("RTCIncallAudio.react",["React","RTCAudio.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PureComponent;g=babelHelpers.inherits(a,c);g&&g.prototype;a.prototype.render=function(){var a=this.props,c=a.audioSinkID;a.className;var d=a.mediaStream;a=babelHelpers.objectWithoutProperties(a,["audioSinkID","className","mediaStream"]);return b("React").createElement("div",a,b("React").createElement(b("RTCAudio.react"),{audioSinkID:c,mediaStream:d}))};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("RTCMediaStreamReadyContainer.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.state={active:!1},this.$2=function(){__p&&__p();var a=this.props.mediaStream;if(!a)return;if("active"in a){var b=a.active;this.setState({active:b});b||(this.$1=window.setTimeout(this.$2,100))}else{b=a.getVideoTracks();if(b.some(function(a){return a.readyState==="live"}))this.setState({active:!0});else for(var a=b,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.addEventListener("started",this.$3)}}}.bind(this),this.$3=function(){__p&&__p();var a=this.props.mediaStream;if(!a)return;this.setState({active:!0});for(var a=a.getVideoTracks(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.removeEventListener("started",this.$3)}}.bind(this),b}a.prototype.render=function(){return this.props.children(this.state.active)};a.prototype.componentDidMount=function(){this.$2()};a.prototype.componentDidUpdate=function(a,b){this.props.mediaStream!==a.mediaStream&&(this.setState({active:!1}),window.clearTimeout(this.$1),this.$2())};a.prototype.componentWillUnmount=function(){this.setState({active:!1}),window.clearTimeout(this.$1)};e.exports=a}),null);
__d("RTCSVGIconDropShadowFilter.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PureComponent;var h=0;d=babelHelpers.inherits(a,c);g=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$1="filter:blur."+h+++"."+Date.now().toString(24),b}a.prototype.render=function(){var a=this.props,c=a.blur,d=a.x;a=a.y;var e=Math.ceil(c*3*Math.sqrt(2*Math.PI)/8);return b("React").createElement("filter",{id:this.getID(),height:this.props.height+e*2,width:this.props.width+e*2,x:d-e,y:a-e},b("React").createElement("feGaussianBlur",{"in":"SourceAlpha",result:"blur",stdDeviation:c}),b("React").createElement("feOffset",{dx:d,dy:a,"in":"blur",result:"offsetBlur"}),b("React").createElement("feFlood",{floodColor:this.props.color,floodOpacity:this.props.opacity}),b("React").createElement("feComposite",{in2:"offsetBlur",operator:"in",result:"shadow"}),b("React").createElement("feMorphology",{operator:"dilate",radius:"1","in":"SourceAlpha",result:"outline"}),b("React").createElement("feFlood",{floodColor:"#000",floodOpacity:.1}),b("React").createElement("feComposite",{in2:"outline",operator:"in",result:"stroke"}),b("React").createElement("feMerge",null,b("React").createElement("feMergeNode",{"in":"shadow"}),b("React").createElement("feMergeNode",{"in":"stroke"}),b("React").createElement("feMergeNode",{"in":"SourceGraphic"})))};a.prototype.getID=function(){return this.props.id||this.$1};a.prototype.getURL=function(){return"url(#"+this.getID()+")"};a.defaultProps={blur:2,color:"#000",opacity:.2,x:0,y:1};e.exports=a}),null);
__d("RTCUIMicrophoneIcon.react",["React","RTCSVGIcon.react","RTCSVGIconDropShadowFilter.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$1="",this.$2=function(a){a&&(this.$1=a.getURL(),this.forceUpdate())}.bind(this),b}a.prototype.render=function(){var a=this.props,c=a.shadow,d=a.strikeThrough;a=babelHelpers.objectWithoutProperties(a,["shadow","strikeThrough"]);return c?b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 48 48"},b("React").createElement("defs",null,b("React").createElement(b("RTCSVGIconDropShadowFilter.react"),{height:20,ref:this.$2,width:20})),b("React").createElement("g",{filter:this.$1},d?b("React").createElement(h,null):b("React").createElement(i,null)))):b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 48 48"},d?b("React").createElement(h,null):b("React").createElement(i,null)))};a.defaultProps={shadow:!1,strikeThrough:!1};var h=function(){return b("React").createElement("path",{d:"M25 31c.7-.1 1.3-.3 1.9-.6l-.5-.9c-.6.3-1.2.5-1.9.5-2.5 0-4.5-2.2-4.5-5v-5h-1v5.2c0 3.1 2.2 5.6 5 5.8v3h-3v1h7v-1h-3v-3zm-.5-2c.5 0 1-.1 1.4-.3L21 20.6v4.9c0 1.9 1.6 3.5 3.5 3.5zm-5.8-16l-.9.5L30.3 34l.9-.5L18.7 13zM30 25.2V20h-1v5c0 .8-.2 1.6-.5 2.2l.6 1c.6-.8.9-1.9.9-3zm-2 .3v-9c0-1.9-1.6-3.5-3.5-3.5-1.5 0-2.7.9-3.2 2.2L28 26.3v-.8z"})},i=function(){return b("React").createElement("path",{d:"M29 20v5c0 2.7-2 5-4.5 5S20 27.8 20 25v-5h-1v5.2c0 3.1 2.2 5.6 5 5.8v3h-3v1h7v-1h-3v-3c2.8-.3 5-2.8 5-5.8V20h-1zm-4.5 9c1.9 0 3.5-1.6 3.5-3.5v-9c0-1.9-1.6-3.5-3.5-3.5S21 14.6 21 16.5v9c0 1.9 1.6 3.5 3.5 3.5z"})};e.exports=a}),null);
__d("FBRTCMobileBrowserInCallView.react",["cx","fbt","CurrentUser","FBRTCConstants","FBRTCGroupCallFluidGridView.react","FBRTCGroupCallStore","FBRTCMobileDominantSpeakerView.react","FBRTCVideo.react","FluxContainer","Image.react","React","RTCCallActions","RTCCallStore","RTCConferenceState","RTCIncallAudio.react","RTCMediaStreamReadyContainer.react","RTCMWProtocolHandler","RTCUIMicrophoneIcon.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("FBRTCConstants").GroupVideoViewLayout,k=b("FBRTCConstants").SignalingProtocol;a=b("React").PureComponent;function l(a){return h._("Your camera is off")}function m(a){return h._("{name}'s camera is off",[h._param("name",a)])}function n(a){return a.FBID===b("CurrentUser").getID()}function o(a){return a===b("RTCConferenceState").NEW||a===b("RTCConferenceState").CONNECTING}function p(a){var c=a.user,d=a.conferenceState;a=a.rtcUsers;d=o(d)||a.size===1;return b("React").createElement("div",{className:"_6nps"+(n(c)&&!d&&c.isAudioMuted()?" _6np1":"")},b("React").createElement(b("RTCUIMicrophoneIcon.react"),{shadow:!0,strikeThrough:!0}))}function q(a){var c=a.user,d=a.conferenceState,e=a.rtcUsers,f=c.streams.first(),g=o(d)&&e.size===1;return b("React").createElement("div",{className:"_6np2"},b("React").createElement("div",{className:"_6ov3"+(g?"":" hide")},h._("Waiting for others to join...")),b("React").createElement(b("RTCMediaStreamReadyContainer.react"),{mediaStream:f},function(a){return b("React").createElement("div",{className:"_6np3"+(a?" active":"")+" _6np6"+(g?" _6np7":"")},b("React").createElement(b("FBRTCVideo.react"),{mediaStream:f,muted:n(c)}))}),b("React").createElement(p,a))}function r(a){var c=a.user,d=c.streams.first();return b("React").createElement("div",{className:"_6np2"},b("React").createElement(b("Image.react"),{className:"_6np8",src:c.profilePictureUrl}),b("React").createElement(b("Image.react"),{alt:h._("Profile Picture"),className:"_6np9",src:c.profilePictureUrl}),b("React").createElement("p",{className:"_6npa"},n(c)?l(c.userShortName):m(c.userShortName)),n(c)?null:b("React").createElement(b("RTCIncallAudio.react"),{mediaStream:d}),b("React").createElement(p,a))}function s(a,c){var d=t(a);return b("React").createElement("div",{className:"_6npb"},d?b("React").createElement(q,babelHelpers["extends"]({user:a},c)):b("React").createElement(r,babelHelpers["extends"]({user:a},c)))}function t(a){var b=a.streams.first();return b&&!a.areAllTracksMuted(b.getVideoTracks())}c=babelHelpers.inherits(u,a);i=c&&c.prototype;u.getStores=function(){return[b("FBRTCGroupCallStore")]};u.calculateState=function(){var a=b("FBRTCGroupCallStore").getState(),c=a.dominantSpeakerFBID;a=a.pinnedSpeakerFBID;return{dominantSpeakerFBID:c,pinnedSpeakerFBID:a}};function u(a,c){i.constructor.call(this,a),this.state=babelHelpers["extends"]({},u.calculateState()),this.isVideoMutedByLocalUser=!1,this.$2=function(){switch(document.visibilityState){case"hidden":this.isVideoMutedByLocalUser=this.props.localUser.isVideoMuted();b("RTCCallActions").toggleMuteVideo(!1);break;case"visible":this.isVideoMutedByLocalUser||b("RTCCallActions").toggleMuteVideo(!0)}}.bind(this),this.$3=function(a){a&&(this.incallView=a)}.bind(this),document.body&&(document.body.style.overflow="hidden")}u.prototype.componentDidMount=function(){this.incallView&&this.incallView.addEventListener("touchstart",this.$1),document.addEventListener("visibilitychange",this.$2)};u.prototype.componentDidUpdate=function(){var a=b("RTCCallStore").getState();a=a.callInfo;var c=b("RTCCallStore").getConnection(k.MULTIWAY);c&&b("RTCMWProtocolHandler").subscription(a.conferenceName,a.serverInfoData,c.getRemoteStreams(),j.DOMINANT_SPEAKER,null)};u.prototype.componentWillUnmount=function(){this.incallView&&this.incallView.removeEventListener("touchstart",this.$1),document.removeEventListener("visibilitychange",this.$2)};u.prototype.$1=function(event){event.touches.length>1&&event.preventDefault()};u.prototype.render=function(){var a,c=(a=this.state.pinnedSpeakerFBID)!=null?a:this.state.dominantSpeakerFBID;a=this.props.rtcUsers.find(function(a){return a.FBID===c});if(this.props.layout===j.DOMINANT_SPEAKER&&a)return b("React").createElement(b("FBRTCMobileDominantSpeakerView.react"),{dominantSpeaker:a,localUser:this.props.localUser,renderUser:function(a){return s(a,this.props)}.bind(this)});else return b("React").createElement("div",{className:"_6npc",ref:this.$3},b("React").createElement(b("FBRTCGroupCallFluidGridView.react"),{hidden:!1,remoteUsers:this.props.rtcUsers,renderUser:function(a){return s(a,this.props)}.bind(this)}))};e.exports=b("FluxContainer").create(u)}),null);
__d("RTCCallNUXIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({RTC_VIDEO_CHAT_FILTERS_NUX:6265,RTC_P2P_ADD_GROUP_MEMBER_NUX:5609,RTC_P2P_REMOTE_STREAMS_SLIDER_NUX:4773,RTC_P2P_REMOTE_SCREEN_CONTENT_POP_OUT_NUX:4774,RTC_P2P_REMOTE_CAMERA_CONTROLS_NUX:4775,RTC_P2P_SETTINGS_NUX:4776})}),null);
__d("RTCCallNUXReducer",["FBRTCUtils","RTCCallNUXActionTypes","RTCCallNUXIDs","XBasicFBNuxDismissController","XBasicFBNuxViewController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();switch(c.type){case b("RTCCallNUXActionTypes").DISMISS_NUX:var d=b("XBasicFBNuxDismissController").getURIBuilder().setInt("nux_id",c.nuxID).getURI();b("FBRTCUtils").sendServerRequest(d);switch(c.nuxID){case b("RTCCallNUXIDs").RTC_VIDEO_CHAT_FILTERS_NUX:return a.set("showVideoChatFiltersNUX",!1);case b("RTCCallNUXIDs").RTC_P2P_ADD_GROUP_MEMBER_NUX:return a.set("showAddGroupMemberNUX",!1);case b("RTCCallNUXIDs").RTC_P2P_REMOTE_CAMERA_CONTROLS_NUX:return a.set("showRemoteCameraControlsNUX",!1);case b("RTCCallNUXIDs").RTC_P2P_REMOTE_SCREEN_CONTENT_POP_OUT_NUX:return a.set("showRemoteScreenContentPopOutNUX",!1);case b("RTCCallNUXIDs").RTC_P2P_REMOTE_STREAMS_SLIDER_NUX:return a.set("showRemoteStreamsSliderNUX",!1);case b("RTCCallNUXIDs").RTC_P2P_SETTINGS_NUX:return a.set("showSettingsNUX",!1);default:return a}default:return a}}function c(a,c){switch(c.type){case b("RTCCallNUXActionTypes").INIT_NUX_STATE:c=c.payload;return a.set("showVideoChatFiltersNUX",c.showVideoChatFiltersNUX).set("showAddGroupMemberNUX",c.showAddGroupMemberNUX).set("showRemoteCameraControlsNUX",c.showRemoteCameraControlsNUX).set("showRemoteScreenContentPopOutNUX",c.showRemoteScreenContentPopOutNUX).set("showRemoteStreamsSliderNUX",c.showRemoteStreamsSliderNUX).set("showSettingsNUX",c.showSettingsNUX);default:return a}}function d(a,c){switch(c.type){case b("RTCCallNUXActionTypes").MARK_NUX_VIEWED:c=b("XBasicFBNuxViewController").getURIBuilder().setInt("nux_id",c.nuxID).getURI();b("FBRTCUtils").sendServerRequest(c);return a;default:return a}}e.exports={dismissNUX:a,markNUXViewed:d,refreshNUXState:c}}),null);
__d("RTCCallNUXStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={showVideoChatFiltersNUX:!1,showAddGroupMemberNUX:!1,showRemoteCameraControlsNUX:!1,showRemoteScreenContentPopOutNUX:!1,showRemoteStreamsSliderNUX:!1,showSettingsNUX:!1};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("RTCCallNUXStore",["FluxReduceStore","RTCAppDispatcher","RTCCallNUXActions","RTCCallNUXReducer","RTCCallNUXStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("RTCCallNUXReducer").dismissNUX,b("RTCCallNUXReducer").markNUXViewed,b("RTCCallNUXReducer").refreshNUXState];c=babelHelpers.inherits(a,b("FluxReduceStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("RTCAppDispatcher")),b("RTCCallNUXActions").refreshNUXState()}a.prototype.getInitialState=function(){return new(b("RTCCallNUXStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.__moduleID=e.id;e.exports=new a()}),null);
__d("fbjs/lib/ExecutionEnvironment",["ExecutionEnvironment"],(function(a,b,c,d,e,f){"use strict";e.exports=b("ExecutionEnvironment")}),null);
__d("getVendorPrefixedEventName",["fbjs/lib/ExecutionEnvironment"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;c["ms"+a]="MS"+b;c["O"+a]="o"+b.toLowerCase();return c}var g={animationend:a("Animation","AnimationEnd"),animationiteration:a("Animation","AnimationIteration"),animationstart:a("Animation","AnimationStart"),transitionend:a("Transition","TransitionEnd")},h={},i={};b("fbjs/lib/ExecutionEnvironment").canUseDOM&&(i=document.createElement("div").style,"AnimationEvent"in window||(delete g.animationend.animation,delete g.animationiteration.animation,delete g.animationstart.animation),"TransitionEvent"in window||delete g.transitionend.transition);function c(a){if(h[a])return h[a];else if(!g[a])return a;var b=g[a];for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c)&&c in i)return h[a]=b[c];return""}e.exports=c}),null);
__d("ReactTransitionEvents",["fbjs/lib/ExecutionEnvironment","getVendorPrefixedEventName"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[];function a(){var a=b("getVendorPrefixedEventName")("animationend"),c=b("getVendorPrefixedEventName")("transitionend");a&&g.push(a);c&&g.push(c)}b("fbjs/lib/ExecutionEnvironment").canUseDOM&&a();function h(a,b,c){a.addEventListener(b,c,!1)}function i(a,b,c){a.removeEventListener(b,c,!1)}c={addEndEventListener:function(a,b){if(g.length===0){window.setTimeout(b,0);return}g.forEach(function(c){h(a,c,b)})},removeEndEventListener:function(a,b){if(g.length===0)return;g.forEach(function(c){i(a,c,b)})}};e.exports=c}),null);
__d("ReactCSSTransitionGroupChild",["React","ReactDOM","ReactTransitionEvents","fbjs/lib/CSSCore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=17;a=b("React").createClass({displayName:"ReactCSSTransitionGroupChild",propTypes:{name:b("React").PropTypes.oneOfType([b("React").PropTypes.string,b("React").PropTypes.shape({enter:b("React").PropTypes.string,leave:b("React").PropTypes.string,active:b("React").PropTypes.string}),b("React").PropTypes.shape({enter:b("React").PropTypes.string,enterActive:b("React").PropTypes.string,leave:b("React").PropTypes.string,leaveActive:b("React").PropTypes.string,appear:b("React").PropTypes.string,appearActive:b("React").PropTypes.string})]).isRequired,appear:b("React").PropTypes.bool,enter:b("React").PropTypes.bool,leave:b("React").PropTypes.bool,appearTimeout:b("React").PropTypes.number,enterTimeout:b("React").PropTypes.number,leaveTimeout:b("React").PropTypes.number},transition:function(a,c,d){__p&&__p();var e=b("ReactDOM").findDOMNode(this);if(!e){c&&c();return}var f=this.props.name[a]||this.props.name+"-"+a,g=this.props.name[a+"Active"]||f+"-active",h=null;a=function a(d){if(d&&d.target!==e)return;clearTimeout(h);b("fbjs/lib/CSSCore").removeClass(e,f);b("fbjs/lib/CSSCore").removeClass(e,g);b("ReactTransitionEvents").removeEndEventListener(e,a);c&&c()};b("fbjs/lib/CSSCore").addClass(e,f);this.queueClassAndNode(g,e);d?(h=setTimeout(a,d),this.transitionTimeouts.push(h)):b("ReactTransitionEvents").addEndEventListener(e,a)},queueClassAndNode:function(a,b){this.classNameAndNodeQueue.push({className:a,node:b}),this.timeout||(this.timeout=setTimeout(this.flushClassNameAndNodeQueue,g))},flushClassNameAndNodeQueue:function(){this.isMounted()&&this.classNameAndNodeQueue.forEach(function(a){b("fbjs/lib/CSSCore").addClass(a.node,a.className)}),this.classNameAndNodeQueue.length=0,this.timeout=null},UNSAFE_componentWillMount:function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(a){clearTimeout(a)}),this.classNameAndNodeQueue.length=0},componentWillAppear:function(a){this.props.appear?this.transition("appear",a,this.props.appearTimeout):a()},componentWillEnter:function(a){this.props.enter?this.transition("enter",a,this.props.enterTimeout):a()},componentWillLeave:function(a){this.props.leave?this.transition("leave",a,this.props.leaveTimeout):a()},render:function(){return b("React").Children.only(this.props.children)}});e.exports=a}),null);
__d("ReactTransitionChildMapping",["React","emptyFunction","warning"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("emptyFunction");c={getChildMapping:function(a){if(!a)return a;var c={};b("React").Children.toArray(a).forEach(function(a){var b=a.key,d=c[b]===undefined;d&&(c[b]=a)});return c},mergeChildMappings:function(a,b){__p&&__p();a=a||{};b=b||{};function c(c){if(Object.prototype.hasOwnProperty.call(b,c))return b[c];else return a[c]}var d={},e=[];for(var f in a)Object.prototype.hasOwnProperty.call(b,f)?e.length&&(d[f]=e,e=[]):e.push(f);var g,h={};for(var i in b){if(Object.prototype.hasOwnProperty.call(d,i))for(g=0;g<d[i].length;g++){var j=d[i][g];h[d[i][g]]=c(j)}h[i]=c(i)}for(g=0;g<e.length;g++)h[e[g]]=c(e[g]);return h}};e.exports=c}),null);
__d("ReactTransitionGroup",["React","ReactTransitionChildMapping","fbjs/lib/emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={children:b("ReactTransitionChildMapping").getChildMapping(this.props.children)},this.performAppear=function(a){this.currentlyTransitioningKeys[a]=!0;var b=this.refs[a];b.componentWillAppear?b.componentWillAppear(this.$1.bind(this,a)):this.$1(a)}.bind(this),this.$1=function(a){var c=this.refs[a];c.componentDidAppear&&c.componentDidAppear();delete this.currentlyTransitioningKeys[a];c=b("ReactTransitionChildMapping").getChildMapping(this.props.children);(!c||!Object.prototype.hasOwnProperty.call(c,a))&&this.performLeave(a)}.bind(this),this.performEnter=function(a){this.currentlyTransitioningKeys[a]=!0;var b=this.refs[a];b.componentWillEnter?b.componentWillEnter(this.$2.bind(this,a)):this.$2(a)}.bind(this),this.$2=function(a){var c=this.refs[a];c.componentDidEnter&&c.componentDidEnter();delete this.currentlyTransitioningKeys[a];c=b("ReactTransitionChildMapping").getChildMapping(this.props.children);(!c||!Object.prototype.hasOwnProperty.call(c,a))&&this.performLeave(a)}.bind(this),this.performLeave=function(a){this.currentlyTransitioningKeys[a]=!0;var b=this.refs[a];b.componentWillLeave?b.componentWillLeave(this.$3.bind(this,a)):this.$3(a)}.bind(this),this.$3=function(a){var c=this.refs[a];c.componentDidLeave&&c.componentDidLeave();delete this.currentlyTransitioningKeys[a];c=b("ReactTransitionChildMapping").getChildMapping(this.props.children);c&&Object.prototype.hasOwnProperty.call(c,a)?this.performEnter(a):this.setState(function(b){b=Object.assign({},b.children);delete b[a];return{children:b}})}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]};a.prototype.componentDidMount=function(){var a=this.state.children;for(var b in a)a[b]&&this.performAppear(b)};a.prototype.UNSAFE_componentWillReceiveProps=function(a){__p&&__p();a=b("ReactTransitionChildMapping").getChildMapping(a.children);var c=this.state.children;this.setState({children:b("ReactTransitionChildMapping").mergeChildMappings(c,a)});var d;for(d in a){var e=c&&Object.prototype.hasOwnProperty.call(c,d);a[d]&&!e&&!this.currentlyTransitioningKeys[d]&&this.keysToEnter.push(d)}for(d in c){e=a&&Object.prototype.hasOwnProperty.call(a,d);c[d]&&!e&&!this.currentlyTransitioningKeys[d]&&this.keysToLeave.push(d)}};a.prototype.componentDidUpdate=function(){var a=this.keysToEnter;this.keysToEnter=[];a.forEach(this.performEnter);a=this.keysToLeave;this.keysToLeave=[];a.forEach(this.performLeave)};a.prototype.render=function(){__p&&__p();var a=[];for(var c in this.state.children){var d=this.state.children[c];d&&a.push(b("React").cloneElement(this.props.childFactory(d),{ref:c,key:c}))}d=Object.assign({},this.props);delete d.transitionLeave;delete d.transitionName;delete d.transitionAppear;delete d.transitionEnter;delete d.childFactory;delete d.transitionLeaveTimeout;delete d.transitionEnterTimeout;delete d.transitionAppearTimeout;delete d.component;return b("React").createElement(this.props.component,d,a)};a.displayName="ReactTransitionGroup";a.propTypes={component:b("React").PropTypes.any,childFactory:b("React").PropTypes.func};a.defaultProps={component:"span",childFactory:b("fbjs/lib/emptyFunction").thatReturnsArgument};e.exports=a}),null);
__d("ReactCSSTransitionGroup",["React","ReactCSSTransitionGroupChild","ReactTransitionGroup"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function a(a){var b="transition"+a+"Timeout",c="transition"+a;return function(a){if(a[c])if(a[b]==null)return new Error(b+" wasn't supplied to ReactCSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");else if(typeof a[b]!=="number")return new Error(b+" must be a number (in milliseconds)")}}d=babelHelpers.inherits(c,b("React").Component);g=d&&d.prototype;function c(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){return b("React").createElement(b("ReactCSSTransitionGroupChild"),{name:this.props.transitionName,appear:this.props.transitionAppear,enter:this.props.transitionEnter,leave:this.props.transitionLeave,appearTimeout:this.props.transitionAppearTimeout,enterTimeout:this.props.transitionEnterTimeout,leaveTimeout:this.props.transitionLeaveTimeout},a)}.bind(this),c}c.prototype.render=function(){return b("React").createElement(b("ReactTransitionGroup"),Object.assign({},this.props,{childFactory:this.$1}))};c.displayName="ReactCSSTransitionGroup";c.propTypes={transitionName:b("ReactCSSTransitionGroupChild").propTypes.name,transitionAppear:b("React").PropTypes.bool,transitionEnter:b("React").PropTypes.bool,transitionLeave:b("React").PropTypes.bool,transitionAppearTimeout:a("Appear"),transitionEnterTimeout:a("Enter"),transitionLeaveTimeout:a("Leave")};c.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0};e.exports=c}),null);
__d("MessengerBannerOverlay.react",["cx","React","ReactCSSTransitionGroup"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=6e3,j={enter:"_3fa9",enterActive:"_3faa",leave:"_3fab",leaveActive:"_3fad"};c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={hide:!1},b}a.prototype.componentDidUpdate=function(a){a.children!=this.props.children&&this.setState({hide:!1}),this.props.useTimeout&&!this.state.hide&&setTimeout(function(){this.setState({hide:!0})}.bind(this),i)};a.prototype.$1=function(){return!this.state.hide&&this.props.display&&this.props.children?b("React").createElement("div",{className:"_qxg"},b("React").createElement("h2",{className:"_qxh"},this.props.children)):null};a.prototype.render=function(){return b("React").createElement(b("ReactCSSTransitionGroup"),{component:"div",transitionName:j,transitionEnterTimeout:600,transitionLeaveTimeout:600},this.$1())};a.BANNER_TIMEOUT=i;e.exports=a}),null);
__d("RTCNotificationUtils",["fbt","immutable","intlList"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={addingUsersToCallText:function(a,c){if(c&&c.size>0){c=c.toArray().map(function(a){return a.short_name});c=a?g._("Adding {names of users being added to call} to your call...",[g._param("names of users being added to call",b("intlList")(c,b("intlList").CONJUNCTIONS.AND))]):g._("Adding {names of users being added to call} to your video chat...",[g._param("names of users being added to call",b("intlList")(c,b("intlList").CONJUNCTIONS.AND))])}else c=a?g._("Adding someone to your call..."):g._("Adding someone to your video chat...");return c},unableToAddUsersToCallText:function(a,c){if(c&&c.size>0){c=c.toArray().map(function(a){return a.short_name});return g._("Unable to add {names of users being added to call}",[g._param("names of users being added to call",b("intlList")(c,b("intlList").CONJUNCTIONS.OR))])}return a?g._("Unable to add person to your call"):g._("Unable to add person to your video chat")}};e.exports=a}),null);
__d("RTCCallNotificationReducer",["RTCAppDispatcher","RTCCallActionTypes","RTCCallStore","RTCGroupCallEscalationActionTypes","RTCGroupCallEscalationStore","RTCNotificationUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_START:c=!b("RTCCallStore").hasRemoteVideo()&&!b("RTCCallStore").hasLocalVideo();c=b("RTCNotificationUtils").addingUsersToCallText(c,b("RTCGroupCallEscalationStore").getState().usersToRing);return a.set("notificationText",c).set("useTimeout",!1)}return a}function c(a,c){switch(c.type){case b("RTCCallActionTypes").ON_CONFERENCE_STATE:b("RTCAppDispatcher").waitFor([b("RTCGroupCallEscalationStore").getDispatchToken()]);return b("RTCGroupCallEscalationStore").getState().readyToTransition?a.set("notificationText",null).set("useTimeout",!1):a}return a}function d(a,c){switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_CANCEL:c=!b("RTCCallStore").hasRemoteVideo()&&!b("RTCCallStore").hasLocalVideo();c=b("RTCNotificationUtils").unableToAddUsersToCallText(c,b("RTCGroupCallEscalationStore").getState().usersToRing);return a.set("notificationText",c).set("useTimeout",!0)}return a}function f(a,c){switch(c.type){case b("RTCCallActionTypes").HANGUP:case b("RTCCallActionTypes").END_CALL:case b("RTCCallActionTypes").HANGUP_ERROR:case b("RTCCallActionTypes").HANGUP_SUCCESS:return a.withMutations(function(a){a.set("notificationText",null).set("useTimeout",!0)})}return a}e.exports={clearStore:f,onEscalationStarted:a,onEscalationCompletion:c,onAbortedEscalation:d}}),null);
__d("RTCCallNotificationStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={useTimeout:!0,notificationText:null};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("RTCCallNotificationStore",["FluxReduceStore","RTCAppDispatcher","RTCCallNotificationReducer","RTCCallNotificationStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("RTCCallNotificationReducer").clearStore,b("RTCCallNotificationReducer").onEscalationStarted,b("RTCCallNotificationReducer").onEscalationCompletion,b("RTCCallNotificationReducer").onAbortedEscalation];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("RTCCallNotificationStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCCallNotificationContainer.react",["PageHooks","FluxContainer","RTCCallNotificationStore","MessengerBannerOverlay.react","React","RTCConferenceState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("PageHooks");a=babelHelpers.inherits(h,b("React").PureComponent);g=a&&a.prototype;h.getStores=function(){return[b("RTCCallNotificationStore")]};h.calculateState=function(){var a=b("RTCCallNotificationStore").getState(),c=a.notificationText;a=a.useTimeout;return{notificationText:c,useTimeout:a}};function h(a){g.constructor.call(this,a),this.state=babelHelpers["extends"]({},h.calculateState())}h.prototype.render=function(){var a=this.state,c=a.notificationText;a=a.useTimeout;return b("React").createElement(b("MessengerBannerOverlay.react"),{display:this.props.conferenceState!==b("RTCConferenceState").TERMINATED,useTimeout:a},c)};e.exports=b("FluxContainer").create(h)}),null);
__d("RTCAppViewMain.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.children,d=a.className,e=a.fullBleed;e=e===void 0?!0:e;a=babelHelpers.objectWithoutProperties(a,["children","className","fullBleed"]);return b("React").createElement("section",babelHelpers["extends"]({className:b("joinClasses")("_3cb2"+(e?" fullBleed":""),d)},a),c)};e.exports=a}),null);
__d("RTCRingBackTone.react",["FBRTCSoundController","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").Component;d=babelHelpers.inherits(a,c);g=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.state={isPlaying:!1},b}a.prototype.componentDidMount=function(){this.$1(this.props.active)};a.prototype.componentDidUpdate=function(){this.$1(this.props.active)};a.prototype.componentWillUnmount=function(){this.$2()};a.prototype.render=function(){if(this.props.active)return b("React").createElement("div",{display:"none",id:"RingTonePlaying"});else return null};a.prototype.$1=function(a){a?this.$3():this.$2()};a.prototype.$3=function(){this.state.isPlaying||this.setState({isPlaying:!0},function(){b("FBRTCSoundController").playRingbackTone()})};a.prototype.$2=function(){this.state.isPlaying&&(b("FBRTCSoundController").stopRingbackTone(),this.setState({isPlaying:!1}))};a.defaultProps={active:!1};e.exports=a}),null);
__d("FBRTCMobileBrowserAppViewContent.react",["cx","fbt","FacepileRounded.react","FBRTCEnterRoomLinkButton.react","FBRTCMobileBrowserInCallView.react","FBRTCParticipantCallState","MessengerChatLinksFunnelLogger","React","RTCAppViewMain.react","RTCConferenceState","RTCGroupCallEscalationStore","RTCRingBackTone.react","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=64;a=function(a){__p&&__p();a.endCallReason;var c=a.remoteUsers;switch(a.conferenceState){case b("RTCConferenceState").NEW:case b("RTCConferenceState").CONNECTING:case b("RTCConferenceState").CONNECTED:case b("RTCConferenceState").TERMINATING:c=c.filter(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED});return b("React").createElement(b("RTCAppViewMain.react"),{fullBleed:!0},b("React").createElement(b("FBRTCMobileBrowserInCallView.react"),{conferenceState:a.conferenceState,layout:a.layout,localUser:a.localUser,rtcUsers:b("immutable").List([a.localUser]).concat(c)}),a.conferenceState===b("RTCConferenceState").CONNECTING?b("React").createElement(b("RTCRingBackTone.react"),{active:!0}):null);case b("RTCConferenceState").TERMINATED:c=b("RTCGroupCallEscalationStore").getState();c=c.p2pCallSummary;c?c.getConnectedStartTime():0;c=h._("You left the group video chat");return b("React").createElement(b("RTCAppViewMain.react"),{className:"_6qx6",fullBleed:!0},b("React").createElement("div",{className:"_70y3"},b("React").createElement(b("FacepileRounded.react"),{direction:"descending",imageSize:i,numProfilesToDisplay:2,profiles:j(a.participants)}),b("React").createElement("p",{className:"_73-l"},c),b("React").createElement(b("FBRTCEnterRoomLinkButton.react"),{isRejoin:!0,onClick:function(){b("MessengerChatLinksFunnelLogger").appendAction("click_rejoin_call"),a.rejoinCall()}})));default:return null}};function j(a,b){b===void 0&&(b=i);a=a.map(function(a){return{image_src:a.image_src,glyph_size:b,name:a.short_name}});return a.toArray()}e.exports=a}),null);
__d("RTCElementResizeListener.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PureComponent;d=babelHelpers.inherits(a,c);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$3=function(a){this.$1=a&&a.getDOMNode?a.getDOMNode():a}.bind(this),this.$4=function(a){a&&a.contentWindow?a.contentWindow.addEventListener("resize",this.$5,!1):this.$2&&this.$2.contentWindow&&this.$2.contentWindow.removeEventListener("resize",this.$5,!1),this.$2=a}.bind(this),this.$5=i(function(a){a=a.target;var b=this.props.onResize;b&&a&&b({height:a.innerHeight,width:a.innerWidth})}.bind(this),32),b}a.prototype.getDOMNode=function(){return this.$1};a.prototype.render=function(){var a=this.props,c=a.children,d=a.className,e=a.component,f=a.onResize;a=babelHelpers.objectWithoutProperties(a,["children","className","component","onResize"]);return b("React").createElement(e,babelHelpers["extends"]({className:b("joinClasses")("_3u0-",d),ref:this.$3},a),c,f?b("React").createElement("iframe",{className:"_3u11",ref:this.$4}):null)};a.prototype.componentDidMount=function(){this.$2&&this.$5({target:this.$2.contentWindow})};a.prototype.componentDidUpdate=function(a){var b=this.props.onResize;this.$2&&b&&b!==a.onResize&&this.$5({target:this.$2.contentWindow})};a.prototype.componentWillUnmount=function(){this.$2&&this.$2.contentWindow&&this.$2.contentWindow.removeEventListener("resize",this.$5,!1),this.$5.cancel()};a.defaultProps={component:"div"};function i(a,b){var c=0,d=null,e=function(){for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];var h=Date.now();c&&h<c+b?(window.clearTimeout(d),d=window.setTimeout(function(){c=h,a.apply(undefined,f)},b)):(c=h,a.apply(undefined,f))};e.cancel=function(){return window.clearTimeout(d)};return e}e.exports=a}),null);
__d("RTCAppViewFooter.react",["cx","React","RTCElementResizeListener.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.children,d=a.className;a=babelHelpers.objectWithoutProperties(a,["children","className"]);return b("React").createElement(b("RTCElementResizeListener.react"),babelHelpers["extends"]({className:b("joinClasses")("_u0t",d),component:"footer"},a),c)};e.exports=a}),null);
__d("RTCUserActivityProvider.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("React").Children;c=b("React").PureComponent;var i=500;d=babelHelpers.inherits(a,c);g=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$1=null,this.$2=j(function(){window.clearTimeout(this.$1),this.props.onActive(),this.$1=window.setTimeout(this.props.onIdle,this.props.idleDelay)}.bind(this),i),b}a.prototype.render=function(){return h.only(this.props.children)};a.prototype.componentDidMount=function(){window.addEventListener("mousemove",this.$2),window.addEventListener("keydown",this.$2),this.$2()};a.prototype.componentWillUnmount=function(){window.removeEventListener("mousemove",this.$2),window.removeEventListener("keydown",this.$2),window.clearTimeout(this.$1),this.$2.cancel()};a.defaultProps={idleDelay:3e3};function j(a,b){__p&&__p();b===void 0&&(b=100);var c=0,d=null,e=function(){for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];var h=Date.now(),i=function(){c=h,a.apply(undefined,f)};c&&h<c+b?(window.clearTimeout(d),d=window.setTimeout(i,b)):i()};e.cancel=function(){return window.clearTimeout(d)};return e}e.exports=a}),null);
__d("RTCCallControls.react",["cx","React","RTCElementResizeListener.react","RTCUserActivityProvider.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PureComponent;d=babelHelpers.inherits(a,c);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={hasFocus:!1,isMouseActive:!0},this.$6=function(a){this.$1=a&&a.getDOMNode?a.getDOMNode():a}.bind(this),this.$2=function(){this.setState({isMouseActive:!0}),this.$7(!0)}.bind(this),this.$3=function(){this.setState({isMouseActive:!1}),this.$7(!1)}.bind(this),this.$5=function(){this.setState({hasFocus:!0})}.bind(this),this.$4=function(){this.setState({hasFocus:!1})}.bind(this),b}a.prototype.getDOMNode=function(){return this.$1};a.prototype.render=function(){var a=this.props,c=a.children,d=a.className,e=a.compact;a=babelHelpers.objectWithoutProperties(a,["children","className","compact"]);return b("React").createElement(b("RTCUserActivityProvider.react"),{onActive:this.$2,onIdle:this.$3},b("React").createElement(b("RTCElementResizeListener.react"),babelHelpers["extends"]({className:b("joinClasses")("_2eaq"+(e?" compact":"")+(!this.props.autoHide||this.state.isMouseActive||this.state.hasFocus?" visible":""),d),component:"section",onBlur:this.$4,onFocus:this.$5,ref:this.$6},a),c))};a.prototype.$7=function(a){this.props.onUpdateVisibility&&this.props.onUpdateVisibility(a)};a.defaultProps={autoHide:!0,compact:!1};e.exports=a}),null);
__d("RTCUIPhoneIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.variant;c=c===void 0?"start call":c;a=babelHelpers.objectWithoutProperties(a,["variant"]);return b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 48 48"},c==="start call"?b("React").createElement("path",{d:"M32.3 33.3c-4.2 3.5-12.6-4.7-12.8-4.9C19.4 28.3 10.9 20 14.5 15.9C17.2 12.8 17.9 14 18.3 14.3c.3 .3 2.9 4 3 4.7C21.5 19.7 20 21.5 20 22.1c.1 .6 1.8 2.5 2.6 3.3c.7 .7 2.7 2.4 3.3 2.5c.6 .1 2.4-1.4 3.1-1.3c.8 .1 4.5 2.7 4.8 3C34.2 29.9 35.4 30.7 32.3 33.3"}):b("React").createElement("path",{d:"M12.054 24.58C12.52 19.102 24.34 19.002 24.54 19c.202 0 12.024-.1 12.408 5.37.284 4.048-1.092 3.74-1.56 3.778-.41.033-4.823-.767-5.452-1.19-.63-.422-.785-2.703-1.293-3.094-.507-.39-3.092-.51-4.134-.502-1.043.01-3.63.174-4.143.572-.513.4-.702 2.683-1.337 3.117-.636.434-5.062 1.31-5.47 1.283-.47-.03-1.85.3-1.506-3.753"})))};e.exports=a}),null);
__d("RTCCallControlsEndCallButton.react",["cx","fbt","React","RTCCallControlsButton.react","RTCCallStore","RTCHotKeys","RTCHotKeysConfig","RTCUIPhoneIcon.react","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("RTCHotKeysConfig").RTCHotKey;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$3=function(){var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logClick(babelHelpers["extends"]({},a,{callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").END_CALL,conferenceState:this.props.conferenceState,surface:b("RTWebLoggingSurface").CALL_CONTROLS}));this.props.onClick&&this.props.onClick()}.bind(this),this.$2=function(){window.confirm(h._("Do you want to end the call?"))&&this.$3()}.bind(this),c}a.prototype.componentDidMount=function(){var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logImpression(babelHelpers["extends"]({},a,{callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").END_CALL,conferenceState:this.props.conferenceState,surface:b("RTWebLoggingSurface").CALL_CONTROLS}));this.$1=b("RTCHotKeys").register(j.END_CALL,this.$2)};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.remove()};a.prototype.render=function(){return b("React").createElement(b("RTCCallControlsButton.react"),{className:b("joinClasses")("opaque endCall icon-48",this.props.className),"data-testid":b("VideoCallWebDriverIDs").END_CALL_BUTTON,disabled:this.props.disabled,onClick:this.$3,title:h._("End call")},b("React").createElement(b("RTCUIPhoneIcon.react"),{variant:"end call"}))};e.exports=a}),null);
__d("RTCMobileFlyout.react",["cx","invariant","AbstractDialog.react","AccessibleLayer","CSS","React","ReactLayer","SubscriptionsHandler","debounce","requestAnimationFrame"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;function a(a){__p&&__p();this.$4=function(){var a=this.$1.getContentRoot();a!=null||h(0,70);return!0}.bind(this),this.$5=function(){b("requestAnimationFrame")(function(){var a=this.$1.getContentRoot();a!=null||h(0,70);a.addEventListener("transitionend",function(){this.$1.finishHide()}.bind(this));b("CSS").addClass(a,"_71p8")}.bind(this));return!1}.bind(this),this.$1=a,this.$3=new(b("SubscriptionsHandler"))()}a.prototype.enable=function(){this.$2=[this.$1.subscribe("show",this.$4),this.$1.subscribe("starthide",this.$5)]};a.prototype.disable=function(){this.$2&&(this.$2.forEach(function(a){a.unsubscribe()}),this.$2=null),this.$3.release()};var j=b("ReactLayer").createClass(b("AbstractDialog.react").createSpec({displayName:"RTCMobileFlyoutLayer",addedBehaviors:{AccessibleLayer:b("AccessibleLayer"),SlideInFromBottom:a},fixedTopPosition:0}));d=babelHelpers.inherits(c,b("React").PureComponent);i=d&&d.prototype;function c(a){i.constructor.call(this,a),this.state={width:window.innerWidth},this.$1=b("debounce")(function(){this.setState({width:window.innerWidth})}.bind(this),150),window.addEventListener("resize",this.$1)}c.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.$1)};c.prototype.render=function(){return b("React").createElement(j,{className:"_71p9 _72pp",key:"dialog",onToggle:this.props.onToggle,shown:!0,width:this.state.width},this.props.children)};e.exports=c}),null);
__d("RTCMobileFlyoutBody.react",["React","joinClasses"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("React").createElement("section",{className:b("joinClasses")(a.className)},a.children)}e.exports=a}),null);
__d("RTCMobileFlyoutHeader.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("React").createElement("header",{className:b("joinClasses")(a.className,"_71p7")},a.children)}e.exports=a}),null);
__d("RTCMobileGroupCallRosterRow.react",["ix","cssVar","cx","fbt","ClickableArea.react","Image.react","MessengerContactImage.react","React","asset"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=parseInt("36px",10);function a(a){var c=a.checked,d=a.isLocalUser,e=a.onClick,f=a.participant;a=a.subtitle;d=b("React").createElement("div",{className:"_71p4",role:"group"},b("React").createElement(b("MessengerContactImage.react"),{className:"_71p5",isMessengerUser:f.is_messenger_user,isPartiesUser:f.is_parties_user,size:k,src:f.image_src}),b("React").createElement("div",{className:"_71jj"},b("React").createElement("div",{className:"_71jk"},b("React").createElement("div",{className:"_71jl"},d===!0?j._("You"):f.name),a!=null?b("React").createElement("div",{className:"_71jm"},a):null),c===!0?b("React").createElement(b("Image.react"),{className:"_73kp",src:g("505224")}):null));if(e)return b("React").createElement(b("ClickableArea.react"),{onClick:e},d);else return d}e.exports=a}),null);
__d("memoizeLastByArgs",["MemoizationInstrumentation","shallowArrayEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();var d=c||a.name||"unknown",f=null;c=function(){__p&&__p();for(var c=arguments.length,g=new Array(c),h=0;h<c;h++)g[h]=arguments[h];var i=b("MemoizationInstrumentation").onFunctionCall(e.id,d),j=!0;if(!(f!=null&&b("shallowArrayEqual")(g,f.args))){j=!1;var k=a.apply(undefined,g);f==null?f={args:g,ret:k}:(f.args=g,f.ret=k)}i&&i(j);return f.ret};return c}e.exports=a}),null);
__d("RTCMobileRosterSorter",["FBRTCParticipantCallState","immutable","memoizeLastByArgs","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){__p&&__p();var e={};for(var c=c,f=Array.isArray(c),g=0,c=f?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=c.length)break;h=c[g++]}else{g=c.next();if(g.done)break;h=g.value}h=h;e[h.get("FBID")]=h}h=[];g=null;f=[];for(var c=a,a=Array.isArray(c),i=0,c=a?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(a){if(i>=c.length)break;j=c[i++]}else{i=c.next();if(i.done)break;j=i.value}j=j;j[0];j=j[1];var k=b("nullthrows")(j.fbid),l=e[k];l=l?l.get("participantState"):null;l={payload:j,participantState:(j=l==null?void 0:l.state)!=null?j:b("FBRTCParticipantCallState").UNKNOWN};k===d?g=l:l.participantState===b("FBRTCParticipantCallState").CONNECTED?h.push(l):f.push(l)}return{activeParticipants:h,localUser:b("nullthrows")(g),inactiveParticipants:f}}e.exports={sort:b("memoizeLastByArgs")(a)}}),null);
__d("RTCMobileGroupCallRosterBody.react",["cx","fbt","FBRTCGroupCallStore","FBRTCParticipantCallState","FluxContainer","React","RTCCallStore","RTCGroupCallActions","RTCMobileGroupCallRosterRow.react","RTCMobileRosterSorter","emptyFunction","memoizeWithArgs","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=6;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=b("memoizeWithArgs")(function(a){return function(){b("RTCGroupCallActions").setPinnedSpeaker(this.state.pinnedSpeakerFBID===a?null:a)}.bind(this)}.bind(this),b("emptyFunction").thatReturnsArgument,"_bindOnRowClick"),c}a.getStores=function(){return[b("FBRTCGroupCallStore"),b("RTCCallStore")]};a.calculateState=function(){var a=b("FBRTCGroupCallStore").getState(),c=a.pinnedSpeakerFBID;a=a.participants;var d=b("RTCCallStore").getState(),e=d.localUser;d=d.remoteUsers;return{pinnedSpeakerFBID:c,roster:b("RTCMobileRosterSorter").sort(a,d,e.get("FBID"))}};a.prototype.render=function(){var a=this.state,c=a.pinnedSpeakerFBID;a=a.roster;var d=a.activeParticipants,e=a.localUser,f=a.inactiveParticipants,g=a.activeParticipants.length>=j;return b("React").createElement(b("React").Fragment,null,b("React").createElement(b("RTCMobileGroupCallRosterRow.react"),{isLocalUser:!0,participant:e.payload}),d.map(function(a){a=a.payload;return b("React").createElement(b("RTCMobileGroupCallRosterRow.react"),{checked:a.fbid===c,key:a.id,onClick:g?this.$1(b("nullthrows")(a.fbid)):null,participant:a,subtitle:g&&a.fbid===c?h._("Selected Speaker"):null})}.bind(this)),f.length>0?b("React").createElement(b("React").Fragment,null,b("React").createElement("header",{className:"_71p6"},h._("HAVE NOT JOINED")),f.map(function(a){return b("React").createElement(b("RTCMobileGroupCallRosterRow.react"),{key:a.payload.id,participant:a.payload,subtitle:this.$2(a)})}.bind(this))):null)};a.prototype.$2=function(a){switch(a.participantState){case b("FBRTCParticipantCallState").CONTACTING:return h._("Contacting...");case b("FBRTCParticipantCallState").RINGING:return h._("Ringing...");case b("FBRTCParticipantCallState").IN_ANOTHER_CALL:return h._("Busy");case b("FBRTCParticipantCallState").NO_ANSWER:return h._("No Answer");default:return null}};e.exports=b("FluxContainer").create(a)}),null);
__d("RTCMobileGroupCallRosterView.react",["fbt","ErrorBoundary.react","React","RTCMobileFlyout.react","RTCMobileFlyoutBody.react","RTCMobileFlyoutHeader.react","RTCMobileGroupCallRosterBody.react"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("React").createElement(b("RTCMobileFlyout.react"),{onToggle:a.onToggle},b("React").createElement(b("RTCMobileFlyoutHeader.react"),null,g._("In this chat")),b("React").createElement(b("RTCMobileFlyoutBody.react"),null,b("React").createElement(b("ErrorBoundary.react"),null,b("React").createElement(b("RTCMobileGroupCallRosterBody.react"),null))))}e.exports=a}),null);
__d("RTCMobileGroupCallDialogController",["DOM","React","ReactDOM","RTCMobileGroupCallRosterView.react"],(function(a,b,c,d,e,f){"use strict";var g={_container:b("DOM").create("div"),showRoster:function(){b("ReactDOM").render(b("React").createElement(b("RTCMobileGroupCallRosterView.react"),{onToggle:this._onUnmount}),this._container)},_onUnmount:function(){b("ReactDOM").unmountComponentAtNode(g._container)}};e.exports=g}),null);
__d("RTCUIRosterIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 48 48"},b("React").createElement("g",{transform:"translate(9, 12)"},b("React").createElement("path",{d:"M11.9797896 14.4724735c.4975058.1515207.7025082.8041097.3605042 1.2181661-1.1630136 1.4061918-1.8405215 3.1129245-1.8405215 4.9756785v.014502C10.5022724 21.398918 9.99876648 22 9.32525861 22H1.31216506c-.72650848 0-1.32301545-.6345865-1.31201532-1.4091922.05300062-3.6474973 3.94754609-6.5918989 8.74960216-6.5918989 1.14201333 0 2.231026.1690231 3.2300377.4735646m-3.2300377-1.9682684c-2.62753068 0-4.368051-2.0342774-4.710055-4.72464425-.34200399-.1950266-.54350634-.64858844-.54350634-1.27867437 0-.59758148.18250213-1.03214074.49250575-1.24216938.07650089-2.67836523.8995105-4.67613766 1.77602073-4.67613766.86601012 0 1.19401394.28503887 1.19401394.28503887 0-.54207392.36450426-.86511797 1.79102092-.86511797 3.4880407 0 4.6865547 1.80924672 4.7680557 5.26071737.3055035.21202891.4855056.64508797.4855056 1.23766877 0 .63008593-.2015023 1.08364777-.5435063 1.27867437-.342004 2.69036685-2.0825243 4.72464425-4.710055 4.72464425zM30 20.6663181C30 21.4029186 29.3774927 22 28.6874847 22H13.812311c-.6905081 0-1.3125153-.5970814-1.3125153-1.3336819 0-3.6825021 3.9150457-6.6674092 8.7501021-6.6674092C26.0844543 13.9989089 30 16.983816 30 20.6663181zm-4.3165504-9.1627494c-.6345074 0-1.2080141-.065509-1.7245201-.1665227-.683008.7145974-1.6430192 1.1616584-2.7090317 1.1616584-.9965116 0-1.8995221-.3915534-2.57153-1.0256399-.1270015.0180025-.258003.0305042-.3965046.0305042-1.627019 0-2.7820325-2.51984365-2.7820325-5.26671822 0-2.63235896 2.5390296-5.7617857 4.0000467-5.7617857.6105071 0 1.0950128.24153294 1.0950128.24153294C20.9998949.36955039 21.4309 0 22.4454118 0c1.9345226 0 5.054559 3.02541256 5.054559 6.23685048 0 1.42969496-.5000058 2.17329636-.5000058 2.86989135 0 1.17666047.9965116 1.08064737.9965116 1.55021137 0 .3895531-.9360109.8466155-2.313027.8466155z",fill:"#FFF",fillRule:"evenodd"}))))}e.exports=a}),null);
__d("RTCCallControlsRosterButton.react",["cx","fbt","FBRTCParticipantCallState","FluxContainer","React","RTCCallControlsButton.react","RTCCallStore","RTCMobileGroupCallDialogController","RTCUIRosterIcon.react","immutable","joinClasses","memoizeLastByArgs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=7;i=babelHelpers.inherits(k,b("React").PureComponent);i&&i.prototype;k.getStores=function(){return[b("RTCCallStore")]};k.calculateState=function(){var a=b("RTCCallStore").getState();a=a.remoteUsers;return{connectedParticipantCount:k.$1(a)}};k.prototype.render=function(){return this.state.connectedParticipantCount<=1?null:b("React").createElement("div",{className:"_4uwq _720p"},b("React").createElement(b("RTCCallControlsButton.react"),{className:b("joinClasses")(this.props.className,"semiopaque icon-48"),highlighted:!1,onClick:this.$2,title:h._("See participants")},b("React").createElement(b("RTCUIRosterIcon.react"),null)),this.state.connectedParticipantCount>=j?b("React").createElement("div",{className:"_720q"},this.state.connectedParticipantCount):null)};k.prototype.$2=function(){b("RTCMobileGroupCallDialogController").showRoster()};function k(){i.apply(this,arguments)}k.$1=b("memoizeLastByArgs")(function(a){return 1+a.count(function(a){return((a=a.participantState)==null?void 0:a.state)===b("FBRTCParticipantCallState").CONNECTED})});e.exports=b("FluxContainer").create(k)}),null);
__d("RTCCallControlsToggleAudioButton.react",["cx","fbt","React","RTCCallActions","RTCCallControlsButton.react","RTCHotKeys","RTCHotKeysConfig","RTCUIMicrophoneIcon.react","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("RTCHotKeysConfig").RTCHotKey;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$2=function(){b("RTWebUserActionLogger").logClick({callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").TOGGLE_AUDIO,conferenceState:this.props.conferenceState,surface:b("RTWebLoggingSurface").CALL_CONTROLS}),b("RTCCallActions").toggleMuteAudio(this.props.audioMuted)}.bind(this),c}a.prototype.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").TOGGLE_AUDIO,conferenceState:this.props.conferenceState,surface:b("RTWebLoggingSurface").CALL_CONTROLS}),this.$1=b("RTCHotKeys").register(j.TOGGLE_MUTE_AUDIO,this.$2)};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.remove()};a.prototype.render=function(){var a=this.props,c=a.audioMuted,d=a.className;a=a.disabled;return b("React").createElement(b("RTCCallControlsButton.react"),{className:b("joinClasses")(d,"semiopaque icon-48"),"data-testid":b("VideoCallWebDriverIDs").TOGGLE_AUDIO_BUTTON,disabled:a,highlighted:c,onClick:this.$2,title:c?h._("Unmute your microphone"):h._("Mute your microphone")},b("React").createElement(b("RTCUIMicrophoneIcon.react"),{strikeThrough:c||a}))};e.exports=a}),null);
__d("RTCUICameraIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.strikeThrough;c=c===void 0?!1:c;a=babelHelpers.objectWithoutProperties(a,["strikeThrough"]);return b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 48 48"},c?b("React").createElement("path",{d:"M36 29h1V19h-1v10zm-6-2.727L35 29V19l-5 2.727v4.546zM19.344 17H26c1.126 0 2 .938 2 2v10c0 .54-.225 1.047-.595 1.415L19.345 17zm-3.5 0H15c-1.126 0-2 .938-2 2v10c0 1.062.874 2 2 2h9.257l-8.413-14zm11.408 17.044l.857-.516-12.362-20.572-.857.516 12.362 20.572z"}):b("React").createElement("path",{d:"M26 17H15c-1.126 0-2 .938-2 2v10c0 1.062.874 2 2 2h11c1.126 0 2-.938 2-2V19c0-1.062-.874-2-2-2zm10 12h1V19h-1v10zm-6-2.727L35 29V19l-5 2.727v4.546z"})))};e.exports=a}),null);
__d("RTCCallControlsVideoButton.react",["cx","fbt","React","RTCCallControlsButton.react","RTCUICameraIcon.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){var c=a.className,d=a.disabled;d=d===void 0?!1:d;var e=a.onClick,f=a.nodeRef,g=a.videoMuted;a=babelHelpers.objectWithoutProperties(a,["className","disabled","onClick","nodeRef","videoMuted"]);return b("React").createElement(b("RTCCallControlsButton.react"),babelHelpers["extends"]({className:b("joinClasses")(c,"semiopaque icon-48"),disabled:d,highlighted:g,onClick:e,ref:f,title:g?h._("Enable your video"):h._("Disable your video")},a),b("React").createElement(b("RTCUICameraIcon.react"),{strikeThrough:g||d}))};e.exports=a}),null);
__d("RTCCallControlsToggleVideoButton.react",["React","RTCCallActions","RTCCallControlsButton.react","RTCCallControlsVideoButton.react","RTCHotKeys","RTCHotKeysConfig","RTCP2PCallStore","RTCP2PProtocolHandler","RTWebClientFeatureGating","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("RTCHotKeysConfig").RTCHotKey;c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=!0,this.$3=function(){!this.props.initializeVideo&&this.$1&&!b("RTWebClientFeatureGating").stopVideoWhenMute()&&(i(),this.$1=!1),b("RTWebUserActionLogger").logClick({callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").TOGGLE_VIDEO,conferenceState:this.props.conferenceState,surface:b("RTWebLoggingSurface").CALL_CONTROLS}),this.props.onToggle?this.props.onToggle(this.props.videoMuted):b("RTCCallActions").toggleMuteVideo(this.props.videoMuted)}.bind(this),c}a.prototype.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").TOGGLE_VIDEO,conferenceState:this.props.conferenceState,surface:b("RTWebLoggingSurface").CALL_CONTROLS}),this.$2=b("RTCHotKeys").register(h.TOGGLE_VIDEO,this.$3)};a.prototype.componentWillUnmount=function(){this.$2&&this.$2.remove()};a.prototype.render=function(){return b("React").createElement(b("RTCCallControlsVideoButton.react"),{className:this.props.className,"data-testid":b("VideoCallWebDriverIDs").TOGGLE_VIDEO_BUTTON,disabled:this.props.disabled,nodeRef:this.props.nodeRef,onClick:this.$3,videoMuted:this.props.videoMuted})};function i(){var a=b("RTCP2PCallStore").getState(),c=a.protocolHandler;return b("RTCP2PProtocolHandler").initStream(!0).then(function(a){c.startLocalVideoTracker(a);return a}).then(function(a){b("RTCP2PProtocolHandler").replaceLocalStream(a);return a})["catch"](function(a){})}e.exports=a}),null);
__d("RTCCallControlsVideoEscalationButton.react",["React","RTCCallControlsVideoButton.react","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.disabled;c=c===void 0?!1:c;var d=a.videoMuted;d=d===void 0?!0:d;a=babelHelpers.objectWithoutProperties(a,["disabled","videoMuted"]);return b("React").createElement(b("RTCCallControlsVideoButton.react"),{"data-testid":b("VideoCallWebDriverIDs").ESCALATE_CALL_BUTTON,disabled:c,onClick:a.onClick,videoMuted:d})};e.exports=a}),null);
__d("FBRTCMobileBrowserAppViewFooter.react",["cx","FBRTCHangupReason","React","RTCAppViewFooter.react","RTCCallControls.react","RTCCallControlsEndCallButton.react","RTCCallControlsRosterButton.react","RTCCallControlsToggleAudioButton.react","RTCCallControlsToggleVideoButton.react","RTCCallControlsVideoEscalationButton.react","RTCConferenceState","RTCMWProtocolHandler"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(){b("RTCMWProtocolHandler").endCall(this.props.conferenceName,this.props.serverInfoData,b("FBRTCHangupReason").HANGUP_CALL)}.bind(this),c}a.prototype.render=function(){switch(this.props.conferenceState){case b("RTCConferenceState").TERMINATED:return b("React").createElement(b("RTCAppViewFooter.react"),null);default:return b("React").createElement(b("RTCAppViewFooter.react"),null,b("React").createElement(b("RTCCallControls.react"),{autoHide:!0,className:"_5rdt"},this.props.conferenceState===b("RTCConferenceState").CONNECTED?b("React").createElement(b("RTCCallControlsRosterButton.react"),null):null,this.props.localUser.hasVideo()?b("React").createElement(b("RTCCallControlsToggleVideoButton.react"),{conferenceState:this.props.conferenceState,initializeVideo:!0,isP2P:!1,videoMuted:this.props.localUser.isVideoMuted()}):b("React").createElement(b("RTCCallControlsVideoEscalationButton.react"),{disabled:!this.props.hasVideoInput,onClick:function(){return b("RTCMWProtocolHandler").escalateLocalStream()}}),b("React").createElement(b("RTCCallControlsToggleAudioButton.react"),{audioMuted:this.props.localUser.isAudioMuted(),conferenceState:this.props.conferenceState,isP2P:!1}),b("React").createElement(b("RTCCallControlsEndCallButton.react"),{conferenceState:this.props.conferenceState,isP2P:!1,onClick:this.$1})))}};e.exports=a}),null);
__d("RTCLogo.react",["cx","ix","Image.react","React","WorkModeConfig","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={messenger:{color:h("28187"),mono:h("28188")},workplace:{color:h("28198"),mono:h("28199")}};a=function(a){var c=a.className,d=a.mode;d=d===void 0?"color":d;a=babelHelpers.objectWithoutProperties(a,["className","mode"]);var e=j();return b("React").createElement(b("Image.react"),babelHelpers["extends"]({alt:"",className:b("joinClasses")(c,"_4ytt"),src:i[e][d]},a))};function j(){return b("WorkModeConfig").is_work_user?"workplace":"messenger"}e.exports=a}),null);
__d("RTCAppViewHeader.react",["cx","React","RTCLogo.react","RTWebClientFeatureGating","WorkModeConfig","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.children,d=a.className;a.isAudioCall;a=babelHelpers.objectWithoutProperties(a,["children","className","isAudioCall"]);var e=b("WorkModeConfig").is_work_user;e=e&&!b("RTWebClientFeatureGating").isChatEnabled()?b("React").createElement(b("RTCLogo.react"),{className:"_4key",mode:"mono"}):null;return b("React").createElement("header",babelHelpers["extends"]({className:b("joinClasses")("_4keu",d)},a),e,c)};e.exports=a}),null);
__d("RTCUIFullscreenIcon.react",["React","RTCSVGIcon.react","RTCSVGIconDropShadowFilter.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$1="",this.$2=function(a){a&&(this.$1=a.getURL(),this.forceUpdate())}.bind(this),b}a.prototype.render=function(){var a=this.props,c=a.direction,d=a.shadow;a=babelHelpers.objectWithoutProperties(a,["direction","shadow"]);return d?b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 50 50"},b("React").createElement("defs",null,b("React").createElement(b("RTCSVGIconDropShadowFilter.react"),{height:20,ref:this.$2,width:20})),b("React").createElement("g",{filter:this.$1},b("React").createElement(h,{direction:c})))):b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 50 50"},b("React").createElement(h,{direction:c})))};a.defaultProps={shadow:!1};var h=function(a){a=a.direction;return a==="in"?b("React").createElement("path",{d:"M25.8 24.2c.2.2.4.3.7.3h6c.5 0 1-.4 1-1s-.4-1-1-1h-3.6l4.8-4.8c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0l-4.8 4.8v-3.6c0-.5-.4-1-1-1s-1 .4-1 1v6c0 .3.1.5.3.7zM24.2 25.8c.2.2.3.5.3.8v6c0 .6-.4 1-1 1s-1-.5-1-1V29l-4.8 4.7c-.4.4-1 .4-1.4 0s-.4-1 0-1.4l4.8-4.8h-3.6c-.6 0-1-.4-1-1s.5-1 1-1h6c.3 0 .5.1.7.3z"}):b("React").createElement("path",{d:"M33.7 16.3c-.2-.2-.4-.3-.7-.3h-6c-.5 0-1 .4-1 1s.4 1 1 1h3.6l-4.8 4.8c-.4.4-.4 1 0 1.4s1 .4 1.4 0l4.8-4.8V23c0 .5.4 1 1 1s1-.4 1-1v-6c0-.3-.1-.5-.3-.7zM16.3 33.7c-.2-.2-.3-.4-.3-.7v-6c0-.5.4-1 1-1s1 .4 1 1v3.6l4.8-4.8c.4-.4 1-.4 1.4 0s.4 1 0 1.4L19.5 32h3.6c.5 0 1 .4 1 1s-.4 1-1 1h-6c-.3 0-.6-.1-.8-.3z"})};e.exports=a}),null);
__d("RTCCallControlsToggleFullScreenButton.react",["cx","fbt","FBRTCVersionDetection","React","RTCCallControlsButton.react","RTCCallStore","RTCHotKeys","RTCHotKeysConfig","RTCUIFullscreenIcon.react","RTCUtils","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs","debounce","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("RTCHotKeysConfig").RTCHotKey,k=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"];a=babelHelpers.inherits(l,b("React").PureComponent);i=a&&a.prototype;function l(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={highlighted:!1},this.$3=function(a){this.setState({highlighted:!0}),this.$1=window.setTimeout(function(){return this.setState({highlighted:!1})}.bind(this),100),b("RTWebUserActionLogger").logClick(babelHelpers["extends"]({},b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState()),{callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTCUtils").isFullScreen()?b("RTWebLoggingComponent").FULLSCREEN_DISABLE:b("RTWebLoggingComponent").FULLSCREEN_ENABLE,surface:b("RTWebLoggingSurface").CALL_CONTAINER})),b("RTCUtils").toggleFullScreen()}.bind(this),this.$5=b("debounce")(function(){return this.forceUpdate()}.bind(this),10),c}l.prototype.render=function(){var a=b("RTCUtils").isFullScreen()||this.state.highlighted,c=this.props,d=c.isAudioOnly;c=c.className;return b("React").createElement(b("RTCCallControlsButton.react"),{className:b("joinClasses")("transparent icon-50",c),"data-testid":b("VideoCallWebDriverIDs").FULL_SCREEN_BUTTON,onClick:this.$3,shouldThrottle:this.$4(),title:a?h._("Exit full screen"):h._("Enter full screen")},b("React").createElement(b("RTCUIFullscreenIcon.react"),{direction:a?"in":"out",shadow:!d}))};l.prototype.$4=function(){return!b("FBRTCVersionDetection").isFirefox()};l.getDocument=function(){return document};l.prototype.componentDidMount=function(){for(var a=0;a<k.length;a++){var event=k[a];l.getDocument().addEventListener(event,this.$5)}b("RTWebUserActionLogger").logImpression(babelHelpers["extends"]({},b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState()),{callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").FULLSCREEN,surface:b("RTWebLoggingSurface").CALL_CONTAINER}));this.$2=b("RTCHotKeys").register(j.FULL_SCREEN,this.$3)};l.prototype.componentWillUnmount=function(){window.clearTimeout(this.$1);for(var a=0;a<k.length;a++){var event=k[a];l.getDocument().removeEventListener(event,this.$5)}this.$2&&this.$2.remove()};e.exports=l}),null);
__d("RTCInCallSlidingLogoContainer.react",["cx","fbt","FBRTCConstants","Link.react","MessengerChatLinksFunnelLogger","React","VideoChatLinksLoggingEvent","XUIText.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("FBRTCConstants").GroupVideoViewLayout;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(a){i.constructor.call(this,a),this.$1=function(){b("MessengerChatLinksFunnelLogger").appendAction("click_app_download_in_call"),this.props.onClick()}.bind(this)}a.prototype.componentDidMount=function(){this.props.userActionsLogger().setEvent(b("VideoChatLinksLoggingEvent").IMPRESSION).log()};a.prototype.render=function(){return b("React").createElement(b("Link.react"),{onClick:this.$1},b("React").createElement("div",{className:"_723-"},b("React").createElement(b("XUIText.react"),{className:"_723_",display:"block",size:"body2"},this.props.layout===j.GRID?h._("Download Messenger"):h._({"*":"{number} people in this chat","_1":"1 person in this chat"},[h._plural(this.props.connectedRemoteUsersSize+1,"number")])),b("React").createElement(b("XUIText.react"),{className:"_7240",display:"block",size:"body2"},this.props.layout===j.GRID?h._("Get the full experience with the app"):h._("Get the best group experience with the app"))))};e.exports=a}),null);
__d("RTCMobilePostCallHeaderBanner.react",["cx","fbt","FlexLayout.react","Link.react","MessengerChatLinksFunnelLogger","React","RTCLogo.react","VideoChatLinksLoggingEvent","XUIText.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(a){i.constructor.call(this,a),this.$1=function(){b("MessengerChatLinksFunnelLogger").appendAction("click_app_download_post_call"),this.props.onClick()}.bind(this)}a.prototype.componentDidMount=function(){this.props.userActionsLogger().setEvent(b("VideoChatLinksLoggingEvent").IMPRESSION).log()};a.prototype.render=function(){return b("React").createElement(b("FlexLayout.react"),{align:"center",className:"_6qxt"},b("React").createElement(b("Link.react"),{onClick:this.$1,target:"_blank"},b("React").createElement(b("RTCLogo.react"),{className:"_4key _6qy5",mode:"color"})),b("React").createElement(b("FlexLayout.react"),{direction:"vertical"},b("React").createElement(b("XUIText.react"),{className:"_6qxu",display:"block",size:"body2"},h._("Download Messenger")),b("React").createElement(b("XUIText.react"),{className:"_6qxv",color:"secondary",display:"block",size:"body2"},h._("Join this chat with the Messenger app"))))};e.exports=a}),null);
__d("VideoChatLinksLoggingComponent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IMESSAGE_LINK_MESSAGE:"imessage_link_message",IMESSAGE_LINK_MESSAGE_PREVIEW:"imessage_link_message_preview",IMESSAGE_LOGIN_BUTTON:"imessage_login_button",IMESSAGE_OPEN_MESSENGER_BUTTON:"imessage_open_messenger_button",CREATE_LINK_BUTTON:"create_link_button",SHARE_LINK_BUTTON:"share_link_button",SHARE_TO_REVOKE_BUTTON:"link_revoke_button",SHARE_TO_FACEBOOK_BUTTON:"share_to_facebook_button",SHARE_TO_MESSENGER_BUTTON:"share_to_messenger_button",SHARE_TO_INSTAGRAM_BUTTON:"share_to_instagram_button",SHARE_TO_SMS_BUTTON:"share_to_sms_button",SHARE_TO_COPY_BUTTON:"share_to_copy_button",SHARE_TO_MORE_BUTTON:"share_to_more_button",SHARE_ALERT_CONFIRM:"confirm_dialog",SHARE_ALERT_CANCEL:"cancel_dialog",MESSENGER_APP_STORE_LINK:"messenger_app_store_link",MESSENGER_APP_DEEP_LINK:"messenger_app_deep_link"})}),null);
__d("VideoChatLinksLoggingEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TAP:"tap",IMPRESSION:"impression",ERROR:"error",SURFACE_ENTER:"surface_enter",SURFACE_EXIT:"surface_exit",LINK_CREATED:"link_created",LINK_SENT:"link_sent",LINK_SEND_CANCELLED:"link_send_cancelled",LINK_OPENED:"link_opened",LINK_REVOKED:"link_revoked",LINK_CALL_CREATED:"link_call_created",LINK_CALL_STARTED:"link_call_started",LINK_CALL_START_SUCCEEDED:"link_call_start_succeeded",LINK_ATTACHED_TO_THREAD:"link_attached_to_thread",LOGIN:"login"})}),null);
__d("VideoChatLinksLoggingSurface",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IMESSAGE_THREAD:"imessage_thread",IMESSAGE_TRAY:"imessage_tray",IMESSAGE_EXTENSION_LOGIN:"imessage_extension_login",IMESSAGE_EXTENSION_MAIN:"imessage_extension_main",IMESSAGE_EXTENSION_FALLBACK:"imessage_extension_fallback",MESSENGER_THREAD:"messenger_thread",MESSENGER_LINK_SHARE_SHEET:"messenger_link_share_sheet",MESSENGER_SCRIM:"messenger_scrim",MESSENGER_SHARE_CONFIRMATION:"share_confirmation",MESSENGER_REVOKE_CONFIRMATION:"revoke_confirmation",MESSENGER_THREAD_DETAIL:"messenger_thread_detail",MESSENGER_THREAD_DETAIL_LINK_MANAGEMENT:"messenger_thread_detail_link_management",MDOTME_REDIRECT:"mdotme_redirect",WWW_INTERSTITIAL:"www_interstitial",WWW_INCALL:"www_incall",WWW_POSTCALL:"www_postcall",WWW_UNSUPPORTED_BROWSER:"www_unsupported_browser",WWW_MOBILE_APP_STORE_REDIRECT:"www_mobile_app_store_redirect"})}),null);
__d("VideoChatLinksUserActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:VideoChatLinksUserActionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setClientAppVersion=function(a){this.$1.client_app_version=a;return this};a.prototype.setClienttime=function(a){this.$1.clienttime=a;return this};a.prototype.setComponent=function(a){this.$1.component=a;return this};a.prototype.setConferenceName=function(a){this.$1.conference_name=a;return this};a.prototype.setDeviceID=function(a){this.$1.device_id=a;return this};a.prototype.setErrorDetails=function(a){this.$1.error_details=a;return this};a.prototype.setErrorType=function(a){this.$1.error_type=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setGroupSize=function(a){this.$1.group_size=a;return this};a.prototype.setLinkShareTo=function(a){this.$1.link_share_to=a;return this};a.prototype.setReason=function(a){this.$1.reason=a;return this};a.prototype.setReferralSurface=function(a){this.$1.referral_surface=a;return this};a.prototype.setSurface=function(a){this.$1.surface=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setVideoCallLinkHash=function(a){this.$1.video_call_link_hash=a;return this};a.prototype.setVideoCallLinkIDRaw=function(a){this.$1.video_call_link_id_raw=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={client_app_version:!0,clienttime:!0,component:!0,conference_name:!0,device_id:!0,error_details:!0,error_type:!0,event:!0,group_size:!0,link_share_to:!0,reason:!0,referral_surface:!0,surface:!0,time:!0,vc:!0,video_call_link_hash:!0,video_call_link_id_raw:!0,weight:!0};e.exports=a}),null);
__d("FBRTCMobileBrowserAppViewHeader.react",["cx","FBRTCConstants","React","RTCAppViewHeader.react","RTCCallControls.react","RTCCallControlsButton.react","RTCCallControlsToggleFullScreenButton.react","RTCConferenceState","RTCInCallSlidingLogoContainer.react","RTCLogo.react","RTCMobilePostCallHeaderBanner.react","VideoChatLinksLoggingComponent","VideoChatLinksLoggingEvent","VideoChatLinksLoggingSurface","VideoChatLinksUserActionsTypedLogger","goURI","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("FBRTCConstants").GroupVideoViewLayout,j="https://play.google.com/store/apps/details?id=com.facebook.orca",k=4e3;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={slideBanner:!1,displayHeader:!1},this.$1=function(){this.setState({slideBanner:!0}),this.$3=window.setTimeout(function(){this.setState({slideBanner:!1,displayHeader:!1})}.bind(this),k)}.bind(this),this.onLinkClick=function(){this.$2().setEvent(b("VideoChatLinksLoggingEvent").TAP).log(),b("goURI")(this.props.appstoreLink!==null&&this.props.appstoreLink!==undefined?this.props.appstoreLink:j)}.bind(this),c}a.prototype.componentDidUpdate=function(a){a.layout===i.GRID&&this.props.layout===i.DOMINANT_SPEAKER&&(this.setState({displayHeader:!0}),this.$1())};a.prototype.componentDidMount=function(){this.$2().setEvent(b("VideoChatLinksLoggingEvent").IMPRESSION).log()};a.prototype.componentWillUnmount=function(){window.clearTimeout(this.$3)};a.prototype.$2=function(){return new(b("VideoChatLinksUserActionsTypedLogger"))().setSurface(this.props.conferenceState===b("RTCConferenceState").TERMINATED?b("VideoChatLinksLoggingSurface").WWW_POSTCALL:b("VideoChatLinksLoggingSurface").WWW_INCALL).setComponent(b("VideoChatLinksLoggingComponent").MESSENGER_APP_STORE_LINK).setVideoCallLinkHash(this.props.linkHash)};a.prototype.render=function(){var a=this.props,c=a.isAudioCall,d=a.conferenceState,e=a.layout;a=a.connectedRemoteUsersSize;switch(d){case b("RTCConferenceState").TERMINATING:return b("React").createElement(b("RTCAppViewHeader.react"),{isAudioCall:c});case b("RTCConferenceState").TERMINATED:return b("React").createElement(b("RTCAppViewHeader.react"),{isAudioCall:c},b("React").createElement(b("RTCMobilePostCallHeaderBanner.react"),{onClick:this.onLinkClick,userActionsLogger:this.$2}));default:return b("React").createElement(b("RTCAppViewHeader.react"),{className:this.state.slideBanner?"_7238":"",isAudioCall:c},b("React").createElement(b("RTCInCallSlidingLogoContainer.react"),{connectedRemoteUsersSize:a,layout:e,onClick:this.onLinkClick,userActionsLogger:this.$2}),b("React").createElement(b("RTCCallControls.react"),{autoHide:!this.state.displayHeader&&!this.state.slideBanner,compact:!0},b("React").createElement(b("RTCCallControlsButton.react"),{className:"_7239",onClick:this.$1,title:""},b("React").createElement(b("RTCLogo.react"),{mode:"mono"})),b("React").createElement(b("RTCCallControlsToggleFullScreenButton.react"),{className:b("joinClasses")("semiopaque","_6tcw"),isP2P:!1})))}};e.exports=a}),null);
__d("RTCDialogProvider.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PureComponent;d=b("React").PropTypes;f=babelHelpers.inherits(a,c);g=f&&f.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.state={dialog:null},this.$1=function(a){this.setState({dialog:a})}.bind(this),this.$2=function(a){a===void 0&&(a=!1),a||this.setState({dialog:null})}.bind(this),b}a.prototype.getChildContext=function(){return{dialogShow:this.$1,dialogHide:this.$2}};a.prototype.render=function(){return b("React").createElement("div",this.props,this.props.children,this.state.dialog)};a.childContextTypes={dialogShow:d.func,dialogHide:d.func};e.exports=a}),null);
__d("RTCAppView.react",["cx","FBRTCSupport","React","RTCDialogProvider.react","RTWebClientFeatureGating"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.children,d=a.isAudioCall;d=d===void 0?!1:d;a=babelHelpers.objectWithoutProperties(a,["children","isAudioCall"]);return b("React").createElement(b("RTCDialogProvider.react"),babelHelpers["extends"]({className:"_32ut"+(d&&!b("FBRTCSupport").isMobileDevice()&&!b("RTWebClientFeatureGating").callUnification()?" _32uu":"")},a),c)};e.exports=a}),null);
__d("MediaAccessErrorParser",["FBRTCLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={printUserMediaRequestError:function(a){__p&&__p();if(a==null)return"Unknown Error";switch(a.name){case"AbortError":return"Hardware Access aborted.";case"NotAllowedError":return"Access to Media Devices has been denied.";case"NotFoundError":return"Devices matching requirements were not found or were not accessible.";case"NotReadableError":return"Hardware Access Error.";case"OverconstrainedError":return"Media Constraints not met.";case"SecurityError":return"User media support is disabled.";case"TypeError":return"Media Constraints corrupted.";default:b("FBRTCLogger").getInstance().logErrorWithoutID(a);return a.message?a.message:"Unknown Error"}}};e.exports=a}),null);
__d("RTCMediaDeniedPrompt.react",["cx","fbt","React","UserAgent","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogTitle.react"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.$1=function(){"use strict";return b("UserAgent").isBrowser("Chrome")?"right":"left"};a.prototype.render=function(){"use strict";var a=this.props.isAudioCall?h._("Allow Microphone Access"):h._("Allow Camera and Microphone Access"),c=this.props.isAudioCall?h._("You'll need to allow microphone for calls on Facebook."):h._("You'll need to allow microphone and camera access for video chats on Facebook.");return b("React").createElement("span",{className:"_173p"},b("React").createElement("div",{className:"_3wrz",ref:"mpTarget"}),b("React").createElement(b("XUIContextualDialog.react"),{alignment:this.$1(),contextRef:function(){return this.refs.mpTarget}.bind(this),key:"popover",position:"below",shown:!0,width:b("XUIContextualDialog.react").WIDTH.NORMAL},b("React").createElement(b("XUIContextualDialogTitle.react"),null,a),b("React").createElement(b("XUIContextualDialogBody.react"),null,c)))};function a(){"use strict";i.apply(this,arguments)}e.exports=a}),null);
__d("RTCSVGIconCatalog",["React"],(function(a,b,c,d,e,f){"use strict";a={noCameraIcon:b("React").createElement("svg",{viewBox:"0 0 48 48"},b("React").createElement("path",{d:"M36 29h1V19h-1v10zm-6-2.727L35 29V19l-5 2.727v4.546zM19.344 17H26c1.126 0 2 .938 2 2v10c0 .54-.225 1.047-.595 1.415L19.345 17zm-3.5 0H15c-1.126 0-2 .938-2 2v10c0 1.062.874 2 2 2h9.257l-8.413-14zm11.408 17.044l.857-.516-12.362-20.572-.857.516 12.362 20.572z",fillRule:"evenodd"})),noMicIcon:b("React").createElement("svg",{viewBox:"0 0 48 48"},b("React").createElement("path",{d:"M25 31c.7-.1 1.3-.3 1.9-.6l-.5-.9c-.6.3-1.2.5-1.9.5-2.5 0-4.5-2.2-4.5-5v-5h-1v5.2c0 3.1 2.2 5.6 5 5.8v3h-3v1h7v-1h-3v-3zm-.5-2c.5 0 1-.1 1.4-.3L21 20.6v4.9c0 1.9 1.6 3.5 3.5 3.5zm-5.8-16l-.9.5L30.3 34l.9-.5L18.7 13zM30 25.2V20h-1v5c0 .8-.2 1.6-.5 2.2l.6 1c.6-.8.9-1.9.9-3zm-2 .3v-9c0-1.9-1.6-3.5-3.5-3.5-1.5 0-2.7.9-3.2 2.2L28 26.3v-.8z"}))};e.exports=a}),null);
__d("RTCUserMediaRequestState",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({FULFILLED:null,PENDING:null,REJECTED:null});e.exports=a}),null);
__d("RTCGrantUserMediaAccessView.react",["cx","fbt","FBRTCConfig","Link.react","MediaAccessErrorParser","React","RTCMediaDeniedPrompt.react","RTCSVGIcon.react","RTCSVGIconCatalog","RTCUserMediaRequestState","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){a.children;var c=a.className,d=a.isAudioCall;d=d===void 0?!1:d;var e=a.userMediaRequest;a=babelHelpers.objectWithoutProperties(a,["children","className","isAudioCall","userMediaRequest"]);return b("React").createElement(b("React").Fragment,null,e.state===b("RTCUserMediaRequestState").REJECTED?b("React").createElement(b("RTCMediaDeniedPrompt.react"),{isAudioCall:d}):null,b("React").createElement("div",babelHelpers["extends"]({className:b("joinClasses")(c,"_5ajm"+(d?" _4w_w":""))},a),b("React").createElement(i,{isAudioCall:d,userMediaRequest:e}),b("React").createElement(k,{isAudioCall:d})))};var i=function(a){var c=a.isAudioCall;a=a.userMediaRequest;return b("React").createElement("header",{className:"_5ajs"},b("React").createElement("div",{className:"_5b02"},c?null:b("React").createElement(b("RTCSVGIcon.react"),{className:"_5b34"+(a.state===b("RTCUserMediaRequestState").REJECTED?" _4w_y":"")},b("RTCSVGIconCatalog").noCameraIcon),b("React").createElement(b("RTCSVGIcon.react"),{className:"_5b34"+(a.state===b("RTCUserMediaRequestState").REJECTED?" _4w_y":"")},b("RTCSVGIconCatalog").noMicIcon)),b("React").createElement(j,{isAudioCall:c,userMediaRequest:a}))},j=function(a){var c=a.isAudioCall;a=a.userMediaRequest;return a.state===b("RTCUserMediaRequestState").REJECTED?b("React").createElement(b("React").Fragment,null,b("React").createElement("h1",{className:"_5b03"},c?h._("An Error occured when trying to get access to Microphone:"):h._("An Error occured when trying to get access to Camera and\/or Microphone:")),b("React").createElement("p",{className:"_4x0t"},b("MediaAccessErrorParser").printUserMediaRequestError(a.error))):b("React").createElement("h1",{className:"_5b03"},c?h._("Please Allow Microphone Access"):h._("Please Allow Camera and Microphone Access"))},k=function(a){a=a.isAudioCall;return b("React").createElement(b("React").Fragment,null,b("React").createElement("p",{className:"_5b2y"},a?h._("To make a call on Facebook, you need to turn your microphone on. This will let people hear you during the call."):h._("To make a call on Facebook, you need to turn your camera and microphone on. This will let people see and hear you during the call.")),b("React").createElement("p",{className:"_5b2y"},a?h._("You can turn this off later."):h._("You can turn these off later.")," ",b("React").createElement(b("Link.react"),{href:b("FBRTCConfig").userMediaPermissionErrorUrl(),target:"_blank"},h._("Learn more"))))};e.exports=a}),null);
__d("FBRTCGroupCallFixedHeightGridViewUtils",["FBRTCConstants","getViewportDimensions","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").Orientation;function h(){this.users=[],this.numUnits=0}function a(a){return a.sort(function(a,b){return a.user.FBID.localeCompare(b.user.FBID)})}var i={FixedHeightGridRow:h,calculateUnitDimensions:function(a){var c=a.filter(function(a){return a.numUnits>0}).length;a=a[0].numUnits;var d=b("getViewportDimensions").withoutScrollbars(),e=d.width;d=d.height;d=d/c;c=d*3/4;c*a>=e&&(c=e/a,d=c*4/3);return{unitHeight:d,unitWidth:c}},getWindowIsLandscape:function(){var a=b("getViewportDimensions").withoutScrollbars();return a.width>a.height},setUpGrid:function(a,b,c){__p&&__p();var d=[new h(),new h(),new h(),new h()];if(c){if(a.length===0&&(b.length===2||b.length===3)){d[0].users=b;d[0].numUnits=b.length;return d}if(a.length===1&&b.length===1){d[0].users.push(a[0]);d[0].users.push(b[0]);d[0].numUnits=3;return d}if(a.length<6){c=Math.ceil(a.length/2);d[0].users=a.slice(0,c);d[0].numUnits=c*2;d[1].users=a.slice(c);d[1].numUnits=(a.length-c)*2}else d[0].users=a.slice(0,3),d[0].numUnits=3*2,d[1].users=a.slice(3,6),d[1].numUnits=3*2,d[2].users=a.slice(6),d[2].numUnits=(a.length-6)*2;b.forEach(function(a,b){d[1].numUnits<d[0].numUnits?(d[1].users.push(a),d[1].numUnits+=1):d[0].numUnits<6||d[1].numUnits<6?b%2===0?(d[0].users.push(a),d[0].numUnits+=1):(d[1].users.push(a),d[1].numUnits+=1):(d[2].users.push(a),d[2].numUnits+=1)});return d}else if(a.length*2+b.length<=6){a.forEach(function(a,b){d[b].users.push(a),d[b].numUnits=2});c=a.length;for(var e=0;e<b.length;e+=2)d[c].users.push(b[e]),d[c].numUnits+=1,b[e+1]&&(d[c].users.push(b[e+1]),d[c].numUnits+=1,c++);return d}else{e=0;for(var c=0;c<a.length;c+=2)d[e].users.push(a[c]),d[e].numUnits+=2,a[c+1]&&(d[e].users.push(a[c+1]),d[e].numUnits+=2,e++);for(var c=0;c<b.length;c++)d[e].numUnits>=4&&e++,d[e].users.push(b[c]),d[e].numUnits+=1;return d}},sortRTCUserAndOrientation:a,getFixedHeightGridRows:function(a){var b=[],c=[];a.forEach(function(a){a.orientation===g.LANDSCAPE?b.push(a):c.push(a)});return i.setUpGrid(i.sortRTCUserAndOrientation(b),i.sortRTCUserAndOrientation(c),i.getWindowIsLandscape())},getOrientationsForUsers:function(a,b){__p&&__p();var c=[],d=[];a.forEach(function(a){var e=b.find(function(b){return b.user.FBID===a.FBID});if(e!==undefined)c.push({orientation:e.orientation,user:a});else{e=a.getStream();e=e!==undefined&&e!==null&&!a.areAllTracksMuted(e.getVideoTracks());e?d.push(a):c.push({orientation:g.PORTRAIT,user:a})}});return{usersWithOrientation:c,usersWithoutOrientation:d}},onUserOrientationChanged:function(a,b){var c=b,d=a.orientation,e=a.user,f=b.findIndex(function(a){return a.user.FBID===e.FBID});f===-1?c=b.push(a):d!==b.get(f).orientation&&(c=b.splice(f,1,a));return c}};e.exports=i}),null);
__d("RTCUIVideo.react",["cx","invariant","FBLogger","FBRTCUtils","React","RTWebUserActionLogger","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$3=function(a){this.$1=a,this.props.videoRef&&this.props.videoRef(this.$1)}.bind(this),b}a.prototype.render=function(){var a=this.props;a.audioSinkID;a.stream;var c=a.className;a=babelHelpers.objectWithoutProperties(a,["audioSinkID","stream","className"]);return b("React").createElement("video",babelHelpers["extends"]({autoPlay:!0,className:b("joinClasses")("_1yvx",c),onContextMenu:this.$2,ref:this.$3},a))};a.prototype.componentDidMount=function(){j(this.$1,this.props.stream),k(this.$1,this.props.audioSinkID)};a.prototype.componentDidUpdate=function(a){this.props.stream!==a.stream&&j(this.$1,this.props.stream),this.props.audioSinkID!==a.audioSinkID&&k(this.$1,this.props.audioSinkID)};a.prototype.$2=function(a){a.preventDefault()};a.defaultProps={muted:!1};function j(a,c){if(a==null||c==null)return;try{b("FBRTCUtils").attachMediaStream(a,c)}catch(a){b("RTWebUserActionLogger").logError({errorDomain:"video_attach_media_stream_error",errorType:a.toString()}),b("FBLogger")("rtc_www").catching(a).warn("Encountered error while calling attachMediaStream")}}function k(a,c){if(!b("FBRTCUtils").supportsSetSink()||a==null||c==null||c==="")return;try{typeof a.setSinkId==="function"||h(0,3783),a.setSinkId(c)}catch(a){b("FBLogger")("rtc_www").catching(a).warn("Encountered error while calling attachAudioSink")}}e.exports=a}),null);
__d("RTCVideoWithUserAndOrientation.react",["FBLogger","FBRTCConstants","React","RTCUIVideo.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("FBRTCConstants").Orientation,i=1e3;c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.videoRef=function(a){this.$1=a}.bind(this),this.checkOrientation=function(){if(this.$1!=null){var a=this.$1,c=a.videoHeight;a=a.videoWidth;if(c!=null&&a!=null){a=a>c?h.LANDSCAPE:h.PORTRAIT;a!==this.$3&&(this.props.onOrientationChanged({user:this.props.user,orientation:a}),this.$3=a)}else b("FBLogger")("rtc_www").warn("Unable to get video dimension")}}.bind(this),c}a.prototype.componentDidMount=function(){this.$2=window.setInterval(this.checkOrientation,i)};a.prototype.componentWillUnmount=function(){window.clearInterval(this.$2)};a.prototype.render=function(){var a=this.props;a.user;a.onOrientationChanged;a=babelHelpers.objectWithoutProperties(a,["user","onOrientationChanged"]);return b("React").createElement(b("RTCUIVideo.react"),babelHelpers["extends"]({videoRef:this.videoRef},a))};e.exports=a}),null);
__d("RTCIncallGridItem.react",["cx","fbt","Image.react","React","RTCIncallAudio.react","RTCVideoWithUserAndOrientation.react","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){var c=a.user,d=a.style,e=c.getStream(),f=e!==undefined&&e!==null&&!c.areAllTracksMuted(e.getVideoTracks());return f?b("React").createElement("div",{className:"_74kp",style:d},b("React").createElement(b("RTCVideoWithUserAndOrientation.react"),{className:"_6qk5","data-testid":b("VideoCallWebDriverIDs").RTC_INCALL_VIDEO,onOrientationChanged:a.onUserOrientationChanged,stream:e,user:c})):b("React").createElement("div",{className:"_2_gq _74kp",style:d},b("React").createElement(b("Image.react"),{className:"_2_gr",src:c.profilePictureUrl}),b("React").createElement(b("Image.react"),{alt:h._("Profile Picture"),className:"_2_gs",src:c.profilePictureUrl}),b("React").createElement("p",{className:"_5ka3"},h._("{name}'s camera is off",[h._param("name",c.userShortName)])),b("React").createElement(b("RTCIncallAudio.react"),{mediaStream:e}))};e.exports=a}),null);
__d("FBRTCGroupCallFixedHeightGridView.react",["cx","FBRTCConstants","FBRTCGroupCallFixedHeightGridViewUtils","React","RTCIncallGridItem.react","RTCVideoWithUserAndOrientation.react","immutable","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("FBRTCConstants").Orientation,j=b("FBRTCGroupCallFixedHeightGridViewUtils").calculateUnitDimensions,k=b("FBRTCGroupCallFixedHeightGridViewUtils").getFixedHeightGridRows,l=b("FBRTCGroupCallFixedHeightGridViewUtils").getOrientationsForUsers,m=b("FBRTCGroupCallFixedHeightGridViewUtils").onUserOrientationChanged;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={userAndOrientationList:b("immutable").List()},this.$1=b("throttle")(function(){this.forceUpdate()}.bind(this),300),this.$2=function(a){var b=this.state.userAndOrientationList;a=m(a,b);this.setState({userAndOrientationList:a})}.bind(this),c}a.prototype.componentDidMount=function(){window.addEventListener("resize",this.$1)};a.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.$1)};a.prototype.render=function(){var a=l(this.props.remoteUsers.toArray(),this.state.userAndOrientationList.toArray()),c=a.usersWithOrientation;a=a.usersWithoutOrientation;return b("React").createElement("div",{className:"_6ots"+(this.props.hidden?" hide":"")},b("React").createElement("div",{className:"hidden_elem"},b("React").createElement(n,{onUserOrientationChanged:this.$2,users:a})),b("React").createElement("div",{className:"_74km"},b("React").createElement(o,{onUserOrientationChanged:this.$2,users:c})))};function n(a){return a.users.map(function(c){var d=c.getStream();return b("React").createElement(b("RTCVideoWithUserAndOrientation.react"),{key:c.FBID,onOrientationChanged:a.onUserOrientationChanged,stream:d,user:c})})}function o(a){var c=k(a.users),d=j(c),e=d.unitHeight,f=d.unitWidth,g={gridTemplateRows:e},h=[];c.forEach(function(c,d){if(c.users.length===0)return;h.push(b("React").createElement("div",{className:"_6ppt",key:d,style:babelHelpers["extends"]({},g,{gridTemplateColumns:(f+"px ").repeat(c.numUnits),width:f*c.numUnits+"px"})},b("React").createElement(p,{onUserOrientationChanged:a.onUserOrientationChanged,users:c.users})))});return h}function p(a){var c=1;return a.users.map(function(d){var e={};d.orientation===i.LANDSCAPE?(e={gridColumnStart:c.toString(),gridColumnEnd:(c+2).toString()},c+=2):c+=1;return b("React").createElement(b("RTCIncallGridItem.react"),{key:d.user.FBID,onUserOrientationChanged:a.onUserOrientationChanged,style:e,user:d.user})})}e.exports=a}),null);
__d("RTCIncallVideo.react",["cx","FBRTCVideo.react","React","RTCMediaStreamReadyContainer.react","VideoCallWebDriverIDs","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PureComponent;d=babelHelpers.inherits(a,c);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=null,this.state={mounted:!1},this.$2=function(a){var c=this.props,d=c.audioSinkID,e=c.className,f=c.mediaStream,g=c.muted;c=babelHelpers.objectWithoutProperties(c,["audioSinkID","className","mediaStream","muted"]);return b("React").createElement("div",babelHelpers["extends"]({className:b("joinClasses")(e,"_chh"+(a&&!g&&this.state.mounted?" active":""))},c),b("React").createElement(b("FBRTCVideo.react"),babelHelpers["extends"]({"data-testid":b("VideoCallWebDriverIDs").RTC_INCALL_VIDEO},{audioSinkID:d,mediaStream:f})),this.props.children)}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("RTCMediaStreamReadyContainer.react"),{mediaStream:this.props.mediaStream},this.$2)};a.prototype.componentWillUnmount=function(){window.clearTimeout(this.$1)};a.prototype.componentDidMount=function(){this.$1=window.setTimeout(function(){return this.setState({mounted:!0})}.bind(this))};a.defaultProps={muted:!1};e.exports=a}),null);
__d("FBRTCGroupCallIncallVideo.react",["cx","fbt","Image.react","React","RTCIncallAudio.react","RTCIncallVideo.react","RTWebClientFeatureGating"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){var c=a.displayNone;c=c===void 0?!1:c;var d=a.isAudioCall;d=d===void 0?!1:d;a=a.user;var e=a.getStream();return e&&!a.areAllTracksMuted(e.getVideoTracks())?b("React").createElement(b("RTCIncallVideo.react"),{className:"_5k9_"+(c?" none":""),mediaStream:e}):b("React").createElement("div",{className:"_5k9_"+(c?" none":"")+(d&&!b("RTWebClientFeatureGating").callUnification()?" hidden":"")},b("React").createElement("div",{className:"_2_gq"},b("React").createElement(b("Image.react"),{className:"_2_gr",src:a.profilePictureUrl}),b("React").createElement(b("Image.react"),{alt:h._("Profile Picture"),className:"_2_gs",src:a.profilePictureUrl}),b("React").createElement("p",{className:"_5ka3"},d?h._("{name}",[h._param("name",a.userName)]):h._("{name}'s camera is off",[h._param("name",a.userShortName)])),b("React").createElement(b("RTCIncallAudio.react"),{mediaStream:e})))};e.exports=a}),null);
__d("XFacebookMessengerInboxController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/t/{?thread_key}/",{thread_key:{type:"String"},mid:{type:"String"},ref:{type:"String"},ds:{type:"Int"},sender:{type:"Bool",defaultValue:!1},hide_header:{type:"Bool",defaultValue:!1}})}),null);
__d("XMessengerDotComMainController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/t/{?thread_key}/",{thread_key:{type:"String"},mid:{type:"String"},ref:{type:"String"},messaging_source:{type:"Enum",enumType:1},game:{type:"String"}})}),null);
__d("FBRTCGroupCallUserPopoverMenu.react",["cx","fbt","MessengerMenu.react","MessengerPopoverMenu.react","React","URI","XFacebookMessengerInboxController","XMessengerDotComMainController","isMessengerDotComURI"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerMenu.react").Item,j=b("MessengerMenu.react").Separator;a=function(a){var c=a.children,d=a.user;a=b("React").createElement(b("MessengerMenu.react"),{className:"_2vmq"},b("React").createElement(i,{label:d.userName,disabled:!0}),b("React").createElement(j,null),b("React").createElement(i,{label:h._("Message"),onclick:function(){return k(d.FBID)}}),b("React").createElement(i,{label:h._("View Profile"),onclick:function(){return l(d.profileUrl)}}));return b("React").createElement(b("MessengerPopoverMenu.react"),{menu:a},c)};function k(a){var c=b("isMessengerDotComURI")(b("URI").getRequestURI())?b("XMessengerDotComMainController"):b("XFacebookMessengerInboxController");window.open(c.getURIBuilder().setString("thread_key",a).getURI())}function l(a){a&&window.open(a)}e.exports=a}),null);
__d("RTCRemoteViewPopoverMenuButton.react",["cx","FBRTCGroupCallUserPopoverMenu.react","React","RTCSVGIcon.react","ShimButton.react"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){a=a.user;return b("React").createElement(b("FBRTCGroupCallUserPopoverMenu.react"),{user:a},b("React").createElement(b("ShimButton.react"),{className:"_1b12",onClick:h,role:"presentation"},b("React").createElement(b("RTCSVGIcon.react"),null,b("React").createElement("svg",{viewBox:"-10 -6 24 24"},b("React").createElement("path",{d:"M2.157 11.057c-1.013 0-1.843.83-1.843 1.843 0 1.014.83 1.843 1.843 1.843C3.17 14.743 4 13.913 4 12.9c0-1.014-.83-1.843-1.843-1.843zm0-1.843C3.17 9.214 4 8.384 4 7.37c0-1.012-.83-1.84-1.843-1.84S.314 6.357.314 7.37c0 1.015.83 1.844 1.843 1.844zm0-5.528C3.17 3.686 4 2.856 4 1.843 4 .83 3.17 0 2.157 0S.314.83.314 1.843s.83 1.843 1.843 1.843z"})))))};function h(a){a.stopPropagation()}e.exports=a}),null);
__d("FBRTCGroupCallIncallView.react",["cx","FBRTCConstants","FBRTCGroupCallFixedHeightGridView.react","FBRTCGroupCallFluidGridView.react","FBRTCGroupCallIncallVideo.react","FBRTCGroupCallStore","FluxContainer","React","RTCRemoteViewPopoverMenuButton.react","RTWebClientFeatureGating"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").GroupVideoViewLayout,i=6;d=function(a){var c=a.dominantSpeakerFBID,d=a.isAudioCall,e=a.layout,f=a.pinnedSpeakerFBID,g=a.remoteUsers;switch(e){case h.DOMINANT_SPEAKER:a=g.find(function(a){return a.FBID===(f||c)});return a?b("React").createElement("div",{className:"_ncs"},b("React").createElement(b("FBRTCGroupCallIncallVideo.react"),{isAudioCall:d,user:a})):null;case h.GRID:return b("RTWebClientFeatureGating").fixedHeightGridView()?b("React").createElement(b("FBRTCGroupCallFixedHeightGridView.react"),{hidden:d,remoteUsers:g}):b("React").createElement(b("FBRTCGroupCallFluidGridView.react"),{hidden:b("RTWebClientFeatureGating").callUnification()?g.size<1:d,remoteUsers:g,renderUser:function(a){return b("React").createElement("div",{className:"_2rik"},b("React").createElement(b("FBRTCGroupCallIncallVideo.react"),{isAudioCall:d,user:a}),b("React").createElement("div",{className:g.size>1?"_2ril":null},b("React").createElement(b("RTCRemoteViewPopoverMenuButton.react"),{user:a})))}});default:return b("React").createElement("div",{className:"_ncs"},g.map(function(a,c){return b("React").createElement(b("FBRTCGroupCallIncallVideo.react"),{displayNone:c>=i,isAudioCall:d,key:a.FBID,user:a})}))}};function a(){return[b("FBRTCGroupCallStore")]}function c(a,c){a===void 0&&({});a=b("FBRTCGroupCallStore").getState();var d=a.dominantSpeakerFBID;a=a.pinnedSpeakerFBID;return babelHelpers["extends"]({dominantSpeakerFBID:d,pinnedSpeakerFBID:a},c)}e.exports=b("FluxContainer").createFunctional(d,a,c,{withProps:!0})}),null);
__d("RTCCallConnectionStatus.react",["cx","fbt","FBRTCCallTimer.react","FDSSpinner.react","React","RTCP2PConnectionStatus","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PureComponent;i=babelHelpers.inherits(a,c);i&&i.prototype;a.prototype.render=function(){var a=this.props,c=a.children,d=a.className;a=babelHelpers.objectWithoutProperties(a,["children","className"]);return b("React").createElement("div",babelHelpers["extends"]({className:b("joinClasses")(d,"_46la")},a),c!=null?c:this.$2())};a.prototype.$2=function(){__p&&__p();switch(this.props.connectionStatus){case b("RTCP2PConnectionStatus").CONTACTING:return h._("Contacting...");case b("RTCP2PConnectionStatus").RINGING:return h._("Ringing...");case b("RTCP2PConnectionStatus").CONNECTING:return h._("Connecting...");case b("RTCP2PConnectionStatus").ESCALATING_TO_BJN:return b("React").createElement("div",null,h._("Please wait..."),"  ",b("React").createElement(b("FDSSpinner.react"),{size:"small"}));case b("RTCP2PConnectionStatus").RECONNECTING:return h._("Reconnecting...");case b("RTCP2PConnectionStatus").CONNECTED:this.$1||(this.$1=Math.floor(Date.now()/1e3));return b("React").createElement(b("FBRTCCallTimer.react"),{start:this.$1});case b("RTCP2PConnectionStatus").DISCONNECTED:return h._("Call Ended");default:return null}};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("RTCCallStateInfo.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.children,d=a.className;a=babelHelpers.objectWithoutProperties(a,["children","className"]);return b("React").createElement("div",babelHelpers["extends"]({className:b("joinClasses")("_2_my",d)},a),c)};e.exports=a}),null);
__d("RTCGroupCallPeerImage.react",["cx","CurrentUser","MercuryParticipantsImage.react","MessengerProfileImageWrapperReact.bs","MessengerThreadImageReact.bs","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerProfileImageWrapperReact.bs").jsComponent,i=b("MessengerThreadImageReact.bs").jsComponent;function a(a){if(j(a))return null;var c=a.participants.filter(function(a,b){return!a.is_parties_user}),d=Array.from(a.participants.filter(function(a,b){return a.is_parties_user}).map(function(a,b){return a.image_src}).values());return a.thread?b("React").createElement(i,{className:b("joinClasses")(a.className,"_4j_j"),participants:a.participants,size:100,thread:a.thread,viewer:b("CurrentUser").getID()}):b("React").createElement(h,{className:"_4j_j",showBadge:!1,size:100},b("React").createElement(b("MercuryParticipantsImage.react"),{participants:Object.keys(c.toJS()),partiesProfileImages:d,size:100}))}function j(a){return!!(a.participants.size<=1&&a.linkHash)}e.exports=a}),null);
__d("AudioContextSingleton",["FBLogger"],(function(a,b,c,d,e,f){var g=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,h=null;a={get:function(){h==null&&(h=new g());h.state==="closed"&&(b("FBLogger")("project").warn("AudioContext Singleton has been closed"),h=new g());return h}};e.exports=a}),null);
__d("RTCCallUser.react",["cssVar","cx","fbt","AudioContextSingleton","DOM","FBRTCParticipantCallState","MessengerContactImage.react","React","ReactDOM","RTWebUserActionLogger","Tooltip"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("React").PureComponent;var k="rgba(0, 132, 255, 0.5)",l=48,m=100;d=babelHelpers.inherits(a,c);j=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.state={audioLevel:0},this.$1=b("DOM").create("div"),this.$2=!1,this.$3=null,this.$4=null,c}a.prototype.componentDidMount=function(){this.$5(),this.$6()};a.prototype.componentDidUpdate=function(a){a=a.user;var b=this.props.user.participantState;a=a.participantState;this.$5();if(!this.props.isP2PCall){if(!b||!a)return;b.state!==a.state&&this.$6()}};a.prototype.componentWillUnmount=function(){this.$7()};a.prototype.render=function(){return this.props.isP2PCall?this.$8():this.$9()};a.prototype.$8=function(){var a=this.props.user.getMeetingID()!==null;a=a?i._("Joining the Meeting ID {meetingID}",[i._param("meetingID",this.props.user.getMeetingID())]):this.props.user.userName;return b("React").createElement("div",{className:"_6hu4"},b("React").createElement("div",{className:"_6hu5",style:{boxShadow:"0 0 0 "+this.state.audioLevel+"px "+k}},b("React").createElement(b("MessengerContactImage.react"),{className:"_6hu6",ref:function(a){this.$4=a}.bind(this),size:m,src:this.props.user.profilePictureUrl})),b("React").createElement("p",{className:"_dzt"},a))};a.prototype.$9=function(){var a=this.props.user.participantState;return!this.props.isLocal&&!a?null:b("React").createElement("div",{className:"_6hu5",style:{boxShadow:"0 0 0 "+this.state.audioLevel+"px "+k}},b("React").createElement(b("MessengerContactImage.react"),{className:"_6hu6"+(!this.props.isLocal&&a&&a.state!==b("FBRTCParticipantCallState").CONNECTED?" _6htk":""),ref:function(a){this.$4=a}.bind(this),size:l,src:this.props.user.profilePictureUrl}))};a.prototype.$6=function(){if(this.props.isP2PCall||this.props.isLocal)return;b("ReactDOM").render(b("React").createElement("div",{className:"_6htl"},b("React").createElement("div",{className:"_6htm"},this.props.user.userName),b("React").createElement("div",{className:"_6htn"},b("React").createElement(n,{isP2PCall:this.props.isP2PCall,participantState:this.props.user.participantState}))),this.$1);b("Tooltip").set(b("ReactDOM").findDOMNode(this.$4),this.$1,"above","center")};a.prototype.$5=function(){__p&&__p();var a=this.props.user;a=a.getStream();if(!this.$2&&a&&a.getAudioTracks().length>0)try{var c=b("AudioContextSingleton").get();a=c.createMediaStreamSource(a);c=c.createAnalyser();var d=new Uint8Array(c.frequencyBinCount);a.connect(c);this.$2=!0;this.$10(c,d)}catch(a){this.$7(),b("RTWebUserActionLogger").logErrorOnceforDomain("RTCCallUser__startAnimation_failed",a)}};a.prototype.$7=function(){this.$2=!1,window.cancelAnimationFrame(this.$3)};a.prototype.$10=function(a,c){__p&&__p();this.$3=window.requestAnimationFrame(function(){__p&&__p();if(this.$2){a.getByteFrequencyData(c);try{var d=0;c.forEach(function(a){d+=a});this.setState({audioLevel:Math.floor(d/a.frequencyBinCount/256*40)});this.$10(a,c)}catch(a){b("RTWebUserActionLogger").logErrorOnceforDomain("RTCCallUser_animate_failure",a),this.$7()}}}.bind(this))};var n=function(a){__p&&__p();if(a.isP2PCall)return null;if(a.participantState==null)return null;switch(a.participantState.state){case b("FBRTCParticipantCallState").CONTACTING:return i._("Contacting...");case b("FBRTCParticipantCallState").RINGING:return i._("Ringing...");case b("FBRTCParticipantCallState").CONNECTING:return i._("Connecting...");case b("FBRTCParticipantCallState").CONNECTED:return i._("Connected");default:return null}};e.exports=a}),null);
__d("RTCGroupCallDraggableComponent.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PureComponent;var h=5;d=babelHelpers.inherits(a,c);g=d&&d.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$2=!1,this.$3=0,this.$4=0,this.$5=0,this.$10=function(a){a&&(this.$1=a)}.bind(this),this.$8=function(a){this.$2&&(a.stopPropagation(),this.$2=!1)}.bind(this),this.$9=function(a){var b=a.clientX;a=a.clientY;this.$1&&(this.$3=b,this.$4=a,this.$5=this.$1.scrollLeft+b,document.addEventListener("mousemove",this.$6),document.addEventListener("mouseup",this.$7))}.bind(this),this.$6=function(a){var b=a.clientX;a=a.clientY;this.$1&&(this.$1.scrollLeft=this.$5-b,(Math.abs(b-this.$3)>h||Math.abs(a-this.$4)>h)&&(this.$2=!0))}.bind(this),this.$7=function(){document.removeEventListener("mousemove",this.$6),document.removeEventListener("mouseup",this.$7)}.bind(this),b}a.prototype.componentWillUnmount=function(){document.removeEventListener("mousemove",this.$6),document.removeEventListener("mouseup",this.$7)};a.prototype.render=function(){return b("React").createElement("div",{className:this.props.className,onClickCapture:this.$8,onMouseDown:this.$9,ref:this.$10},this.props.children)};e.exports=a}),null);
__d("RTCGroupCallRosterRow.react",["cx","FBRTCGroupCallUserPopoverMenu.react","FBRTCParticipantCallState","React","RTCCallUser.react","RTCGroupCallDraggableComponent.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){var c=a.localUser;a=a.remoteUsers;return b("React").createElement(b("RTCGroupCallDraggableComponent.react"),{className:"_1a8c"},a.filter(function(a){return h(a.participantState)}).map(function(a){return b("React").createElement(b("FBRTCGroupCallUserPopoverMenu.react"),{key:a.FBID,user:a},b("React").createElement(b("RTCCallUser.react"),{isLocal:!1,isP2PCall:!1,user:a}))}),b("React").createElement(b("RTCCallUser.react"),{isLocal:!0,isP2PCall:!1,user:c}))};function h(a){if(a)switch(a.state){case b("FBRTCParticipantCallState").CONTACTING:case b("FBRTCParticipantCallState").RINGING:case b("FBRTCParticipantCallState").CONNECTING:case b("FBRTCParticipantCallState").CONNECTED:return!0}return!1}e.exports=a}),null);
__d("RTCGroupCallStateInfo.react",["cx","fbt","CurrentUser","FBRTCCallTimer.react","FBRTCParticipantCallState","MercuryThreadTitle.react","React","RTCAppSpinner.react","RTCCallTitle.react","RTCConferenceState","RTCGroupCallPeerImage.react","RTCGroupCallRosterRow.react","RTWebClientFeatureGating"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PureComponent;var j=b("RTWebClientFeatureGating").callUnification();function k(a){return a.conferenceState===b("RTCConferenceState").AWAITING_USER_START?b("React").createElement("p",{className:(j?"":"_fjp")+(j?" _6to4":"")},h._("Ready to call {name}?",[h._param("name",a.thread?b("React").createElement(b("MercuryThreadTitle.react"),{thread:a.thread,viewer:b("CurrentUser").getID()}):b("React").createElement(b("RTCCallTitle.react"),{participants:a.participants,viewer:b("CurrentUser").getID()}))])):b("React").createElement("p",{className:(j?"":"_fjp")+(j?" _6to4":"")},a.thread?b("React").createElement(b("MercuryThreadTitle.react"),{thread:a.thread,viewer:b("CurrentUser").getID()}):b("React").createElement(b("RTCCallTitle.react"),{participants:a.participants,viewer:b("CurrentUser").getID()}))}function l(a){var c=a.callMessage;return b("React").createElement("p",{className:(j?"":"_fjq")+(j?" _6to5":"")},c||b("React").createElement(m,babelHelpers["extends"]({start:a.start},a)))}function m(a){switch(a.conferenceState){case b("RTCConferenceState").CONNECTING:return a.linkHash?h._("Waiting for others to join..."):h._("Contacting...");case b("RTCConferenceState").CONNECTED:return a.start>0?b("React").createElement(b("FBRTCCallTimer.react"),{start:a.start}):null;case b("RTCConferenceState").TERMINATING:return h._("Hanging up...");case b("RTCConferenceState").TERMINATED:return h._("Call Ended");case b("RTCConferenceState").NEW:return b("React").createElement(b("RTCAppSpinner.react"),null);default:return null}}function n(a){return a.conferenceState!==b("RTCConferenceState").CONNECTING&&a.conferenceState!==b("RTCConferenceState").CONNECTED?null:b("React").createElement("div",{className:"_5-tc"},b("React").createElement(b("RTCGroupCallRosterRow.react"),{localUser:a.localUser,remoteUsers:a.remoteUsers}))}d=babelHelpers.inherits(a,c);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={start:0},b}a.getDerivedStateFromProps=function(a,c){var d=a.conferenceState;a=a.initialStartTime;a=a||Date.now();return c.start===0&&d===b("RTCConferenceState").CONNECTED?babelHelpers["extends"]({},c,{start:Math.floor(a/1e3)}):null};a.prototype.render=function(){var a=this.props,c=a.remoteUsers.filter(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED});c=b("RTWebClientFeatureGating").callUnification()?c.size>=1:!a.isAudioCall&&a.conferenceState!==b("RTCConferenceState").TERMINATED;return c?null:b("React").createElement("div",{className:"_4j_i"},b("React").createElement(b("RTCGroupCallPeerImage.react"),a),b("React").createElement(k,a),b("React").createElement(l,babelHelpers["extends"]({start:this.state.start},a)),b("React").createElement(n,a))};e.exports=a}),null);
__d("RTCFeedbackView.react",["cx","fbt","AbstractTextArea.react","FDSDropdownSelector.react","FDSDropdownSelectorOption.react","React","RTCCallActions","RTCDialog.react","RTCDialogBody.react","RTCDialogHeader.react","RTCDialogHeaderButton.react","RTWebClientFeatureGating","immutable","keyMirror"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PureComponent;function j(a){return b("React").createElement(b("RTCDialogHeader.react"),null,b("React").createElement("h1",{className:"_10mm"},h._("Give Feedback")),b("React").createElement(b("RTCDialogHeaderButton.react"),{label:h._("Not Now"),onClick:a.onCancel}),b("React").createElement(b("RTCDialogHeaderButton.react"),{disabled:!a.submitEnabled,label:h._("Submit"),onClick:a.onSubmit}))}var k=b("keyMirror")({AUDIO_ISSUE:null,VIDEO_ISSUE:null,DEVICE_ISSUE:null});function l(a){return a.keySeq().toArray().map(function(c){return b("React").createElement(b("FDSDropdownSelectorOption.react"),{key:c,value:c},a.get(c))})}function m(a){return a.keySeq().toArray().map(function(c){return b("React").createElement(b("FDSDropdownSelectorOption.react"),{key:c,value:c},a.get(c))})}function n(a){var c;c=a.isAudioCall?b("immutable").Map((c={},c[k.AUDIO_ISSUE]=h._("Audio issue"),c[k.DEVICE_ISSUE]=h._("Device issue"),c)):b("immutable").Map((c={},c[k.AUDIO_ISSUE]=h._("Audio issue"),c[k.VIDEO_ISSUE]=h._("Video issue"),c[k.DEVICE_ISSUE]=h._("Device issue"),c));var d={};d[k.AUDIO_ISSUE]=b("immutable").Map({audio_volume_low:h._("Volume on my device was too low"),audio_no_audio:h._("I couldn't hear audio at all"),audio_echo:h._("The audio echoed"),audio_background_noise:h._("The background noise was too loud"),audio_robotic:h._("The audio was robotic or distorted"),audio_lagged:h._("The audio lagged")});d[k.VIDEO_ISSUE]=b("immutable").Map({video_av_sync:h._("Audio didn't match video"),video_froze:h._("The video froze"),video_blurry:h._("The video was blurry or pixelated"),video_no_video:h._("I saw a dark screen instead of video"),video_cut_out:h._("Audio cut out while video continued")});d[k.DEVICE_ISSUE]=b("immutable").Map({device_battery_drained:h._("The call drained my battery"),device_temp_hot:h._("My device got hot"),device_slowed:h._("My device was slow during the call")});return b("React").createElement(b("RTCDialogBody.react"),null,b("RTWebClientFeatureGating").endCallSurveyDropdownOptions()?b("React").createElement("div",null,b("React").createElement(b("FDSDropdownSelector.react"),{onChange:a.generalIssueOnChange,placeholder:h._("What was the biggest issue with your call?"),value:a.generalIssueValue},l(c)),b("React").createElement("br",null),b("React").createElement("br",null),a.generalIssueValue?b("React").createElement("div",null,b("React").createElement(b("FDSDropdownSelector.react"),{onChange:a.specificIssuesOnChange,placeholder:h._("What issues were you having?"),value:a.specificIssuesValue},m(d[a.generalIssueValue])),b("React").createElement("br",null),b("React").createElement("br",null)):null):null,b("React").createElement(b("AbstractTextArea.react"),{className:"_6162",onChange:a.textAreaOnChange,placeholder:h._("Describe the problem..."),value:a.textAreaValue}))}d=babelHelpers.inherits(a,c);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={generalIssue:null,feedbackMessage:null,specificIssues:null},this.$1=function(){this.props.rating!=null&&b("RTCCallActions").submitRating(this.props.rating),this.props.onDone()}.bind(this),this.$2=function(){this.props.rating!=null&&b("RTCCallActions").submitRating(this.props.rating),this.state.feedbackMessage&&b("RTCCallActions").submitFeedback(this.state.feedbackMessage),this.state.specificIssues?b("RTCCallActions").submitSurveyChoice(this.state.specificIssues):this.state.generalIssue&&b("RTCCallActions").submitSurveyChoice(this.state.generalIssue.toLowerCase()),this.props.onDone()}.bind(this),c}a.prototype.render=function(){return b("React").createElement("section",null,b("React").createElement(b("RTCDialog.react"),{height:447,hideOnEscape:!1,label:"Video call feedback",layerHideOnBlur:!1,width:544},b("React").createElement(j,{onCancel:this.$1,onSubmit:this.$2,submitEnabled:this.state.feedbackMessage!=null&&this.state.feedbackMessage.length>0}),b("React").createElement(n,{generalIssueOnChange:function(a){return this.setState({generalIssue:a})}.bind(this),generalIssueValue:this.state.generalIssue,isAudioCall:this.props.isAudioCall,specificIssuesOnChange:function(a){return this.setState({specificIssues:a})}.bind(this),specificIssuesValue:this.state.specificIssues,textAreaOnChange:function(a){return this.setState({feedbackMessage:a.target.value})}.bind(this),textAreaValue:this.state.feedbackMessage})))};e.exports=a}),null);
__d("RTCTextButton.react",["cx","AbstractButton.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.className;a=babelHelpers.objectWithoutProperties(a,["className"]);return b("React").createElement(b("AbstractButton.react"),babelHelpers["extends"]({className:b("joinClasses")(c,"_5lc4")},a))};e.exports=a}),null);
__d("RTCStarRating.react",["cx","fbt","React","RTCCallActions","RTCCallStore","RTCFeedbackView.react","RTCStarRatingInput.react","RTCTextButton.react","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;a=b("React").PureComponent;function j(a){return b("React").createElement("p",{className:a.isConfirmed?"_66tb":"_4a-c"},a.ratingText)}c=babelHelpers.inherits(k,a);i=c&&c.prototype;function k(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={confirmedRating:null,previewRating:null,promptFeedback:!1},this.$3=function(a){this.setState({previewRating:a})}.bind(this),this.$2=function(a){b("RTWebUserActionLogger").logClick({callID:b("RTCCallStore").getState().callInfo.callID,component:b("RTWebLoggingComponent").STAR_RATING,conferenceName:b("RTCCallStore").getState().callInfo.conferenceName,surface:b("RTWebLoggingSurface").STAR_RATING_SURFACE}),this.setState({confirmedRating:a})}.bind(this),this.$5=function(){b("RTWebUserActionLogger").logClick({callID:b("RTCCallStore").getState().callInfo.callID,component:b("RTWebLoggingComponent").NOT_NOW,conferenceName:b("RTCCallStore").getState().callInfo.conferenceName,surface:b("RTWebLoggingSurface").STAR_RATING_SURFACE}),this.props.onDone(),this.props.shouldCloseWindow&&window.close()}.bind(this),this.$6=function(){__p&&__p();b("RTWebUserActionLogger").logClick({callID:b("RTCCallStore").getState().callInfo.callID,component:b("RTWebLoggingComponent").SUBMIT_FEEDBACK,conferenceName:b("RTCCallStore").getState().callInfo.conferenceName,surface:b("RTWebLoggingSurface").STAR_RATING_SURFACE});if(this.state.confirmedRating!=null){if(this.state.confirmedRating<=2){this.setState({promptFeedback:!0});return}b("RTCCallActions").submitRating(this.state.confirmedRating)}this.props.onDone();this.props.shouldCloseWindow&&window.close()}.bind(this),c}k.prototype.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({callID:b("RTCCallStore").getState().callInfo.callID,component:b("RTWebLoggingComponent").STAR_RATING,conferenceName:b("RTCCallStore").getState().callInfo.conferenceName,surface:b("RTWebLoggingSurface").STAR_RATING_SURFACE}),window.setTimeout(function(){return b("RTCCallActions").ratingShown()})};k.prototype.render=function(){return this.state.promptFeedback?b("React").createElement(b("RTCFeedbackView.react"),{isAudioCall:this.props.isAudioCall,onDone:this.props.onDone,rating:this.state.confirmedRating}):b("React").createElement("section",{className:"_4a-a","data-testid":b("VideoCallWebDriverIDs").STAR_RATING_VIEW},this.$1(),b("React").createElement(b("RTCStarRatingInput.react"),{className:"_4a-b",onClick:this.$2,onHover:this.$3,rating:this.state.previewRating||this.state.confirmedRating}),b("React").createElement(j,{isConfirmed:this.state.confirmedRating!=null&&(this.state.previewRating==null||this.state.previewRating==this.state.confirmedRating),ratingText:k.SelectedRatingLabelText(this.state.previewRating||this.state.confirmedRating)}),this.$4())};k.prototype.$1=function(){var a=this.props.isAudioCall?h._("Please rate the quality of your audio call"):h._("Please rate the quality of your video call");return b("React").createElement("p",{className:"_4a-d"},a)};k.prototype.$4=function(){var a=this.props,c=a.isAudioCall;a=a.isGroupCall;return this.state.confirmedRating===null?b("React").createElement(b("RTCTextButton.react"),{className:"_4a-e hollow"+(!c&&!a?" white":"")+(c||a?" blue":""),"data-testid":b("VideoCallWebDriverIDs").STAR_RATING_NOT_NOW_BUTTON,label:h._("Not now"),onClick:this.$5}):b("React").createElement(b("RTCTextButton.react"),{className:"_4a-e"+(!c&&!a?" white":"")+(c||a?" blue":""),label:h._("Submit"),onClick:this.$6})};k.SelectedRatingLabelText=function(a){__p&&__p();var b="";switch(a){case 1:b=h._("Poor");break;case 2:b=h._("Fair");break;case 3:b=h._("Good");break;case 4:b=h._("Very Good");break;case 5:b=h._("Excellent");break}return b};k.defaultProps={shouldCloseWindow:!1};e.exports=k}),null);
__d("RTCStarRatingInput.react",["cx","React","RTCStarRating.react","RTCSVGIcon.react","TooltipLink.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PureComponent;d=babelHelpers.inherits(a,c);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={starsShown:null},this.$3=function(){this.setState({starsShown:null}),this.props.onHover(null)}.bind(this),b}a.prototype.render=function(){var a=this.props.rating,c=this.state.starsShown,d=c!=null?c:a||0;c=Array.from({length:this.props.count}).map(function(a,c){return b("React").createElement(b("TooltipLink.react"),{alignH:"center",className:"_2r1w",key:c,onClick:function(){return this.$1(c+1)}.bind(this),onMouseEnter:function(){return this.$2(c+1)}.bind(this),onMouseLeave:this.$3,position:"above"},b("React").createElement(i,{"aria-label":b("RTCStarRating.react").SelectedRatingLabelText(c+1),selected:c<d}))}.bind(this));return b("React").createElement("div",{className:b("joinClasses")("_2r1x",this.props.className)},c)};a.prototype.$2=function(a){this.setState({starsShown:a}),this.props.onHover(a)};a.prototype.$1=function(a){this.props.onClick(a)};a.defaultProps={count:5};var i=function(a){a.className;var c=a.selected;a=babelHelpers.objectWithoutProperties(a,["className","selected"]);return b("React").createElement(b("RTCSVGIcon.react"),babelHelpers["extends"]({className:"_2r1y"},a),b("React").createElement("svg",{viewBox:"0 0 25 23"},b("React").createElement("path",{d:"M12.1 1L9.5 9H1l6.9 5-2.7 8 6.9-5 6.8 5-2.6-8 6.8-5h-8.5z",fill:c?"":"none"})))};e.exports=a}),null);
__d("RTCThreadInfo.react",["cx","CurrentUser","MercuryParticipantsConstants","MercuryParticipantsImage.react","MercuryThreadTitle.react","MessengerProfileImageWrapperReact.bs","MessengerThreadImageReact.bs","React","RTCCallTitle.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerProfileImageWrapperReact.bs").jsComponent,i=b("MessengerThreadImageReact.bs").jsComponent;a=function(a){var c=a.participants;a=a.thread;return a?b("React").createElement("div",{className:"_dzr"},b("React").createElement(i,{className:"_dzs",participants:c,size:100,thread:a,viewer:b("CurrentUser").getID()}),b("React").createElement(b("MercuryThreadTitle.react"),{className:"_dzt",thread:a,viewer:b("CurrentUser").getID()})):b("React").createElement("div",{className:"_dzr"},b("React").createElement(h,{className:"_4j_j",size:b("MercuryParticipantsConstants").BIG_IMAGE_SIZE,showBadge:!1},b("React").createElement(b("MercuryParticipantsImage.react"),{participants:Object.keys(c.toJS()),size:b("MercuryParticipantsConstants").BIG_IMAGE_SIZE})),b("React").createElement(b("RTCCallTitle.react"),{className:"_dzt",participants:c,viewer:b("CurrentUser").getID()}))};e.exports=a}),null);
__d("RTCMWAppViewContent.react",["cx","fbt","CurrentUser","FBRTCGroupCallIncallView.react","FBRTCGroupCallStore","FBRTCLogger","FBRTCParticipantCallState","MessengerRTCGroupCallParticipantsPickerDialogController","React","RTCAppViewMain.react","RTCCallConnectionStatus.react","RTCCallState","RTCCallStateInfo.react","RTCConferenceState","RTCGroupCallEscalationStore","RTCGroupCallStateInfo.react","RTCRingBackTone.react","RTCStarRating.react","RTCTextButton.react","RTCThreadInfo.react","RTCUtils","VideoCallWebDriverIDs","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("FBRTCLogger").Trigger;c=b("React").PureComponent;d=babelHelpers.inherits(a,c);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={wasStarRatingDone:!1},this.$3=function(){this.setState({wasStarRatingDone:!0})}.bind(this),b}a.prototype.render=function(){__p&&__p();var a,c=this.props,d=c.endCallReason,e=c.remoteUsers;c=babelHelpers.objectWithoutProperties(c,["endCallReason","remoteUsers"]);switch(this.props.conferenceState){case b("RTCConferenceState").AWAITING_USER_START:var f=h._("Join Call"),g=(a=this.props)!=null?(a=a.thread)!=null?(a=a.rtc_call_data)!=null?a.server_info_data:a:a:a,i=(a=this.props)!=null?(a=a.thread)!=null?(a=a.rtc_call_data)!=null?a.call_state:a:a:a;i&&i===b("RTCCallState").NO_ONGOING_CALL&&(f=h._("Start Call"));return b("React").createElement(b("RTCAppViewMain.react"),{fullBleed:!1},b("React").createElement(b("RTCCallStateInfo.react"),null,b("React").createElement(b("RTCThreadInfo.react"),{participants:this.props.participants,thread:this.props.thread}),b("React").createElement(b("RTCCallConnectionStatus.react"),null,h._("Ready to call?")),b("React").createElement(b("RTCTextButton.react"),{className:"green _2fst","data-testid":b("VideoCallWebDriverIDs").RTC_APP_VIEW_START_CALL_BUTTON,label:f,onClick:function(){return this.$1(i,g)}.bind(this)})));case b("RTCConferenceState").NEW:case b("RTCConferenceState").CONNECTING:case b("RTCConferenceState").CONNECTED:case b("RTCConferenceState").TERMINATING:a=e.filter(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED});return b("React").createElement(b("RTCAppViewMain.react"),{fullBleed:!0},b("React").createElement(b("FBRTCGroupCallIncallView.react"),babelHelpers["extends"]({remoteUsers:a},c)),this.props.conferenceState===b("RTCConferenceState").CONNECTING?b("React").createElement(b("RTCRingBackTone.react"),{active:!0}):null,this.$2());case b("RTCConferenceState").TERMINATED:if(this.props.wasConnected&&!b("RTCUtils").isBonfireCall(this.props.conferenceName)&&!this.state.wasStarRatingDone)return b("React").createElement(b("RTCAppViewMain.react"),{fullBleed:!0},b("React").createElement(b("RTCStarRating.react"),{isAudioCall:!b("FBRTCGroupCallStore").hadVideoDuration(),isGroupCall:!0,onDone:this.$3}));else return b("React").createElement(b("RTCAppViewMain.react"),{fullBleed:!0},this.$2(d?d.toString():null));default:return null}};a.prototype.$2=function(a){var c=b("RTCGroupCallEscalationStore").getState();c=c.p2pCallSummary;c=c?c.getConnectedStartTime():0;return b("React").createElement(b("RTCGroupCallStateInfo.react"),babelHelpers["extends"]({callMessage:a,initialStartTime:c},this.props))};a.prototype.$1=function(a,c){a=a!==b("RTCCallState").NO_ONGOING_CALL;a?this.props.onStartCallClick(this.props.remoteUsers.toArray().map(function(a){return a.FBID}),j.MULTIWAY_POPUP_START_CALL_BUTTON):b("MessengerRTCGroupCallParticipantsPickerDialogController").render({conferenceName:this.props.conferenceName,handleCall:function(a){return this.props.onStartCallClick(a,j.MULTIWAY_POPUP_START_CALL_BUTTON,c)}.bind(this),hasVideo:!0,participants:this.props.participants.filter(function(a){a=a.fbid;return a!==b("CurrentUser").getID()}),thread:this.props.thread,trigger:j.MULTIWAY_POPUP_START_CALL_BUTTON,viewerID:b("CurrentUser").getID()})};e.exports=a}),null);
__d("RTCUIAddParticipantIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){return b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 48 48"},b("React").createElement("g",{transform:"translate(11 16)"},b("React").createElement("path",{d:"M13.21 1.644c-1.023.763-.748 1.669-.656 3.21-.421 0-.37.31-.29.709.073.364.11.838.283.838a.123.123 0 0 0 .053-.013c.604 2.518 1.073.438.712 2.73l-.292.067c-.038.136-.09.617-.293.94C8.281 12 8.24 11.397 7.8 16H24c-.441-4.603-.46-4-4.905-5.875-.203-.323-.255-.804-.293-.94l-.292-.066c-.362-2.293.082-.213.685-2.731a.12.12 0 0 0 .053.013c.174 0 .21-.474.283-.838.08-.398.146-.71-.276-.71.09-1.54.371-2.438-.595-3.209-.763-1.14-2.693-1.05-2.76-1.05 0 0-1.374.067-2.69 1.05z",fillRule:"evenodd"}),b("React").createElement("path",{d:"M5.738 4.407V0H4.463v4.407H0v1.26h4.463v4.407h1.275V5.667H10.2v-1.26z",fillRule:"evenodd"}))))};e.exports=a}),null);
__d("RTCCallControlsAddGroupMembersButton.react",["cx","fbt","React","RTCCallControlsButton.react","RTCCallNUXActions","RTCCallNUXIDs","RTCGroupCallDialogController","RTCUIAddParticipantIcon.react","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs","XUIAmbientNUX.react","immutable","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a;this.props.thread?a=h._("Add group members"):this.props.isEscalatedCall?a=h._("Add more people"):a=h._("See call participants");return b("React").createElement(b("React").Fragment,null,b("React").createElement(b("RTCCallControlsButton.react"),{className:b("joinClasses")("semiopaque icon-48",this.props.className),"data-testid":b("VideoCallWebDriverIDs").ADD_GROUP_MEMBERS_BUTTON,onClick:function(){return this.$2()}.bind(this),ref:function(a){return this.$1=a}.bind(this),title:a},b("React").createElement(b("RTCUIAddParticipantIcon.react"),null)),b("React").createElement(k,{contextRef:function(){return this.$1}.bind(this),shown:this.props.showNux}))};a.prototype.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").ADD_PARTICIPANT,conferenceState:this.props.conferenceState,surface:b("RTWebLoggingSurface").CALL_CONTROLS}),this.$3()};a.prototype.componentDidUpdate=function(){this.$3()};a.prototype.$2=function(){b("RTWebUserActionLogger").logClick({callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").ADD_PARTICIPANT,conferenceState:this.props.conferenceState,surface:b("RTWebLoggingSurface").CALL_CONTROLS}),this.props.showNux&&j(),this.$4()};a.prototype.$4=function(){var a=this.props,c=a.localUser,d=a.participants,e=a.remoteUsers;a=a.thread;b("RTCGroupCallDialogController").showAddGroupMembersDialog(d.filter(function(a){a=a.fbid;return a!==c.FBID}),b("immutable").Map(e.map(function(a){return[a.FBID,a.participantState]})),a,c.FBID,!!this.props.isEscalatedCall)};a.prototype.$3=function(){this.props.showNux&&b("RTCCallNUXActions").markNUXViewed(b("RTCCallNUXIDs").RTC_P2P_ADD_GROUP_MEMBER_NUX)};function a(){i.apply(this,arguments)}a.defaultProps={showNux:!1};function j(){b("RTCCallNUXActions").dismissNUX(b("RTCCallNUXIDs").RTC_P2P_ADD_GROUP_MEMBER_NUX)}var k=function(a){return b("React").createElement(b("XUIAmbientNUX.react"),babelHelpers["extends"]({alignment:"right",offsetX:21,onCloseButtonClick:j,position:"above",width:"auto"},a),h._("Add someone to your chat"))};e.exports=a}),null);
__d("RTCCallControlsButtonWithLabel.react",["cx","React","RTCAbstractButton.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=babelHelpers["extends"]({},this.props);return b("React").createElement("div",{className:"_6-lr"},b("React").createElement(b("RTCAbstractButton.react"),babelHelpers["extends"]({"data-hover":"none",labelIsHidden:!0},a)),b("React").createElement("div",{className:"_6-ls"},this.props.title))};function a(){h.apply(this,arguments)}a.defaultProps={highlighted:!1,disabled:!1,labelIsHidden:!0,shouldThrottle:!0};e.exports=a}),null);
__d("RTCCallControlsCloseWindowButton.react",["cx","fbt","React","RTCCallControlsButton.react","RTCCallControlsButtonWithLabel.react","RTCUIXIcon.react","VideoCallWebDriverIDs","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){var c=a.className;a=a.showLabel;a=a===void 0?!1:a;return b("React").createElement(i,{className:b("joinClasses")("closeWindow icon-48",c),label:h._("Close"),onClick:function(){return window.close()},showLabel:a},b("React").createElement(b("RTCUIXIcon.react"),null))};var i=function(a){var c=a.children,d=a.className,e=a.label,f=a.onClick;a=a.showLabel;return a?b("React").createElement(b("RTCCallControlsButtonWithLabel.react"),{className:d,"data-testid":b("VideoCallWebDriverIDs").CLOSE_CALL_WINDOW_BUTTON,onClick:f,title:e},c):b("React").createElement(b("RTCCallControlsButton.react"),{className:d,"data-testid":b("VideoCallWebDriverIDs").CLOSE_CALL_WINDOW_BUTTON,onClick:f,title:e},c)};e.exports=a}),null);
__d("RTCGroupCallRemoteViewThumbnail.react",["cx","FBRTCVideo.react","Image.react","React","RTCRemoteViewPopoverMenuButton.react","RTCSVGIcon.react","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.isDominantSpeaker,d=a.isPinnedSpeaker,e=a.onClick;a=a.user;return b("React").createElement("div",{className:"_30dp"+(c?" dominant":""),"data-testid":b("VideoCallWebDriverIDs").REMOTE_VIEW_THUMBNAIL+a.FBID,onClick:e},b("React").createElement("div",{className:"_30dq"},b("React").createElement(b("RTCRemoteViewPopoverMenuButton.react"),{user:a})),d?b("React").createElement("div",null,b("React").createElement(b("RTCSVGIcon.react"),{className:"_5-vf"},b("React").createElement("svg",{viewBox:"0 0 36 36"},b("React").createElement("path",{d:"M0 0h32a4 4 0 0 1 4 4v32"}))),b("React").createElement(b("RTCSVGIcon.react"),{className:"_5-vg"},b("React").createElement("svg",{viewBox:"0 0 19 19"},b("React").createElement("path",{d:"M2.5 6.65h13a1 1 0 0 1 1 1v9.637a1 1 0 0 1-1 1H3.5a1 1 0 0 1-1-1V7.65a1 1 0 0 1 1-1M9.192 0h.616a4 4 0 0 1 4 4v.313a4 4 0 0 1-.754 2.337H5.946a4 4 0 0 1-.754-2.337V4a4 4 0 0 1 4-4m0 1h.616a3 3 0 0 1 3 3v.313a3 3 0 0 1-1.12 2.337H7.312a3 3 0 0 1-1.12-2.337V4a3 3 0 0 1 3-3",fillRule:"evenodd"})))):null,c||a.isVideoMuted()?b("React").createElement(b("Image.react"),{src:a.profilePictureUrl}):b("React").createElement(b("FBRTCVideo.react"),{mediaStream:a.getStream()}))};e.exports=a}),null);
__d("RTCGroupCallRemoteView.react",["cx","FBRTCGroupCallStore","FluxContainer","React","RTCGroupCallActions","RTCGroupCallDraggableComponent.react","RTCGroupCallRemoteViewThumbnail.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();d=function(a){var c=a.dominantSpeakerFBID,d=a.pinnedSpeakerFBID;a=a.remoteUsers;return b("React").createElement(b("RTCGroupCallDraggableComponent.react"),{className:"_1qwn"},a.map(function(a){return b("React").createElement(b("RTCGroupCallRemoteViewThumbnail.react"),{isDominantSpeaker:a.FBID===(d||c),isPinnedSpeaker:a.FBID===d,key:a.FBID,onClick:function(){a.FBID===d?b("RTCGroupCallActions").setPinnedSpeaker(null):b("RTCGroupCallActions").setPinnedSpeaker(a.FBID)},user:a})}))};function a(){return[b("FBRTCGroupCallStore")]}function c(a,c){a===void 0&&({});a=b("FBRTCGroupCallStore").getState();var d=a.dominantSpeakerFBID;a=a.pinnedSpeakerFBID;return babelHelpers["extends"]({dominantSpeakerFBID:d,pinnedSpeakerFBID:a},c)}e.exports=b("FluxContainer").createFunctional(d,a,c,{withProps:!0})}),null);
__d("RTCInCallFeaturesUtils",["keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({NO_CORNER:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4});a={BOUNDING_BOX_MARGIN:10,SETTINGS_HEIGHT:40,SELF_VIEW_WIDTH:178,SELF_VIEW_HEIGHT:100,SNAP_DISTANCE:100,Corners:g,getCornerPosition:function(a,b,c){switch(c){case g.TOP_LEFT:return{offsetLeft:0+this.BOUNDING_BOX_MARGIN,offsetTop:0+this.BOUNDING_BOX_MARGIN+this.SETTINGS_HEIGHT};case g.TOP_RIGHT:return{offsetLeft:a-this.SELF_VIEW_WIDTH-this.BOUNDING_BOX_MARGIN,offsetTop:0+this.BOUNDING_BOX_MARGIN+this.SETTINGS_HEIGHT};case g.BOTTOM_RIGHT:return{offsetLeft:a-this.SELF_VIEW_WIDTH-this.BOUNDING_BOX_MARGIN,offsetTop:b-this.SELF_VIEW_HEIGHT-this.BOUNDING_BOX_MARGIN};case g.BOTTOM_LEFT:return{offsetLeft:0+this.BOUNDING_BOX_MARGIN,offsetTop:b-this.SELF_VIEW_HEIGHT-this.BOUNDING_BOX_MARGIN};default:return null}},snapToCorner:function(a,b,c){__p&&__p();if(a.offsetLeft<this.SNAP_DISTANCE&&a.offsetTop<this.SNAP_DISTANCE+this.SETTINGS_HEIGHT){var d=this.getCornerPosition(b,c,g.TOP_LEFT);d.snappedCorner=g.TOP_LEFT;return d}if(a.offsetLeft>b-this.SELF_VIEW_WIDTH-this.SNAP_DISTANCE&&a.offsetTop<this.SNAP_DISTANCE+this.SETTINGS_HEIGHT){d=this.getCornerPosition(b,c,g.TOP_RIGHT);d.snappedCorner=g.TOP_RIGHT;return d}if(a.offsetLeft>b-this.SELF_VIEW_WIDTH-this.SNAP_DISTANCE&&a.offsetTop>c-this.SELF_VIEW_HEIGHT-this.SNAP_DISTANCE){d=this.getCornerPosition(b,c,g.BOTTOM_RIGHT);d.snappedCorner=g.BOTTOM_RIGHT;return d}if(a.offsetLeft<this.SNAP_DISTANCE&&a.offsetTop>c-this.SELF_VIEW_HEIGHT-this.SNAP_DISTANCE){d=this.getCornerPosition(b,c,g.BOTTOM_LEFT);d.snappedCorner=g.BOTTOM_LEFT;return d}return{offsetLeft:a.offsetLeft,offsetTop:a.offsetTop,snappedCorner:this.Corners.NO_CORNER}}};e.exports=a}),null);
__d("RTCSelfViewAnimationConfig",[],(function(a,b,c,d,e,f){"use strict";a={stiffness:200,damping:25};e.exports={springConfig:a}}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("performance-now-0.2.0",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={};var g={exports:a};function h(){__p&&__p();(function(){var a,b,c;typeof performance!=="undefined"&&performance!==null&&performance.now?g.exports=function(){return performance.now()}:typeof process!=="undefined"&&process!==null&&process.hrtime?(g.exports=function(){return(a()-c)/1e6},b=process.hrtime,a=function(){var a;a=b();return a[0]*1e9+a[1]},c=a()):Date.now?(g.exports=function(){return Date.now()-c},c=Date.now()):(g.exports=function(){return new Date().getTime()-c},c=new Date().getTime())}).call(this)}var i=!1,j=function(){i||(i=!0,h());return g.exports};b=function(a){switch(a){case undefined:return j()}};e.exports=b}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("fbjs-0.8.16",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={};var g={exports:a};function h(){throw new Error("The fbjs package should not be required without a full path.")}var i=!1,j=function(){i||(i=!0,h());return g.exports};b={};var k={exports:b};function l(){__p&&__p();function a(a){return function(){return a}}var b=function(){};b.thatReturns=a;b.thatReturnsFalse=a(!1);b.thatReturnsTrue=a(!0);b.thatReturnsNull=a(null);b.thatReturnsThis=function(){return this};b.thatReturnsArgument=function(a){return a};k.exports=b}var m=!1,n=function(){m||(m=!0,l());return k.exports};c={};var o={exports:c};function p(){__p&&__p();function a(a,b,c,d,e,f,g,h){__p&&__p();if(!a){if(b===undefined)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=[c,d,e,f,g,h],j=0;a=new Error(b.replace(/%s/g,function(){return i[j++]}));a.name="Invariant Violation"}a.framesToPop=1;throw a}}o.exports=a}var q=!1,r=function(){q||(q=!0,p());return o.exports};d={};var s={exports:d};function t(){__p&&__p();var a=Object.prototype.hasOwnProperty;function b(a,b){if(a===b)return a!==0||b!==0||1/a===1/b;else return a!==a&&b!==b}function c(c,d){__p&&__p();if(b(c,d))return!0;if(typeof c!=="object"||c===null||typeof d!=="object"||d===null)return!1;var e=Object.keys(c),f=Object.keys(d);if(e.length!==f.length)return!1;for(var f=0;f<e.length;f++)if(!a.call(d,e[f])||!b(c[e[f]],d[e[f]]))return!1;return!0}s.exports=c}var u=!1,v=function(){u||(u=!0,t());return s.exports};f={};var w={exports:f};function x(){var a=n();a=a;w.exports=a}var y=!1,z=function(){y||(y=!0,x());return w.exports};a=function(a){switch(a){case undefined:return j();case"/lib/emptyFunction":return n();case"/lib/invariant":return r();case"/lib/shallowEqual":return v();case"/lib/warning":return z()}};e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("object-assign-4.1.1",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={};var g={exports:a};function h(){__p&&__p();var a=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;function d(a){if(a===null||a===undefined)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function e(){__p&&__p();try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if(Object.getOwnPropertyNames(a)[0]==="5")return!1;var b={};for(var a=0;a<10;a++)b["_"+String.fromCharCode(a)]=a;a=Object.getOwnPropertyNames(b).map(function(a){return b[a]});if(a.join("")!=="0123456789")return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a});return Object.keys(Object.assign({},c)).join("")!=="abcdefghijklmnopqrst"?!1:!0}catch(a){return!1}}g.exports=e()?Object.assign:function(e,f){__p&&__p();var g,h=d(e),i;for(var j=1;j<arguments.length;j++){g=Object(arguments[j]);for(var k in g)b.call(g,k)&&(h[k]=g[k]);if(a){i=a(g);for(var l=0;l<i.length;l++)c.call(g,i[l])&&(h[i[l]]=g[i[l]])}}return h}}var i=!1,j=function(){i||(i=!0,h());return g.exports};b=function(a){switch(a){case undefined:return j()}};e.exports=b}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("prop-types-15.6.0",["fbjs-0.8.16","object-assign-4.1.1"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("fbjs-0.8.16"));a(b("object-assign-4.1.1"));c={};var h={exports:c};function i(){var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";h.exports=a}var j=!1,k=function(){j||(j=!0,i());return h.exports};d={};var l={exports:d};function m(){__p&&__p();var a=g("/lib/emptyFunction"),b=g("/lib/invariant"),c=k();l.exports=function(){__p&&__p();function d(a,d,e,f,g,h){if(h===c)return;b(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}d.isRequired=d;function e(){return d}e={array:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:e,element:d,instanceOf:e,node:d,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};e.checkPropTypes=a;e.PropTypes=e;return e}}var n=!1,o=function(){n||(n=!0,m());return l.exports};f={};var p={exports:f};function q(){p.exports=o()()}var r=!1,s=function(){r||(r=!0,q());return p.exports};a=function(a){switch(a){case undefined:return s()}};e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("performance-now-2.1.0",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={};var g={exports:a};function h(){__p&&__p();(function(){var a,b,c,d,e,f;typeof performance!=="undefined"&&performance!==null&&performance.now?g.exports=function(){return performance.now()}:typeof process!=="undefined"&&process!==null&&process.hrtime?(g.exports=function(){return(a()-e)/1e6},b=process.hrtime,a=function(){var a;a=b();return a[0]*1e9+a[1]},d=a(),f=process.uptime()*1e9,e=d-f):Date.now?(g.exports=function(){return Date.now()-c},c=Date.now()):(g.exports=function(){return new Date().getTime()-c},c=new Date().getTime())}).call(this)}var i=!1,j=function(){i||(i=!0,h());return g.exports};b=function(a){switch(a){case undefined:return j()}};e.exports=b}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("raf-3.4.0",["performance-now-2.1.0"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function c(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=c(b("performance-now-2.1.0"));d={};var h={exports:d};function i(){__p&&__p();var b=g(),c=typeof window==="undefined"?a:window,d=["moz","webkit"],e="AnimationFrame",f=c["request"+e],i=c["cancel"+e]||c["cancelRequest"+e];for(var j=0;!f&&j<d.length;j++)f=c[d[j]+"Request"+e],i=c[d[j]+"Cancel"+e]||c[d[j]+"CancelRequest"+e];if(!f||!i){var k=0,l=0,m=[],n=1e3/60;f=function(a){__p&&__p();if(m.length===0){var c=b(),d=Math.max(0,n-(c-k));k=d+c;setTimeout(function(){var b=m.slice(0);m.length=0;for(var a=0;a<b.length;a++)if(!b[a].cancelled)try{b[a].callback(k)}catch(a){setTimeout(function(){throw a},0)}},Math.round(d))}m.push({handle:++l,callback:a,cancelled:!1});return l};i=function(b){for(var a=0;a<m.length;a++)m[a].handle===b&&(m[a].cancelled=!0)}}h.exports=function(a){return f.call(c,a)};h.exports.cancel=function(){i.apply(c,arguments)};h.exports.polyfill=function(a){a||(a=c),a.requestAnimationFrame=f,a.cancelAnimationFrame=i}}var j=!1,k=function(){j||(j=!0,i());return h.exports};f=function(a){switch(a){case undefined:return k()}};e.exports=f}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("react-motion-0.5.2",["performance-now-0.2.0","raf-3.4.0","react-0.0.0","prop-types-15.6.0"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("performance-now-0.2.0")),h=a(b("raf-3.4.0")),i=a(b("react-0.0.0")),j=a(b("prop-types-15.6.0")),k={},l={exports:k};function m(){k.__esModule=!0;k["default"]=a;function a(a){var b={};for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=0);return b}l.exports=k["default"]}var n=!1,o=function(){n||(n=!0,m());return l.exports},p={},q={exports:p};function r(){__p&&__p();p.__esModule=!0;p["default"]=a;function a(a){var b={};for(var c in a){if(!Object.prototype.hasOwnProperty.call(a,c))continue;b[c]=typeof a[c]==="number"?a[c]:a[c].val}return b}q.exports=p["default"]}var s=!1,t=function(){s||(s=!0,r());return q.exports},u={},v={exports:u};function w(){__p&&__p();u.__esModule=!0;u["default"]=b;var a=[0,0];function b(b,c,d,e,f,g,h){__p&&__p();f=-f*(c-e);g=-g*d;f=f+g;g=d+f*b;d=c+g*b;if(Math.abs(g)<h&&Math.abs(d-e)<h){a[0]=e;a[1]=0;return a}a[0]=d;a[1]=g;return a}v.exports=u["default"]}var x=!1,y=function(){x||(x=!0,w());return v.exports},z={},A={exports:z};function aa(){__p&&__p();z.__esModule=!0;z["default"]=a;function a(a,b,c){__p&&__p();for(var d in b){if(!Object.prototype.hasOwnProperty.call(b,d))continue;if(c[d]!==0)return!1;var e=typeof b[d]==="number"?b[d]:b[d].val;if(a[d]!==e)return!1}return!0}A.exports=z["default"]}var B=!1,C=function(){B||(B=!0,aa());return A.exports},D={},E={exports:D};function ba(){__p&&__p();D.__esModule=!0;var a=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=function(){__p&&__p();function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f=o(),k=c(f);f=t();var l=c(f);f=y();var m=c(f);f=g();var n=c(f);f=h();var p=c(f);f=C();var q=c(f);f=i();var r=c(f);f=j();var s=c(f),u=1e3/60;c=function(c){__p&&__p();e(f,c);b(f,null,[{key:"propTypes",value:{defaultStyle:s["default"].objectOf(s["default"].number),style:s["default"].objectOf(s["default"].oneOfType([s["default"].number,s["default"].object])).isRequired,children:s["default"].func.isRequired,onRest:s["default"].func},enumerable:!0}]);function f(b){__p&&__p();var e=this;d(this,f);c.call(this,b);this.wasAnimating=!1;this.animationID=null;this.prevTime=0;this.accumulatedTime=0;this.unreadPropStyle=null;this.clearUnreadPropStyle=function(b){var c=!1,d=e.state,f=d.currentStyle,g=d.currentVelocity,h=d.lastIdealStyle;d=d.lastIdealVelocity;for(var i in b){if(!Object.prototype.hasOwnProperty.call(b,i))continue;var j=b[i];typeof j==="number"&&(c||(c=!0,f=a({},f),g=a({},g),h=a({},h),d=a({},d)),f[i]=j,g[i]=0,h[i]=j,d[i]=0)}c&&e.setState({currentStyle:f,currentVelocity:g,lastIdealStyle:h,lastIdealVelocity:d})};this.startAnimationIfNecessary=function(){__p&&__p();e.animationID=p["default"](function(a){__p&&__p();var b=e.props.style;if(q["default"](e.state.currentStyle,b,e.state.currentVelocity)){e.wasAnimating&&e.props.onRest&&e.props.onRest();e.animationID=null;e.wasAnimating=!1;e.accumulatedTime=0;return}e.wasAnimating=!0;a=a||n["default"]();var c=a-e.prevTime;e.prevTime=a;e.accumulatedTime=e.accumulatedTime+c;e.accumulatedTime>u*10&&(e.accumulatedTime=0);if(e.accumulatedTime===0){e.animationID=null;e.startAnimationIfNecessary();return}a=(e.accumulatedTime-Math.floor(e.accumulatedTime/u)*u)/u;c=Math.floor(e.accumulatedTime/u);var d={},f={},g={},h={};for(var i in b){if(!Object.prototype.hasOwnProperty.call(b,i))continue;var j=b[i];if(typeof j==="number")g[i]=j,h[i]=0,d[i]=j,f[i]=0;else{var k=e.state.lastIdealStyle[i],l=e.state.lastIdealVelocity[i];for(var o=0;o<c;o++){var p=m["default"](u/1e3,k,l,j.val,j.stiffness,j.damping,j.precision);k=p[0];l=p[1]}p=m["default"](u/1e3,k,l,j.val,j.stiffness,j.damping,j.precision);o=p[0];j=p[1];g[i]=k+(o-k)*a;h[i]=l+(j-l)*a;d[i]=k;f[i]=l}}e.animationID=null;e.accumulatedTime-=c*u;e.unreadPropStyle=null;e.startAnimationIfNecessary();e.setState({currentStyle:g,currentVelocity:h,lastIdealStyle:d,lastIdealVelocity:f})})};this.state=this.defaultState()}f.prototype.defaultState=function(){var a=this.props,b=a.defaultStyle;a=a.style;b=b||l["default"](a);a=k["default"](b);return{currentStyle:b,currentVelocity:a,lastIdealStyle:b,lastIdealVelocity:a}};f.prototype.componentDidMount=function(){this.prevTime=n["default"](),this.startAnimationIfNecessary()};f.prototype.componentWillReceiveProps=function(a){this.unreadPropStyle!=null&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=a.style,this.animationID==null&&(this.prevTime=n["default"](),this.startAnimationIfNecessary())};f.prototype.componentWillUnmount=function(){this.animationID!=null&&(p["default"].cancel(this.animationID),this.animationID=null)};f.prototype.render=function(){var a=this.props.children(this.state.currentStyle);return a&&r["default"].Children.only(a)};return f}(r["default"].Component);D["default"]=c;E.exports=D["default"]}var F=!1,ca=function(){F||(F=!0,ba());return E.exports},G={},H={exports:G};function da(){__p&&__p();G.__esModule=!0;var a=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=function(){__p&&__p();function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f=o(),k=c(f);f=t();var l=c(f);f=y();var m=c(f);f=g();var n=c(f);f=h();var p=c(f);f=C();var q=c(f);f=i();var r=c(f);f=j();var s=c(f),u=1e3/60;function v(a,b,c){for(var d=0;d<a.length;d++)if(!q["default"](a[d],b[d],c[d]))return!1;return!0}c=function(c){__p&&__p();e(f,c);b(f,null,[{key:"propTypes",value:{defaultStyles:s["default"].arrayOf(s["default"].objectOf(s["default"].number)),styles:s["default"].func.isRequired,children:s["default"].func.isRequired},enumerable:!0}]);function f(b){__p&&__p();var e=this;d(this,f);c.call(this,b);this.animationID=null;this.prevTime=0;this.accumulatedTime=0;this.unreadPropStyles=null;this.clearUnreadPropStyle=function(b){__p&&__p();var c=e.state,d=c.currentStyles,f=c.currentVelocities,g=c.lastIdealStyles;c=c.lastIdealVelocities;var h=!1;for(var i=0;i<b.length;i++){var j=b[i],k=!1;for(var l in j){if(!Object.prototype.hasOwnProperty.call(j,l))continue;var m=j[l];typeof m==="number"&&(k||(k=!0,h=!0,d[i]=a({},d[i]),f[i]=a({},f[i]),g[i]=a({},g[i]),c[i]=a({},c[i])),d[i][l]=m,f[i][l]=0,g[i][l]=m,c[i][l]=0)}}h&&e.setState({currentStyles:d,currentVelocities:f,lastIdealStyles:g,lastIdealVelocities:c})};this.startAnimationIfNecessary=function(){__p&&__p();e.animationID=p["default"](function(a){__p&&__p();var b=e.props.styles(e.state.lastIdealStyles);if(v(e.state.currentStyles,b,e.state.currentVelocities)){e.animationID=null;e.accumulatedTime=0;return}a=a||n["default"]();var c=a-e.prevTime;e.prevTime=a;e.accumulatedTime=e.accumulatedTime+c;e.accumulatedTime>u*10&&(e.accumulatedTime=0);if(e.accumulatedTime===0){e.animationID=null;e.startAnimationIfNecessary();return}a=(e.accumulatedTime-Math.floor(e.accumulatedTime/u)*u)/u;c=Math.floor(e.accumulatedTime/u);var d=[],f=[],g=[],h=[];for(var i=0;i<b.length;i++){var j=b[i],k={},l={},o={},p={};for(var q in j){if(!Object.prototype.hasOwnProperty.call(j,q))continue;var r=j[q];if(typeof r==="number")k[q]=r,l[q]=0,o[q]=r,p[q]=0;else{var s=e.state.lastIdealStyles[i][q],t=e.state.lastIdealVelocities[i][q];for(var w=0;w<c;w++){var x=m["default"](u/1e3,s,t,r.val,r.stiffness,r.damping,r.precision);s=x[0];t=x[1]}x=m["default"](u/1e3,s,t,r.val,r.stiffness,r.damping,r.precision);w=x[0];r=x[1];k[q]=s+(w-s)*a;l[q]=t+(r-t)*a;o[q]=s;p[q]=t}}g[i]=k;h[i]=l;d[i]=o;f[i]=p}e.animationID=null;e.accumulatedTime-=c*u;e.unreadPropStyles=null;e.startAnimationIfNecessary();e.setState({currentStyles:g,currentVelocities:h,lastIdealStyles:d,lastIdealVelocities:f})})};this.state=this.defaultState()}f.prototype.defaultState=function(){var a=this.props,b=a.defaultStyles;a=a.styles;b=b||a().map(l["default"]);a=b.map(function(a){return k["default"](a)});return{currentStyles:b,currentVelocities:a,lastIdealStyles:b,lastIdealVelocities:a}};f.prototype.componentDidMount=function(){this.prevTime=n["default"](),this.startAnimationIfNecessary()};f.prototype.componentWillReceiveProps=function(a){this.unreadPropStyles!=null&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=a.styles(this.state.lastIdealStyles),this.animationID==null&&(this.prevTime=n["default"](),this.startAnimationIfNecessary())};f.prototype.componentWillUnmount=function(){this.animationID!=null&&(p["default"].cancel(this.animationID),this.animationID=null)};f.prototype.render=function(){var a=this.props.children(this.state.currentStyles);return a&&r["default"].Children.only(a)};return f}(r["default"].Component);G["default"]=c;H.exports=G["default"]}var I=!1,ea=function(){I||(I=!0,da());return H.exports},J={},K={exports:J};function fa(){__p&&__p();J.__esModule=!0;J["default"]=a;function a(a,b,c){__p&&__p();var d={};for(var e=0;e<a.length;e++)d[a[e].key]=e;var f={};for(var e=0;e<b.length;e++)f[b[e].key]=e;var g=[];for(var e=0;e<b.length;e++)g[e]=b[e];for(var e=0;e<a.length;e++)if(!Object.prototype.hasOwnProperty.call(f,a[e].key)){var h=c(e,a[e]);h!=null&&g.push(h)}return g.sort(function(a,c){__p&&__p();var e=f[a.key],g=f[c.key],h=d[a.key],i=d[c.key];if(e!=null&&g!=null)return f[a.key]-f[c.key];else if(h!=null&&i!=null)return d[a.key]-d[c.key];else if(e!=null){for(var a=0;a<b.length;a++){c=b[a].key;if(!Object.prototype.hasOwnProperty.call(d,c))continue;if(e<f[c]&&i>d[c])return-1;else if(e>f[c]&&i<d[c])return 1}return 1}for(var a=0;a<b.length;a++){c=b[a].key;if(!Object.prototype.hasOwnProperty.call(d,c))continue;if(g<f[c]&&h>d[c])return 1;else if(g>f[c]&&h<d[c])return-1}return-1})}K.exports=J["default"]}var L=!1,ga=function(){L||(L=!0,fa());return K.exports},M={},N={exports:M};function ha(){__p&&__p();M.__esModule=!0;var a=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=function(){__p&&__p();function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f=o(),k=c(f);f=t();var l=c(f);f=y();var m=c(f);f=ga();var n=c(f);f=g();var p=c(f);f=h();var q=c(f);f=C();var r=c(f);f=i();var s=c(f);f=j();var u=c(f),v=1e3/60;function w(a,b,c){var d=b;return d==null?a.map(function(a,b){return{key:a.key,data:a.data,style:c[b]}}):a.map(function(a,b){for(var e=0;e<d.length;e++)if(d[e].key===a.key)return{key:d[e].key,data:d[e].data,style:c[b]};return{key:a.key,data:a.data,style:c[b]}})}function x(a,b,c,d){if(d.length!==b.length)return!1;for(var e=0;e<d.length;e++)if(d[e].key!==b[e].key)return!1;for(var e=0;e<d.length;e++)if(!r["default"](a[e],b[e].style,c[e]))return!1;return!0}function z(a,b,c,d,e,f,g,h,i){__p&&__p();e=n["default"](d,e,function(a,d){__p&&__p();var e=b(d);if(e==null){c({key:d.key,data:d.data});return null}if(r["default"](f[a],e,g[a])){c({key:d.key,data:d.data});return null}return{key:d.key,data:d.data,style:e}});var j=[],l=[],m=[],o=[];for(var p=0;p<e.length;p++){var q=e[p],s=null;for(var t=0;t<d.length;t++)if(d[t].key===q.key){s=t;break}if(s==null){t=a(q);j[p]=t;m[p]=t;t=k["default"](q.style);l[p]=t;o[p]=t}else j[p]=f[s],m[p]=h[s],l[p]=g[s],o[p]=i[s]}return[e,j,l,m,o]}c=function(c){__p&&__p();e(f,c);b(f,null,[{key:"propTypes",value:{defaultStyles:u["default"].arrayOf(u["default"].shape({key:u["default"].string.isRequired,data:u["default"].any,style:u["default"].objectOf(u["default"].number).isRequired})),styles:u["default"].oneOfType([u["default"].func,u["default"].arrayOf(u["default"].shape({key:u["default"].string.isRequired,data:u["default"].any,style:u["default"].objectOf(u["default"].oneOfType([u["default"].number,u["default"].object])).isRequired}))]).isRequired,children:u["default"].func.isRequired,willEnter:u["default"].func,willLeave:u["default"].func,didLeave:u["default"].func},enumerable:!0},{key:"defaultProps",value:{willEnter:function(a){return l["default"](a.style)},willLeave:function(){return null},didLeave:function(){}},enumerable:!0}]);function f(b){__p&&__p();var e=this;d(this,f);c.call(this,b);this.unmounting=!1;this.animationID=null;this.prevTime=0;this.accumulatedTime=0;this.unreadPropStyles=null;this.clearUnreadPropStyle=function(b){__p&&__p();var c=z(e.props.willEnter,e.props.willLeave,e.props.didLeave,e.state.mergedPropsStyles,b,e.state.currentStyles,e.state.currentVelocities,e.state.lastIdealStyles,e.state.lastIdealVelocities),d=c[0],f=c[1],g=c[2],h=c[3];c=c[4];for(var i=0;i<b.length;i++){var j=b[i].style,k=!1;for(var l in j){if(!Object.prototype.hasOwnProperty.call(j,l))continue;var m=j[l];typeof m==="number"&&(k||(k=!0,f[i]=a({},f[i]),g[i]=a({},g[i]),h[i]=a({},h[i]),c[i]=a({},c[i]),d[i]={key:d[i].key,data:d[i].data,style:a({},d[i].style)}),f[i][l]=m,g[i][l]=0,h[i][l]=m,c[i][l]=0,d[i].style[l]=m)}}e.setState({currentStyles:f,currentVelocities:g,mergedPropsStyles:d,lastIdealStyles:h,lastIdealVelocities:c})};this.startAnimationIfNecessary=function(){__p&&__p();if(e.unmounting)return;e.animationID=q["default"](function(a){__p&&__p();if(e.unmounting)return;var b=e.props.styles;b=typeof b==="function"?b(w(e.state.mergedPropsStyles,e.unreadPropStyles,e.state.lastIdealStyles)):b;if(x(e.state.currentStyles,b,e.state.currentVelocities,e.state.mergedPropsStyles)){e.animationID=null;e.accumulatedTime=0;return}a=a||p["default"]();var c=a-e.prevTime;e.prevTime=a;e.accumulatedTime=e.accumulatedTime+c;e.accumulatedTime>v*10&&(e.accumulatedTime=0);if(e.accumulatedTime===0){e.animationID=null;e.startAnimationIfNecessary();return}a=(e.accumulatedTime-Math.floor(e.accumulatedTime/v)*v)/v;c=Math.floor(e.accumulatedTime/v);b=z(e.props.willEnter,e.props.willLeave,e.props.didLeave,e.state.mergedPropsStyles,b,e.state.currentStyles,e.state.currentVelocities,e.state.lastIdealStyles,e.state.lastIdealVelocities);var d=b[0],f=b[1],g=b[2],h=b[3];b=b[4];for(var i=0;i<d.length;i++){var j=d[i].style,k={},l={},n={},o={};for(var q in j){if(!Object.prototype.hasOwnProperty.call(j,q))continue;var r=j[q];if(typeof r==="number")k[q]=r,l[q]=0,n[q]=r,o[q]=0;else{var s=h[i][q],t=b[i][q];for(var u=0;u<c;u++){var y=m["default"](v/1e3,s,t,r.val,r.stiffness,r.damping,r.precision);s=y[0];t=y[1]}y=m["default"](v/1e3,s,t,r.val,r.stiffness,r.damping,r.precision);u=y[0];r=y[1];k[q]=s+(u-s)*a;l[q]=t+(r-t)*a;n[q]=s;o[q]=t}}h[i]=n;b[i]=o;f[i]=k;g[i]=l}e.animationID=null;e.accumulatedTime-=c*v;e.unreadPropStyles=null;e.startAnimationIfNecessary();e.setState({currentStyles:f,currentVelocities:g,lastIdealStyles:h,lastIdealVelocities:b,mergedPropsStyles:d})})};this.state=this.defaultState()}f.prototype.defaultState=function(){__p&&__p();var a=this.props,b=a.defaultStyles,c=a.styles,d=a.willEnter,e=a.willLeave;a=a.didLeave;var f=typeof c==="function"?c(b):c;c=undefined;b==null?c=f:c=b.map(function(a){for(var b=0;b<f.length;b++)if(f[b].key===a.key)return f[b];return a});var g=b==null?f.map(function(a){return l["default"](a.style)}):b.map(function(a){return l["default"](a.style)});b=b==null?f.map(function(a){return k["default"](a.style)}):b.map(function(a){return k["default"](a.style)});d=z(d,e,a,c,f,g,b,g,b);e=d[0];a=d[1];c=d[2];g=d[3];b=d[4];return{currentStyles:a,currentVelocities:c,lastIdealStyles:g,lastIdealVelocities:b,mergedPropsStyles:e}};f.prototype.componentDidMount=function(){this.prevTime=p["default"](),this.startAnimationIfNecessary()};f.prototype.componentWillReceiveProps=function(a){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);a=a.styles;typeof a==="function"?this.unreadPropStyles=a(w(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):this.unreadPropStyles=a;this.animationID==null&&(this.prevTime=p["default"](),this.startAnimationIfNecessary())};f.prototype.componentWillUnmount=function(){this.unmounting=!0,this.animationID!=null&&(q["default"].cancel(this.animationID),this.animationID=null)};f.prototype.render=function(){var a=w(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles);a=this.props.children(a);return a&&s["default"].Children.only(a)};return f}(s["default"].Component);M["default"]=c;N.exports=M["default"]}var O=!1,ia=function(){O||(O=!0,ha());return N.exports},P={},Q={exports:P};function ja(){P.__esModule=!0,P["default"]={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},Q.exports=P["default"]}var R=!1,S=function(){R||(R=!0,ja());return Q.exports},T={},U={exports:T};function ka(){__p&&__p();T.__esModule=!0;var a=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};T["default"]=d;function b(a){return a&&a.__esModule?a:{"default":a}}d=S();b=b(d);var c=a({},b["default"].noWobble,{precision:.01});function d(b,d){return a({},c,d,{val:b})}U.exports=T["default"]}var V=!1,la=function(){V||(V=!0,ka());return U.exports},W={},X={exports:W};function ma(){W.__esModule=!0;W["default"]=a;function a(){}X.exports=W["default"]}var Y=!1,na=function(){Y||(Y=!0,ma());return X.exports},Z={},oa={exports:Z};function pa(){__p&&__p();Z.__esModule=!0;function a(a){return a&&a.__esModule?a["default"]:a}var b=ca();Z.Motion=a(b);b=ea();Z.StaggeredMotion=a(b);b=ia();Z.TransitionMotion=a(b);b=la();Z.spring=a(b);b=S();Z.presets=a(b);b=t();Z.stripStyle=a(b);b=na();Z.reorderKeys=a(b)}var $=!1,qa=function(){$||($=!0,pa());return oa.exports};c=function(a){switch(a){case undefined:return qa()}};e.exports=c}),null);
__d("react-motion",["react-motion-0.5.2"],(function(a,b,c,d,e,f){e.exports=b("react-motion-0.5.2")()}),null);
__d("ReactMotion",["react-motion"],(function(a,b,c,d,e,f){e.exports=b("react-motion")}),null);
__d("RTCSelfViewTile.react",["cx","React","ReactMotion","RTCElementResizeListener.react","RTCSelfViewAnimationConfig","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("ReactMotion").Motion,j=b("ReactMotion").spring,k=b("RTCSelfViewAnimationConfig").springConfig;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={width:0},this.$1=function(a){this.setState({width:a.width})}.bind(this),b}a.prototype.render=function(){return b("React").createElement(i,{defaultStyle:{x:0},style:{x:j(this.state.width-l(this.props,this.state),k)}},function(a){return b("React").createElement("div",{className:b("joinClasses")("_drs"+(this.props.focused?" focused":"")+(this.props.hovered?" hovered":""),this.props.className),style:babelHelpers["extends"]({width:l(this.props,this.state)},this.props.style)},b("React").createElement("div",{className:"_drt",style:{width:this.state.width}},b("React").createElement(b("RTCElementResizeListener.react"),{className:"_dru",onResize:this.$1,style:{transform:"translateX("+a.x+"px)"}},this.props.children)),b("React").createElement("button",{className:"_drv",onClick:this.props.onClick}))}.bind(this))};a.prototype.componentDidUpdate=function(a,b){var c=l(this.props,this.state);c!==l(a,b)&&this.props.onResize({width:c,height:0})};a.defaultProps={collapsed:!1,focused:!1,hovered:!1};function l(a,b){return a.collapsed?a.focused||a.hovered?30:22:b.width}e.exports=a}),null);
__d("RTCSelfViewTileLayer.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.children,d=a.className,e=a.renderBackground;e=e===void 0?!1:e;var f=a.visible;f=f===void 0?!0:f;a=babelHelpers.objectWithoutProperties(a,["children","className","renderBackground","visible"]);return b("React").createElement("div",babelHelpers["extends"]({className:b("joinClasses")("_drw"+(f?" _drx":"")+(e?" _dry":""),d)},a),c)};e.exports=a}),null);
__d("RTCSelfViewCameraStream.react",["cx","fbt","CssBackgroundImage.react","FBRTCVideo.react","Image.react","React","RTCSelfViewTile.react","RTCSelfViewTileLayer.react","RTCSVGIcon.react","RTCUIMicrophoneIcon.react","RTWebClientFeatureGating","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){var c=a.collapsed,d=a.focused,e=a.isDraggable,f=a.isFilterMode,g=a.hovered,i=a.user;a=babelHelpers.objectWithoutProperties(a,["collapsed","focused","isDraggable","isFilterMode","hovered","user"]);var j=i.isAudioMuted(),k=i.getStream(),l=i.isVideoMuted();return b("React").createElement(b("RTCSelfViewTile.react"),{collapsed:c,focused:d,hovered:g,onClick:a.onClick,onResize:a.onResize,style:a.style},b("React").createElement(b("FBRTCVideo.react"),{className:"_88q"+(i.isVideoMuted()||k==null?" muted":""),"data-testid":b("VideoCallWebDriverIDs").RTC_SELF_VIEW,mediaStream:k,mirrorVideo:!0,muted:!0}),b("React").createElement(b("RTCSelfViewTileLayer.react"),{renderBackground:j||l,visible:l},b("RTWebClientFeatureGating").callUnification()?b("React").createElement(b("CssBackgroundImage.react"),{backgroundPosition:"center center",className:"_6qn8",height:"100%",imageURI:i.profilePictureUrl,width:"100%"}):null,b("React").createElement(b("Image.react"),{alt:h._("Profile Picture"),className:"_6m1b"+(a.doubleSelfViewSize?" _6m1c":""),src:i.profilePictureUrl})),b("React").createElement(b("RTCSelfViewTileLayer.react"),{renderBackground:!l,visible:j},b("React").createElement(b("RTCUIMicrophoneIcon.react"),{className:"_drz _6m1d",shadow:!0,strikeThrough:!0})),f||e?null:b("React").createElement(b("RTCSelfViewTileLayer.react"),{renderBackground:d||g},b("React").createElement(b("RTCSVGIcon.react"),null,b("React").createElement("svg",{className:"_drz _dr_",viewBox:"0 0 8 28"},b("React").createElement("path",{d:c?"M6 2L2 14L6 26":"M2 2L6 14L2 26",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3})))))};e.exports=a}),null);
__d("RTCSelfViewScreenStream.react",["cx","fbt","FBRTCVideo.react","React","RTCSelfViewTile.react","RTCSelfViewTileLayer.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$1=function(){var a=this.props.user.getScreenStream();if(!a||!this.props.onStopSharing)return;this.props.onStopSharing(a)}.bind(this),b}a.prototype.render=function(){var a=this.props,c=a.focused,d=a.hovered;a=a.user;a=a.getScreenStream();return!a?null:b("React").createElement(b("RTCSelfViewTile.react"),{focused:c,hovered:d,onClick:this.$1,onResize:this.props.onResize,style:this.props.style},b("React").createElement(b("FBRTCVideo.react"),{className:"_88q",mediaStream:a,muted:!0}),this.props.onStopSharing!=null?b("React").createElement(b("RTCSelfViewTileLayer.react"),{renderBackground:!0,visible:c||d},b("React").createElement("span",{className:"_dr-"},h._("Stop"))):null)};e.exports=a}),null);
__d("RTCUIExpressionsIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){return b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 36 36"},b("React").createElement("defs",null,b("React").createElement("filter",{id:"a",width:"169%",height:"165.5%",x:"-34.5%",y:"-24.1%",filterUnits:"objectBoundingBox"},b("React").createElement("feOffset",{dy:"2","in":"SourceAlpha",result:"shadowOffsetOuter1"}),b("React").createElement("feGaussianBlur",{"in":"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"2"}),b("React").createElement("feColorMatrix",{"in":"shadowBlurOuter1",result:"shadowMatrixOuter1",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"}),b("React").createElement("feMerge",null,b("React").createElement("feMergeNode",{"in":"shadowMatrixOuter1"}),b("React").createElement("feMergeNode",{"in":"SourceGraphic"})))),b("React").createElement("g",{fill:"none",fillRule:"evenodd",filter:"url(#a)",transform:"translate(5)"},b("React").createElement("path",{d:"M11.40061293 3.9017668l5.4259751 6.2797418 8.11984779-.9354691-4.1463352 7.13037962 3.45892004 7.57303275-7.98836523-1.87243905-5.98190777 5.61576242-.7910037-8.28789878-7.15602142-4.10192228 7.49972902-3.2497839z",stroke:"#FFF",strokeWidth:"2"}),b("React").createElement("circle",{cx:"2.63636364",cy:"23.7272727",r:"2.63636364",stroke:"#FFF",strokeWidth:"2"}),b("React").createElement("circle",{cx:"4.39393939",cy:"7.03030303",fill:"#FFF",r:"1.75757576"}),b("React").createElement("circle",{cx:"18.4545455",cy:"27.2424242",fill:"#FFF",r:"1"}),b("React").createElement("circle",{cx:"26.3636364",cy:"15.8181818",fill:"#FFF",r:"1"}),b("React").createElement("circle",{cx:"21.0909091",cy:"5.27272727",fill:"#FFF",r:"1"}))))};e.exports=a}),null);
__d("RTCToggleVideoFiltersIcon.react",["cx","fbt","FluxContainer","React","RTCAppDispatcher","RTCCallControlsButton.react","RTCCallNUXActions","RTCCallNUXIDs","RTCCallNUXStore","RTCCallStore","RTCUIExpressionsIcon.react","RTCUserActivityProvider.react","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","XUIAmbientNUX.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PureComponent;d=babelHelpers.inherits(a,c);i=d&&d.prototype;function a(a){i.constructor.call(this,a),this.$5=function(){var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logClick(babelHelpers["extends"]({},a,{callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").TOGGLE_FILTERS,surface:b("RTWebLoggingSurface").CALL_CONTAINER}));this.props.onClick()}.bind(this),this.$6=function(a){this.$1=a&&a.getDOMNode?a.getDOMNode():a}.bind(this),this.$3=function(){this.setState({isMouseActive:!0})}.bind(this),this.$4=function(){this.setState({isMouseActive:!1})}.bind(this),b("RTCAppDispatcher").explicitlyRegisterStores([b("RTCCallNUXStore")])}a.getStores=function(){return[b("RTCCallNUXStore")]};a.calculateState=function(a){a===void 0&&(a={hasFocus:!1,isMouseActive:!1});return babelHelpers["extends"]({},a,{showNux:b("RTCCallNUXStore").getState().showVideoChatFiltersNUX})};a.prototype.componentDidMount=function(){this.$2();var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logImpression(babelHelpers["extends"]({},a,{callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").TOGGLE_FILTERS,surface:b("RTWebLoggingSurface").CALL_CONTAINER}))};a.prototype.render=function(){var a=this.props,c=a.className;a=a.filterSelected;return b("React").createElement(b("RTCUserActivityProvider.react"),{onActive:this.$3,onIdle:this.$4},b("React").createElement(b("React").Fragment,null,b("React").createElement(b("RTCCallControlsButton.react"),{className:b("joinClasses")(c,"icon-48 videoFilters _6j5h"+(a||this.state.isMouseActive||this.state.hasFocus?"":" _6j5i")),onClick:this.$5,ref:this.$6,title:h._("Click to add filter")},b("React").createElement(b("RTCUIExpressionsIcon.react"),null)),b("React").createElement(k,{contextRef:function(){return this.$1}.bind(this),shown:this.state.showNux&&this.state.isMouseActive})))};a.prototype.getDOMNode=function(){return this.$1};a.prototype.$2=function(){this.state.showNux&&window.setTimeout(function(){return b("RTCCallNUXActions").markNUXViewed(b("RTCCallNUXIDs").RTC_VIDEO_CHAT_FILTERS_NUX)},3e3)};function j(){b("RTCCallNUXActions").dismissNUX(b("RTCCallNUXIDs").RTC_VIDEO_CHAT_FILTERS_NUX)}var k=function(a){return b("React").createElement(b("XUIAmbientNUX.react"),babelHelpers["extends"]({alignment:"right",onCloseButtonClick:j,position:"above",width:"auto"},a),h._("New! Try filters in your video chat"))};e.exports=b("FluxContainer").create(a)}),null);
__d("RTCVideoFilterStrings",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={CapsulesEffect:g._("Colorful dotted lines"),ChainEffect:g._("Colorful fading dots"),CopyCatsEffect:g._("Cats with moving eyes"),ConfettiEffect:g._("Falling confetti"),DandelionEffect:g._("Floating dandelion puffs"),GeometryEffect:g._("Rotating geometrical shapes"),PorchLightsEffect:g._("Strands of lightbulbs"),SnowfallEffect:g._("Falling snowflakes"),StarBokehEffect:g._("Glowing stars"),UnicornEffect:g._("Moving unicorns")};e.exports=a}),null);
__d("RTCVideoFilterOptionButton.react",["cx","fbt","Image.react","React","RTCCallControlsButton.react","RTCCallStore","RTCSVGIcon.react","RTCVideoFilterConfig","RTCUIXIcon.react","RTCVideoFilterRenderer","RTCVideoFilterStrings","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PureComponent;var j=b("RTCVideoFilterConfig").config;d=babelHelpers.inherits(a,c);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$2=function(){var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logClick(babelHelpers["extends"]({},a,{callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").VIDEO_FILTER_OPTION,surface:b("RTWebLoggingSurface").CALL_CONTAINER}));this.props.filterName&&!this.props.highlighted?b("RTCVideoFilterRenderer").applyStreamEffect(this.props.filterName):b("RTCVideoFilterRenderer").removeStreamEffect()}.bind(this),c}a.prototype.render=function(){var a=this.props,c=a.className,d=a.disabled,e=a.filterName;a=a.highlighted;return b("React").createElement(b("RTCCallControlsButton.react"),{"aria-label":this.$1(),className:b("joinClasses")(c,"_6j58 icon-48"+(a?" _6j59":"")),disabled:d,onClick:this.$2,title:this.$3()},b("React").createElement(b("React").Fragment,null,a?b("React").createElement(b("RTCUIXIcon.react"),{className:"_6j5a"}):null,b("React").createElement(k,{filterName:e,highlighted:a})))};a.prototype.$3=function(){return this.props.highlighted?h._("Remove Effect"):h._("Add Effect")};a.prototype.$1=function(){return h._("Effect: {effect}",[h._param("effect",b("RTCVideoFilterStrings")[this.props.filterName])])};var k=function(a){var c=a.filterName;a=a.highlighted;return b("React").createElement(b("Image.react"),{className:"_6j5b"+(a?" _6j5c":""),src:j[c].thumbnail_url})};e.exports=a}),null);
__d("RTCVideoFilterControls.react",["ix","cx","fbt","FluxContainer","Image.react","React","RTCAppDispatcher","RTCCallControlsButton.react","RTCCallStore","RTCCoExperienceStore","RTCToggleVideoFiltersIcon.react","RTCUIFullscreenIcon.react","RTCVideoFilterConfig","RTCVideoFilterOptionButton.react","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","asset","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("RTCVideoFilterConfig").config;a=babelHelpers.inherits(l,b("React").PureComponent);j=a&&a.prototype;l.getStores=function(){return[b("RTCCoExperienceStore")]};l.calculateState=function(a){a=a?a.scrollLeft:!1;return{scrollLeft:a,currentFilter:b("RTCCoExperienceStore").getState().currentVideoFilter}};function l(a){j.constructor.call(this,a),this.$2=function(){var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logClick(babelHelpers["extends"]({},a,{callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").SCROLL_FILTERS,surface:b("RTWebLoggingSurface").CALL_CONTAINER}));this.setState(function(a,b){return{scrollLeft:!a.scrollLeft}})}.bind(this),b("RTCAppDispatcher").explicitlyRegisterStores([].concat(l.getStores()))}l.prototype.render=function(){var a=this.props,c=a.displayOptions,d=c.showFilterOptions;c=c.isDominantSpeaker;return b("React").createElement(b("React").Fragment,null,d?b("React").createElement(m,{isDominantSpeaker:c,onClick:a.onToggle}):null,b("React").createElement("section",{className:b("joinClasses")("_6j5j"+(d?" _6j5k":""),a.className)},d?b("React").createElement(b("React").Fragment,null,b("React").createElement(n,{alignLeft:this.state.scrollLeft,onClick:this.$2}),b("React").createElement("div",{className:"_6j5l"},b("React").createElement(o,{currentFilter:this.state.currentFilter,isP2P:a.isP2P,showAdditionalFilters:this.state.scrollLeft}))):b("React").createElement(b("RTCToggleVideoFiltersIcon.react"),{className:"_6j5m",filterSelected:!!this.state.currentFilter,isP2P:a.isP2P,onClick:a.onToggle,ref:function(a){return this.$1=a?a.getDOMNode():a}.bind(this)})))};var m=function(a){return b("React").createElement(b("RTCCallControlsButton.react"),{className:(a.isDominantSpeaker?"video":"")+" _6j5n _6j5h icon-48",onClick:a.onClick,title:i._("Close filter options")},b("React").createElement(b("RTCUIFullscreenIcon.react"),{direction:"in",shadow:!0}))},n=function(a){return b("React").createElement(b("RTCCallControlsButton.react"),{className:(a.alignLeft?"_6j5o":"")+(a.alignLeft?"":" _6j5p")+" icon-16",onClick:a.onClick,title:i._("See more filters")},b("React").createElement(b("Image.react"),{src:a.alignLeft?g("561422"):g("561433")}))},o=function(a){var c=a.currentFilter,d=[];for(var e in k)d.push(b("React").createElement(b("RTCVideoFilterOptionButton.react"),{filterName:e,highlighted:c===e,isP2P:a.isP2P,key:e}));!a.showAdditionalFilters?d=d.splice(Math.ceil(d.length/2),d.length):d=d.splice(0,Math.floor(d.length/2));return b("React").createElement(b("React").Fragment,null,d)};e.exports=b("FluxContainer").create(l)}),null);
__d("RTCSelfView.react",["cx","FBRTCSupport","React","ReactMotion","Rect","RTCGroupCallEscalationStore","RTCInCallFeaturesUtils","RTCSelfViewAnimationConfig","RTCSelfViewCameraStream.react","RTCSelfViewScreenStream.react","RTCVideoFilterControls.react","RTWebClientFeatureGating","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","getViewportDimensions","joinClasses","keyMirror"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("ReactMotion").TransitionMotion,j=b("ReactMotion").spring,k=b("ReactMotion").stripStyle,l=b("RTCInCallFeaturesUtils").BOUNDING_BOX_MARGIN,m=b("RTCInCallFeaturesUtils").Corners,n=b("RTCInCallFeaturesUtils").SELF_VIEW_HEIGHT,o=b("RTCInCallFeaturesUtils").SELF_VIEW_WIDTH,p=b("RTCInCallFeaturesUtils").SETTINGS_HEIGHT,q=b("RTCSelfViewAnimationConfig").springConfig,r=10,s=b("keyMirror")({CAMERA:null,SCREEN:null});c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;a.getDerivedStateFromProps=function(a,b){var c=v(a);return{filtersEnabled:c,showFilterOptions:c?b.showFilterOptions:!1,tiles:t(a,b.tiles)}};function a(){__p&&__p();h.constructor.call(this),this.state={cameraViewCollapsed:!1,isMouseDown:!1,draggableSelfViewEnabled:!1,snappedCorner:m.BOTTOM_RIGHT,offsetLeft:0,offsetTop:0,mouseInSelfViewX:0,mouseInSelfViewY:0,filtersEnabled:!1,focused:!1,hovered:!1,screenHeight:0,screenWidth:0,showFilterOptions:!1,tiles:[],width:0,boundingBox:new(b("Rect"))(0,0,0,0)},this.$3=function(a){this.state.draggableSelfViewEnabled&&(a.persist(),a.preventDefault(),this.setState(function(b){return{mouseInSelfViewX:b.offsetLeft-a.clientX,mouseInSelfViewY:b.offsetTop-a.clientY,isMouseDown:!0,snappedCorner:m.NO_CORNER}}))}.bind(this),this.$9=function(a){this.state.isMouseDown&&this.setState(function(a){a=b("RTCInCallFeaturesUtils").snapToCorner({offsetLeft:a.offsetLeft,offsetTop:a.offsetTop},a.screenWidth,a.screenHeight);return{snappedCorner:a.snappedCorner,offsetLeft:a.offsetLeft,offsetTop:a.offsetTop,isMouseDown:!1}})}.bind(this),this.$10=function(a){this.state.isMouseDown&&this.setState(function(b){return this.$7({offsetLeft:b.mouseInSelfViewX+a.clientX,offsetTop:b.mouseInSelfViewY+a.clientY},b.boundingBox)}.bind(this))}.bind(this),this.$11=function(){this.$8(),this.setState(function(a){return a.snappedCorner!==m.NO_CORNER?b("RTCInCallFeaturesUtils").getCornerPosition(a.screenWidth,a.screenHeight,a.snappedCorner):this.$7({offsetLeft:a.offsetLeft,offsetTop:a.offsetTop},a.boundingBox)}.bind(this))}.bind(this),this.doubleSelfViewSize=b("RTWebClientFeatureGating").doubleSelfViewSize(),this.allowDraggableSelfView=b("RTWebClientFeatureGating").draggableSelfView()}a.prototype.render=function(){__p&&__p();var a=this.props,c=a.className,d=a.user;if(!this.$1())return null;a=this.state;var e=a.cameraViewCollapsed,f=a.focused,g=a.hovered;return b("React").createElement(i,{styles:this.$2(),willEnter:function(a){a=a.style;return babelHelpers["extends"]({},k(a),{opacity:0})},willLeave:function(a){a=a.style;return babelHelpers["extends"]({},a,{opacity:j(0,q)})}},function(a){__p&&__p();return b("React").createElement("div",{className:b("joinClasses")("_u2-"+(this.doubleSelfViewSize?" _6geo":"")+(this.state.showFilterOptions?" filters":""),c),onBlur:function(){return this.setState({focused:!1})}.bind(this),onFocus:function(){return this.setState({focused:!0})}.bind(this),onMouseDown:this.$3,onMouseEnter:function(){return this.setState({hovered:!0})}.bind(this),onMouseLeave:function(){return this.setState({hovered:!1})}.bind(this),style:this.state.draggableSelfViewEnabled?{width:this.state.width,left:this.state.offsetLeft+"px",top:this.state.offsetTop+"px",position:"fixed"}:{width:this.state.width}},a.map(function(a){switch(a.key){case s.CAMERA:return b("React").createElement(b("RTCSelfViewCameraStream.react"),{collapsed:e,doubleSelfViewSize:this.doubleSelfViewSize,focused:f,hovered:g,isDraggable:this.allowDraggableSelfView,isFilterMode:this.state.showFilterOptions,key:a.key,onClick:function(){this.allowDraggableSelfView||(this.$4(!this.state.cameraViewCollapsed),this.setState(function(a){return{cameraViewCollapsed:!a.cameraViewCollapsed,showFilterOptions:!1}}))}.bind(this),onResize:function(a){return this.$5(s.CAMERA,a.width)}.bind(this),style:this.$6(a.style),user:d});case s.SCREEN:return b("React").createElement(b("RTCSelfViewScreenStream.react"),{focused:f,hovered:g,key:a.key,onResize:function(a){return this.$5(s.SCREEN,a.width)}.bind(this),onStopSharing:this.props.onScreenSharingStop,style:this.$6(a.style),user:d});default:return null}}.bind(this)),this.state.filtersEnabled&&!e?b("React").createElement(b("RTCVideoFilterControls.react"),{displayOptions:{showFilterOptions:this.state.showFilterOptions,isDominantSpeaker:!!this.props.isDominantSpeaker},isP2P:this.props.isP2P,onToggle:function(){return this.setState(function(a){return{showFilterOptions:!a.showFilterOptions}})}.bind(this)}):null)}.bind(this))};a.prototype.$1=function(){return this.props.user.hasVideo()||this.props.user.hasScreenStream()||b("RTWebClientFeatureGating").callUnification()||b("RTWebClientFeatureGating").answerCallWithThreeButtons()&&!this.props.isAudioCall};a.prototype.$7=function(a,c){a=new(b("Rect"))(a.offsetTop,a.offsetLeft+o,a.offsetTop+n,a.offsetLeft);a=a.boundWithin(c);return{offsetLeft:a.getLeft(),offsetTop:a.getTop()}};a.prototype.$8=function(){var a=b("getViewportDimensions").withoutScrollbars();this.setState({screenWidth:a.width,screenHeight:a.height,boundingBox:new(b("Rect"))(l+p,a.width-l,a.height-l,l)})};a.prototype.$2=function(){var a=this.state.tiles,b=a.map(function(a){return a.width});return a.map(function(a,c){var d=b.reduce(function(a,b,d){return b<=0||d<=c?a:a+b+r},0);return{key:a.type,style:{opacity:j(1,q),x:j(d,q)}}})};a.prototype.$5=function(a,b){this.setState(function(c){c=c.tiles;return{tiles:c.map(function(c){return c.type===a?u(a,b):c})}})};a.prototype.$6=function(a){var b=a.opacity;a=a.x;return{opacity:b,transform:"translateX(-"+a+"px)"}};a.prototype.$4=function(a){b("RTWebUserActionLogger").logClick({component:a?b("RTWebLoggingComponent").SELF_VIEW_MINIMIZE:b("RTWebLoggingComponent").SELF_VIEW_UNMINIMIZE,surface:b("RTWebLoggingSurface").CALL_CONTAINER})};a.prototype.$12=function(){this.setState({offsetLeft:b("getViewportDimensions").withoutScrollbars().width-o-l,offsetTop:b("getViewportDimensions").withoutScrollbars().height-n-l})};a.prototype.componentDidMount=function(){this.allowDraggableSelfView&&(this.$12(),window.addEventListener("mousemove",this.$10),window.addEventListener("mouseup",this.$9),this.$8(),window.addEventListener("resize",this.$11)),b("RTWebUserActionLogger").logImpression({component:b("RTWebLoggingComponent").SELF_VIEW,surface:b("RTWebLoggingSurface").CALL_CONTAINER})};a.prototype.componentDidUpdate=function(a,b){__p&&__p();if(b.tiles!==this.state.tiles){a=this.state.tiles.reduce(function(a,b,c){b=b.width;return b<=0?a:c>0?a+b+r:a+b},0);this.setState({width:a})}if(b.width!==this.state.width){a=this.props.onResize;a!=null&&a({height:0,width:this.state.width})}if(this.allowDraggableSelfView){b=this.props.isDominantSpeaker||this.props.user.hasScreenStream();this.state.draggableSelfViewEnabled&&b&&this.$12();this.setState({draggableSelfViewEnabled:!b})}};a.prototype.componentWillUnmount=function(){this.allowDraggableSelfView&&(window.removeEventListener("mousemove",this.$10),window.removeEventListener("mouseup",this.$9),window.removeEventListener("resize",this.$11))};a.defaultProps={hideCameraViewWhenScreenSharing:!1,isDominantSpeaker:!1};function t(a,b){__p&&__p();var c=a.user;b=b;var d=b.find(function(a){return a.type===s.CAMERA});c.hasStream()&&!(a.hideCameraViewWhenScreenSharing&&c.hasScreenStream())?d==null&&(b=[].concat(b,[u(s.CAMERA)])):d!=null&&(b=b.filter(function(a){return a.type!==s.CAMERA}));a=b.find(function(a){return a.type===s.SCREEN});c.hasScreenStream()?a==null&&(b=[u(s.SCREEN)].concat(b)):a&&(b=b.filter(function(a){return a.type!==s.SCREEN}));return b}function u(a,b){b===void 0&&(b=0);return{type:a,width:b}}function v(a){if(!b("FBRTCSupport").isVideoFilterEffectSupported()||a.hideCameraViewWhenScreenSharing&&a.user.hasScreenStream()||a.user.isVideoMuted())return!1;var c=b("RTCGroupCallEscalationStore").getState().readyToTransition;return a.isP2P?b("RTWebClientFeatureGating").canUseP2PVideoFilters():!c&&b("RTWebClientFeatureGating").canUseMWVideoFilters()}e.exports=a}),null);
__d("RTCMWAppViewFooter.react",["cx","Promise","CollabRTCChromeScreenSharingExtension","FBRTCConstants","FBRTCHangupReason","FBRTCParticipantCallState","FBRTCScreenSharingUtils","React","RTCAppViewFooter.react","RTCCallControls.react","RTCCallControlsAddGroupMembersButton.react","RTCCallControlsCloseWindowButton.react","RTCCallControlsEndCallButton.react","RTCCallControlsToggleAudioButton.react","RTCCallControlsToggleScreenSharingWithFunnelButton.react","RTCCallControlsToggleVideoButton.react","RTCCallControlsVideoEscalationButton.react","RTCChromeScreenSharingUtils","RTCConferenceState","RTCGroupCallRemoteView.react","RTCMWProtocolHandler","RTCSelfView.react","RTWebClientFeatureGating","UserAgent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("FBRTCConstants").GroupVideoViewLayout,j=b("RTCChromeScreenSharingUtils").getMediaRequestSourceAppId;c=b("React").PureComponent;d=babelHelpers.inherits(a,c);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=0,this.$2=0,this.$3=0,this.$5=0,this.$6=null,this.$9=function(){b("RTCMWProtocolHandler").endCall(this.props.conferenceName,this.props.serverInfoData,b("FBRTCHangupReason").HANGUP_CALL)}.bind(this),this.$7=function(a){a=a.width;if(this.$1===a)return;this.$1=a;this.$12()}.bind(this),this.$8=function(a){a=a.width;if(this.$3===a)return;this.$3=a;this.$12()}.bind(this),this.$10=function(a){a=a.width;if(this.$2===a)return;this.$2=a;this.$12()}.bind(this),c}a.prototype.render=function(){__p&&__p();var a=this.props,c=a.hasVideoInput,d=a.isAudioCall,e=a.layout;a=a.localUser;switch(this.props.conferenceState){case b("RTCConferenceState").CONNECTING:case b("RTCConferenceState").CONNECTED:var f=a&&a.getScreenStream();e=e===i.DOMINANT_SPEAKER;e=(!d||b("RTWebClientFeatureGating").callUnification())&&e;var g=a.isGuestUser?null:b("React").createElement(b("RTCCallControlsAddGroupMembersButton.react"),{className:e?"addMember":"",conferenceName:this.props.conferenceName,conferenceState:this.props.conferenceState,isP2P:!1,localUser:a,participants:this.props.participants,remoteUsers:this.props.remoteUsers,thread:this.props.thread});return b("React").createElement(b("RTCAppViewFooter.react"),{onResize:this.$7},b("React").createElement(b("RTCCallControls.react"),{autoHide:!d,className:"_5rdt"+(e?" video":""),onResize:this.$8,ref:function(a){return this.$4=a?a.getDOMNode():a}.bind(this)},a.hasLiveVideoTracks()?b("React").createElement(b("RTCCallControlsToggleVideoButton.react"),{conferenceState:this.props.conferenceState,disabled:!!f,initializeVideo:!0,isP2P:!1,videoMuted:a.isVideoMuted()}):b("React").createElement(b("RTCCallControlsVideoEscalationButton.react"),{disabled:!c,onClick:function(){return b("RTCMWProtocolHandler").escalateLocalStream()}}),b("React").createElement(b("RTCCallControlsToggleAudioButton.react"),{audioMuted:a.isAudioMuted(),conferenceState:this.props.conferenceState,isP2P:!1}),b("FBRTCScreenSharingUtils").isGroupCallScreenSharingSupported()?b("React").createElement(b("RTCCallControlsToggleScreenSharingWithFunnelButton.react"),{conferenceState:this.props.conferenceState,disabled:!a.hasScreenStream()&&(d||a.isVideoMuted()),isP2P:!1,onExtensionInstallStart:function(){return b("UserAgent").isBrowser("Chrome")?b("CollabRTCChromeScreenSharingExtension").install(j()):b("Promise").reject("unexpected browser")},onShareStarted:b("RTCMWProtocolHandler").startScreenStream,onShareStop:b("RTCMWProtocolHandler").stopScreenStream,onShareStreamUpdate:b("RTCMWProtocolHandler").updateScreenStream,stream:f}):null,e?null:g,b("React").createElement(b("RTCCallControlsEndCallButton.react"),{conferenceState:this.props.conferenceState,isP2P:!1,onClick:this.$9})),e?g:null,e?b("React").createElement(b("RTCGroupCallRemoteView.react"),{remoteUsers:this.props.remoteUsers.filter(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED})}):null,b("React").createElement(b("RTCSelfView.react"),{className:"_3kqh"+(e?" video":""),hideCameraViewWhenScreenSharing:!0,isAudioCall:d,isDominantSpeaker:e,isP2P:!1,onResize:this.$10,onScreenSharingStop:b("RTCMWProtocolHandler").stopScreenStream,user:a}));case b("RTCConferenceState").TERMINATING:return b("React").createElement(b("RTCAppViewFooter.react"),{onResize:this.$7},b("React").createElement(b("RTCCallControls.react"),{autoHide:!1,className:"_5rdt",onResize:this.$8,ref:function(a){return this.$4=a?a.getDOMNode():a}.bind(this)},b("React").createElement(b("RTCCallControlsToggleVideoButton.react"),{conferenceState:this.props.conferenceState,disabled:!0,initializeVideo:!0,isP2P:!1,videoMuted:!0}),b("React").createElement(b("RTCCallControlsToggleAudioButton.react"),{audioMuted:!0,conferenceState:this.props.conferenceState,disabled:!0,isP2P:!1}),b("React").createElement(b("RTCCallControlsEndCallButton.react"),{conferenceState:this.props.conferenceState,disabled:!0,isP2P:!1})));case b("RTCConferenceState").TERMINATED:return b("React").createElement(b("RTCAppViewFooter.react"),{onResize:this.$7},b("React").createElement(b("RTCCallControls.react"),{autoHide:!1,className:"_5rdt",onResize:this.$8,ref:function(a){return this.$4=a?a.getDOMNode():a}.bind(this)},this.$11()?null:b("React").createElement(b("RTCCallControlsCloseWindowButton.react"),null)));default:return b("React").createElement(b("RTCAppViewFooter.react"),null)}};a.prototype.$12=function(){__p&&__p();if(this.$1===0||this.$3===0)return;var a=Math.min(0,this.$1/2-(this.$3/2+this.$2));if(a===this.$5)return;this.$5=a;if(this.$4){var b=this.$4.style;b.transition="none";this.$6=window.requestAnimationFrame(function(){b.transform="translateX("+this.$5+"px)",b.transition=""}.bind(this))}};a.prototype.$11=function(){return!window.opener};a.prototype.componentWillUnmount=function(){window.cancelAnimationFrame(this.$6)};e.exports=a}),null);
__d("RTCChatPanelIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){return b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 50 50"},b("React").createElement("path",{d:"M24.999,35.9861483 C23.837,35.9861483 22.73,35.8825981 21.6915,35.6289751 C20.828,35.4183729 19.9265,35.4398834 19.0845,35.7270226 L15.083,36.9551183 C14.4385,37.175225 13.813,36.5489213 14.0315,35.8795966 L14.826,33.2498212 C15.1235,32.3378789 15.008,31.3373937 14.5085,30.5224984 C13.4515,28.7971616 13.0005,26.7361621 13,24.4545555 C13.001,17.7953257 18.0255,13 24.999,13 C31.973,13 36.9975,17.7953257 36.9985,24.4525545 C36.9975,31.1122845 31.973,35.9861483 24.999,35.9861483 Z",id:"path-1"})))};e.exports=a}),null);
__d("RTCCallControlsChatButton.react",["cx","fbt","FluxContainer","React","RTCCallControlsButton.react","RTCChatPanelIcon.react","RTCCoExperienceActions","RTCCoExperienceStore","RTWebClientFeatureGating","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(j,b("React").PureComponent);i&&i.prototype;j.prototype.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").TOGGLE_CHAT,conferenceState:this.props.conferenceState,surface:b("RTWebLoggingSurface").CALL_CONTROLS})};j.prototype.render=function(){return b("React").createElement(b("RTCCallControlsButton.react"),{className:b("joinClasses")("transparent icon-50 _3n07",this.props.className),"data-testid":b("VideoCallWebDriverIDs").TOGGLE_CHAT_BUTTON,onClick:function(){return this.$1()}.bind(this),title:h._("Open Chat")},b("React").createElement(b("RTCChatPanelIcon.react"),null))};j.prototype.$1=function(){b("RTWebUserActionLogger").logClick({callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").TOGGLE_CHAT,conferenceState:this.props.conferenceState,surface:b("RTWebLoggingSurface").CALL_CONTROLS}),b("RTCCoExperienceActions").toggleChatWindow()};function j(){i.apply(this,arguments)}a=b("FluxContainer").createFunctional(function(a){var c=a.isP2P?b("RTWebClientFeatureGating").isChatEnabled():b("RTWebClientFeatureGating").isGroupChatEnabled();return c&&!a.chatWindowVisible?b("React").createElement(j,{conferenceState:a.conferenceState,isP2P:a.isP2P}):null},function(){return[b("RTCCoExperienceStore")]},function(a,c,d){return babelHelpers["extends"]({},c,{chatWindowVisible:b("RTCCoExperienceStore").getState().chatWindowVisible})},{withProps:!0});e.exports=a}),null);
__d("RTCUIDominantSpeakerLayoutIcon.react",["React","RTCSVGIcon.react","RTCSVGIconDropShadowFilter.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$1="",this.$2=function(a){a&&(this.$1=a.getURL(),this.forceUpdate())}.bind(this),b}a.prototype.render=function(){var a=this.props,c=a.shadow;a=babelHelpers.objectWithoutProperties(a,["shadow"]);return c?b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 50 50"},b("React").createElement("defs",null,b("React").createElement(b("RTCSVGIconDropShadowFilter.react"),{height:20,ref:this.$2,width:20})),b("React").createElement("g",{filter:this.$1},b("React").createElement(h,null)))):b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 50 50"},b("React").createElement(h,null)))};a.defaultProps={shadow:!1};var h=function(){return b("React").createElement("path",{d:"M16.5 14.5h17a2 2 0 0 1 2 2v17a2 2 0 0 1-2 2h-17a2 2 0 0 1-2-2v-17a2 2 0 0 1 2-2zm0 2h17v11h-17zm0 13h4v4h-4zm6.5 0h4v4h-4zm6.5 0h4v4h-4z",fillRule:"evenodd"})};e.exports=a}),null);
__d("RTCCallControlsDominantSpeakerSwitchButton.react",["cx","fbt","FBRTCConstants","React","RTCCallControlsButton.react","RTCGroupCallActions","RTCUIDominantSpeakerLayoutIcon.react","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("FBRTCConstants").GroupVideoViewLayout;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){return b("React").createElement(b("RTCCallControlsButton.react"),{className:"transparent icon-50","data-testid":b("VideoCallWebDriverIDs").DOMINANT_SPEAKER_SWITCH_BUTTON,onClick:this.$1,title:h._("Switch to dominant speaker view")},b("React").createElement(b("RTCUIDominantSpeakerLayoutIcon.react"),{shadow:!0}))};a.prototype.$1=function(){b("RTCGroupCallActions").setLayout(j.DOMINANT_SPEAKER)};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("RTCUIGridLayoutIcon.react",["React","RTCSVGIcon.react","RTCSVGIconDropShadowFilter.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$1="",this.$2=function(a){a&&(this.$1=a.getURL(),this.forceUpdate())}.bind(this),b}a.prototype.render=function(){var a=this.props,c=a.shadow;a=babelHelpers.objectWithoutProperties(a,["shadow"]);return c?b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 50 50"},b("React").createElement("defs",null,b("React").createElement(b("RTCSVGIconDropShadowFilter.react"),{height:20,ref:this.$2,width:20})),b("React").createElement("g",{filter:this.$1},b("React").createElement(h,null)))):b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 50 50"},b("React").createElement(h,null)))};a.defaultProps={shadow:!1};var h=function(){return b("React").createElement("path",{d:"M16.5 14.5h17a2 2 0 0 1 2 2v17a2 2 0 0 1-2 2h-17a2 2 0 0 1-2-2v-17a2 2 0 0 1 2-2zm0 2H24V24h-7.5zm9.5 0h7.5V24H26zM16.5 26H24v7.5h-7.5zm9.5 0h7.5v7.5H26z",fillRule:"evenodd"})};e.exports=a}),null);
__d("RTCCallControlsGridSwitchButton.react",["cx","fbt","FBRTCConstants","React","RTCCallControlsButton.react","RTCGroupCallActions","RTCUIGridLayoutIcon.react","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("FBRTCConstants").GroupVideoViewLayout;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){return b("React").createElement(b("RTCCallControlsButton.react"),{className:"transparent icon-50","data-testid":b("VideoCallWebDriverIDs").GRID_SWITCH_BUTTON,onClick:this.$1,title:h._("Switch to grid view")},b("React").createElement(b("RTCUIGridLayoutIcon.react"),{shadow:!0}))};a.prototype.$1=function(){b("RTCGroupCallActions").setLayout(j.GRID)};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("RTCMWAppViewHeader.react",["FBRTCConstants","React","RTCAppViewHeader.react","RTCCallControls.react","RTCCallControlsChatButton.react","RTCCallControlsDominantSpeakerSwitchButton.react","RTCCallControlsGridSwitchButton.react","RTCCallControlsToggleFullScreenButton.react","RTCConferenceState","RTWebClientFeatureGating"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").GroupVideoViewLayout;a=function(a){var c=a.conferenceState,d=a.hideLayoutSwitchButton,e=a.isAudioCall,f=a.layout;a=a.showChatButton;switch(c){case b("RTCConferenceState").CONNECTED:var h=!e||b("RTWebClientFeatureGating").callUnification();a=a?b("React").createElement(b("RTCCallControlsChatButton.react"),{conferenceState:c,isP2P:!1}):null;return b("React").createElement(b("RTCAppViewHeader.react"),{isAudioCall:e},b("React").createElement(b("RTCCallControls.react"),{autoHide:h,compact:!0},h&&!d&&f!==g.DOMINANT_SPEAKER?b("React").createElement(b("RTCCallControlsDominantSpeakerSwitchButton.react"),null):null,h&&!d&&f!==g.GRID?b("React").createElement(b("RTCCallControlsGridSwitchButton.react"),null):null,b("React").createElement(b("RTCCallControlsToggleFullScreenButton.react"),{isAudioOnly:e,isP2P:!1}),a));default:return b("React").createElement(b("RTCAppViewHeader.react"),{isAudioCall:e},b("React").createElement(b("RTCCallControls.react"),{autoHide:!e,compact:!0},b("React").createElement(b("RTCCallControlsToggleFullScreenButton.react"),{isAudioOnly:e,isP2P:!1})))}};e.exports=a}),null);
__d("RTCPeerConnectionStats.react",["FBRTCLogger","React","RTCConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PureComponent;d=babelHelpers.inherits(a,c);g=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.state={stats:[]},b}a.prototype.render=function(){if(!b("RTCConfig").PeerConnectionStatsGK)return null;if(this.state.stats.length<1)return null;var a={background:"white",bottom:0,color:"black",fontSize:10,left:0,margin:0,opacity:.7,padding:"1em",position:"absolute",textAlign:"left",zIndex:9};return b("React").createElement("pre",{style:babelHelpers["extends"]({},a,this.props.style)},[this.$2("in"),this.$2("out")].filter(Boolean).join("\n"))};a.prototype.$2=function(a){__p&&__p();var b=this.state.stats.filter(function(b){return b.direction===a}).map(function(b){__p&&__p();b.id;var c=b.type,d=b.packetsLost,e=b.resolution,f=b.frameRate;b=babelHelpers.objectWithoutProperties(b,["id","type","packetsLost","resolution","frameRate"]);if(a==="in"){var g=b.bytesReceived,h=b.packetsReceived,i=d/(h+d)||0;g=["b:  "+g,"p:  "+d+" / "+h,"l:  "+i.toFixed(4).replace(/\.?0+$/,"")+"%"]}else{h=b.bytesSent;i=b.packetsSent;b=d/(i+d)||0;g=["b:  "+h,"p:  "+d+" / "+i,"l:  "+b.toFixed(4).replace(/\.?0+$/,"")+"%"]}f&&g.unshift("fr: "+f);e&&g.unshift("r:  "+e);return c+" "+a+":\n  "+g.join("\n  ")}).join("\n");return!b.length?"":b};a.prototype.componentDidMount=function(){__p&&__p();if(!b("RTCConfig").PeerConnectionStatsGK)return;this.$1=window.setInterval(function(){__p&&__p();var a=this.props.connection;if(!a||a.getIceConnectionState()==="closed"||a.getIceConnectionState()==="disconnected")return;a.getStats().then(function(a){__p&&__p();var b=[];for(var a=a.values(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(e.type==="ssrc"){var f={id:e.id,packetsLost:e.packetsLost||0,type:e.mediaType};if(e.mediaType==="video"){var g=e.googBandwidthLimitedResolution?" (BW limited)":"";if("googFrameWidthSent"in e){var h=e.googFrameWidthSent,i=e.googFrameHeightSent;f.resolution=h+"x"+i+g}else if("googFrameWidthReceived"in e){h=e.googFrameWidthReceived;i=e.googFrameHeightReceived;f.resolution=h+"x"+i+g}if("googFrameRateInput"in e){h=e.googFrameRateInput;i=e.googFrameRateSent;f.frameRate=h+" -> "+i}else if("googFrameRateOutput"in e){g=e.googFrameRateOutput;h=e.googFrameRateReceived;f.frameRate=g+" -> "+h}}"bytesSent"in e?(f.bytesSent=e.bytesSent,f.packetsSent=e.packetsSent,f.direction="out"):(f.bytesReceived=e.bytesReceived,f.packetsReceived=e.packetsReceived,f.direction="in");b.push(f)}}return b}).then(function(a){return this.setState({stats:a})}.bind(this))["catch"](function(a){b("FBRTCLogger").getInstance().logToConsole(JSON.stringify(a))})}.bind(this),1e3)};a.prototype.componentWillUnmount=function(){window.clearInterval(this.$1)};e.exports=a}),null);
__d("RTCGroupCallView.react",["cx","fbt","invariant","Promise","FBRTCConsoleLogger","FBRTCConstants","FBRTCHangupReason","FBRTCMobileBrowserAppViewContent.react","FBRTCMobileBrowserAppViewFooter.react","FBRTCMobileBrowserAppViewHeader.react","FBRTCParticipantCallState","FBRTCSupport","React","RTCAppView.react","RTCChatViewWrapper.react","RTCConferenceState","RTCGrantUserMediaAccessView.react","RTCMWAppViewContent.react","RTCMWAppViewFooter.react","RTCMWAppViewHeader.react","RTCMWProtocolHandler","RTCPeerConnectionStats.react","RTCUserMediaRequestState","RTCUtils","RTWebUserActionLogger","Run"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("FBRTCConstants").GroupVideoViewLayout;c=b("React").PureComponent;var l=2,m=8,n=5;d=babelHelpers.inherits(a,c);j=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.state={hasVideoInput:!1,wasConnected:!1},b}a.getDerivedStateFromProps=function(a,c){return{wasConnected:c.wasConnected||a.conferenceState===b("RTCConferenceState").CONNECTED}};a.prototype.render=function(){__p&&__p();var a=this.props.userMediaRequest;switch(a.state){case b("RTCUserMediaRequestState").PENDING:case b("RTCUserMediaRequestState").REJECTED:return b("React").createElement(b("RTCGrantUserMediaAccessView.react"),{isAudioCall:this.props.isAudioCall,userMediaRequest:a});default:a=this.props;var c=a.layout;a=babelHelpers.objectWithoutProperties(a,["layout"]);var d=this.props.thread?this.props.thread.thread_id:"0";!this.props.chatWindowVisible||this.props.thread!=null||i(0,5576);var e=b("FBRTCSupport").isMobileDevice();c=this.getLayoutSpecifics(c,e);var f=c.hideLayoutSwitchButton,g=c.remoteUsersLayout;c=c.connectedRemoteUsersSize;return b("React").createElement(b("RTCChatViewWrapper.react"),{callerID:this.props.localUser.FBID,chatWindowVisible:this.props.chatWindowVisible,threadID:d},b("React").createElement("div",{className:"_38jq _li"+(this.props.conferenceState===b("RTCConferenceState").TERMINATED?" _17cj":"")},b("React").createElement(b("RTCAppView.react"),{isAudioCall:this.props.isAudioCall},e?b("React").createElement(o,babelHelpers["extends"]({connectedRemoteUsersSize:c,hasVideoInput:this.state.hasVideoInput,layout:g},a)):b("React").createElement(p,babelHelpers["extends"]({hasVideoInput:this.state.hasVideoInput,hideLayoutSwitchButton:f,layout:g,wasConnected:this.state.wasConnected},a)))))}};a.prototype.getLayoutSpecifics=function(a,c){a=this.props.remoteUsers.count(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED});if(c)return{hideLayoutSwitchButton:!0,remoteUsersLayout:a>n?k.DOMINANT_SPEAKER:k.GRID,connectedRemoteUsersSize:a};c=a>m||a<l;a=a<l?k.GRID:c?k.DOMINANT_SPEAKER:this.props.layout;return{hideLayoutSwitchButton:c,remoteUsersLayout:a}};a.prototype.componentDidMount=function(){__p&&__p();new(b("Promise"))(function(a){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?a(navigator.mediaDevices.enumerateDevices().then(function(a){return a.some(function(a){a=a.kind;return a==="videoinput"})})):a(!0)}).then(function(a){return this.setState({hasVideoInput:a})}.bind(this))["catch"](function(a){}),b("Run").onBeforeUnload(function(){var a=this.props.conferenceState;switch(a){case b("RTCConferenceState").CONNECTING:case b("RTCConferenceState").CONNECTED:case b("RTCConferenceState").TERMINATING:return h._("Leaving this page will end your call.")}return undefined}.bind(this),!1),b("Run").onUnload(function(){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"window_unload"});var a=this.props.conferenceState;if(a===b("RTCConferenceState").TERMINATED)return;b("RTCMWProtocolHandler").endCall(this.props.conferenceName,this.props.serverInfoData,b("FBRTCHangupReason").HANGUP_CALL,"BrowserClosed")}.bind(this))};a.prototype.componentDidUpdate=function(a){b("FBRTCSupport").isMobileDevice()&&this.props.conferenceState===b("RTCConferenceState").TERMINATED&&a.conferenceState!==b("RTCConferenceState").TERMINATED&&b("RTCUtils").exitFullScreen()};function o(a){return b("React").createElement(b("React").Fragment,null,b("React").createElement(b("FBRTCMobileBrowserAppViewHeader.react"),a),b("React").createElement(b("FBRTCMobileBrowserAppViewContent.react"),a),b("React").createElement(b("FBRTCMobileBrowserAppViewFooter.react"),a))}function p(a){return b("React").createElement(b("React").Fragment,null,b("React").createElement(b("RTCMWAppViewHeader.react"),babelHelpers["extends"]({showChatButton:a.thread!=null},a)),b("React").createElement(b("RTCMWAppViewContent.react"),a),b("React").createElement(b("RTCMWAppViewFooter.react"),a),b("React").createElement(b("RTCPeerConnectionStats.react"),{connection:a.connection,style:{marginBottom:40}}))}e.exports=a}),null);
__d("RTCMediaDevicesActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ENUMERATE_MEDIA_DEVICES:"ENUMERATE_MEDIA_DEVICES"})}),null);
__d("RTCMediaDevicesActions",["RTCAppDispatcher","RTCMediaDevicesActionTypes"],(function(a,b,c,d,e,f){"use strict";a={enumerate:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCMediaDevicesActionTypes").ENUMERATE_MEDIA_DEVICES,devices:a})}};e.exports=a}),null);
__d("RTCMediaDevicesStore",["FBRTCConsoleLogger","FluxReduceStore","RTCAppDispatcher","RTCMediaDevices","RTCMediaDevicesActions","RTCMediaDevicesActionTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxReduceStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("RTCAppDispatcher")),this.$RTCMediaDevicesStore1(),b("RTCMediaDevices").addEventListener("devicechange",this.$RTCMediaDevicesStore1)}a.prototype.$RTCMediaDevicesStore1=function(){b("RTCMediaDevices").enumerateDevices().then(function(a){return b("RTCMediaDevicesActions").enumerate(a)})["catch"](function(a){})};a.prototype.getInitialState=function(){return null};a.prototype.reduce=function(a,c){var d=c.type;c=c.devices;switch(d){case b("RTCMediaDevicesActionTypes").ENUMERATE_MEDIA_DEVICES:return[].concat(c);default:return a}};a.prototype.refresh=function(){this.$RTCMediaDevicesStore1()};a.prototype.getByLabel=function(a,b){var c=this.getState();return!c?null:c.find(function(c){return c.kind===b&&c.label===a})||c.find(function(c){return c.kind===b&&i(c.label,a)})};a.__moduleID=e.id;var h=/#\d+\s(\([\da-f]{4}:[\da-f]{4}\))$|\s#\d+$/;function i(a,b){return a.replace(h,"$1")===b.replace(h,"$1")}e.exports=new a()}),null);
__d("CollabInitStreamTriggerType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ESCALATION_APPROVED:"escalation_approved",ESCALATION_INITIATED:"escalation_initiated",REDIAL:"redial",USER_MEDIA_REQUEST:"user_media_request",USER_SETTINGS_CHANGED:"user_settings_changed"})}),null);
__d("RTCCallInitUtils",["invariant","CurrentUser","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCConstants","MercuryIDs","MercuryParticipantTypes","MessengerParticipants.bs","RTCCallActions","RTCCallStore","RTCUser","URI","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").CallType,i=b("FBRTCConstants").SignalingProtocol;a={initializeCallSummary:function(a){var c=b("FBRTCCallSummary").restoreOrInitialize(b("FBRTCCallSummaryStore").getInstance(),a.peerID,a.callID,a.isCaller);b("RTCCallActions").setCallSummary(c);b("RTCCallStore").mutateCallSummary(function(b){b.onPopupOpened(),b.setCallType(a.protocol===i.P2P?a.isAudio?h.VOIP:h.DIRECT_VIDEO:"mws"),b.setActiveConnection(a.protocol===i.P2P?"p2p":"mws")})},initializeRTCUsers:function(a,c){a=a.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});b("MessengerParticipants.bs").getMulti(a,function(a){a=b("immutable").Map(a);this.initializeParticipantsAndStartCall(a,!0,c)}.bind(this))},initializeParticipantsAndStartCall:function(a,c,d){var e=a.keySeq().toArray();b("MessengerParticipants.bs").getBigImageMultiWithSize(e,function(e){c&&b("RTCCallActions").initRemoteUsers(a.filter(function(a){a=a.fbid;return a!==b("CurrentUser").getID()}).map(function(a){return this._createRTCUser(a,e)}.bind(this)).toSet());var f=b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID());b("RTCCallActions").initLocalUser(this._createRTCUser(a.get(f),e));d()}.bind(this),100)},_createRTCUser:function(a,c){var d=a.big_image_src,e=a.fbid,f=a.user_type,h=a.href,i=a.image_src,j=a.is_messenger_user,k=a.name,l=a.room_location,m=a.short_name;a=a.vanity;e||g(0,1174);if(c){var n=b("MercuryIDs").getParticipantIDFromUserID(e);d=c[n]}return new(b("RTCUser"))({FBID:e,isGuestUser:f===b("MercuryParticipantTypes").GUEST,isMessengerUser:!!j,profileUrl:new(b("URI"))(h),profilePictureUrl:d||i,roomLocation:l,userName:k,userShortName:m,vanity:a?a:""})}};e.exports=a}),null);
__d("RTCP2PIncallView.react",["cx","fbt","FBRTCConstants","FluxContainer","React","RTCAppDispatcher","RTCCallNUXActions","RTCCallNUXIDs","RTCCallNUXStore","RTCCallStore","RTCIncallAudio.react","RTCIncallVideo.react","ShimButton.react","VideoCallWebDriverIDs","XUIAmbientNUX.react","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("FBRTCConstants").SignalingProtocol;a=b("React").PureComponent;function k(a){var c=a.audioSinkID;a=a.streams;return a.toArray().map(function(a,d){return b("React").createElement(b("RTCIncallAudio.react"),babelHelpers["extends"]({key:d},{audioSinkID:c,mediaStream:a}))})}c=babelHelpers.inherits(l,a);i=c&&c.prototype;l.getStores=function(){return[b("RTCCallNUXStore")]};l.calculateState=function(a){a===void 0&&(a={});return babelHelpers["extends"]({},a,{showNux:b("RTCCallNUXStore").getState().showRemoteStreamsSliderNUX})};function l(a){__p&&__p();i.constructor.call(this,a),this.state=l.calculateState({ratio:.5,resizing:!1}),this.$11=function(){document.addEventListener("keydown",this.$14)}.bind(this),this.$9=function(){document.removeEventListener("keydown",this.$14)}.bind(this),this.$14=function(a){a=a.key;var b=this.state.ratio;switch(a){case"ArrowLeft":this.$15(b-.025);break;case"ArrowRight":this.$15(b+.025);break;case"Escape":this.$10();break}}.bind(this),this.$10=function(){this.setState({ratio:.5})}.bind(this),this.$12=function(a){__p&&__p();var b=a.clientX;if(!this.$1)return;this.$3=this.$1.offsetLeft;this.$4=this.$1.offsetWidth;this.setState({resizing:!0},function(){return this.$16({clientX:b})}.bind(this));document.addEventListener("mousemove",this.$16);document.addEventListener("mouseup",this.$17);this.state.showNux&&this.$18()}.bind(this),this.$16=function(a){a=a.clientX;if(!this.state.resizing)return;this.$15((a-this.$3)/this.$4)}.bind(this),this.$17=function(){this.$19(),this.setState({resizing:!1})}.bind(this),this.$13=function(a){this.$2=a&&a.getDOMNode?a.getDOMNode():a}.bind(this),b("RTCAppDispatcher").explicitlyRegisterStores([b("RTCCallNUXStore")])}l.prototype.render=function(){__p&&__p();var a=this.props.user;if(!a)return null;var c=a.streams,d=a.screenStreams;if(this.props.isAudioCall)return b("React").createElement("section",{className:"_1b9s"+(this.state.resizing?" resizing":""),ref:function(a){return this.$1=a}.bind(this)},this.props.children,b("React").createElement("div",{className:"_1b9t"},b("React").createElement(k,{audioSinkID:this.props.audioSinkID,streams:c}),b("React").createElement(k,{audioSinkID:this.props.audioSinkID,streams:d})));var e=!(c.isEmpty()||d.isEmpty()||!this.props.renderScreenStreams);return b("React").createElement("section",{className:"_1b9s"+(this.state.resizing?" resizing":""),ref:function(a){return this.$1=a}.bind(this)},this.props.children,this.$5(d,e),this.$6(e),this.$7(e),this.$8(c,e,a.isVideoMuted()))};l.prototype.$6=function(a){return!a?null:b("React").createElement(b("ShimButton.react"),{className:"_1b9u",onBlur:this.$9,onDoubleClick:this.$10,onFocus:this.$11,onMouseDown:this.$12,ref:this.$13,role:"button",tabIndex:0})};l.prototype.$15=function(a){this.setState({ratio:Math.min(.85,Math.max(.15,a))})};l.prototype.$19=function(){document.removeEventListener("mousemove",this.$16),document.removeEventListener("mouseup",this.$17)};l.prototype.$18=function(){b("RTCCallNUXActions").dismissNUX(b("RTCCallNUXIDs").RTC_P2P_REMOTE_STREAMS_SLIDER_NUX)};l.prototype.$7=function(a){if(!this.state.showNux||!a||!this.$1)return null;a=(this.$1.clientHeight-32)/2;var c=h._("Control the size of the video and shared content by dragging the slider");b("RTCCallNUXActions").markNUXViewed(b("RTCCallNUXIDs").RTC_P2P_REMOTE_STREAMS_SLIDER_NUX);return b("React").createElement(b("XUIAmbientNUX.react"),{alignment:"left",contextRef:function(){return this.$2}.bind(this),customwidth:250,offsetY:a,onCloseButtonClick:this.$18,position:"right",shown:this.state.showNux,width:"custom"},c)};l.prototype.$5=function(a,c){if(a.isEmpty()||!this.props.renderScreenStreams)return null;var d=this.props.audioSinkID;c=c?{flexGrow:this.state.ratio}:null;return b("React").createElement("div",{className:"_1b9t",style:c},a.toArray().map(function(a,c){return b("React").createElement(b("RTCIncallVideo.react"),babelHelpers["extends"]({key:c},{audioSinkID:d,mediaStream:a}))}))};l.prototype.$20=function(a){var b=this.props.user;return!b?a.getVideoTracks().length>0:!b.areAllTracksMuted(a.getVideoTracks())};l.prototype.$8=function(a,c,d){__p&&__p();if(a.isEmpty())return null;var e=this.props.audioSinkID;c=c?{flexGrow:1-this.state.ratio}:null;var f=b("RTCCallStore").getConnection(j.P2P);if(!f)return null;var g=b("immutable").Set(f.getRemoteStreams());return b("React").createElement("div",{className:"_1b9t","data-testid":b("VideoCallWebDriverIDs").INCALL_VIDEO_CONTAINER,style:c},a.filter(function(a){return g.has(a)}).toArray().map(function(a,c){return this.$20(a)?b("React").createElement(b("RTCIncallVideo.react"),babelHelpers["extends"]({key:c},{audioSinkID:e,mediaStream:a,muted:d})):b("React").createElement(b("RTCIncallAudio.react"),babelHelpers["extends"]({key:c},{audioSinkID:e,mediaStream:a}))}.bind(this)))};l.prototype.componentWillUnmount=function(){this.$19(),document.removeEventListener("keydown",this.$14)};l.prototype.componentDidUpdate=function(a){this.props.user!==a.user&&this.$10()};l.defaultProps={renderScreenStreams:!0};e.exports=b("FluxContainer").create(l)}),null);
__d("RTCP2PStartCallButton.react",["cx","fbt","FBRTCLogger","React","RTCP2PCallStore","RTCTextButton.react","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(){b("RTWebUserActionLogger").logClick({callType:b("RTWebLoggingCallType").P2P,component:b("RTWebLoggingComponent").START_CALL,conferenceState:this.props.conferenceState,mediaType:b("RTWebUserActionLogger").getMediaType(this.props.isAudio),surface:b("RTWebLoggingSurface").CALL_CONTAINER}),b("RTCP2PCallStore").getState().protocolHandler.startCall(b("FBRTCLogger").Trigger.POPUP_CALL_START_BUTTON)}.bind(this),c}a.prototype.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({callType:b("RTWebLoggingCallType").P2P,component:b("RTWebLoggingComponent").START_CALL,conferenceState:this.props.conferenceState,mediaType:b("RTWebUserActionLogger").getMediaType(this.props.isAudio),surface:b("RTWebLoggingSurface").CALL_CONTAINER})};a.prototype.render=function(){return b("React").createElement(b("RTCTextButton.react"),{className:"green _2fst","data-testid":b("VideoCallWebDriverIDs").RTC_APP_VIEW_START_CALL_BUTTON,label:h._("Start Call"),onClick:this.$1})};e.exports=a}),null);
__d("RTCLoggingActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GENERIC_COLLAB_LOG:"GENERIC_COLLAB_LOG"})}),null);
__d("RTCCallLogActions",["RTCAppDispatcher","RTCLoggingActionTypes"],(function(a,b,c,d,e,f){"use strict";a={logEvent:function(event,a){b("RTCAppDispatcher").dispatch({type:b("RTCLoggingActionTypes").GENERIC_COLLAB_LOG,event:event,eventDetails:a})}};e.exports=a}),null);
__d("RTCUserSettingsActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({USER_SETTINGS_CANCEL_EDITING:"USER_SETTINGS_CANCEL_EDITING",USER_SETTINGS_EDIT:"USER_SETTINGS_EDIT",USER_SETTINGS_SAVE:"USER_SETTINGS_SAVE",USER_SETTINGS_SET_AUDIO_INPUT:"USER_SETTINGS_SET_AUDIO_INPUT",USER_SETTINGS_SET_AUDIO_OUTPUT:"USER_SETTINGS_SET_AUDIO_OUTPUT",USER_SETTINGS_SET_VIDEO_INPUT:"USER_SETTINGS_SET_VIDEO_INPUT"})}),null);
__d("RTCUserSettingsReducers",["RTCCallActionTypes","RTCMediaDevicesStore","RTCUserSettingsActionTypes"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c){switch(c.type){case b("RTCUserSettingsActionTypes").USER_SETTINGS_EDIT:return a.set("editing",!0);case b("RTCUserSettingsActionTypes").USER_SETTINGS_CANCEL_EDITING:return a.set("editing",!1);case b("RTCUserSettingsActionTypes").USER_SETTINGS_SAVE:return a.set("audioInput",c.audioInput).set("audioOutput",c.audioOutput).set("editing",!1).set("videoInput",c.videoInput);case b("RTCUserSettingsActionTypes").USER_SETTINGS_SET_AUDIO_INPUT:return a.set("audioInput",c.audioInput);case b("RTCUserSettingsActionTypes").USER_SETTINGS_SET_AUDIO_OUTPUT:return a.set("audioOutput",c.audioOutput);case b("RTCUserSettingsActionTypes").USER_SETTINGS_SET_VIDEO_INPUT:return a.set("videoInput",c.videoInput);default:return a}}function c(a,c){switch(c.type){case b("RTCCallActionTypes").ADD_LOCAL_STREAM:return a.set("audioInput",g(c.stream.getAudioTracks()[0],"audioinput")||a.audioInput).set("videoInput",g(c.stream.getVideoTracks()[0],"videoinput")||a.videoInput);default:return a}}function g(a,c){if(!a)return null;a=b("RTCMediaDevicesStore").getByLabel(a.label,c);return a?a.deviceId:null}e.exports={activelySetSettings:a,passivelySetSettings:c}}),null);
__d("RTCUserSettingsStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("immutable").Record({audioInput:null,audioOutput:null,editing:!1,videoInput:null}));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("RTCUserSettingsStore",["FluxReduceStore","RTCAppDispatcher","RTCUserSettingsReducers","RTCUserSettingsStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("RTCUserSettingsReducers").activelySetSettings,b("RTCUserSettingsReducers").passivelySetSettings];c=babelHelpers.inherits(a,b("FluxReduceStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("RTCAppDispatcher"))}a.prototype.getInitialState=function(){return new(b("RTCUserSettingsStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.__moduleID=e.id;e.exports=new a()}),null);
__d("RTCP2PActiveMediaDeviceContainer.react",["CollabCallMessengerBrowserEventEnum","CollabInitStreamTriggerType","FluxContainer","React","RTCAppDispatcher","RTCP2PCallStore","RTCP2PProtocolHandler","RTCUserSettingsStore","RTWebLoggingSurface","RTWebUserActionLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.$1=function(a){var c=a.audioInput?a.audioInput:this.state.audioInput;a=a.videoInput?a.videoInput:this.state.videoInput;b("RTCP2PProtocolHandler").initStream(!this.state.isAudioCall,c,a).then(function(a){return b("RTCP2PProtocolHandler").replaceLocalStream(a,!0)})["catch"](function(a){return h(a,b("CollabInitStreamTriggerType").USER_SETTINGS_CHANGED)})}.bind(this),b("RTCAppDispatcher").explicitlyRegisterStores([b("RTCP2PCallStore"),b("RTCUserSettingsStore")])}a.getStores=function(){return[b("RTCP2PCallStore"),b("RTCUserSettingsStore")]};a.calculateState=function(){var a=b("RTCUserSettingsStore").getState();return{audioInput:a.audioInput,isAudioCall:b("RTCP2PCallStore").isAudioOnly(),videoInput:a.videoInput}};a.prototype.render=function(){return this.props.children(this.$1)};function h(a,c){b("RTWebUserActionLogger").logError({errorDomain:b("CollabCallMessengerBrowserEventEnum").GET_USER_MEDIA_ERROR,errorType:JSON.stringify(a),surface:b("RTWebLoggingSurface").CALL_CONTAINER})}e.exports=b("FluxContainer").create(a)}),null);
__d("RTCPreCallAudioOutputPreview.react",["cx","FBRTCUtils","MercurySoundsConfig","React","ReactDOM","RTCSVGIcon.react","RTCUserMediaConstraints","RTCUtils","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={isPlaying:!1,mediaStream:null},this.$5=function(){this.setState(function(a){if(this.$1!=null){var b=!a.isPlaying;b?this.$1.play():this.$1.pause();return{isPlaying:b}}return a}.bind(this))}.bind(this),b}a.prototype.componentDidMount=function(){b("promiseDone")(this.$2(this.props.audioOutputSinkID).then(function(a){return this.setState({mediaStream:a})}.bind(this))),this.$3(this.state.mediaStream),this.$4()};a.prototype.componentDidUpdate=function(a,c){a.audioOutputSinkID!==this.props.audioOutputSinkID&&(b("promiseDone")(this.$2(this.props.audioOutputSinkID).then(function(a){c.mediaStream!=null&&b("RTCUtils").stopMediaStream(c.mediaStream),this.setState({mediaStream:a})}.bind(this))),this.$4())};a.prototype.render=function(){return b("React").createElement("div",{className:"_426m",onClick:this.$5,role:"main"},b("React").createElement("audio",{autoPlay:!1,loop:!0,ref:function(a){return this.$1=a}.bind(this)},b("React").createElement("source",{src:b("MercurySoundsConfig").settings_preview_sound_mp3_url,type:"audio/mpeg"}),b("React").createElement("source",{src:b("MercurySoundsConfig").settings_preview_sound_ogg_url,type:"audio/ogg"})),this.state.isPlaying?b("React").createElement(j,null):b("React").createElement(i,null))};a.prototype.$2=function(a){return b("RTCUtils").getUserMedia({audio:b("RTCUserMediaConstraints").audio(a)})};a.prototype.$3=function(a){this.$1&&a&&b("FBRTCUtils").attachMediaStream(this.$1,a)};a.prototype.$4=function(){if(!b("FBRTCUtils").supportsSetSink())return;var a=b("ReactDOM").findDOMNode(this.$1);this.props.audioOutputSinkID&&a!=null&&a.setSinkId(this.props.audioOutputSinkID)};var i=function(){return b("React").createElement(b("RTCSVGIcon.react"),{className:"_6p8c"},b("React").createElement("svg",{height:"61",width:"61"},b("React").createElement("path",{d:"M30.302 0C13.566 0 0 13.568 0 30.302c0 16.736 13.568 30.303 30.302 30.303 16.738 0 30.303-13.568 30.303-30.302C60.605 13.566 47.04 0 30.303 0zm11.284 31.973L24.097 42.07a1.733 1.733 0 0 1-1.727 0 1.73 1.73 0 0 1-.862-1.497V20.381c0-.617.33-1.186.862-1.496a1.733 1.733 0 0 1 1.727 0l17.486 10.097c.535.307.865.879.862 1.496a1.72 1.72 0 0 1-.86 1.494z",fillRule:"evenodd"})))},j=function(){return b("React").createElement(b("RTCSVGIcon.react"),{className:"_6p8c"},b("React").createElement("svg",{height:"60",viewBox:"0 0 60 60",width:"60"},b("React").createElement("path",{d:"M74,31 C90.568,31 104,44.432 104,61 C104,77.568 90.568,91 74,91 C57.432,91 44,77.568 44,61 C44,44.432 57.432,31 74,31 Z M66.7142857,50.7142857 C65.0574315,50.7142857 63.7142857,52.0574315 63.7142857,53.7142857 L63.7142857,69.1428571 C63.7142857,70.7997114 65.0574315,72.1428571 66.7142857,72.1428571 L82.1428571,72.1428571 C83.7997114,72.1428571 85.1428571,70.7997114 85.1428571,69.1428571 L85.1428571,53.7142857 C85.1428571,52.0574315 83.7997114,50.7142857 82.1428571,50.7142857 L66.7142857,50.7142857 Z",fillRule:"evenodd",transform:"translate(-44 -31)"})))};e.exports=a}),null);
__d("RTCUserSettingsActions",["RTCAppDispatcher","RTCUserSettingsActionTypes"],(function(a,b,c,d,e,f){"use strict";a={edit:function(){b("RTCAppDispatcher").dispatch({type:b("RTCUserSettingsActionTypes").USER_SETTINGS_EDIT})},cancel:function(){b("RTCAppDispatcher").dispatch({type:b("RTCUserSettingsActionTypes").USER_SETTINGS_CANCEL_EDITING})},save:function(a){b("RTCAppDispatcher").dispatch(babelHelpers["extends"]({type:b("RTCUserSettingsActionTypes").USER_SETTINGS_SAVE},a))},setAudioInput:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCUserSettingsActionTypes").USER_SETTINGS_SET_AUDIO_INPUT,audioInput:a})},setAudioOutput:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCUserSettingsActionTypes").USER_SETTINGS_SET_AUDIO_OUTPUT,audioOutput:a})},setVideoInput:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCUserSettingsActionTypes").USER_SETTINGS_SET_VIDEO_INPUT,videoInput:a})}};e.exports=a}),null);
__d("SUIMessengerRTCDarkTheme",["SUIMessengerRTCThemeConstants","messengerRTCCreateSUITheme"],(function(a,b,c,d,e,f){"use strict";a=b("SUIMessengerRTCThemeConstants").DARK_MAPPING;e.exports=b("messengerRTCCreateSUITheme")(a,"messenger-rtc-dark")}),null);
__d("RTCPreCallAudioOutputContainer.react",["cx","FBRTCUtils","FluxContainer","React","RTCMediaDevicesStore","RTCPreCallAudioOutputPreview.react","RTCSettingsMediaDeviceSelector.react","RTCUserSettingsActions","RTCUserSettingsStore","RTCUtils","SUIMessengerRTCDarkTheme"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){var c=b("FBRTCUtils").supportsSetSink()?a.audioOutputDevices:[];return b("React").createElement("div",{className:"_142c"},b("React").createElement(b("RTCPreCallAudioOutputPreview.react"),{audioOutputSinkID:a.audioOutput}),b("React").createElement(b("RTCSettingsMediaDeviceSelector.react"),{buttonBorderedSides:["top"],buttonRoundedCorners:["bottomLeft","bottomRight"],devices:c,disabled:!b("FBRTCUtils").supportsSetSink(),onChange:h,selectorType:"audiooutput",theme:b("SUIMessengerRTCDarkTheme"),value:a.audioOutput,width:148}))};var h=function(a){b("RTCUserSettingsActions").setAudioOutput(a)};c=function(){return{audioOutput:b("RTCUserSettingsStore").getState().audioOutput,audioOutputDevices:b("RTCUtils").filterDevicesByKind(b("RTCMediaDevicesStore").getState(),"audiooutput")}};e.exports=b("FluxContainer").createFunctional(a,function(){return[b("RTCMediaDevicesStore"),b("RTCUserSettingsStore")]},c)}),null);
__d("RTCPreCallUnvailableDeviceText.react",["React","SUIMessengerRTCDarkTheme","SUIText.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){return b("React").createElement("div",{className:a.className},b("React").createElement(b("SUIText.react"),{color:"white",size:"header4",theme:b("SUIMessengerRTCDarkTheme"),weight:"bold"},a.primaryText),b("React").createElement(b("SUIText.react"),{color:"primary",palette:"dark",size:"header4",style:{marginLeft:"16px",marginTop:"8px"},textAlign:"center",theme:b("SUIMessengerRTCDarkTheme")},a.secondaryText))};e.exports=a}),null);
__d("RTCPreCallVideoPreview.react",["cx","fbt","FBRTCVideo.react","React","RTCP2PProtocolHandler","RTCPreCallUnvailableDeviceText.react","RTCUICameraIcon.react","RTCUserMediaConstraints","RTCUtils","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={mediaStream:null},b}a.prototype.componentDidMount=function(){var a=this.props.videoInput;a!=null&&b("promiseDone")(this.$1(a).then(function(a){return this.setState({mediaStream:a})}.bind(this)))};a.prototype.componentDidUpdate=function(a,c){a.videoInput!==this.props.videoInput&&b("promiseDone")(this.$1(this.props.videoInput).then(function(a){c.mediaStream&&b("RTCUtils").stopMediaStream(c.mediaStream),this.setState({mediaStream:a})}.bind(this)))};a.prototype.componentWillUnmount=function(){this.state.mediaStream!=null&&b("RTCUtils").stopMediaStream(this.state.mediaStream)};a.prototype.render=function(){return this.props.isVideoMuted?b("React").createElement(j,null,b("React").createElement(k,null)):b("React").createElement(j,null,this.props.videoInput!=null?b("React").createElement("div",null,b("React").createElement(b("FBRTCVideo.react"),{className:"_4fod",mediaStream:this.state.mediaStream,muted:!0})):b("React").createElement(l,null))};a.prototype.$1=function(a){return b("RTCUtils").getUserMediaWithFallbackToEmptyVideoConstraints({video:b("RTCUserMediaConstraints").video(b("RTCP2PProtocolHandler").getDefaultVideoQuality(),a)})};var j=function(a){return b("React").createElement("div",babelHelpers["extends"]({},a,{className:"_68wu"}))},k=function(){return b("React").createElement("div",{className:"_6i3z"},b("React").createElement(b("RTCUICameraIcon.react"),{className:"_6plt",strikeThrough:!0}))},l=function(){return b("React").createElement(b("RTCPreCallUnvailableDeviceText.react"),{className:"_6cky",primaryText:h._("Couldn't find your camera"),secondaryText:h._("Try connecting a different camera, or use WorkChat on your mobile device")})};e.exports=a}),null);
__d("RTCPreCallCameraContainer.react",["cx","FluxContainer","React","RTCAppDispatcher","RTCCallStore","RTCMediaDevicesStore","RTCPreCallVideoPreview.react","RTCSettingsMediaDeviceSelector.react","RTCUserSettingsActions","RTCUserSettingsStore","RTCUtils","SUIMessengerRTCDarkTheme"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.$1=function(a){b("RTCUserSettingsActions").setVideoInput(a),this.props.onMediaDevicesChange&&this.props.onMediaDevicesChange({videoInput:a})}.bind(this),b("RTCAppDispatcher").explicitlyRegisterStores([b("RTCCallStore"),b("RTCMediaDevicesStore"),b("RTCUserSettingsStore")])}a.getStores=function(){return[b("RTCCallStore"),b("RTCMediaDevicesStore"),b("RTCUserSettingsStore")]};a.calculateState=function(){return{isVideoMuted:b("RTCCallStore").getState().localUser.isVideoMuted(),videoDevices:b("RTCUtils").filterDevicesByKind(b("RTCMediaDevicesStore").getState(),"videoinput"),videoInput:b("RTCUserSettingsStore").getState().videoInput}};a.prototype.render=function(){var a=this.state,c=a.videoDevices;a=a.videoInput;a=a;a==null&&c.length>0&&(a=c[0].deviceId);return b("React").createElement("div",{className:"_101o"},b("React").createElement(b("RTCPreCallVideoPreview.react"),{isVideoMuted:this.state.isVideoMuted,videoInput:a}),b("React").createElement(b("RTCSettingsMediaDeviceSelector.react"),{buttonBorderedSides:["top"],buttonRoundedCorners:["bottomLeft","bottomRight"],devices:c,disabled:this.state.isVideoMuted,onChange:this.$1,selectorType:"videoinput",theme:b("SUIMessengerRTCDarkTheme"),value:a,width:306}))};e.exports=b("FluxContainer").create(a)}),null);
__d("RTCSettingsAudioInputPreview.react",["cx","fbt","AudioContextSingleton","React","cancelAnimationFrame","joinClasses","requestAnimationFrame"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PureComponent;var j={fftSize:32,minDecibels:-90,maxDecibels:-10,smoothingTimeConstant:1},k=Math.log2(128+1);d=babelHelpers.inherits(a,c);i=d&&d.prototype;function a(a){i.constructor.call(this,a),this.state={noAudioTrack:!1},this.$2=b("AudioContextSingleton").get(),this.$3=this.$2.createGain(),this.$3.gain.value=a.gain,this.$4=this.$2.createAnalyser(),Object.assign(this.$4,j)}a.prototype.$7=function(a){__p&&__p();this.$8();if(!(a&&this.$1))return;if(a.getAudioTracks().length<1){this.setState({noAudioTrack:!0});return}var c=this.$1.getContext("2d");if(!c)return;this.$5&&this.$5.disconnect();this.$5=this.$2.createMediaStreamSource(a);this.$5.connect(this.$3);this.$3.connect(this.$4);a=this.$4.frequencyBinCount;var d=new Uint8Array(a);a=this.props;var e=a.width,f=a.height,g,h=function(){this.$4.getByteTimeDomainData(d);var a=l(d,e,f,g);g=a;c.clearRect(0,0,e,f);c.fillStyle=this.props.fillStyle;c.fill(n(a,e,f));this.$6=b("requestAnimationFrame")(h)}.bind(this);this.$6=b("requestAnimationFrame")(h)};a.prototype.$8=function(){b("cancelAnimationFrame")(this.$6)};a.prototype.render=function(){var a=this.props,c=a.className,d=a.gain,e=a.height,f=a.width;a=babelHelpers.objectWithoutProperties(a,["className","gain","height","width"]);var g=this.state.noAudioTrack;this.$3.gain.value=d;return b("React").createElement("div",babelHelpers["extends"]({className:b("joinClasses")("_brl"+(g?" noAudioTrack":""),c)},a),g?b("React").createElement("span",null,this.props.noMicMessage):null,b("React").createElement("canvas",babelHelpers["extends"]({ref:function(a){return this.$1=a}.bind(this)},{width:f,height:e})))};a.prototype.componentDidUpdate=function(a){var b=this.props.mediaStream;b!==a.mediaStream&&(this.setState({noAudioTrack:!1}),this.$7(b))};a.prototype.componentDidMount=function(){this.$7(this.props.mediaStream)};a.prototype.componentWillUnmount=function(){this.$8(),this.$5&&this.$5.disconnect(),this.$3&&this.$3.disconnect()};a.defaultProps={fillStyle:"rgba(255, 255, 255, .5)",gain:3.5,height:26,noMicMessage:h._("No Mic"),width:106};function l(a,b,c,d){return[128].concat(m(a),[128]).map(function(a,e,f){a=c*(Math.log2(Math.abs(a)+1)/k);return{x:e*b/(f.length-1),y:d?Math.min(a,c-(c-d[e].y)*.95):a}})}function m(a){var b=[];for(var c=0;c*2<a.length;c++)b[c]=Math.min(a[c*2],a[c*2+1]||0);return b}function n(a,b,c){__p&&__p();var d=new Path2D();d.moveTo(0,c);a.forEach(function(b,c,a){switch(c){case 0:d.lineTo(b.x,b.y);break;case 1:break;case a.length-1:d.bezierCurveTo.apply(d,o(b,a[c-1],b));d.lineTo(b.x,b.y);break;case 2:d.lineTo((5*a[c-2].x+a[c-1].x)/6,(5*a[c-2].y+a[c-1].y)/6);default:d.bezierCurveTo.apply(d,o(b,a[c-2],a[c-1]))}});d.lineTo(b,c);d.closePath();return d}function o(a,b,c){return[(2*b.x+c.x)/3,(2*b.y+c.y)/3,(b.x+2*c.x)/3,(b.y+2*c.y)/3,(b.x+4*c.x+a.x)/6,(b.y+4*c.y+a.y)/6]}e.exports=a}),null);
__d("RTCPreCallMicPreview.react",["cssVar","cx","React","RTCSettingsAudioInputPreview.react","RTCSVGIcon.react","RTCUIMicrophoneIcon.react","RTCUserMediaConstraints","RTCUtils","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={mediaStream:null},b}a.prototype.componentDidMount=function(){b("promiseDone")(this.$1(this.props.audioInput).then(function(a){return this.setState({mediaStream:a})}.bind(this)))};a.prototype.componentDidUpdate=function(a,c){a.audioInput!==this.props.audioInput&&b("promiseDone")(this.$1(this.props.audioInput).then(function(a){c.mediaStream&&b("RTCUtils").stopMediaStream(c.mediaStream),this.setState({mediaStream:a})}.bind(this)))};a.prototype.componentWillUnmount=function(){this.state.mediaStream!=null&&b("RTCUtils").stopMediaStream(this.state.mediaStream)};a.prototype.render=function(){var a=this.props.isAudioMuted;return a?b("React").createElement("div",{className:"_2848"},b("React").createElement(j,null)):b("React").createElement("div",{className:"_2848"},b("React").createElement(k,null),b("React").createElement(b("RTCSettingsAudioInputPreview.react"),{className:"_2-0x",gain:6,mediaStream:this.state.mediaStream}))};a.prototype.$1=function(a){return b("RTCUtils").getUserMedia({audio:b("RTCUserMediaConstraints").audio(a)})};var j=function(){return b("React").createElement("div",{className:"_6i3z"},b("React").createElement(b("RTCUIMicrophoneIcon.react"),{className:"_6plt",strikeThrough:!0}))},k=function(){return b("React").createElement(b("RTCSVGIcon.react"),{style:{marginTop:"8px"}},b("React").createElement("svg",{fill:"none",height:"100",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",width:"80"},b("React").createElement("path",{d:"M19 10v2a7 6 0 0 1-14 0v-2"}),b("React").createElement("line",{x1:"8",x2:"16",y1:"22",y2:"22"})))};e.exports=a}),null);
__d("RTCPreCallMicrophoneContainer.react",["cx","FluxContainer","React","RTCAppDispatcher","RTCCallStore","RTCMediaDevicesStore","RTCPreCallMicPreview.react","RTCSettingsMediaDeviceSelector.react","RTCUserSettingsActions","RTCUserSettingsStore","RTCUtils","SUIMessengerRTCDarkTheme"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.$1=function(a){b("RTCUserSettingsActions").setAudioInput(a),this.props.onMediaDevicesChange&&this.props.onMediaDevicesChange({audioInput:a})}.bind(this),b("RTCAppDispatcher").explicitlyRegisterStores([b("RTCCallStore"),b("RTCMediaDevicesStore"),b("RTCUserSettingsStore")])}a.getStores=function(){return[b("RTCCallStore"),b("RTCMediaDevicesStore"),b("RTCUserSettingsStore")]};a.calculateState=function(){return{audioInput:b("RTCUserSettingsStore").getState().audioInput,audioDevices:b("RTCUtils").filterDevicesByKind(b("RTCMediaDevicesStore").getState(),"audioinput"),isAudioMuted:b("RTCCallStore").getState().localUser.isAudioMuted()}};a.prototype.render=function(){var a=this.state,c=a.audioDevices;a=a.audioInput;a=a;a==null&&c.length>0&&(a=c[0].deviceId);return b("React").createElement("div",{className:"_142c"},b("React").createElement(b("RTCPreCallMicPreview.react"),{audioInput:a,isAudioMuted:this.state.isAudioMuted}),b("React").createElement(b("RTCSettingsMediaDeviceSelector.react"),{buttonBorderedSides:["top"],buttonRoundedCorners:["bottomLeft","bottomRight"],devices:c,disabled:this.state.isAudioMuted,onChange:this.$1,selectorType:"audioinput",theme:b("SUIMessengerRTCDarkTheme"),value:a,width:148}))};e.exports=b("FluxContainer").create(a)}),null);
__d("RTCRemotePeerInfo.react",["cx","fbt","Image.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){a=a.peer;return b("React").createElement("div",{className:"_1h0c"},b("React").createElement("div",{className:"_6f_i"},b("React").createElement("p",{className:"_6f_j"},a.meetingID!=null?"#"+a.meetingID:a.userName),b("React").createElement("p",{className:"_6f_k"},b("React").createElement(i,{peer:a}))),b("React").createElement(b("Image.react"),{className:"_1h11",src:a.profilePictureUrl}))};var i=function(a){var b=a.peer;return b.meetingID!=null?a.peer.meetingPassword!=null?h._("Password: {number}",[h._param("number",a.peer.meetingPassword)]):h._("Meeting ID"):b.roomLocation!=null?b.roomLocation:null};e.exports=a}),null);
__d("RTCPreCallSetup.react",["ix","cx","fbt","Image.react","React","RTCConferenceState","RTCP2PActiveMediaDeviceContainer.react","RTCPreCallAudioOutputContainer.react","RTCPreCallCameraContainer.react","RTCPreCallMicrophoneContainer.react","RTCRemotePeerInfo.react","RTCTextButton.react","VideoCallWebDriverIDs","asset","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;j=babelHelpers.inherits(a,b("React").PureComponent);j&&j.prototype;a.prototype.render=function(){switch(this.props.conferenceState){case b("RTCConferenceState").NEW:case b("RTCConferenceState").AWAITING_USER_START:return b("React").createElement(k,{callButtonLabel:this.props.peer.meetingID!=null?i._("Join Meeting"):i._("Start Call"),dataTestId:b("VideoCallWebDriverIDs").RTC_APP_VIEW_START_CALL_BUTTON,isAudioMuted:this.props.isAudioMuted,isVideoMuted:this.props.isVideoMuted,onClick:this.$1(this.props.conferenceState),peer:this.props.peer,showEndCallReason:!1});case b("RTCConferenceState").TERMINATED:return b("React").createElement(k,{callButtonLabel:i._("Redial"),dataTestId:b("VideoCallWebDriverIDs").REDIAL_BUTTON,endCallReason:this.props.endCallReason,isAudioMuted:this.props.isAudioMuted,isVideoMuted:this.props.isVideoMuted,onClick:this.$1(this.props.conferenceState),peer:this.props.peer,showEndCallReason:!0});default:return null}};a.prototype.$1=function(a){return function(){return this.props.onClick(a)}.bind(this)};function a(){j.apply(this,arguments)}var k=function(a){return b("React").createElement("div",{className:"_4m1g"},b("React").createElement("div",{className:"_6p8a"},b("React").createElement(b("RTCRemotePeerInfo.react"),{peer:a.peer}),b("React").createElement("div",{className:"_2pil"},a.showEndCallReason?a.endCallReason?b("React").createElement("div",{className:"_6pls"},a.endCallReason.toString(!0)):null:b("React").createElement(l,{isAudioMuted:a.isAudioMuted,isVideoMuted:a.isVideoMuted}),b("React").createElement(b("RTCTextButton.react"),{className:"precall","data-testid":a.dataTestId,label:a.callButtonLabel,onClick:a.onClick}))),b("React").createElement("div",{className:"_6p8b"},b("React").createElement(m,{className:"_3v59"},i._("Test your Camera and Microphone")),b("React").createElement(b("RTCP2PActiveMediaDeviceContainer.react"),null,function(a){return b("React").createElement("div",null,b("React").createElement(b("RTCPreCallCameraContainer.react"),{onMediaDevicesChange:a}),b("React").createElement(m,null,b("React").createElement(b("RTCPreCallMicrophoneContainer.react"),{onMediaDevicesChange:a}),b("React").createElement(b("RTCPreCallAudioOutputContainer.react"),null)))})))},l=function(a){if(!a.isVideoMuted&&!a.isAudioMuted)return null;a.isVideoMuted?a=a.isAudioMuted?i._("You will be joining this call with microphone and camera disabled"):i._("You will be joining this call with audio only"):a=i._("You will be joining the call with your microphone disabled");return b("React").createElement("div",{className:"_6pls"},b("React").createElement("div",{className:"_6uo2"},b("React").createElement(b("Image.react"),{src:g("504082")})),b("React").createElement("div",{className:"_3-93"},a))},m=function(a){return b("React").createElement("div",{className:b("joinClasses")(a.className,"_4m1o"),style:a.style},a.children)};e.exports=a}),null);
__d("RTCPreCallSetupContainer.react",["CollabCallMessengerBrowserEventEnum","CollabInitStreamTriggerType","FBRTCLogger","FluxContainer","React","RTCAppDispatcher","RTCCallActions","RTCCallLogActions","RTCCallStore","RTCConferenceState","RTCMediaDevicesStore","RTCP2PCallStore","RTCP2PProtocolHandler","RTCPreCallSetup.react","RTCUserSettingsStore","generateRTCCallID"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){g.constructor.call(this),this.$1=!0,b("RTCAppDispatcher").explicitlyRegisterStores([b("RTCCallStore"),b("RTCP2PCallStore"),b("RTCMediaDevicesStore"),b("RTCUserSettingsStore")]),b("RTCMediaDevicesStore").refresh()}a.getStores=function(){return[b("RTCCallStore"),b("RTCP2PCallStore")]};a.calculateState=function(){var a=b("RTCCallStore").getState(),c=a.callInfo,d=a.localUser;a=a.remoteUsers;var e=b("RTCP2PCallStore").getState();e=e.endCallReason;return{conferenceState:c.conferenceState,endCallReason:e,isAudioMuted:d.isAudioMuted(),isVideoMuted:d.isVideoMuted(),peer:a.first()}};a.prototype.componentDidUpdate=function(a,c){if(this.$1&&this.state.conferenceState===b("RTCConferenceState").TERMINATED){this.$1=!1;a=b("RTCUserSettingsStore").getState();c=a.audioInput;a=a.videoInput;b("RTCP2PProtocolHandler").initStream(!0,c,a).then(function(a){return b("RTCCallActions").addLocalStream(a)})["catch"](function(a){b("RTCCallLogActions").logEvent(b("CollabCallMessengerBrowserEventEnum").GET_USER_MEDIA_ERROR,{error:a.name,constraint:a.constraint,trigger:b("CollabInitStreamTriggerType").REDIAL})})}};a.prototype.$2=function(a){if(a===b("RTCConferenceState").TERMINATED){a=b("generateRTCCallID")().toString();b("RTCCallActions").resetForRedial(a,a);b("RTCP2PCallStore").getState().protocolHandler.startCall(b("FBRTCLogger").Trigger.REDIAL_BUTTON)}else b("RTCP2PCallStore").getState().protocolHandler.startCall(b("FBRTCLogger").Trigger.VC_PRECALL_SETUP)};a.prototype.render=function(){return b("React").createElement(b("RTCPreCallSetup.react"),babelHelpers["extends"]({},this.state,{onClick:this.$2}))};e.exports=b("FluxContainer").create(a)}),null);
__d("RTCP2PAppViewContent.react",["cx","fbt","FBRTCConfig","React","RTCAppSpinner.react","RTCAppViewMain.react","RTCCallConnectionStatus.react","RTCCallStateInfo.react","RTCCallUser.react","RTCConferenceState","RTCP2PCallActions","RTCP2PConnectionStatus","RTCP2PIncallView.react","RTCP2PProtocolHandler","RTCP2PStartCallButton.react","RTCPreCallSetupContainer.react","RTCRingBackTone.react","RTCStarRating.react","RTWebCollabClientFeatureGating","SignalsSimpleFadeOutContainer.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();if(a.remoteUser==null)return b("React").createElement(b("RTCAppViewMain.react"),{fullBleed:!0},b("React").createElement(b("RTCAppSpinner.react"),null));var c=a.awaitingEscalationACK,d=a.conferenceState,e=a.connectionStatus,f=a.endCallReason,g=a.escalationInProgress,m=a.escalationRequest,n=a.isAudioCall,o=a.isScreenContentPoppedOut,p=a.remoteUser,q=a.wasStarRatingDone;switch(d){case b("RTCConferenceState").NEW:return b("React").createElement(b("RTCAppViewMain.react"),{fullBleed:!1},b("React").createElement(b("RTCCallStateInfo.react"),null,b("RTWebCollabClientFeatureGating").showPreCallSetup(a.isCaller)?b("React").createElement(b("RTCPreCallSetupContainer.react"),null):b("React").createElement(b("RTCCallUser.react"),{isP2PCall:!0,user:p}),b("React").createElement(b("RTCAppSpinner.react"),null)));case b("RTCConferenceState").AWAITING_USER_START:return b("RTWebCollabClientFeatureGating").showPreCallSetup(a.isCaller)?b("React").createElement(b("RTCAppViewMain.react"),{fullBleed:!1},b("React").createElement(b("RTCCallStateInfo.react"),null,b("React").createElement(b("RTCPreCallSetupContainer.react"),null))):b("React").createElement(b("RTCAppViewMain.react"),{fullBleed:!1},b("React").createElement(b("RTCCallStateInfo.react"),null,b("React").createElement(b("RTCCallUser.react"),{isP2PCall:!0,user:p}),b("React").createElement(b("RTCCallConnectionStatus.react"),null,h._("Ready to call?")),b("React").createElement(b("RTCP2PStartCallButton.react"),{conferenceState:d,isAudio:n})));case b("RTCConferenceState").CONNECTING:case b("RTCConferenceState").CONNECTED:var r=m&&c||g;return b("React").createElement(b("RTCAppViewMain.react"),{fullBleed:!n},b("React").createElement(b("RTCP2PIncallView.react"),babelHelpers["extends"]({audioSinkID:a.audioOutput,renderScreenStreams:!o,user:p},{isAudioCall:n}),b("React").createElement(b("RTCCallStateInfo.react"),{className:n?"":"_2fsu"},b("React").createElement(b("RTCCallUser.react"),{isP2PCall:!0,user:p}),b("React").createElement(b("RTCCallConnectionStatus.react"),{connectionStatus:e},r?b("React").createElement(i,{awaitingEscalationACK:c,escalationInProgress:g,escalationRequest:m}):null),k(a.failureReason))),b("React").createElement(j,{conferenceState:d,connectionStatus:e}));case b("RTCConferenceState").TERMINATING:case b("RTCConferenceState").TERMINATED:o=!q&&b("RTCP2PProtocolHandler").showStarRating();if(o)return b("React").createElement(b("RTCAppViewMain.react"),{fullBleed:!1},b("React").createElement(b("RTCStarRating.react"),babelHelpers["extends"]({isGroupCall:!1,onDone:l,shouldCloseWindow:!0},{isAudioCall:n})));else return b("RTWebCollabClientFeatureGating").showPreCallSetup(a.isCaller)?b("React").createElement(b("RTCAppViewMain.react"),{fullBleed:!1},b("React").createElement(b("RTCCallStateInfo.react"),null,b("React").createElement(b("RTCPreCallSetupContainer.react"),null))):b("React").createElement(b("RTCAppViewMain.react"),{fullBleed:!1},b("React").createElement(b("RTCCallStateInfo.react"),null,b("React").createElement(b("RTCCallUser.react"),{isP2PCall:!0,user:p}),b("React").createElement(b("RTCCallConnectionStatus.react"),{connectionStatus:e},f?f.toString(b("FBRTCConfig").isVCEndpointCall()):null)))}return b("React").createElement(b("RTCAppViewMain.react"),{fullBleed:!1})};var i=function(a){if(a.escalationRequest)return a.awaitingEscalationACK?h._("Sending response..."):b("React").createElement("div",null,h._("Would like to video chat..."),b("React").createElement("br",null),b("React").createElement("div",{className:"_46la _43ut"},h._("This will turn your video on.")));return a.escalationInProgress?h._("Requesting video..."):null},j=function(a){return a.conferenceState===b("RTCConferenceState").CONNECTING?b("React").createElement(b("RTCRingBackTone.react"),{active:a.connectionStatus===b("RTCP2PConnectionStatus").RINGING}):null};function k(a){__p&&__p();var c;switch(a){case"denied":c=h._("Video request was denied...");break;case"cancelled":c=h._("Video request was cancelled...");break;case"timeout":c=h._("Video request timed out...");break;default:return null}return b("React").createElement("div",{className:"_46la"},b("React").createElement(b("SignalsSimpleFadeOutContainer.react"),{delay:1,duration:2},c))}function l(){b("RTCP2PCallActions").starRatingDone(!0)}e.exports=a}),null);
__d("RTCP2PAppViewContentContainer.react",["FluxContainer","React","RTCP2PAppViewContent.react","RTCP2PCallEscalationStore","RTCP2PCallStore","RTCUserSettingsStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("RTCP2PCallEscalationStore"),b("RTCP2PCallStore"),b("RTCUserSettingsStore")]};a.calculateState=function(){var a=b("RTCP2PCallEscalationStore").getState(),c=b("RTCP2PCallStore").getState(),d=c.isCaller;c=c.wasStarRatingDone;var e=b("RTCUserSettingsStore").getState();e=e.audioOutput;return{audioOutput:e,awaitingEscalationACK:a.awaitingACK,escalationInProgress:a.inProgress,escalationRequest:Boolean(a.request),isCaller:d,wasStarRatingDone:c,failureReason:a.failureReason}};a.prototype.render=function(){return b("React").createElement(b("RTCP2PAppViewContent.react"),babelHelpers["extends"]({},this.props,this.state))};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a)}),null);
__d("RTCCallControlsEscalationAcceptButton.react",["cx","React","RTCCallControlsButtonWithLabel.react","RTCUICameraIcon.react","VideoCallWebDriverIDs","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.className;a=babelHelpers.objectWithoutProperties(a,["className"]);return b("React").createElement(b("RTCCallControlsButtonWithLabel.react"),babelHelpers["extends"]({className:b("joinClasses")(c,"opaque redial icon-48"),"data-testid":b("VideoCallWebDriverIDs").ACCEPT_ESCALATION_CALL_BUTTON},a),b("React").createElement(b("RTCUICameraIcon.react"),null))};e.exports=a}),null);
__d("RTCCallControlsEscalationDeclineButton.react",["cx","React","RTCCallControlsButtonWithLabel.react","RTCUIXIcon.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.className;a=babelHelpers.objectWithoutProperties(a,["className"]);return b("React").createElement(b("RTCCallControlsButtonWithLabel.react"),babelHelpers["extends"]({className:b("joinClasses")(c,"icon-48 closeWindow")},a),b("React").createElement(b("RTCUIXIcon.react"),null))};e.exports=a}),null);
__d("RTCP2PAppViewFooterUtils",["fbt"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getScreenSharingCallControlPopoverBody:function(a,b,c,d,e){if(a)return d?g._("Screen sharing is not currently available for Messenger to room calls."):g._("Screen sharing is disabled for this call because {name}'s device does not support receiving screen sharing.",[g._param("name",e)]);else if(b)return g._("{name} is already sharing their screen. You can share your screen as soon as they stop sharing.",[g._param("name",e)]);else if(c)return g._("Screen sharing is only available for video calls.");return null},getVideoCallControlPopoverTitle:function(a,b){return!a&&b?g._("Can't find camera"):null},getVideoCallControlPopoverBody:function(a,b,c,d){if(a)return g._("Video is disabled for this call because {name}'s device does not support video.",[g._param("name",d)]);else if(b)return g._("Connect your camera and refresh the page to turn on video. If your camera is already connected, try restarting your browser.");else if(c)return g._("Video is paused because the connection is slow.");return null}};e.exports=a}),null);
__d("RTCP2PRedialButton.react",["cx","fbt","Bootloader","CollabCallMessengerBrowserEventEnum","CollabInitStreamTriggerType","FBRTCConfig","FBRTCConsoleLogger","FBRTCLogger","React","RTCCallActions","RTCCallControlsButtonWithLabel.react","RTCCallStore","RTCP2PCallStore","RTCP2PProtocolHandler","RTCUIPhoneIcon.react","RTCUserSettingsStore","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs","generateRTCCallID"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;function j(event,a,c,d){if(!b("FBRTCConfig").isVCEndpointCall())return;b("Bootloader").loadModules(["CollabMessengerLogger"],function(b){return b.log(event,{peerID:d.FBID,callID:Number(c),eventDetails:a})},"RTCP2PRedialButton.react")}function k(){__p&&__p();var a=b("generateRTCCallID")().toString();b("RTCCallActions").resetForRedial(a,a);a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logClick(babelHelpers["extends"]({},a,{callType:b("RTWebLoggingCallType").P2P,component:b("RTWebLoggingComponent").REDIAL,surface:b("RTWebLoggingSurface").CALL_CONTAINER}));a=b("RTCUserSettingsStore").getState();var c=a.audioInput;a=a.videoInput;var d=b("RTCP2PCallStore").isAudioOnly();b("RTCP2PProtocolHandler").initStream(!d,c,a).then(function(a){b("RTCCallActions").addLocalStream(a),b("RTCP2PCallStore").getState().protocolHandler.startCall(b("FBRTCLogger").Trigger.REDIAL_BUTTON)})["catch"](function(a){var c=b("RTCCallStore").getState(),d=c.callInfo.conferenceName;c=c.remoteUsers;j(b("CollabCallMessengerBrowserEventEnum").GET_USER_MEDIA_ERROR,JSON.stringify({error:a.name,constraint:a.constraint,trigger:b("CollabInitStreamTriggerType").REDIAL}),d,c.first())})}i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.componentDidMount=function(){var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logImpression(babelHelpers["extends"]({},a,{callType:b("RTWebUserActionLogger").getCallType(!1),component:b("RTWebLoggingComponent").REDIAL,surface:b("RTWebLoggingSurface").CALL_CONTAINER}))};a.prototype.render=function(){return b("React").createElement(b("RTCCallControlsButtonWithLabel.react"),{className:"semiopaque icon-48","data-testid":b("VideoCallWebDriverIDs").REDIAL_BUTTON,onClick:k,title:h._("Redial")},b("React").createElement(b("RTCUIPhoneIcon.react"),{variant:"start call"}))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("RTCP2PAppViewFooter.react",["cx","fbt","Promise","Bootloader","CollabCallMessengerBrowserEventEnum","CollabInitStreamTriggerType","CollabRTCChromeScreenSharingExtension","FBRTCCallControlPopover.react","FBRTCConfig","FBRTCConsoleLogger","FBRTCSupport","MercuryIDs","MessengerParticipants.bs","React","RTCAppViewFooter.react","RTCCallActions","RTCCallControls.react","RTCCallControlsAddGroupMembersButton.react","RTCCallControlsButton.react","RTCCallControlsCloseWindowButton.react","RTCCallControlsEndCallButton.react","RTCCallControlsEscalationAcceptButton.react","RTCCallControlsEscalationDeclineButton.react","RTCCallControlsToggleAudioButton.react","RTCCallControlsToggleScreenSharingWithFunnelButton.react","RTCCallControlsToggleVideoButton.react","RTCCallControlsVideoEscalationButton.react","RTCCallStore","RTCChromeScreenSharingUtils","RTCConferenceState","RTCP2PAppViewFooterUtils","RTCP2PCallEscalationActions","RTCP2PCallEscalator","RTCP2PProtocolHandler","RTCP2PRedialButton.react","RTCSelfView.react","RTWebClientFeatureGating","RTWebCollabClientFeatureGating","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","UserAgent","gkx","immutable","keyMirror","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("RTCChromeScreenSharingUtils").getMediaRequestSourceAppId,k=1e4,l=b("keyMirror")({READY:null,SHOWN:null,COMPLETE:null}),m=255,n=320;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={forceVisible:l.READY,participants:b("immutable").Map(),showPopovers:!0},this.$1=0,this.$3=0,this.$4=null,this.$8=0,this.$10=0,this.shouldAlwaysShowRedial=!1,this.$14=function(){this.props.protocolHandler.endCall()}.bind(this),this.$13=function(a){b("RTWebClientFeatureGating").stopVideoWhenMute()?a?b("promiseDone")(b("RTCP2PProtocolHandler").initStream(!0),function(a){var c=this.props.localUser.getStream();c?b("RTCCallActions").replaceLocalStream(c,a):b("RTCCallActions").addLocalStream(a)}.bind(this)):b("RTCCallActions").stopLocalVideo():b("RTCCallActions").toggleMuteVideo(a)}.bind(this),this.$17=function(){b("RTWebUserActionLogger").logClick({component:b("RTWebLoggingComponent").VIDEO_ESCALATE_ACCEPT,surface:b("RTWebLoggingSurface").CALL_CONTROLS}),b("RTCCallStore").mutateCallSummary(function(a){a.setVidEscalationAcceptedClick(),a.setVidEscalationMediaRequested()}),b("RTCP2PCallEscalator").acceptEscalation().then(function(a){b("RTCCallStore").mutateCallSummary(function(a){return a.setVidEscalationMediaSuccess()})})["catch"](function(a){b("RTCCallStore").mutateCallSummary(function(a){return a.setVidEscalationMediaFailed()}),this.$23(b("CollabCallMessengerBrowserEventEnum").GET_USER_MEDIA_ERROR,JSON.stringify({error:a.name,constraint:a.constraint,trigger:b("CollabInitStreamTriggerType").ESCALATION_APPROVED}))}.bind(this))}.bind(this),this.$19=function(){b("RTWebUserActionLogger").logClick({component:b("RTWebLoggingComponent").VIDEO_ESCALATE,surface:b("RTWebLoggingSurface").CALL_CONTROLS}),b("RTCCallStore").mutateCallSummary(function(a){return a.setVidEscalationInitClick()}),this.props.escalationInProgress?b("RTCP2PCallEscalationActions").cancel():(b("RTCCallStore").mutateCallSummary(function(a){return a.setVidEscalationMediaRequested()}),b("RTCP2PCallEscalator").initEscalation().then(function(a){b("RTCCallStore").mutateCallSummary(function(a){return a.setVidEscalationMediaSuccess()})})["catch"](function(a){b("RTCCallStore").mutateCallSummary(function(a){return a.setVidEscalationMediaFailed()}),b("RTWebUserActionLogger").logError({errorDomain:"video_escalation_error",errorType:a.toString()}),this.$23(b("CollabCallMessengerBrowserEventEnum").GET_USER_MEDIA_ERROR,JSON.stringify({error:a.name,constraint:a.constraint,trigger:b("CollabInitStreamTriggerType").ESCALATION_INITIATED}))}.bind(this)))}.bind(this),this.$20=function(a){this.$9!==a&&(this.$9=a,this.forceUpdate())}.bind(this),this.$21=function(a){this.$7!==a&&(this.$7=a,this.forceUpdate())}.bind(this),this.$11=function(a){a=a.width;if(this.$10===a)return;this.$10=a;this.$24()}.bind(this),this.$12=function(a){a=a.width;if(this.$1===a)return;this.$1=a;this.$24()}.bind(this),this.$22=function(a){a=a.width;if(this.$1===a)return;this.$1=a}.bind(this),this.$18=function(a){this.setState({showPopovers:a})}.bind(this),this.$15=function(a){a=a.width;if(this.$8===a)return;this.$8=a;this.$24()}.bind(this),c}a.prototype.componentDidMount=function(){if(b("gkx")("678353")){var a=b("MercuryIDs").getParticipantIDFromUserID(this.props.remoteUserID);b("MessengerParticipants.bs").get(a,function(c){var d;this.setState({participants:b("immutable").Map((d={},d[a]=c,d))})}.bind(this))}this.shouldAlwaysShowRedial=b("RTWebClientFeatureGating").shouldAlwaysShowRedial()};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.canPeerReceiveScreenSharing,d=a.conferenceState,e=a.escalationInProgress,f=a.hasRemoteScreenStream,g=a.initializeVideo,i=a.isAudioCall,j=a.isRemoteVideoSupported,k=a.localUser,m=a.remotePeerName,n=a.protocolHandler;a=a.wasStarRatingDone;var r=this.state.participants,s=b("RTCP2PProtocolHandler").supportMultipleStreams(),t=k.getScreenStream(),u=b("gkx")("678353")&&this.props.offerEscalationSupport&&b("FBRTCSupport").isGroupCallWebtrcSupported(),v=g||k.hasVideo();switch(d){case b("RTCConferenceState").AWAITING_USER_START:return b("FBRTCConfig").isVCEndpointCall()?b("React").createElement(b("RTCAppViewFooter.react"),{className:"_2s-6",onResize:this.$11},b("React").createElement(b("RTCCallControls.react"),{autoHide:!1,className:"_2s-7",onResize:this.$12,ref:function(a){return this.$2=a?a.getDOMNode():a}.bind(this)},b("React").createElement(b("RTCCallControlsToggleVideoButton.react"),{conferenceState:d,disabled:!b("FBRTCConfig").isVCEndpointCall(),initializeVideo:v,isP2P:!0,onToggle:this.$13,videoMuted:k.isVideoMuted()}),b("React").createElement(b("RTCCallControlsToggleAudioButton.react"),{audioMuted:k.isAudioMuted(),conferenceState:d,isP2P:!0}))):b("React").createElement(b("RTCAppViewFooter.react"),{className:"_2s-7"});case b("RTCConferenceState").CONNECTING:return b("React").createElement(b("RTCAppViewFooter.react"),{className:"_2s-6",onResize:this.$11},b("React").createElement(b("RTCCallControls.react"),{autoHide:!1,className:"_2s-7",onResize:this.$12,ref:function(a){return this.$2=a?a.getDOMNode():a}.bind(this)},b("React").createElement(b("RTCCallControlsToggleVideoButton.react"),{conferenceState:d,disabled:!b("FBRTCConfig").isVCEndpointCall(),initializeVideo:v,isP2P:!0,onToggle:this.$13,videoMuted:k.isVideoMuted()}),b("React").createElement(b("RTCCallControlsToggleAudioButton.react"),{audioMuted:k.isAudioMuted(),conferenceState:d,isP2P:!0}),b("React").createElement(p,{conferenceState:d,disabled:!0,protocolHandler:n,stream:t}),b("React").createElement(b("RTCCallControlsEndCallButton.react"),{conferenceState:d,isP2P:!0,onClick:this.$14})),b("React").createElement(b("RTCSelfView.react"),{className:"_2s-8",hideCameraViewWhenScreenSharing:!s,isAudioCall:i,isP2P:!0,onResize:this.$15,onScreenSharingStop:function(a){return n.stopScreenStream(a)},user:k}));case b("RTCConferenceState").CONNECTED:if(this.props.escalationRequest){var w=this.props.awaitingEscalationACK;return b("React").createElement(b("RTCAppViewFooter.react"),{className:"_2s-6"},b("React").createElement(b("RTCCallControls.react"),{autoHide:!1,className:"_2s-7"},b("React").createElement(b("RTCCallControlsEscalationDeclineButton.react"),{disabled:w,onClick:this.$16,title:h._("Decline")}),b("React").createElement(b("RTCCallControlsEscalationAcceptButton.react"),{disabled:w,onClick:this.$17,title:h._("Accept")})))}return b("React").createElement(b("RTCAppViewFooter.react"),{className:"_2s-6",onResize:this.$11},b("React").createElement(b("RTCCallControls.react"),{autoHide:!i&&this.state.forceVisible!==l.SHOWN,className:"_2s-7",onResize:this.$12,onUpdateVisibility:this.$18,ref:function(a){return this.$2=a?a.getDOMNode():a}.bind(this)},i&&j?b("React").createElement(b("RTCCallControlsVideoEscalationButton.react"),{onClick:this.$19,videoMuted:i&&!e}):b("React").createElement(b("React").Fragment,null,b("React").createElement(b("RTCCallControlsToggleVideoButton.react"),{conferenceState:d,disabled:!j,initializeVideo:v,isP2P:!0,nodeRef:this.$20,onToggle:this.$13,videoMuted:k.isVideoMuted()}),this.state.showPopovers?b("React").createElement(o,{initializeVideo:g,isRemoteVideoSupported:j,localUser:k,peerName:m,referenceElement:this.$9,videoIsAutoDisabled:this.props.videoIsAutoDisabled}):null),b("React").createElement(b("RTCCallControlsToggleAudioButton.react"),{audioMuted:k.isAudioMuted(),conferenceState:d,isP2P:!0}),b("React").createElement(p,{conferenceState:d,disabled:i||!c||f,nodeRef:this.$21,protocolHandler:n,stream:t}),this.state.showPopovers?b("React").createElement(q,{canPeerReceiveScreenSharing:c,hasRemoteScreenStream:f,isAudioCall:i,peerName:m,referenceElement:this.$7}):null,u?b("React").createElement(b("RTCCallControlsAddGroupMembersButton.react"),{conferenceName:this.props.conferenceName,conferenceState:this.props.conferenceState,isEscalatedCall:!0,isP2P:!0,localUser:k,participants:r,remoteUsers:b("immutable").List(this.props.remoteUsers),showNux:this.props.showAddMemberNux,thread:null}):null,b("React").createElement(b("RTCCallControlsEndCallButton.react"),{conferenceState:d,isP2P:!0,onClick:this.$14})),b("React").createElement(b("RTCSelfView.react"),{className:"_2s-8",hideCameraViewWhenScreenSharing:!s,isAudioCall:i,isP2P:!0,onResize:this.$15,onScreenSharingStop:function(a){return n.stopScreenStream(a)},user:k}));case b("RTCConferenceState").TERMINATING:return b("React").createElement(b("RTCAppViewFooter.react"),{className:"_2s-6",onResize:this.$11},b("React").createElement(b("RTCCallControls.react"),{autoHide:!1,className:"_2s-7",onResize:this.$12,ref:function(a){return this.$2=a?a.getDOMNode():a}.bind(this)},b("React").createElement(b("RTCCallControlsToggleVideoButton.react"),{conferenceState:d,disabled:!0,initializeVideo:v,isP2P:!0,nodeRef:this.$20,onToggle:this.$13,videoMuted:!0}),b("React").createElement(b("RTCCallControlsToggleAudioButton.react"),{audioMuted:!0,conferenceState:d,disabled:!0,isP2P:!0}),b("React").createElement(p,{conferenceState:d,disabled:!0,nodeRef:this.$21,protocolHandler:n,stream:null}),b("React").createElement(b("RTCCallControlsEndCallButton.react"),{conferenceState:d,disabled:!0,isP2P:!0})),b("React").createElement(b("RTCSelfView.react"),{className:"_2s-8",hideCameraViewWhenScreenSharing:!s,isAudioCall:i,isP2P:!0,onResize:this.$15,user:k}));case b("RTCConferenceState").TERMINATED:w=b("RTWebCollabClientFeatureGating").showPreCallSetup(this.props.isCaller);e=(this.shouldAlwaysShowRedial||b("RTCP2PProtocolHandler").showRedialButton())&&!w;if(e||a)return b("React").createElement(b("RTCAppViewFooter.react"),{className:"_2s-6"},b("React").createElement(b("RTCCallControls.react"),{autoHide:!1,className:"_2s-7",onResize:this.$22,ref:function(a){return this.$2=a?a.getDOMNode():a}.bind(this)},b("React").createElement(b("RTCP2PRedialButton.react"),null),this.props.shouldHideCloseButton?null:b("React").createElement(b("RTCCallControlsCloseWindowButton.react"),{showLabel:!0})));else if(w&&b("RTCP2PProtocolHandler").showRedialButton())return b("React").createElement(b("RTCAppViewFooter.react"),{className:"_2s-6",onResize:this.$11},b("React").createElement(b("RTCCallControls.react"),{autoHide:!1,className:"_2s-7",onResize:this.$12,ref:function(a){return this.$2=a?a.getDOMNode():a}.bind(this)},b("React").createElement(b("RTCCallControlsToggleVideoButton.react"),{conferenceState:d,disabled:!b("FBRTCConfig").isVCEndpointCall(),initializeVideo:v,isP2P:!0,onToggle:this.$13,videoMuted:k.isVideoMuted()}),b("React").createElement(b("RTCCallControlsToggleAudioButton.react"),{audioMuted:k.isAudioMuted(),conferenceState:d,isP2P:!0})));return b("React").createElement(b("RTCAppViewFooter.react"),{className:"_2s-7"});default:return b("React").createElement(b("RTCAppViewFooter.react"),{className:"_2s-7"})}};a.prototype.$16=function(){b("RTWebUserActionLogger").logClick({component:b("RTWebLoggingComponent").VIDEO_ESCALATE_DECLINE,surface:b("RTWebLoggingSurface").CALL_CONTROLS}),b("RTCCallStore").mutateCallSummary(function(a){return a.setVidEscalationDeclinedClick()}),b("RTCP2PCallEscalator").declineEscalation()};a.prototype.$24=function(){__p&&__p();if(this.$10===0||this.$1===0)return;var a=Math.min(0,this.$10/2-(this.$1/2+this.$8));if(a===this.$3)return;this.$3=a;if(this.$2){var b=this.$2.style;b.transition="none";this.$4=window.requestAnimationFrame(function(){b.transform="translateX("+this.$3+"px)",b.transition=""}.bind(this))}};a.prototype.$25=function(a){var b=this.props,c=b.localUser;b=b.videoIsAutoDisabled;a=a.forceVisible;b||c.hasStream()&&!c.hasVideo()?a===l.READY&&(this.setState({forceVisible:l.SHOWN}),this.$5=window.setTimeout(function(){this.setState({forceVisible:l.COMPLETE})}.bind(this),k)):a===l.SHOWN&&this.setState({forceVisible:l.COMPLETE})};a.prototype.$23=function(event,a){if(!b("FBRTCConfig").isVCEndpointCall())return;b("Bootloader").loadModules(["CollabMessengerLogger"],function(b){return b.log(event,{peerID:this.props.remoteUserID,callID:Number(this.props.callID),eventDetails:a})}.bind(this),"RTCP2PAppViewFooter.react")};a.prototype.componentDidUpdate=function(a,b){this.$25(b)};a.prototype.componentWillUnmount=function(){window.cancelAnimationFrame(this.$4),window.clearTimeout(this.$5)};a.defaultProps={isRemoteVideoSupported:!0,videoIsAutoDisabled:!1};var o=function(a){var c=a.initializeVideo,d=a.isRemoteVideoSupported,e=a.localUser,f=a.peerName,g=a.referenceElement;a=a.videoIsAutoDisabled;var i=b("RTCP2PAppViewFooterUtils").getVideoCallControlPopoverTitle(!d,!e.hasVideo()&&c);d=b("RTCP2PAppViewFooterUtils").getVideoCallControlPopoverBody(!d,!e.hasVideo()&&c,a,f);return b("React").createElement(b("FBRTCCallControlPopover.react"),{body:d,className:"_26bw",hideOnBlur:!0,label:h._("Video Error Status"),referenceElement:g,title:i,width:n})},p=function(a){var c=a.conferenceState,d=a.disabled,e=a.nodeRef,f=a.protocolHandler;a=a.stream;return b("React").createElement(b("RTCCallControlsToggleScreenSharingWithFunnelButton.react"),{conferenceState:c,disabled:d,isP2P:!0,onExtensionInstallStart:function(){return b("UserAgent").isBrowser("Chrome")?b("CollabRTCChromeScreenSharingExtension").install(j()):b("Promise").reject("unexpected browser")},onShareStarted:function(a){return f.startScreenStream(a)},onShareStop:function(a){return f.stopScreenStream(a)},onShareStreamUpdate:function(a,b){return f.updateScreenStream(a,b)},ref:e,stream:a})},q=function(a){var c=a.canPeerReceiveScreenSharing,d=a.hasRemoteScreenStream,e=a.isAudioCall,f=a.peerName;a=a.referenceElement;var g=null;c=b("RTCP2PAppViewFooterUtils").getScreenSharingCallControlPopoverBody(!c,d,e,b("FBRTCConfig").isVCEndpointCall(),f);return b("React").createElement(b("FBRTCCallControlPopover.react"),{body:c,className:"_26bw",hideOnBlur:!0,label:h._("Screen Sharing Status"),referenceElement:a,title:g,width:m})};e.exports=a}),null);
__d("RTCP2PAppViewFooterContainer.react",["FluxContainer","React","RTCAppDispatcher","RTCCallNUXStore","RTCCallStore","RTCP2PAppViewFooter.react","RTCP2PCallEscalationStore","RTCP2PCallStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a=babelHelpers.inherits(h,b("React").PureComponent);g=a&&a.prototype;h.getStores=function(){return[b("RTCCallStore"),b("RTCP2PCallStore"),b("RTCP2PCallEscalationStore"),b("RTCCallNUXStore")]};h.calculateState=function(){var a=b("RTCP2PCallEscalationStore").getState(),c=b("RTCP2PCallStore").getState(),d=b("RTCCallStore").getState();return{awaitingEscalationACK:a.awaitingACK,escalated:a.escalated,escalationInProgress:a.inProgress,escalationRequest:Boolean(a.request),isCaller:c.isCaller,offerEscalationSupport:c.offerEscalationSupport,protocolHandler:c.protocolHandler,remoteUsers:d.remoteUsers,showAddMemberNux:b("RTCCallNUXStore").getState().showAddGroupMemberNUX,wasStarRatingDone:c.wasStarRatingDone}};function h(){g.constructor.call(this),b("RTCAppDispatcher").explicitlyRegisterStores([].concat(h.getStores()))}h.prototype.render=function(){return b("React").createElement(b("RTCP2PAppViewFooter.react"),babelHelpers["extends"]({},this.props,this.state))};e.exports=b("FluxContainer").create(h)}),null);
__d("RTCUIPopoutIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.filledWindow;c=c===void 0?"front":c;a=babelHelpers.objectWithoutProperties(a,["filledWindow"]);return b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 50 50"},c==="front"?b("React").createElement("path",{d:"M26 23H14.012a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2H26a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2zm9.994-8H24.006a2 2 0 0 0-2 2v4.997h2V17h11.988v8h-6.967v2h6.967a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2z"}):b("React").createElement("path",{d:"M36.01 14.996H24.02a2 2 0 0 0-2 2v4.997h4.028a3 3 0 0 1 3 3v2.003h6.96a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2zm-10.004 8.007H14.018a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11.988a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2zm0 10H14.018v-8h11.988v8z"})))};e.exports=a}),null);
__d("RTCCallControlsPopOutScreenContentButton.react",["cx","fbt","FluxContainer","React","RTCAppDispatcher","RTCCallControlsButton.react","RTCCallNUXActions","RTCCallNUXIDs","RTCCallNUXStore","RTCP2PCallActions","RTCUIPopoutIcon.react","XUIAmbientNUX.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;a.getStores=function(){return[b("RTCCallNUXStore")]};a.calculateState=function(a){a===void 0&&(a={});return babelHelpers["extends"]({},a,{showNUX:b("RTCCallNUXStore").getState().showRemoteScreenContentPopOutNUX})};function a(a){i.constructor.call(this,a),this.$2=function(){this.state.showNUX&&j(),b("RTCP2PCallActions").togglePopOutScreenContent(this.props.mediaStream)}.bind(this),b("RTCAppDispatcher").explicitlyRegisterStores([b("RTCCallNUXStore")])}a.prototype.render=function(){var a=this.props.mediaStream==null,c=a?h._("Show Shared Content"):h._("Open Shared Content in New Window");return b("React").createElement(b("React").Fragment,null,b("React").createElement(b("RTCCallControlsButton.react"),{className:b("joinClasses")(this.props.className,"transparent icon-50"),onClick:this.props.onClick||this.$2,ref:function(a){return this.$1=a}.bind(this),title:this.props.title||c},b("React").createElement(b("RTCUIPopoutIcon.react"),{filledWindow:a?"back":"front"})),b("React").createElement(k,{contextRef:function(){return this.$1}.bind(this),shown:this.state.showNUX&&this.props.mediaStream!=null}))};a.prototype.componentDidMount=function(){this.$3()};a.prototype.componentDidUpdate=function(){this.$3()};a.prototype.$3=function(){this.state.showNUX&&this.props.mediaStream!=null&&b("RTCCallNUXActions").markNUXViewed(b("RTCCallNUXIDs").RTC_P2P_REMOTE_SCREEN_CONTENT_POP_OUT_NUX)};function j(){b("RTCCallNUXActions").dismissNUX(b("RTCCallNUXIDs").RTC_P2P_REMOTE_SCREEN_CONTENT_POP_OUT_NUX)}var k=function(a){return b("React").createElement(b("XUIAmbientNUX.react"),babelHelpers["extends"]({alignment:"right",onCloseButtonClick:j,position:"below",width:"auto"},a),h._("Pop-out shared content into a separate window"))};e.exports=b("FluxContainer").create(a)}),null);
__d("RTCPushToTalkIcon.react",["cx","React","RTCSVGIcon.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return b("React").createElement(b("RTCSVGIcon.react"),{className:b("joinClasses")(a.className,"_6zy0")},b("React").createElement("svg",{viewBox:"0 0 48 48"},b("React").createElement("path",{d:"M25 31c.7-.1 1.3-.3 1.9-.6l-.5-.9c-.6.3-1.2.5-1.9.5-2.5 0-4.5 -2.2-4.5-5v-5h-1v5.2c0 3.1 2.2 5.6 5 5.8v3h-3v1h7v-1h-3v-3z m-.5-2c.5 0 1-.1 1.4-.3L21 20.6v4.9c0 1.9 1.6 3.5 3.5 3.5z m-5.8-16l-.9.5L30.3 34l.9-.5L18.7 13zM30 25.2V20h-1v5c0 .8-.2 1.6-.5 2.2l.6 1c.6-.8.9-1.9.9-3zm-2 .3v-9c0-1.9-1.6-3.5-3.5 -3.5-1.5 0-2.7.9-3.2 2.2L28 26.3v-.8z"})))};e.exports=a}),null);
__d("RTCCallControlsPushToTalkButton.react",["cx","fbt","React","RTCCallActions","RTCCallControlsButton.react","RTCHotKeys","RTCHotKeysConfig","RTCPushToTalkIcon.react","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("RTCHotKeysConfig").RTCHotKey;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={isPushKeyEnabled:!0},this.$2=function(event){__p&&__p();if(!this.props.isAudioMuted&&this.state.isPushKeyEnabled)return!1;if(event.type==="keydown"&&this.state.isPushKeyEnabled){this.setState(function(a){return{isPushKeyEnabled:!a.isPushKeyEnabled}});b("RTCCallActions").toggleMuteAudio(!0);return!0}if(event.type==="keyup"){this.setState({isPushKeyEnabled:!0});b("RTCCallActions").toggleMuteAudio(!1);return!0}return!1}.bind(this),c}a.prototype.render=function(){var a=this.props.isAudioMuted,c=this.state.isPushKeyEnabled;if(!a&&!c)return null;if(!a&&c)return null;a=h._("Push M to Talk");return b("React").createElement(b("RTCCallControlsButton.react"),{className:"pushToTalk icon-48",disabled:!0,labelIsHidden:!1,onClick:b("emptyFunction"),title:a},b("React").createElement(b("RTCPushToTalkIcon.react"),null))};a.prototype.componentDidMount=function(){this.$1=b("RTCHotKeys").register(j.PUSH_TO_TALK,b("emptyFunction"),this.$2)};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.remove()};e.exports=a}),null);
__d("RTCSettingsAudioOutputPreview.react",["cx","Promise","FBRTCLogger","FBRTCUtils","MercurySoundsConfig","React","ShimButton.react","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PureComponent;d=babelHelpers.inherits(a,c);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={currentTime:0,disabled:!0,duration:0,playing:!1},this.$5=function(){var a=this.$1;if(!a||this.state.disabled)return;this.state.playing?(a.pause(),a.currentTime=0,this.$11()):(this.setState({disabled:!0}),b("promiseDone")(b("Promise").resolve(a.play()),function(){return this.setState({disabled:!1})}.bind(this)))}.bind(this),this.$12=function(a){a&&(this.$2=a)}.bind(this),this.$13=function(a){a&&(a.volume=.3,this.$1=a)}.bind(this),this.$14=function(a){a=a.target;this.setState({disabled:!1,duration:a.duration})}.bind(this),this.$15=function(){window.clearInterval(this.$3);this.setState({playing:!0,currentTime:0});var a=Date.now(),b=function(){return this.setState({currentTime:(Date.now()-a)/1e3})}.bind(this);b();this.$3=window.setInterval(b,40)}.bind(this),this.$11=function(){window.clearInterval(this.$3),this.$3=window.setTimeout(function(){return this.setState({playing:!1,currentTime:0})}.bind(this),250)}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("ShimButton.react"),{className:"_10mu",onClick:this.$5,tabIndex:0},this.$6(),this.$7(),this.$8(),this.$9(),this.$10())};a.prototype.$6=function(){return b("React").createElement("audio",{ref:this.$12,autoPlay:!0})};a.prototype.$7=function(){return b("React").createElement("audio",{ref:this.$13,autoPlay:!1,loop:!1,preload:"auto",onDurationChange:this.$14,onPlay:this.$15,onEnded:this.$11},b("React").createElement("source",{src:b("MercurySoundsConfig").settings_preview_sound_mp3_url,type:"audio/mpeg"}),b("React").createElement("source",{src:b("MercurySoundsConfig").settings_preview_sound_ogg_url,type:"audio/ogg"}))};a.prototype.$8=function(){var a=this.state.playing?b("React").createElement("path",{d:"M7 5h2v10H7V5zm4 0h2v10H11V5z"}):b("React").createElement("path",{d:"M7 6l6 4-6 4"});return b("React").createElement("svg",{className:"_odh button",viewBox:"0 0 20 20"},a)};a.prototype.$9=function(){var a=this.state,c=a.duration;a=a.currentTime;return b("React").createElement("div",{className:"_odz"},b("React").createElement("div",{className:"_od-",style:{transform:"scaleX("+(c?a/c:0)+")"}}))};a.prototype.$10=function(){var a=this.state.playing?this.state.currentTime:this.state.duration;return b("React").createElement("div",{className:"_odh text"},Math.floor(a)+"s")};a.prototype.componentDidMount=function(){var a=this.props,b=a.sinkID;a=a.mediaStream;this.$16(a);this.$4=window.setTimeout(function(){return this.$17(b)}.bind(this),1e3)};a.prototype.componentDidUpdate=function(a){var b=this.props,c=b.sinkID;b=b.mediaStream;b!==a.mediaStream?(this.$16(b),this.$17(c)):c!==a.sinkID&&this.$17(c)};a.prototype.$16=function(a){this.$2&&a&&b("FBRTCUtils").attachMediaStream(this.$2,a)};a.prototype.$17=function(a){window.clearTimeout(this.$4);if(!this.$18()||!a)return;[this.$2,this.$1].reduce(function(b,c){return c?b.then(function(){return c.setSinkId(a)}):b},b("Promise").resolve())["catch"](function(a){})};a.prototype.$18=function(){var a=HTMLAudioElement;a=a.prototype;return"sinkId"in a&&typeof a.setSinkId==="function"};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.pause(),window.clearInterval(this.$3),window.clearTimeout(this.$4),this.$2=null,this.$1=null};a.defaultProps={sinkID:null};e.exports=a}),null);
__d("RTCSettingsDialog.react",["cx","fbt","FBRTCConfig","FBRTCLogger","FBRTCUtils","FBRTCVideo.react","Link.react","React","RTCDialog.react","RTCDialogBody.react","RTCDialogHeader.react","RTCDialogHeaderButton.react","RTCHotKeysConfig","RTCP2PProtocolHandler","RTCSettingsAudioInputPreview.react","RTCSettingsAudioOutputPreview.react","RTCSettingsMediaDeviceSelector.react","RTCUserMediaConstraints","RTCUserSettingsActions","RTCUtils","SUIMessengerRTCLightTheme","SUIText.react","VideoCallWebDriverIDs","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={audioInput:this.props.audioInput,audioOutput:this.props.audioOutput,mediaStream:null,videoInput:this.props.videoInput},this.$2=function(){b("RTCUserSettingsActions").cancel(),this.props.onHideDialog()}.bind(this),this.$3=function(){var a=this.state,c=a.audioInput,d=a.audioOutput;a=a.videoInput;b("RTCUserSettingsActions").save({audioInput:c,audioOutput:d,videoInput:a});this.props.onHideDialog()}.bind(this),c}a.prototype.componentDidMount=function(){b("RTCUserSettingsActions").edit(),this.$1()["catch"](t)};a.prototype.componentWillUnmount=function(){var a=this.state.mediaStream;a&&b("RTCUtils").stopMediaStream(a)};a.prototype.render=function(){return!this.props.devices?null:b("React").createElement(b("RTCDialog.react"),{label:"Video and audio call settings",onToggle:this.props.onHideDialog,width:564},b("React").createElement(o,{onCancel:this.$2,onSave:this.$3}),b("React").createElement(b("RTCDialogBody.react"),null,this.props.isAudioOnly?null:b("React").createElement(j,{devices:this.props.devices,mediaStream:this.state.mediaStream,onVideoInputChange:function(a){return this.$4({videoInput:a})}.bind(this),selectedVideoInput:this.state.videoInput}),b("React").createElement(k,{devices:this.props.devices,mediaStream:this.state.mediaStream,onAudioInputChange:function(a){return this.$4({audioInput:a})}.bind(this),selectedAudioInput:this.state.audioInput}),b("FBRTCUtils").supportsSetSink()?b("React").createElement(l,{devices:this.props.devices,mediaStream:this.props.remoteStream,onAudioOutputChange:function(a){return this.$4({audioOutput:a})}.bind(this),selectedAudioOutput:this.state.audioOutput}):null,b("React").createElement(m,null),b("React").createElement(p,null)))};a.prototype.$4=function(a){this.setState(a,function(){this.$1()["catch"](t)}.bind(this))};a.prototype.$1=function(){var a=this.state,c=a.audioInput,d=a.mediaStream;a=a.videoInput;return b("RTCUtils").getUserMedia({audio:b("RTCUserMediaConstraints").audio(c),video:this.props.isAudioOnly?!1:b("RTCUserMediaConstraints").video(b("RTCP2PProtocolHandler").getDefaultVideoQuality(),a)}).then(function(a){d&&b("RTCUtils").stopMediaStream(d),this.setState({mediaStream:a})}.bind(this))};var j=function(a){return b("React").createElement(q,{className:"_10mn"},b("React").createElement(r,null,b("React").createElement(s,null,h._("Camera"))),b("React").createElement(r,null,b("React").createElement(b("RTCSettingsMediaDeviceSelector.react"),{devices:b("RTCUtils").filterDevicesByKind(a.devices,"videoinput"),onChange:a.onVideoInputChange,value:a.selectedVideoInput,width:212})),b("React").createElement(r,null,b("React").createElement(b("FBRTCVideo.react"),{className:"_10mo",mediaStream:a.mediaStream,muted:!0})))},k=function(a){return b("React").createElement(q,{className:"_10mn"},b("React").createElement(r,null,b("React").createElement(s,null,h._("Microphone"))),b("React").createElement(r,null,b("React").createElement(b("RTCSettingsMediaDeviceSelector.react"),{devices:b("RTCUtils").filterDevicesByKind(a.devices,"audioinput"),onChange:a.onAudioInputChange,value:a.selectedAudioInput,width:212})),b("React").createElement(r,null,b("React").createElement(b("RTCSettingsAudioInputPreview.react"),{mediaStream:a.mediaStream})))},l=function(a){return b("React").createElement(q,{className:"_10mn"},b("React").createElement(r,null,b("React").createElement(s,null,h._("Audio Output"))),b("React").createElement(r,null,b("React").createElement(b("RTCSettingsMediaDeviceSelector.react"),{devices:b("RTCUtils").filterDevicesByKind(a.devices,"audiooutput"),onChange:a.onAudioOutputChange,value:a.selectedAudioOutput,width:212})),b("React").createElement(r,null,b("React").createElement(b("RTCSettingsAudioOutputPreview.react"),{mediaStream:a.mediaStream,sinkID:a.selectedAudioOutput})))},m=function(){var a=b("RTCHotKeysConfig").getSupportedHotKeys();return b("React").createElement(q,{className:"_10mn"},b("React").createElement(r,null,b("React").createElement(s,null,h._("Keyboard Shortcuts"))),b("React").createElement("div",{className:"_6zxh"},a.slice(0,Math.ceil(a.length/2)).map(function(a,c){return b("React").createElement(n,{key:c,keyConfig:a})})),b("React").createElement("div",{className:"_6zxh"},a.slice(Math.ceil(a.length/2),a.length).map(function(a,c){return b("React").createElement(n,{key:c,keyConfig:a})})))},n=function(a){a=a.keyConfig;var c=(a.altKey?"Alt + ":"")+a.key.toUpperCase();return b("React").createElement("div",{className:"_6zxi",key:a.label},b("React").createElement(b("SUIText.react"),{color:"placeholder",size:"body1",theme:b("SUIMessengerRTCLightTheme")},a.label),b("React").createElement(b("SUIText.react"),{color:"placeholder",size:"body1",theme:b("SUIMessengerRTCLightTheme")},c))},o=function(a){return b("React").createElement(b("RTCDialogHeader.react"),null,b("React").createElement("h1",{className:"_10mm"},h._("Settings")),b("React").createElement(b("RTCDialogHeaderButton.react"),{label:h._("Cancel"),onClick:a.onCancel}),b("React").createElement(b("RTCDialogHeaderButton.react"),{"data-testid":b("VideoCallWebDriverIDs").SAVE_SETTINGS_BUTTON,label:h._("Save"),onClick:a.onSave}))},p=function(){return b("React").createElement("footer",{className:"_10mv _10mn"},b("React").createElement(r,null,b("React").createElement(b("SUIText.react"),{color:"placeholder",size:"header4",theme:b("SUIMessengerRTCLightTheme")},h._("Tip: Try restarting your browser if you're having trouble with your camera or microphone."))),b("React").createElement(r,null,b("React").createElement(b("SUIText.react"),{color:"blueLink",size:"header4",theme:b("SUIMessengerRTCLightTheme")},b("React").createElement(b("Link.react"),{href:b("FBRTCConfig").userMediaErrorUrl(),target:"_blank"},h._("Get help")))))},q=function(a){var c=a.children,d=a.className;a=babelHelpers.objectWithoutProperties(a,["children","className"]);return b("React").createElement("section",babelHelpers["extends"]({className:b("joinClasses")(d,"_10mx")},a),c)},r=function(a){var c=a.children;a=babelHelpers.objectWithoutProperties(a,["children"]);return b("React").createElement("div",babelHelpers["extends"]({className:"_10my"},a),c)},s=function(a){a=a.children;return b("React").createElement(b("SUIText.react"),{color:"placeholder",size:"header3",theme:b("SUIMessengerRTCLightTheme")},a)};function t(a){}e.exports=a}),null);
__d("RTCSettingsContainer.react",["FluxContainer","React","RTCAppDispatcher","RTCCallStore","RTCCallType","RTCMediaDevicesStore","RTCP2PCallStore","RTCSettingsDialog.react","RTCUserSettingsStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a=babelHelpers.inherits(h,b("React").PureComponent);g=a&&a.prototype;function h(a){g.constructor.call(this,a),b("RTCAppDispatcher").explicitlyRegisterStores([].concat(h.getStores())),b("RTCMediaDevicesStore").refresh()}h.getStores=function(){return[b("RTCMediaDevicesStore"),b("RTCCallStore"),b("RTCP2PCallStore"),b("RTCUserSettingsStore")]};h.calculateState=function(){var a=b("RTCCallStore").getState();a=a.remoteUsers;var c=b("RTCP2PCallStore").getState();c=c.callType;var d=b("RTCUserSettingsStore").getState(),e=d.audioInput,f=d.audioOutput;d=d.videoInput;a=a?a.first():null;return{audioInput:e,audioOutput:f,devices:b("RTCMediaDevicesStore").getState(),isAudioOnly:c===b("RTCCallType").AUDIO_ONLY,remoteStream:a?a.streams.first():null,videoInput:d}};h.prototype.render=function(){return b("React").createElement(b("RTCSettingsDialog.react"),babelHelpers["extends"]({},this.props,this.state))};e.exports=b("FluxContainer").create(h)}),null);
__d("RTCUISettingsCogIcon.react",["React","RTCSVGIcon.react","RTCSVGIconDropShadowFilter.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$1="",this.$2=function(a){a&&(this.$1=a.getURL(),this.forceUpdate())}.bind(this),b}a.prototype.render=function(){var a=this.props,c=a.variant,d=a.shadow;a=babelHelpers.objectWithoutProperties(a,["variant","shadow"]);return d?b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 50 50"},b("React").createElement("defs",null,b("React").createElement(b("RTCSVGIconDropShadowFilter.react"),{height:24,ref:this.$2,width:24})),b("React").createElement("g",{filter:this.$1},b("React").createElement(h,{variant:c})))):b("React").createElement(b("RTCSVGIcon.react"),a,b("React").createElement("svg",{viewBox:"0 0 50 50"},b("React").createElement(h,{variant:c})))};a.defaultProps={variant:"outline"};var h=function(a){a=a.variant;return a==="outline"?b("React").createElement("g",{strokeWidth:"2"},b("React").createElement("path",{d:"M34.1 23.4l-1.4-.2c-1.1-.2-1.7-1.5-1-2.4l.8-1.1c.3-.4.3-1-.1-1.3l-.9-.9c-.3-.4-.9-.4-1.3-.1l-1.1.8c-.9.7-2.2.1-2.4-1l-.2-1.4c-.1-.5-.5-.9-1-.9h-1.3c-.5 0-.9.4-1 .9l-.2 1.4c-.2 1.1-1.5 1.7-2.4 1l-1.1-.8c-.4-.3-1-.3-1.3.1l-.9.9c-.3.4-.4.9-.1 1.3l.8 1.1c.7.9.1 2.2-1 2.4l-1.4.2c-.5.1-.9.5-.9 1v1.3c0 .5.4.9.9 1l1.4.2c1.1.2 1.7 1.5 1 2.4l-.8 1.1c-.3.4-.3 1 .1 1.3l.9.9c.3.4.9.4 1.3.1l1.1-.8c.9-.7 2.2-.1 2.4 1l.2 1.4c.1.5.5.9 1 .9h1.3c.5 0 .9-.4 1-.9l.2-1.4c.2-1.1 1.5-1.7 2.4-1l1.1.8c.4.3 1 .3 1.3-.1l.9-.9c.4-.4.4-.9.1-1.3l-.8-1.1c-.7-.9-.1-2.2 1-2.4l1.4-.2c.5-.1.9-.5.9-1v-1.3c0-.5-.4-1-.9-1z",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),b("React").createElement("circle",{cx:"25",cy:"25",fill:"none",r:"3.5"})):b("React").createElement("path",{d:"M34.2 22.9l-1.4-.2c-.4-.1-.6-.3-.8-.6-.1-.3-.1-.7.1-1L33 20c.4-.6.4-1.4-.1-2l-.9-.9c-.3-.3-.7-.4-1.1-.4-.3 0-.6.1-.9.3l-1.1.8c-.2.1-.4.2-.6.2-.4 0-.9-.3-1-.9l-.2-1.4c-.1-.7-.7-1.3-1.5-1.3h-1.3c-.7 0-1.4.5-1.5 1.3l-.2 1.4c-.1.6-.6.9-1 .9-.2 0-.4-.1-.6-.2l-1-.8c-.3-.2-.6-.3-.9-.3-.4 0-.8.2-1.1.4l-.9.9c-.5.5-.6 1.4-.1 2l.8 1.1c.2.3.3.6.1 1-.1.3-.4.6-.8.6l-1.4.2c-.7.1-1.3.7-1.3 1.5v1.3c0 .7.5 1.4 1.3 1.5l1.4.2c.3.1.6.3.8.6s.1.7-.1 1l-.8 1c-.4.6-.4 1.4.1 2l.9.9c.3.3.7.4 1.1.4.3 0 .6-.1.9-.3l1.1-.8c.2-.1.4-.2.6-.2.4 0 .9.3 1 .9l.2 1.4c.1.7.7 1.3 1.5 1.3h1.3c.7 0 1.4-.5 1.5-1.3l.2-1.4c.1-.6.6-.9 1-.9.2 0 .4.1.6.2l1 .8c.3.2.6.3.9.3.4 0 .8-.2 1.1-.4l.9-.9c.5-.5.6-1.4.1-2l-.8-1.1c-.2-.3-.3-.7-.1-1 .1-.3.4-.6.8-.6l1.4-.2c.7-.1 1.3-.7 1.3-1.5v-1.3c-.1-.7-.6-1.3-1.4-1.4zM25 28.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5z"})};e.exports=a}),null);
__d("RTCCallControlsShowSettingsButton.react",["cx","fbt","FBRTCUserSettings","FluxContainer","React","RTCAppDispatcher","RTCCallControlsButton.react","RTCCallNUXActions","RTCCallNUXIDs","RTCCallNUXStore","RTCCallStore","RTCHotKeys","RTCHotKeysConfig","RTCSettingsContainer.react","RTCUISettingsCogIcon.react","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs","XUIAmbientNUX.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("RTCHotKeysConfig").RTCHotKey;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;a.getStores=function(){return[b("RTCCallNUXStore")]};a.calculateState=function(a){a===void 0&&(a={highlighted:!1,pressed:!1});return babelHelpers["extends"]({},a,{showNux:b("RTCCallNUXStore").getState().showSettingsNUX})};function a(a){i.constructor.call(this,a),this.$3=function(){if(!b("FBRTCUserSettings").isEnabled())return;var a=this.context;a&&a.dialogShow&&a.dialogHide&&(a.dialogShow(b("React").createElement(b("RTCSettingsContainer.react"),{onHideDialog:this.$4})),this.setState({highlighted:!0}));this.state.showNux&&k();a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logClick(babelHelpers["extends"]({},a,{callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").SETTINGS,surface:b("RTWebLoggingSurface").CALL_CONTROLS}))}.bind(this),this.$4=function(){this.setState({highlighted:!1}),this.context.dialogHide()}.bind(this),b("RTCAppDispatcher").explicitlyRegisterStores([b("RTCCallNUXStore")])}a.prototype.render=function(){__p&&__p();var a=this.state,c=a.highlighted;a=a.pressed;var d=this.props,e=d.isAudioOnly;d=d.className;a=c?a?"outline":"filled":a?"filled":"outline";return b("React").createElement(b("React").Fragment,null,b("React").createElement(b("RTCCallControlsButton.react"),{className:b("joinClasses")("transparent icon-50",d),"data-testid":b("VideoCallWebDriverIDs").SETTINGS_BUTTON,highlighted:c,onClick:this.$3,onMouseDown:function(){return this.setState({pressed:!0})}.bind(this),onMouseUp:function(){return this.setState({pressed:!1})}.bind(this),ref:function(a){return this.$2=a}.bind(this),title:h._("Settings")},b("React").createElement(b("RTCUISettingsCogIcon.react"),{shadow:!e,variant:a})),b("React").createElement(l,{contextRef:function(){return this.$2}.bind(this),shown:this.state.showNux}))};a.prototype.componentDidMount=function(){this.$5();var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logImpression(babelHelpers["extends"]({},a,{callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").SETTINGS,surface:b("RTWebLoggingSurface").CALL_CONTROLS}));this.$1=b("RTCHotKeys").register(j.SETTINGS,this.$3)};a.prototype.componentDidUpdate=function(){this.$5()};a.prototype.$5=function(){this.state.showNux&&b("RTCCallNUXActions").markNUXViewed(b("RTCCallNUXIDs").RTC_P2P_SETTINGS_NUX)};a.prototype.componentWillUnmount=function(){var a=this.context;this.state.highlighted&&a&&a.dialogHide&&a.dialogHide();this.$1&&this.$1.remove()};a.contextTypes={dialogShow:c.func,dialogHide:c.func};function k(){b("RTCCallNUXActions").dismissNUX(b("RTCCallNUXIDs").RTC_P2P_SETTINGS_NUX)}var l=function(a){return b("React").createElement(b("XUIAmbientNUX.react"),babelHelpers["extends"]({alignment:"right",onCloseButtonClick:k,position:"below",width:"auto"},a),h._("Change your microphone, camera and speaker devices"))};e.exports=b("FluxContainer").create(a)}),null);
__d("RTCP2PAppViewHeader.react",["cx","FBRTCConfig","FBRTCUserSettings","JSResource","Placeholder.react","React","RTCAppViewHeader.react","RTCCallControls.react","RTCCallControlsChatButton.react","RTCCallControlsPopOutScreenContentButton.react","RTCCallControlsPushToTalkButton.react","RTCCallControlsShowSettingsButton.react","RTCCallControlsToggleFullScreenButton.react","RTCCallNUXStore","RTCConferenceState","RTCP2PCallStore","RTWebCollabClientFeatureGating","UserAgent","lazyLoadComponent","BootloaderResource"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("lazyLoadComponent")(b("JSResource")("RTCCallControlsShowCameraControlsButton.react").__setRef("RTCP2PAppViewHeader.react")),i=b("lazyLoadComponent")(b("JSResource")("RTCMediaStateController.react").__setRef("RTCP2PAppViewHeader.react")),j=b("lazyLoadComponent")(b("JSResource")("RTCCallControlsMeetingRosterContainer.react").__setRef("RTCP2PAppViewHeader.react")),k=b("lazyLoadComponent")(b("JSResource")("RTCDtmfController.react").__setRef("RTCP2PAppViewHeader.react"));a=function(a){var c=a.callID,d=a.conferenceName,e=a.conferenceState,f=a.isAudioCall,g=a.isScreenContentPoppedOut,o=a.remoteUser,p=!n({callID:c,conferenceName:d,conferenceState:e,isAudioCall:f,isScreenContentPoppedOut:g,remoteUser:o});b("FBRTCConfig").isVCEndpointCall()&&(b("BootloaderResource").preload(b("JSResource")("RTCMediaStateController.react").__setRef("RTCP2PAppViewHeader.react")),b("BootloaderResource").preload(b("JSResource")("RTCDtmfController.react").__setRef("RTCP2PAppViewHeader.react")),b("BootloaderResource").preload(b("JSResource")("RTCCallControlsShowCameraControlsButton.react").__setRef("RTCP2PAppViewHeader.react")),b("BootloaderResource").preload(b("JSResource")("RTCCallControlsMeetingRosterContainer.react").__setRef("RTCP2PAppViewHeader.react")));switch(e){case b("RTCConferenceState").AWAITING_USER_START:return b("FBRTCConfig").isVCEndpointCall()?b("React").createElement(b("RTCAppViewHeader.react"),{isAudioCall:f},b("React").createElement(b("RTCCallControls.react"),babelHelpers["extends"]({compact:!0},{autoHide:p}),b("React").createElement(b("RTCCallControlsToggleFullScreenButton.react"),{isAudioOnly:f,isP2P:!0}),b("React").createElement(m,{isAudioOnly:f,peer:o}),b("React").createElement(b("RTCCallControlsChatButton.react"),{conferenceState:e,isP2P:!0}))):b("React").createElement(l,{autoHide:p,callID:c,conferenceName:d,conferenceState:e,isAudioCall:f});case b("RTCConferenceState").CONNECTED:var q=b("RTWebCollabClientFeatureGating").showPushToTalk();return b("React").createElement(b("RTCAppViewHeader.react"),{isAudioCall:f},b("React").createElement(b("RTCCallControls.react"),babelHelpers["extends"]({compact:!0},{autoHide:p}),q?b("React").createElement("div",{className:"_6zx7"},b("React").createElement(b("RTCCallControlsPushToTalkButton.react"),{isAudioMuted:a.localUser.isAudioMuted()})):null,o&&o.hasScreenStream()?b("React").createElement(b("RTCCallControlsPopOutScreenContentButton.react"),{mediaStream:g?null:o.getScreenStream()}):null,b("FBRTCConfig").isVCEndpointCall()?b("React").createElement(b("Placeholder.react"),{fallback:null},b("React").createElement(h,null),b("React").createElement(i,null),b("React").createElement(k,null)):null,b("React").createElement(b("RTCCallControlsToggleFullScreenButton.react"),{isAudioOnly:f,isP2P:!0}),b("React").createElement(m,{isAudioOnly:f,peer:o}),b("RTWebCollabClientFeatureGating").showParticipantsRoster()?b("React").createElement(j,null):null,b("React").createElement(b("RTCCallControlsChatButton.react"),{conferenceState:e,isP2P:!0})));default:return b("React").createElement(l,{autoHide:p,callID:c,conferenceName:d,conferenceState:e,isAudioCall:f})}};var l=function(a){var c=a.autoHide;a.callID;a.conferenceName;var d=a.conferenceState;a=a.isAudioCall;return b("React").createElement(b("RTCAppViewHeader.react"),{isAudioCall:a},b("React").createElement(b("RTCCallControls.react"),babelHelpers["extends"]({compact:!0},{autoHide:c}),b("React").createElement(b("RTCCallControlsChatButton.react"),{conferenceState:d,isP2P:!0})))},m=function(a){var c=a.isAudioOnly;a=a.peer;var d=b("RTCP2PCallStore").getState();d=d.isPeerOnMobile;d=d&&b("UserAgent").isBrowser("Firefox");d=b("FBRTCUserSettings").isEnabled()&&!d;return d?b("React").createElement(b("RTCCallControlsShowSettingsButton.react"),{isAudioOnly:c,isP2P:!0,remoteStream:a?a.streams.first():null}):null};function n(a){__p&&__p();a.callID;a.conferenceName;var c=a.conferenceState,d=a.isAudioCall,e=a.isScreenContentPoppedOut;a=a.remoteUser;if(d)return!0;if(c!==b("RTCConferenceState").CONNECTED)return!1;d=b("RTCCallNUXStore").getState();c=d.showRemoteCameraControlsNUX;var f=d.showRemoteScreenContentPopOutNUX,g=d.showRemoteStreamsSliderNUX;d=d.showSettingsNUX;return d||b("FBRTCConfig").isVCEndpointCall()&&c||!!a&&a.hasScreenStream()&&!e&&(g||f)}e.exports=a}),null);
__d("RTCP2PAppView.react",["cx","CssBackgroundImage.react","MercuryIDs","MessengerParticipants.bs","React","RTCAppSpinner.react","RTCAppView.react","RTCAppViewFooter.react","RTCAppViewHeader.react","RTCAppViewMain.react","RTCGrantUserMediaAccessView.react","RTCP2PAppViewContentContainer.react","RTCP2PAppViewFooterContainer.react","RTCP2PAppViewHeader.react","RTCPeerConnectionStats.react","RTCUserMediaRequestState","RTWebClientFeatureGating"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){var c=a.callID,d=a.conferenceName,e=a.conferenceState,f=a.initializeVideo,g=a.isAudioCall,h=a.isScreenContentPoppedOut,i=a.localUser,j=a.remoteUser,k=a.userMediaRequest;switch(k.state){case b("RTCUserMediaRequestState").PENDING:case b("RTCUserMediaRequestState").REJECTED:return b("React").createElement(b("RTCAppView.react"),{isAudioCall:g},b("React").createElement(b("RTCAppViewHeader.react"),{isAudioCall:g}),b("React").createElement(b("RTCAppViewMain.react"),{fullBleed:!0},b("React").createElement(b("RTCGrantUserMediaAccessView.react"),{isAudioCall:g,userMediaRequest:k})),b("React").createElement(b("RTCAppViewFooter.react"),null));case b("RTCUserMediaRequestState").FULFILLED:k=b("MercuryIDs").getParticipantIDFromUserID(a.remoteUserFBID);k=b("MessengerParticipants.bs").getNow(k);return b("React").createElement(b("RTCAppView.react"),{isAudioCall:g&&!a.acceptedEscalation},b("RTWebClientFeatureGating").callUnification()?b("React").createElement(b("CssBackgroundImage.react"),{backgroundPosition:"center center",className:"_6qmp",height:"100%",imageURI:k.image_src,width:"100%"}):null,b("React").createElement(b("RTCP2PAppViewHeader.react"),{callID:c,conferenceName:d,conferenceState:e,isAudioCall:g,isScreenContentPoppedOut:h,localUser:i,remoteUser:j}),b("React").createElement(b("RTCP2PAppViewContentContainer.react"),{conferenceName:a.conferenceName,conferenceState:e,connectionStatus:a.connectionStatus,endCallReason:a.endCallReason,isAudioCall:g,isScreenContentPoppedOut:h,remoteUser:j}),b("React").createElement(b("RTCP2PAppViewFooterContainer.react"),{callID:c,canPeerReceiveScreenSharing:a.canPeerReceiveScreenSharing,conferenceName:d,conferenceState:e,hasRemoteScreenStream:j?j.hasScreenStream():!1,initializeVideo:f,isAudioCall:g,localUser:a.localUser,remotePeerName:j?j.userName:"",remoteUserID:j?j.FBID:"",shouldHideCloseButton:a.shouldHideCloseButton}),b("React").createElement(b("RTCPeerConnectionStats.react"),{connection:a.connection,style:{marginBottom:40}}));default:return b("React").createElement(b("RTCAppView.react"),{isAudioCall:g},b("React").createElement(b("RTCAppViewHeader.react"),{isAudioCall:g}),b("React").createElement(b("RTCAppViewMain.react"),{fullBleed:!0},b("React").createElement(b("RTCAppSpinner.react"),null)),b("React").createElement(b("RTCAppViewFooter.react"),null))}};e.exports=a}),null);
__d("RTCP2PAppViewContainer.react",["FBRTCScreenSharingUtils","FluxContainer","React","RTCAppDispatcher","RTCP2PAppView.react","RTCP2PCallEscalationStore","RTCP2PCallStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a=babelHelpers.inherits(h,b("React").PureComponent);g=a&&a.prototype;h.getStores=function(){return[b("RTCP2PCallEscalationStore"),b("RTCP2PCallStore")]};h.calculateState=function(){var a=b("RTCP2PCallStore").getState(),c=a.connectionStatus,d=a.endCallReason,e=a.isScreenContentPoppedOut;a=a.signalingExperiments;return{acceptedEscalation:b("RTCP2PCallEscalationStore").getState().response,connectionStatus:c,endCallReason:d,canPeerReceiveScreenSharing:b("FBRTCScreenSharingUtils").canPeerReceiveScreenSharing(a),isAudioCall:b("RTCP2PCallStore").isAudioOnly(),isScreenContentPoppedOut:e}};function h(){g.constructor.call(this),b("RTCAppDispatcher").explicitlyRegisterStores([].concat(h.getStores()))}h.prototype.render=function(){return b("React").createElement(b("RTCP2PAppView.react"),babelHelpers["extends"]({},this.props,this.state))};e.exports=b("FluxContainer").create(h)}),null);
__d("MessengerRTCUserMediaErrorDialog.react",["cx","fbt","FluxContainer","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerDialogTitle.react","React","RTCCallStore","RTCConferenceState","RTWebLoggingSurface","RTWebUserActionLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=300;a=babelHelpers.inherits(k,b("React").Component);i=a&&a.prototype;function k(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state=babelHelpers["extends"]({},k.calculateState()),b}k.getStores=function(){return[b("RTCCallStore")]};k.calculateState=function(){return{conferenceState:b("RTCCallStore").getState().callInfo.conferenceState}};k.prototype.componentDidMount=function(){var a=this.props,c=a.conferenceName;a=a.isGroupCall;b("RTWebUserActionLogger").logImpression({surface:b("RTWebLoggingSurface").AUDIO_FALLBACK_DIALOG,conferenceState:this.state.conferenceState,callType:b("RTWebUserActionLogger").getCallType(a),conferenceName:c})};k.prototype.render=function(){if(this.state.conferenceState!==b("RTCConferenceState").TERMINATED)return b("React").createElement(b("MessengerDialog.react"),{onToggle:this.props.onUnmount,type:"default",width:j},b("React").createElement(b("MessengerDialogHeader.react"),{className:"_6dxt"},b("React").createElement(b("MessengerDialogTitle.react"),null,h._("Can't find camera"))),b("React").createElement(b("MessengerDialogBody.react"),{className:"_233q"},h._("Connect your camera and refresh the page to turn on video. If your camera is already connected, try restarting your browser.")),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{className:"_30vt _233r",label:h._("Ok"),onClick:this.props.onUnmount,type:"primary",use:"default"})));else return null};e.exports=b("FluxContainer").create(k)}),null);
__d("RTCUserMediaErrorDialogController",["DOM","MessengerRTCUserMediaErrorDialog.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";a={_container:b("DOM").create("div"),_onUnmount:function(){b("ReactDOM").unmountComponentAtNode(this._container)},showMediaErrorDialog:function(a,c){b("ReactDOM").render(b("React").createElement(b("MessengerRTCUserMediaErrorDialog.react"),{conferenceName:c,isGroupCall:a,onUnmount:function(){return this._onUnmount()}.bind(this)}),this._container)}};e.exports=a}),null);
__d("RTCUserMediaRequest",["immutable","UserMediaRequestError"],(function(a,b,c,d,e,f){"use strict";var g;c=b("immutable").Record({error:null,state:null});g=babelHelpers.inherits(a,c);g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("RTWebGetUserMediaWithRetryOnPermissionChange",["Promise","DateConsts","UserAgent","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=2*b("DateConsts").MS_PER_SEC;function h(a,c,d,e){__p&&__p();return d()["catch"](function(f){__p&&__p();e&&e(f);var i=window.navigator.permissions;if(b("UserAgent").isBrowser("Chrome")&&i&&i.query)return new(b("Promise"))(function(a,b){__p&&__p();i.query({name:"microphone"}).then(function(e){if(e.state==="granted"){b(f);return}var h=window.setTimeout(function(){return b(f)},c*g);e.onchange=function(){e.state==="granted"&&(window.clearTimeout(h),a(d()))}})["catch"](function(a){throw f})});else return new(b("Promise"))(function(e,i){f.name==="NotAllowedError"&&a<c?window.setTimeout(function(){h(a+1,c,d,b("emptyFunction")).then(function(a){return e(a)})["catch"](function(a){return i(a)})},g):i(f)})})}a={gen:function(a,b,c){return h(0,a,b,c)}};e.exports=a}),null);
__d("RTCP2PCallView.react",["cx","fbt","PageHooks","Bootloader","CollabCallMessengerBrowserEventEnum","CollabInitStreamTriggerType","CSS","FBRTCConfig","FBRTCConstants","FBRTCLogger","FBRTCMessageListener","FBRTCStatsHelpers","MercuryIDs","MessengerBugNub.react","React","RTCCallActions","RTCCallInitUtils","RTCCallStore","RTCCallType","RTCChatViewWrapper.react","RTCConferenceState","RTCConfig","RTCMediaDevices","RTCP2PAppViewContainer.react","RTCP2PCallActions","RTCP2PCallWindowHandler","RTCP2PConnectionStatus","RTCP2PProtocolHandler","RTCUserMediaErrorDialogController","RTCUserMediaRequest","RTCUserMediaRequestState","RTWebClientFeatureGating","RTWebCollabClientFeatureGating","RTWebGetUserMediaWithRetryOnPermissionChange","RTWebLoggingSurface","RTWebUserActionLogger","Run"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;b("PageHooks");var j=b("FBRTCConstants").SignalingProtocol,k=60,l=150;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(a){__p&&__p();i.constructor.call(this,a);this.state={userMediaRequest:new(b("RTCUserMediaRequest"))()};this.$1=null;this.$2=b("FBRTCLogger").getInstance();this.$3=function(){return this.props.conferenceState===b("RTCConferenceState").CONNECTED?h._("Leaving this page will end your call."):null}.bind(this);this.$4=function(){__p&&__p();b("RTWebUserActionLogger").logCheckpoint({checkpoint:"window_unload"});if(this.props.conferenceState===b("RTCConferenceState").TERMINATED)return;var a=b("FBRTCConstants").CallEndReason.HANGUP_CALL,c="BrowserClosed",d=this.state.userMediaRequest;if(d.state===b("RTCUserMediaRequestState").PENDING)a=b("FBRTCConstants").CallEndReason.CLIENT_ERROR,c="MediaPending";else if(d.state===b("RTCUserMediaRequestState").REJECTED){d=d.error;a=b("FBRTCConstants").CallEndReason.CLIENT_ERROR;c=!d||d.name==="NotAllowedError"?"MediaDenied":d.getEndCallSubReason()}this.props.protocolHandler.endCall(a,c,!0)}.bind(this);b("Run").onBeforeUnload(this.$3,!1);b("Run").onUnload(this.$4);if(!a.allowsMWEscalation){a=this.props.conferenceName;b("RTCCallActions").initialize({protocol:j.P2P,conferenceName:a,serverInfoData:null,callID:a});b("RTCP2PCallActions").setCallType(this.props.isInitiallyAudioCall?b("RTCCallType").AUDIO_ONLY:b("RTCCallType").AUDIO_VIDEO)}b("RTCP2PCallActions").setIsCaller(this.props.isCaller)}a.prototype.componentDidMount=function(){__p&&__p();b("RTCP2PCallWindowHandler").init(window);document.documentElement!=null&&b("CSS").addClass(document.documentElement,"_2ujx");this.$2.logCallAction(this.$5(),this.$6(),b("FBRTCLogger").CallAction.POPUP_OPENED);b("RTCCallInitUtils").initializeCallSummary({peerID:this.$5(),callID:String(this.$6()),isCaller:this.props.isCaller,isAudio:this.props.isInitiallyAudioCall,protocol:b("FBRTCConstants").SignalingProtocol.P2P});this.props.protocolHandler.init(this.$5(),this.$6());var a=[this.props.localUser.FBID,this.props.remoteUserFBID];b("RTCCallInitUtils").initializeRTCUsers(a,function(){this.$1=window.setTimeout(function(){this.setState(function(a){a=a.userMediaRequest;return{userMediaRequest:a.set("state",a.state||b("RTCUserMediaRequestState").PENDING)}})}.bind(this),2e3),this.$7().then(function(a){window.clearTimeout(this.$1),b("RTCCallActions").addLocalStream(a),this.$8()}.bind(this))["catch"](m)}.bind(this))};a.prototype.$5=function(){return this.props.remoteUserFBID};a.prototype.$6=function(){return Number(this.props.conferenceName)};a.prototype.$9=function(){return b("RTCP2PProtocolHandler").initStream(this.props.initializeVideo)};a.prototype.$10=function(){var a=this.props.isCaller?l:k;return b("RTWebGetUserMediaWithRetryOnPermissionChange").gen(a,function(){return this.$9()}.bind(this),function(a){this.setState(function(c){c=c.userMediaRequest;return{userMediaRequest:c.set("error",a).set("state",b("RTCUserMediaRequestState").REJECTED)}})}.bind(this))};a.prototype.$7=function(){__p&&__p();b("RTCCallStore").mutateCallSummary(function(a){return a.onMediaRequested()});var a=b("RTWebClientFeatureGating").waitForMediaPermission();return(a?this.$10():this.$9()).then(function(a){__p&&__p();var c=!this.props.isInitiallyAudioCall,d=a.getVideoTracks().length>0;if(c&&!d){b("RTCCallStore").mutateCallSummary(function(a){return a.onFellbackToAudio()});c=this.props.conferenceName;d=b("RTWebCollabClientFeatureGating").showPreCallSetup(this.props.isCaller);!d&&this.props.initializeVideo&&b("RTCUserMediaErrorDialogController").showMediaErrorDialog(!1,c)}this.setState(function(a){a=a.userMediaRequest;return{userMediaRequest:a.set("state",b("RTCUserMediaRequestState").FULFILLED)}});b("RTCCallStore").mutateCallSummary(function(a){a.onMediaSucceeded()});b("RTCMediaDevices").enumerateDevices().then(function(c){b("RTCCallStore").mutateCallSummary(function(d){b("FBRTCStatsHelpers").logCapabilities(d,a,c)})})["catch"](m);return a}.bind(this))["catch"](function(a){this.setState(function(c){c=c.userMediaRequest;return{userMediaRequest:c.set("error",a).set("state",b("RTCUserMediaRequestState").REJECTED)}});this.props.connectionStatus===b("RTCP2PConnectionStatus").INIT&&b("RTCCallStore").mutateCallSummary(function(c){return c.onCallEnded(b("FBRTCConstants").CallEndReason.CLIENT_ERROR,!1,!0,"MediaDenied: "+a.name+", "+a.constraint)});this.$2.logError(this.$5(),this.$6(),"MediaDenied: "+a.name+", "+a.constraint);this.$11(a,b("CollabInitStreamTriggerType").USER_MEDIA_REQUEST);throw a}.bind(this))};a.prototype.$8=function(){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"RTCP2PCallView_startCall"}),this.props.protocolHandler.fetchTURNCredentials().then(function(){var a=b("FBRTCMessageListener").setParentWindowStartCallHandler(function(){this.props.protocolHandler.startCall(),a&&(a(),a=null)}.bind(this));b("FBRTCMessageListener").init(!0,this.$5());window.setTimeout(function(){b("RTCCallActions").waitForUserInput(),a&&(a(),a=null)},1500)}.bind(this))["catch"](function(a){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"RTCP2PCallView_startCall_start_call_failed"})})};a.prototype.$11=function(a,c){this.$12(b("CollabCallMessengerBrowserEventEnum").GET_USER_MEDIA_ERROR,JSON.stringify({error:a.name,constraint:a.constraint,trigger:c})),b("RTWebUserActionLogger").logError({errorDomain:b("CollabCallMessengerBrowserEventEnum").GET_USER_MEDIA_ERROR,errorType:JSON.stringify(a),surface:b("RTWebLoggingSurface").CALL_CONTAINER})};a.prototype.$12=function(event,a){if(!b("FBRTCConfig").isVCEndpointCall())return;b("Bootloader").loadModules(["CollabMessengerLogger"],function(b){return b.log(event,{peerID:this.props.remoteUserFBID,callID:this.$6(),eventDetails:a})}.bind(this),"RTCP2PCallView.react")};a.prototype.render=function(){return b("React").createElement(b("RTCChatViewWrapper.react"),{callerID:this.props.localUser.FBID,chatWindowVisible:this.props.chatWindowVisible,threadID:b("MercuryIDs").getThreadIDFromUserID(this.$5())},b("React").createElement("div",null,b("React").createElement(b("RTCP2PAppViewContainer.react"),{allowsMWEscalation:this.props.allowsMWEscalation,callID:this.$6().toString(),conferenceName:this.props.conferenceName,conferenceState:this.props.conferenceState,connection:this.props.connection,initializeVideo:this.props.initializeVideo,localUser:this.props.localUser,remoteUser:this.props.remoteUser,remoteUserFBID:this.$5(),shouldHideCloseButton:!this.props.nonce||this.isParentWindow(),userMediaRequest:this.state.userMediaRequest}),b("React").createElement(b("MessengerBugNub.react"),{isBetaEnabled:this.props.isBetaEnabled,unixName:this.props.unixName}),this.props.children))};a.prototype.componentDidUpdate=function(a){__p&&__p();if(a.userSettings.editing&&!this.props.userSettings.editing){var c=this.props.userSettings,d=c.audioInput;c=c.videoInput;(a.userSettings.audioInput!==d||a.userSettings.videoInput!==c)&&b("RTCP2PProtocolHandler").initStream(!this.props.isAudioCall,d,c).then(function(a){return b("RTCP2PProtocolHandler").replaceLocalStream(a,!0)})["catch"](function(a){return this.$11(a,b("CollabInitStreamTriggerType").USER_SETTINGS_CHANGED)}.bind(this))}this.props.conferenceState!==a.conferenceState&&this.$2.logToConsole('UI: state change - from "'+a.conferenceState+'" to "'+this.props.conferenceState+'"');this.state.userMediaRequest.state===b("RTCUserMediaRequestState").PENDING&&this.props.connectionStatus===b("RTCP2PConnectionStatus").INIT&&b("RTCCallStore").mutateCallSummary(function(a){return a.onCallEnded(b("FBRTCConstants").CallEndReason.CLIENT_ERROR,!1,!0,"MediaPending")})};a.prototype.componentWillUnmount=function(){window.clearTimeout(this.$1),document.documentElement!=null&&b("CSS").removeClass(document.documentElement,"_2ujx")};a.prototype.isParentWindow=function(){return!window.opener};function m(a){}e.exports=a}),null);
__d("RTCP2PLoggerStore",["Bootloader","CollabCallMessengerBrowserEventEnum","FBRTCConfig","FBRTCLogger","FluxReduceStore","RTCAppDispatcher","RTCCallActionTypes","RTCCallStore","RTCUserSettingsActionTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return{}};a.prototype.reduce=function(a,c){__p&&__p();var d=b("RTCCallStore").getState(),e=d.remoteUsers;d=d.callInfo;if(!e.count())return a;var f=b("FBRTCLogger").getInstance();e=e.first().FBID;switch(c.type){case b("RTCCallActionTypes").AUDIO_MUTED:f.logCallAction(e,d.conferenceName,b("FBRTCLogger").CallAction.SET_MUTE,!0);break;case b("RTCCallActionTypes").AUDIO_UNMUTED:f.logCallAction(e,d.conferenceName,b("FBRTCLogger").CallAction.SET_MUTE,!1);break;case b("RTCCallActionTypes").VIDEO_MUTED:f.logCallAction(e,d.conferenceName,b("FBRTCLogger").CallAction.SET_VIDEO_ON,!1);break;case b("RTCCallActionTypes").VIDEO_UNMUTED:f.logCallAction(e,d.conferenceName,b("FBRTCLogger").CallAction.SET_VIDEO_ON,!0);break;case b("RTCCallActionTypes").SELF_VIEW_COLLAPSED:f.logCallAction(e,d.conferenceName,b("FBRTCLogger").CallAction.SET_SELF_VIEW_ON,!1);break;case b("RTCCallActionTypes").SELF_VIEW_UNCOLLAPSED:f.logCallAction(e,d.conferenceName,b("FBRTCLogger").CallAction.SET_SELF_VIEW_ON,!0);break;case b("RTCCallActionTypes").ADD_LOCAL_STREAM:this.$RTCP2PLoggerStore1(b("CollabCallMessengerBrowserEventEnum").LOCAL_STREAM_SET,c.stream,e,Number(d.conferenceName));break;case b("RTCUserSettingsActionTypes").USER_SETTINGS_SAVE:case b("RTCUserSettingsActionTypes").USER_SETTINGS_SET_AUDIO_INPUT:case b("RTCUserSettingsActionTypes").USER_SETTINGS_SET_AUDIO_OUTPUT:case b("RTCUserSettingsActionTypes").USER_SETTINGS_SET_VIDEO_INPUT:f.logCallAction(e,d.conferenceName,b("FBRTCLogger").CallAction.USER_SETTINGS_CHANGED),this.$RTCP2PLoggerStore1(b("CollabCallMessengerBrowserEventEnum").USER_SETTINGS_CHANGED,c,e,Number(d.conferenceName))}return a};a.prototype.$RTCP2PLoggerStore1=function(event,a,b,c){h(function(d){return d.log(event,{peerID:b,callID:c,eventDetails:a})})};function a(){g.apply(this,arguments)}a.__moduleID=e.id;function h(a){if(!b("FBRTCConfig").isVCEndpointCall())return;b("Bootloader").loadModules(["CollabMessengerLogger"],a,"RTCP2PLoggerStore")}e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTWebFluxDebugger",["FluxDebugUtils","WebStorage"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("WebStorage").getLocalStorage(),h=!!(g&&g.getItem("__fluxDebug")==="1"),i=new Map(),j;function a(a,b){Object.keys(b).forEach(function(a){i.set(a,b[a])}),j&&r(),j={dispatcher:a,originalDispatch:a.dispatch,patchedDispatch:null},h&&q()}function k(a){return a&&typeof a.toJS==="function"?a.toJS():a}function c(){__p&&__p();var a={};for(var b=i.entries(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];a[f]=k(e.getState())}return a}function l(a,b,c){__p&&__p();var d=Date.now(),e=Array.from(i.entries()).map(function(a){var b=a[0];a=a[1];return{name:b,stateBefore:a.getState(),stateAfter:null}});b.call(a,c);if(!h)return;b=Date.now()-d;e=e.map(function(a,b){b=i.get(a.name);return b!=null?babelHelpers["extends"]({},a,{stateAfter:b.getState()}):null}).filter(Boolean);a=c.type;d=babelHelpers.objectWithoutProperties(c,["type"]);console.groupCollapsed("Flux:",a);try{!1,m(e),!1}finally{console.groupEnd()}}function m(a){a.filter(function(a){return a.stateBefore!==a.stateAfter}).forEach(function(a){o(a.name,function(){var c=k(a.stateBefore),d=k(a.stateAfter);!1;!1;c&&d&&b("FluxDebugUtils").diff(c,d).forEach(n)})})}function n(a){var b=a.path.join(".");switch(a.op){case"add":!1;break;case"update":!1;break;case"delete":!1;break}}function o(a,b){p(a,function(){console.group(a),b()})}function p(a,b){try{b()}finally{console.groupEnd()}}function q(){if(!j)return;j.patchedDispatch&&r();j.patchedDispatch=j.dispatcher.dispatch=l.bind(null,j.dispatcher,j.dispatcher.dispatch)}function r(){if(!j||!j.patchedDispatch)return;j.dispatcher.dispatch=j.originalDispatch;j.patchedDispatch=null}window.__fluxDebugOn=function(){h=!0,g&&g.setItem("__fluxDebug","1"),q()};window.__fluxDebugOff=function(){h=!1,g&&g.setItem("__fluxDebug","0"),r()};window.__fluxDump=function(){__p&&__p();var a=function(){__p&&__p();if(c){if(d>=b.length)return"break";e=b[d++]}else{d=b.next();if(d.done)return"break";e=d.value}var a=e,f=a[0];a=a[1];o(f,function(){return!1})};for(var b=i,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e,f=a();if(f==="break")break}};window.__fluxDumpState=c;e.exports={attach:a,fluxDumpState:c}}),null);
__d("RTCP2PCallContainer.react",["BootloadOnRender.react","ChannelManager","FBRTCConfig","FluxContainer","JSResource","LazyComponent.react","React","RTCAppData","RTCAppDispatcher","RTCCallActions","RTCCallNUXStore","RTCCallStore","RTCCallType","RTCCoExperienceStore","RTCGroupCallEscalationStore","RTCMediaDevicesStore","RTCP2PCallActions","RTCP2PCallEscalationStore","RTCP2PCallStore","RTCP2PCallView.react","RTCP2PLoggerStore","RTCUserSettingsStore","RTWebFluxDebugger","RTWebLoggingCallType","RTWebLoggingSurface","RTWebUserActionLogger","dangerouslyBypassDispatchError","generateRTCCallID","objectValues"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("generateRTCCallID")().toString(),i={RTCCallStore:b("RTCCallStore"),RTCCoExperienceStore:b("RTCCoExperienceStore"),RTCP2PCallStore:b("RTCP2PCallStore"),RTCUserSettingsStore:b("RTCUserSettingsStore")},j=babelHelpers["extends"]({},i,{RTCCallStore:b("RTCCallStore"),RTCCoExperienceStore:b("RTCCoExperienceStore"),RTCP2PCallStore:b("RTCP2PCallStore"),RTCUserSettingsStore:b("RTCUserSettingsStore"),RTCGroupCallEscalationStore:b("RTCGroupCallEscalationStore"),RTCMediaDevicesStore:b("RTCMediaDevicesStore"),RTCP2PCallEscalationStore:b("RTCP2PCallEscalationStore"),RTCCallNUXStore:b("RTCCallNUXStore"),RTCP2PLoggerStore:b("RTCP2PLoggerStore")});c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;a.getStores=function(){return b("objectValues")(i)};a.calculateState=function(){var a=b("RTCCallStore").getState(),c=a.callInfo,d=c.conferenceState;c=c.conferenceName;var e=a.connections,f=a.localUser;a=a.remoteUsers;var g=b("RTCCoExperienceStore").getState();g=g.chatWindowVisible;var h=b("RTCP2PCallStore").getState(),i=h.callType,j=h.protocolHandler;h=h.connectionStatus;return{chatWindowVisible:g,conferenceName:c,conferenceState:d,connection:e.first(),connectionStatus:h,isAudioCall:i===b("RTCCallType").AUDIO_ONLY,localUser:f,protocolHandler:j,remoteUser:a.first(),userSettings:b("RTCUserSettingsStore").getState()}};function a(a){g.constructor.call(this,a),b("ChannelManager").startChannelManagerForApp(b("RTCAppData").getChannelManagerAppName()),b("RTCAppDispatcher").explicitlyRegisterStoresInMap(j),b("RTWebFluxDebugger").attach(b("RTCAppDispatcher"),j),b("RTCP2PCallActions").setCallType(this.props.isInitiallyAudioCall?b("RTCCallType").AUDIO_ONLY:b("RTCCallType").AUDIO_VIDEO),b("RTWebUserActionLogger").logCheckpoint({checkpoint:"RTCP2PCallContainer_created",callID:this.$1(),callType:b("RTWebLoggingCallType").P2P,isCaller:this.props.isCaller,mediaType:b("RTWebUserActionLogger").getMediaType(this.props.isInitiallyAudioCall)})}a.prototype.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({surface:b("RTWebLoggingSurface").CALL_CONTAINER,conferenceState:this.state.conferenceState})};a.prototype.componentDidUpdate=function(a,c){var d=this.state.remoteUser;if(b("FBRTCConfig").isVCEndpointCall()&&d!=null&&this.$2()){a=b("RTCCallStore").getState();var e=a.remoteUsers,f=this.$3(d);b("dangerouslyBypassDispatchError")(function(){return b("RTCCallActions").updateRemoteUsers(e["delete"](d).add(f))})}};a.prototype.$1=function(){return this.state&&this.state.conferenceName||this.props.conferenceName||h};a.prototype.$3=function(a){var b=this.props,c=b.meetingID,d=b.meetingPassword;b=b.roomLocation;if(a.getRoomLocation()==null&&b!=null)return a.setRoomLocation(b);b=a;a.getMeetingID()==null&&c!=null&&(b=a.setMeetingID(c),a.getMeetingPassword()==null&&d!=null&&(b=a.setMeetingPassword(d)));return b};a.prototype.$2=function(){var a=this.state.remoteUser,b=this.props,c=b.meetingID;b=b.roomLocation;return a==null?!1:a.getRoomLocation()==null&&b!=null||a.getMeetingID()==null&&c!=null};a.prototype.render=function(){var a=this.props;a.conferenceName;a.roomLocation;a.meetingID;a.meetingPassword;a=babelHelpers.objectWithoutProperties(a,["conferenceName","roomLocation","meetingID","meetingPassword"]);return b("React").createElement(b("RTCP2PCallView.react"),babelHelpers["extends"]({},a,this.state,{conferenceName:this.$1(),initializeVideo:this.props.initializeVideo}),b("React").createElement(k,null))};var k=function(){return!b("FBRTCConfig").isVCEndpointCall()?null:b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),null),loader:b("JSResource")("RTCCollabActionLoggerBootloader.react").__setRef("RTCP2PCallContainer.react"),placeholder:b("React").createElement("div",null)})};e.exports=b("FluxContainer").create(a)}),null);
__d("RTCCallContainer.react",["PageHooks","BootloadOnRender.react","FBRTCConstants","FBRTCGroupCallStore","FBRTCMWProtocolStore","FluxContainer","RTCCallNotificationContainer.react","RTCCallNotificationStore","immutable","JSResource","LazyComponent.react","MessengerBugNub.react","React","RoboticsPermission","RTCGroupCallView.react","RTCP2PCallContainer.react","RTCGroupCallEscalationStore","RTCP2PCallEscalationStore","RTCUserMediaRequest","RTCUserMediaRequestState","RTCAppDispatcher","RTCCallActions","RTCCallStore","RTCCallType","RTCCoExperienceStore","RTCMediaDevicesStore","RTCP2PCallActions","RTCCallNUXStore","RTCP2PCallStore","RTCP2PLoggerStore","RTCUserSettingsStore","generateRTCCallID"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("PageHooks");var h=b("FBRTCConstants").SignalingProtocol;a=babelHelpers.inherits(i,b("React").PureComponent);g=a&&a.prototype;i.getStores=function(){return[b("FBRTCGroupCallStore"),b("RTCCallStore"),b("RTCGroupCallEscalationStore")]};i.calculateState=function(){var a=b("RTCGroupCallEscalationStore").getState();a=a.readyToTransition;var c=b("RTCCallStore").getState(),d=c.callInfo,e=c.connections;c=c.localUser;var f=b("FBRTCGroupCallStore").getState(),g=f.layout;f=f.participants;var h=b("RTCCallStore").getSortedRemoteUsers();return{conferenceState:d.conferenceState,connection:e.first(),layout:g,localUser:c,participants:f,protocol:d.protocol,remoteUsers:h,serverInfoData:d.serverInfoData,useGroupCallView:a}};function i(a){g.constructor.call(this,a),this.state=babelHelpers["extends"]({},i.calculateState()),document.documentElement&&(document.documentElement.style.overflow="hidden"),b("RTCAppDispatcher").explicitlyRegisterStores([b("FBRTCGroupCallStore"),b("RTCCallNotificationStore"),b("RTCCallStore"),b("RTCP2PCallEscalationStore"),b("RTCCallNUXStore"),b("RTCP2PCallStore"),b("RTCCoExperienceStore"),b("RTCP2PLoggerStore"),b("RTCMediaDevicesStore"),b("RTCUserSettingsStore"),b("RTCGroupCallEscalationStore"),b("FBRTCMWProtocolStore")]),this.$1=this.props.conferenceName||b("generateRTCCallID")().toString(),b("RTCCallActions").initialize({protocol:h.P2P,conferenceName:this.$1,serverInfoData:null,callID:this.$1}),b("RTCP2PCallActions").setCallType(this.props.isInitiallyAudioCall?b("RTCCallType").AUDIO_ONLY:b("RTCCallType").AUDIO_VIDEO)}i.prototype.render=function(){__p&&__p();var a=null;if(this.props.allowsMWEscalation&&this.state.useGroupCallView){var c=b("RTCP2PCallStore").getState();c=c.escalationConferenceName;var d=!b("RTCCallStore").hasRemoteVideo(),e=new(b("RTCUserMediaRequest"))();e=e.set("state",b("RTCUserMediaRequestState").FULFILLED);a=b("React").createElement(b("React").Fragment,null,b("React").createElement(b("RTCGroupCallView.react"),{chatWindowVisible:!1,conferenceName:c||"",conferenceState:this.state.conferenceState,connection:this.state.connection,endCallReason:null,isAudioCall:d,layout:this.state.layout,localUser:this.state.localUser,onStartCallClick:this.$2,participants:this.state.participants,remoteUsers:this.state.remoteUsers,serverInfoData:this.state.serverInfoData,thread:null,userMediaRequest:e}),b("React").createElement(b("MessengerBugNub.react"),{isBetaEnabled:this.props.isBetaEnabled,unixName:this.props.unixName}))}else a=b("React").createElement(b("RTCP2PCallContainer.react"),{allowsMWEscalation:this.props.allowsMWEscalation,conferenceName:this.$1,initializeVideo:this.props.initializeVideo,isBetaEnabled:this.props.isBetaEnabled,isCaller:this.props.isCaller,isInitiallyAudioCall:this.props.isInitiallyAudioCall,nonce:this.props.nonce,remoteUserFBID:this.props.remoteUserFBID,unixName:this.props.unixName});return b("React").createElement(b("React").Fragment,null,b("React").createElement(b("RTCCallNotificationContainer.react"),{conferenceState:this.state.conferenceState}),b("React").createElement(j,null),a)};i.prototype.$2=function(a,b,c){};var j=function(){return!b("RoboticsPermission").is_authorized_robot?null:b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),null),loader:b("JSResource")("RobotRTCCallStoreBootloader.react").__setRef("RTCCallContainer.react"),placeholder:b("React").createElement("div",null)})};e.exports=b("FluxContainer").create(i)}),null);