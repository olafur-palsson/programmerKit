if (self.CavalryLogger) { CavalryLogger.start_js(["1LDP6"]); }

__d("InputLabel.react",["cx","invariant","HelpLink.react","React","joinClasses","uniqueID"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){__p&&__p();var a,c,d=this.props.children;Array.isArray(d)?(this.props.children.length===2||h(0,691),a=d[0],c=d[1]):a=d;d=a.type==="input";a=b("React").cloneElement(a,{className:b("joinClasses")(a.props.className,"uiInputLabelInput"+(d&&a.props.type==="radio"?" uiInputLabelRadio":"")+(d&&a.props.type==="checkbox"?" uiInputLabelCheckbox":"")),id:a.props.id||b("uniqueID")()});var e,f=this.props,g=f.label,i=f.helpText;f=babelHelpers.objectWithoutProperties(f,["label","helpText"]);if(c)e=b("React").cloneElement(c,{className:b("joinClasses")(this.props.labelClassName,this.props.flipped?"uiInputLabelLabelFlipped":"uiInputLabelLabel"),htmlFor:a.props.id});else{i=i?b("React").createElement(b("HelpLink.react"),{tooltip:i}):null;e=b("React").createElement("label",{className:b("joinClasses")(this.props.labelClassName,this.props.flipped?"uiInputLabelLabelFlipped":"uiInputLabelLabel"),htmlFor:a.props.id},g,i)}g="uiInputLabel clearfix"+(this.props.display==="inline"?" inlineBlock":"")+(d?" uiInputLabelLegacy":"");return b("React").createElement("div",babelHelpers["extends"]({},f,{className:b("joinClasses")(this.props.className,g)}),this.props.flipped?e:a,this.props.flipped?a:e)};function a(){i.apply(this,arguments)}a.propTypes={display:c.oneOf(["block","inline"])};a.defaultProps={display:"block"};e.exports=a}),null);
__d("XUICheckboxInput.react",["cx","AbstractCheckboxInput.react","React","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";return b("React").createElement(b("AbstractCheckboxInput.react"),babelHelpers["extends"]({},this.props,{ref:function(a){return this.$1=a}.bind(this),className:b("joinClasses")(this.props.className,"_55sg")}),undefined)};a.prototype.focusInput=function(){"use strict";this.$1&&this.$1.focusInput()};a.prototype.blurInput=function(){"use strict";this.$1&&this.$1.blurInput()};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("FacebarResultStoreUtils",["FacebarGlobalOptions","FacebarJSConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getQueryFeatures:function(a){__p&&__p();var c={};if(b("FacebarGlobalOptions").enableBootstrapRanking){a.raw_text&&(c.FEATURE_QUERY_LENGTH=a.raw_text.length);if(a.tokens){c.FEATURE_QUERY_TOKENS=a.tokens.length;c.FEATURE_QUERY_TOKEN_LENGTH_SUM=0;for(var d=0;d<a.tokens.length;d++)c.FEATURE_QUERY_TOKEN_LENGTH_SUM+=a.tokens[d].length}}return c},addFeatures:function(a,b,c,d,e,f){__p&&__p();if(!a.features)return;a.features={FEATURE_QUERY_LENGTH:d.FEATURE_QUERY_LENGTH,FEATURE_QUERY_TOKENS:d.FEATURE_QUERY_TOKENS,FEATURE_QUERY_TOKEN_LENGTH_SUM:d.FEATURE_QUERY_TOKEN_LENGTH_SUM};a.features.FEATURE_IS_EXACT_NAME_MATCH=e;a.features.FEATURE_IS_STOP_WORD_MATCH=f;if(b&&b.length>0){d=b.split(" ").length;e=0;for(var f=0;f<a.termMatches.length;++f)b.search(a.termMatches[f])>=0&&e++;a.features.FEATURE_TITLE_TOKEN_MATCH_FRACTION=e/d}if(c.tokens&&c.tokens.length>0){f=b.search(c.tokens[0]);a.features.FEATURE_FIRST_TERM_MATCH_POSITION=f;a.features.FEATURE_FIRST_TERM_MATCH_TOKEN=b.substring(0,f+c.tokens[0].length).split(" ").length;a.termMatches.some(function(b){if(b.search(c.tokens[0])===0){a.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=c.tokens[0].length/b.length;return!0}return!1});a.features.FEATURE_IN_ORDER_MATCH=1;c.tokens.length>1&&(f=b.search(c.tokens[1]),a.features.FEATURE_SECOND_TERM_MATCH_POSITION=f,a.features.FEATURE_SECOND_TERM_MATCH_TOKEN=b.substring(0,f+c.tokens[1].length).split(" ").length,a.termMatches.some(function(b){if(b.search(c.tokens[1])===0){a.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=c.tokens[0].length/b.length;return!0}return!1}),a.features.FEATURE_SECOND_TERM_MATCH_TOKEN<a.features.FEATURE_FIRST_TERM_MATCH_POSITION&&(a.features.FEATURE_IN_ORDER_MATCH=0))}return a},processEntityResult:function(a,c,d,e,f,g,h,i,j){a={semantic:c.toString(),structure:[{type:a===b("FacebarJSConstants").keywordType?a:"ent:"+a,text:d,uid:c}],type:a,cost:e,cache_id_length:0,features:[]};a.tuid=JSON.stringify({semantic:a.semantic,structure:a.structure});b("FacebarGlobalOptions").enableBootstrapRanking&&(a.termMatches=h[c.toString()],a=this.addFeatures(a,d.toLowerCase(),f,g,i,j));return a},getRawTextFromStructured:function(a){a=a.map(function(a){return a.getText()});return a.join("")},getTextFromResult:function(a){a=a.structure;var b="";a.forEach(function(a){b+=a.text});return b}};e.exports=a}),null);
__d("getHashtagRegexString",[],(function(a,b,c,d,e,f){__p&&__p();function a(){__p&&__p();var a="\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff",b="\u0400-\u04ff\u0500-\u0527\u2de0-\u2dff\ua640-\ua69f\u0591-\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f4\ufb12-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4f\u0610-\u061a\u0620-\u065f\u066e-\u06d3\u06d5-\u06dc\u06de-\u06e8\u06ea-\u06ef\u06fa-\u06fc\u06ff\u0750-\u077f\u08a0\u08a2-\u08ac\u08e4-\u08fe\ufb50-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\u200c-\u200c\u0e01-\u0e3a\u0e40-\u0e4e\u1100-\u11ff\u3130-\u3185\ua960-\ua97f\uac00-\ud7af\ud7b0-\ud7ff\uffa1-\uffdc",c=String.fromCharCode;c="\u30a1-\u30fa\u30fc-\u30fe\uff66-\uff9f\uff10-\uff19\uff21-\uff3a\uff41-\uff5a\u3041-\u3096\u3099-\u309e\u3400-\u4dbf\u4e00-\u9fff"+c(173824)+"-"+c(177983)+c(177984)+"-"+c(178207)+c(194560)+"-"+c(195103)+"\u3003\u3005\u303b";a=a+b+c;b="A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u0241\u0250-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ee\u037a\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03f5\u03f7-\u0481\u048a-\u04ce\u04d0-\u04f9\u0500-\u050f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0640-\u064a\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u076d\u0780-\u07a5\u07b1\u0904-\u0939\u093d\u0950\u0958-\u0961\u097d\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edd\u0f00\u0f40-\u0f47\u0f49-\u0f6a\u0f88-\u0f8b\u1000-\u1021\u1023-\u1027\u1029-\u102a\u1050-\u1055\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1159\u115f-\u11a2\u11a8-\u11f9\u1200-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u1676\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19a9\u19c1-\u19c7\u1a00-\u1a16\u1d00-\u1dbf\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u2094\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2131\u2133-\u2139\u213c-\u213f\u2145-\u2149\u2c00-\u2c2e\u2c30-\u2c5e\u2c80-\u2ce4\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3006\u3031-\u3035\u303b-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312c\u3131-\u318e\u31a0-\u31b7\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fbb\ua000-\ua48c\ua800-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\uac00-\ud7a3\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc";c="\u0300-\u036f\u0483-\u0486\u0591-\u05b9\u05bb-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u0615\u064b-\u065e\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u0901-\u0903\u093c\u093e-\u094d\u0951-\u0954\u0962-\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7-\u09c8\u09cb-\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a70-\u0a71\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b43\u0b47-\u0b48\u0b4b-\u0b4d\u0b56-\u0b57\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c82-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5-\u0cd6\u0d02-\u0d03\u0d3e-\u0d43\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d82-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2-\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f3e-\u0f3f\u0f71-\u0f84\u0f86-\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102c-\u1032\u1036-\u1039\u1056-\u1059\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b6-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8-\u19c9\u1a17-\u1a1b\u1dc0-\u1dc3\u20d0-\u20dc\u20e1\u20e5-\u20eb\u302a-\u302f\u3099-\u309a\ua802\ua806\ua80b\ua823-\ua827\ufb1e\ufe00-\ufe0f\ufe20-\ufe23";var d="0-9\u0660-\u0669\u06f0-\u06f9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\uff10-\uff19";b=b+c+a;c=d+"_";a=b+c;d="["+b+"]";c="["+a+"]";b="^|$|[^&/"+a+"]";a="[#\\uFF03]";b="("+b+")("+a+")("+c+"*"+d+c+"*)";return b}e.exports=a}),null);
__d("getHashtagRegex",["getHashtagRegexString"],(function(a,b,c,d,e,f){function a(){return new RegExp(b("getHashtagRegexString")(),"ig")}e.exports=a}),null);
__d("HashtagParser",["URLMatcher","getHashtagRegex"],(function(a,b,c,d,e,f){__p&&__p();var g=100,h=30,i=/@\[([0-9]+):([0-9]+):((?:[^\\\]]*(?:\\.)*)*)\]/g;function a(a){var b=u(a),c=0,d=0;return j(a).map(function(a){while(c<b.length){var e=b[c],f=e.offset-d;if(f<a.offset)d+=e.token.length-e.name.length,c++;else break}return{marker:a.marker,tag:a.hashtag,rawOffset:a.offset+d,offset:a.offset}})}function c(a){return k(a,p(a))}function j(a){var b=w(a);return k(b,l(a,b))}function k(a,b){return n(a).slice(0,h).filter(function(a){var c=r(a.offset,a.hashtag.length,b);return!c&&a.hashtag.length<=g})}function l(a,b){return q(o(a),p(b))}var m=b("getHashtagRegex")();function n(a){var b=[];a.replace(m,function(a,c,d,e,f){b.push({marker:d,hashtag:e,offset:f+c.length})});return b}function o(a){return x(a).map(function(a){return[a.offset,a.name.length]})}function p(a){var c=[],d,e=0;while(d=b("URLMatcher").permissiveMatch(a)){var f=a.indexOf(d);c.push([e+f,d.length]);a=a.substring(f+d.length);e+=f+d.length}return c}function q(a,b){var c=[],d=0,e=0,f=0;while(d<a.length&&e<b.length)a[d][0]>b[e][0]?c[f++]=b[e++]:c[f++]=a[d++];return c.concat(a.slice(d),b.slice(e))}function r(a,b,c){if(!c)return!1;var d=t(c,a);return s(a,b,c,d)||s(a,b,c,d+1)}function s(a,b,c,d){if(!c[d])return!1;var e=c[d][0];c=c[d][1];return!(a+b-1<e||a>e+c-1)}function t(a,b){var c=0,d=a.length-1;while(c<=d){var e=Math.floor((c+d)/2),f=a[e][0];if(f==b)return e;else f<b?c=e+1:d=e-1}return d}function u(a){var b=[];a.replace(i,function(a,c,d,e,f){b.push({token:a,id:c,type:d,name:e,offset:f})});return b}function v(a){return a?a.replace(/\\([^\\])/g,"$1").replace(/\\\\/g,"\\"):null}function w(a){return a.replace(i,function(a,b,c,d,e){return v(d)})}function x(a){var b=0,c=0;return u(a).map(function(d){var e=a.indexOf(d.token,c);c=e+1;e-=b;var f=v(d.name);b+=d.token.length-f.length;if(e>=0)return{id:d.id,name:f,type:d.type,offset:e}})}d={};d.parse=a;d.parseWithoutMentions=c;e.exports=d}),null);
__d("HashtagSearchResultUtils",["fbt","FacebarResultStoreUtils","HashtagParser","HashtagSearchResultConfig","URI"],(function(a,b,c,d,e,f,g){__p&&__p();a={getHashtagFromQuery:function(a){a=b("HashtagParser").parse(a);return a&&a.length===1&&a[0].offset===0?a[0].tag:!1},makeTypeaheadResult:function(a){var c=g._("Hashtag");return{category:c,path:new(b("URI"))("/hashtag/"+a).toString(),photo:b("HashtagSearchResultConfig").image_url,rankType:null,replace_results:b("HashtagSearchResultConfig").boost_result?!0:!1,scaled_score:1,score:0,text:"#"+a,type:"hashtag_exact",uid:"hashtag:"+a}},makeFacebarEntry:function(a){var c=g._("Hashtag");return{category:c,path:new(b("URI"))("/hashtag/"+a).toString(),photo:b("HashtagSearchResultConfig").image_url,replace_results:b("HashtagSearchResultConfig").boost_result?!0:!1,text:"#"+a,type:"hashtag_exact",uid:"hashtag:"+a}},makeFacebarResult:function(a){var c=b("FacebarResultStoreUtils").processEntityResult("hashtag_exact","hashtag:"+a,"#"+a,b("HashtagSearchResultConfig").hashtag_cost);c.parse={display:[{type:"ent:hashtag_exact",uid:"hashtag:"+a}],remTokens:[],suffix:""};c.tags={hashtag:"hashtag"};return c}};e.exports=a}),null);
__d("BasicTypeaheadRenderer",["BadgeHelper","DOM"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c){__p&&__p();c=[];a.icon&&c.push(b("DOM").create("img",{alt:"",src:a.icon}));var d=a.debug_info;d&&c.push(b("DOM").create("span",{className:"debugInfo"},d));if(a.text){d=[a.text];a.is_verified&&d.push(b("BadgeHelper").renderBadge("xsmall","verified"));c.push(b("DOM").create("span",{className:"text"},d))}if(a.subtext){d=[a.subtext];c.push(b("DOM").create("span",{className:"subtext"},d))}d=b("DOM").create("li",{className:a.type||""},c);a.text&&(d.setAttribute("title",a.text),d.setAttribute("aria-label",a.text));return d}a.className="basic";e.exports=a}),null);
__d("createIxElement",["invariant","DOM","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,c){__p&&__p();var d="img";a.sprited||a.uri||g(0,2521);if(a.sprited){d=b("joinClasses")(d,a.spriteMapCssClass,a.spriteCssClass);var e=b("DOM").create("i",{className:d});c!=null&&b("DOM").setContent(e,b("DOM").create("u",null,c));return e}e=b("DOM").create("img",{className:d,src:a.uri});c!=null&&e.setAttribute("alt",c);a.width&&e.setAttribute("width",a.width);a.height&&e.setAttribute("height",a.height);return e}e.exports=a}),null);
__d("TypeaheadView",["ix","ArbiterMixin","BasicTypeaheadRenderer","CSS","DOM","Event","Parent","$","createIxElement","emptyFunction","getElementText","getOrCreateDOMID","mixin"],(function(a,b,c,d,e,f,g){__p&&__p();var h;d=babelHelpers.inherits(c,b("mixin")(b("ArbiterMixin")));h=d&&d.prototype;function c(a,c){"use strict";h.constructor.call(this),this.initialized=!1,this.element=this.content=b("$").fromIDOrElement(a),Object.assign(this,c)}c.prototype.init=function(){"use strict";this.initialized||(this.initialized=!0,this.initializeEvents(),this.reset())};c.prototype.initializeEvents=function(){"use strict";b("Event").listen(this.element,{mouseup:this.mouseup.bind(this),mouseover:this.mouseover.bind(this)})};c.prototype.setTypeahead=function(a){"use strict";this.typeahead=a};c.prototype.setAccessibilityControlElement=function(a){"use strict";this.accessibilityElement=a};c.prototype.getElement=function(){"use strict";return this.element};c.prototype.mouseup=function(event){"use strict";event.button!=2&&(this.select(!0),event.prevent())};c.prototype.mouseover=function(event){"use strict";if(this.ignoreMouseover){this.ignoreMouseover=!1;return}this.visible&&this.highlight(this.getIndex(event))};c.prototype.reset=function(a){"use strict";a||(this.disableAutoSelect=!1);this.index=-1;this.items=[];this.results=[];this.value="";this.content.innerHTML="";this.inform("reset");return this};c.prototype.getIndex=function(event){"use strict";return this.items.indexOf(b("Parent").byTag(event.getTarget(),"li"))};c.prototype.getSelection=function(){"use strict";var a=this.results[this.index]||null;return this.visible?a:null};c.prototype.isEmpty=function(){"use strict";return!this.results.length};c.prototype.isVisible=function(){"use strict";return!!this.visible};c.prototype.show=function(){"use strict";b("CSS").show(this.element);this.results&&this.results.length&&(this.autoSelect&&this.accessibilityElement&&this.selected&&this.accessibilityElement.setAttribute("aria-activedescendant",b("getOrCreateDOMID")(this.selected)));this.accessibilityElement&&this.accessibilityElement.setAttribute("aria-expanded","true");this.visible=!0;return this};c.prototype.hide=function(){"use strict";b("CSS").hide(this.element);this.accessibilityElement&&(this.accessibilityElement.setAttribute("aria-expanded","false"),this.accessibilityElement.removeAttribute("aria-activedescendant"));this.visible=!1;return this};c.prototype.render=function(a,c,d){"use strict";__p&&__p();this.value=a;if(!c.length){this.accessibilityElement&&this.accessibilityElement.removeAttribute("aria-activedescendant");this.reset(!0);return}a={results:c,value:a};this.inform("beforeRender",a);c=a.results;a=(!this.value||d)&&this.index!==-1?this.index:this.getDefaultIndex(c);this.results=c;b("DOM").setContent(this.content,this.buildResults(c));this.items=this.getItems();this.highlight(a,!1);this.inform("render",this.results)};c.prototype.getItems=function(){"use strict";return b("DOM").scry(this.content,"li")};c.prototype.buildResults=function(c){"use strict";__p&&__p();var d,e=null;typeof this.renderer==="function"?(d=this.renderer,e=this.renderer.className||""):(d=a.TypeaheadRenderers[this.renderer],e=this.renderer);d=d.bind(this);c=c.map(function(a,b){a=a.node||d(a,b);a.setAttribute("role","option");return a});e=b("DOM").create("ul",{className:e,id:"typeahead_list_"+(this.typeahead?b("getOrCreateDOMID")(this.typeahead):b("getOrCreateDOMID")(this.element))},c);e.setAttribute("role","listbox");return e};c.prototype.showLoadingIndicator=function(){"use strict";var a=b("createIxElement")(g("85428"));a=b("DOM").create("li",{className:"typeaheadViewInternalLoading"},a);a=b("DOM").create("ul",{role:"listbox"},a);b("DOM").setContent(this.content,a)};c.prototype.getDefaultIndex=function(a){"use strict";a=this.autoSelect&&!this.disableAutoSelect;return this.index<0&&!a?-1:0};c.prototype.next=function(){"use strict";this.highlight(this.index+1),this.inform("next",this.selected)};c.prototype.prev=function(){"use strict";this.highlight(this.index-1),this.inform("prev",this.selected)};c.prototype.getItemText=function(a){"use strict";var c="";a&&(c=a.getAttribute("aria-label"),c||(c=b("getElementText")(a),a.setAttribute("aria-label",c)));return c};c.prototype.setIsViewingSelectedItems=function(a){"use strict";this.viewingSelected=a;return this};c.prototype.getIsViewingSelectedItems=function(){"use strict";return!!this.viewingSelected};c.prototype.highlight=function(a,c){"use strict";this.selected&&(b("CSS").removeClass(this.selected,"selected"),this.selected.setAttribute("aria-selected","false")),a>this.items.length-1?a=-1:a<-1&&(a=this.items.length-1),a>=0&&a<this.items.length?(this.selected=this.items[a],b("CSS").addClass(this.selected,"selected"),this.selected.setAttribute("aria-selected","true"),this.accessibilityElement&&setTimeout(function(){this.accessibilityElement.setAttribute("aria-activedescendant",b("getOrCreateDOMID")(this.selected))}.bind(this),0)):this.accessibilityElement&&this.accessibilityElement.removeAttribute("aria-activedescendant"),this.index=a,this.disableAutoSelect=a==-1,c!==!1&&this.inform("highlight",{index:a,selected:this.results[a],element:this.selected})};c.prototype.select=function(a){"use strict";if(this.headerIndex&&a)return;var b=this.index,c=this.results[b],d=this.element.getAttribute("id");if(c){var e=function(c){this.inform("select",{index:b,clicked:!!a,selected:c,id:d,query:this.value}),this.inform("afterSelect")}.bind(this);this.shouldValidateTypeaheadSelection(c)?this.validateTypeaheadSelection(c,e):e(c)}};c.prototype.shouldValidateTypeaheadSelection=function(a){"use strict";return!1};c.prototype.validateTypeaheadSelection=function(a,b){"use strict"};Object.assign(c.prototype,{events:["highlight","render","reset","select","beforeRender","next","prev"],renderer:b("BasicTypeaheadRenderer"),autoSelect:!1,ignoreMouseover:!1});e.exports=c}),null);
__d("BucketedTypeaheadView",["fbt","DOM","TypeaheadView"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(a,b("TypeaheadView"));i=h&&h.prototype;a.prototype.render=function(a,b,c,d){"use strict";__p&&__p();var e=b.length>0;for(var f=0;f<b.length;++f)b[f].type!=="hashtag"&&(e=!1);e||(b=this.buildBuckets(a,b));if(c&&d){f=this.results.length-this.index;this.index=b.length-f}return i.render.call(this,a,b,c)};a.prototype.highlight=function(a,b){"use strict";this.headerIndex=!1;a==-1&&this.index!==0&&(a=this.index);while(a>=0&&a<this.items.length&&!this.isHighlightable(this.results[a]))a=a+1,this.headerIndex=!0;i.highlight.call(this,a,b)};a.prototype.buildBuckets=function(a,b){"use strict";__p&&__p();if(!this.typeObjects||!b||!b.length)return b;a=[];var c={};for(var d=0;d<b.length;++d){var e=b[d],f=e.render_type||e.type;Object.prototype.hasOwnProperty.call(c,f)||(c[f]=a.length,a.push([this.buildBucketHeader(f)]));e.classNames=e.classNames||f;e.groupIndex=c[f];e.indexInGroup=a[e.groupIndex].length-1;e.globalIndex=d;a[e.groupIndex].push(e)}for(f in this.typeObjects)!Object.prototype.hasOwnProperty.call(c,f)&&this.typeObjects[f].show_always&&(c[f]=a.length,a.push([this.buildBucketHeader(f)]),e=this.buildNoResultsEntry(),e.classNames=e.type,e.groupIndex=c[f],e.indexInGroup=a[e.groupIndex].length-1,a[e.groupIndex].push(e));d=[];if(this.typeObjectsOrder)for(var b=0;b<this.typeObjectsOrder.length;++b){e=this.typeObjectsOrder[b];Object.prototype.hasOwnProperty.call(c,e)&&(d=d.concat(a[c[e]]))}else for(var f=0;f<a.length;++f)d=d.concat(a[f]);return d};a.prototype.buildNoResultsEntry=function(){"use strict";return{uid:"disabled_result",type:"disabled_result",text:g._("No Results")}};a.prototype.buildBucketHeader=function(a){"use strict";var b=this.typeObjects[a];if(b===undefined)throw new Error(a+" is undefined in "+JSON.stringify(this.typeObjects));b.markup&&(b.text=b.markup,delete b.markup);return this.typeObjects[a]};a.prototype.buildResults=function(a){"use strict";a=i.buildResults.call(this,a);if(this.typeObjects)return b("DOM").create("div",{className:"bucketed"},[a]);else return a};a.prototype.isHighlightable=function(a){"use strict";return a.type!="header"&&a.type!="disabled_result"};a.prototype.select=function(a){"use strict";var b=this.results[this.index];b&&this.isHighlightable(b)&&i.select.call(this,a)};a.prototype.updateResults=function(a){"use strict";this.results=a};a.prototype.normalizeIndex=function(a){"use strict";var b=this.results.length;if(b===0)return-1;else if(a<-1)return a%b+b+1;else if(a>=b)return a%b-1;else return a};a.prototype.getDefaultIndex=function(a){"use strict";__p&&__p();var b=this.autoSelect&&!this.disableAutoSelect;if(this.index<0&&!b)return-1;if(!a||a&&a.length===0)return-1;b=0;while(!this.isHighlightable(a)&&b<a.length)b++;return b};a.prototype.prev=function(){"use strict";var a=this.results[this.normalizeIndex(this.index-1)];while(a&&!this.isHighlightable(a))this.index=this.normalizeIndex(this.index-1),a=this.results[this.normalizeIndex(this.index-1)];return i.prev.call(this)};a.prototype.next=function(){"use strict";var a=this.results[this.normalizeIndex(this.index+1)];while(a&&!this.isHighlightable(a))this.index=this.normalizeIndex(this.index+1),a=this.results[this.normalizeIndex(this.index+1)];return i.next.call(this)};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("ContextualTypeaheadView",["BucketedTypeaheadView","ContextualLayer","ContextualLayerAutoFlip","ContextualLayerHideOnScroll","CSS","DOM","DOMDimensions","Style"],(function(a,b,c,d,e,f){__p&&__p();var g,h;g=babelHelpers.inherits(a,b("BucketedTypeaheadView"));h=g&&g.prototype;a.prototype.init=function(){"use strict";this.initializeLayer(),h.init.call(this)};a.prototype.initializeLayer=function(){"use strict";this.context=this.getContext(),this.wrapper=b("DOM").create("div"),b("DOM").appendContent(this.wrapper,this.element),b("CSS").addClass(this.element,"uiContextualTypeaheadView"),this.layer=new(b("ContextualLayer"))({context:this.context,position:"below",alignment:this.alignment,causalElement:this.causalElement,permanent:!0,shouldSetARIAProperties:!1},this.wrapper),this.layer.enableBehavior(b("ContextualLayerHideOnScroll")),(b("Style").isFixed(this.context)||this.autoflip)&&this.layer.enableBehavior(b("ContextualLayerAutoFlip")),this.subscribe("render",this.renderLayer.bind(this))};a.prototype.show=function(){"use strict";this.minWidth?b("Style").set(this.wrapper,"min-width",this.minWidth+"px"):this.width?b("Style").set(this.wrapper,"width",this.width+"px"):b("Style").set(this.wrapper,"width",b("DOMDimensions").getElementDimensions(this.context).width+"px");var a=h.show.call(this);this.layer.show();this.inform("show");return a};a.prototype.hide=function(){"use strict";this.layer.hide();this.inform("hide");return h.hide.call(this)};a.prototype.renderLayer=function(){"use strict";if(!this.isVisible())return;this.layer.isShown()?this.layer.updatePosition():this.layer.show()};a.prototype.clearText=function(){"use strict";this.layer.getCausalElement().value=""};a.prototype.getContext=function(){"use strict";return this.element.parentNode};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("Typeahead",["ArbiterMixin","BehaviorsMixin","DataStore","DOM","Event","Parent","Run","Style","emptyFunction","ge","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(h,b("mixin")(b("ArbiterMixin"),b("BehaviorsMixin")));g=c&&c.prototype;function h(a,c,d,e){"use strict";g.constructor.call(this),this.args={data:a,view:c,core:d},b("DataStore").set(e,"Typeahead",this),this.element=e}h.prototype.init=function(a){"use strict";this.init=b("emptyFunction"),this.getCore(),this.getView().setAccessibilityControlElement(this.getCore().getElement()),this.proxyEvents(),this.initBehaviors(a||[]),this.inform("init",this),this.data.bootstrap(),this.core.focus()};h.prototype.getData=function(){"use strict";if(!this.data){var a=this.args.data;this.data=a;this.data.init()}return this.data};h.prototype.getView=function(){"use strict";if(!this.view){var a=this.args.view,c=a.node||b("ge")(a.node_id);c||(c=b("DOM").create("div",{className:"uiTypeaheadView"}),b("DOM").appendContent(this.element,c));typeof a.ctor==="string"?this.view=new window[a.ctor](c,a.options||{}):this.view=new a.ctor(c,a.options||{});this.view.init();this.view.setTypeahead(this.element)}return this.view};h.prototype.getCore=function(){"use strict";if(!this.core){var a=this.args.core;typeof a.ctor==="string"?this.core=new window[a.ctor](a.options||{}):this.core=new a.ctor(a.options||{});this.core.init(this.getData(),this.getView(),this.getElement())}return this.core};h.prototype.getElement=function(){"use strict";return this.element};h.prototype.setHeight=function(a){"use strict";a!=="auto"&&(a+="px"),b("Style").set(this.element,"height",a)};h.prototype.swapData=function(a){"use strict";return this.$Typeahead1(a,!0)};h.prototype.swapDataNoCoreReset=function(a){"use strict";return this.$Typeahead1(a,!1)};h.prototype.$Typeahead1=function(a,b){"use strict";var c=this.core;this.data=this.args.data=a;a.init();c&&(c.data=a,c.initData(),b&&c.reset(),this.proxyEvents());a.bootstrap();return a};h.prototype.proxyEvents=function(){"use strict";[this.data,this.view,this.core].forEach(function(a){a.subscribe(a.events,this.inform.bind(this))},this)};h.prototype.initBehaviors=function(c){"use strict";c.forEach(function(c){typeof c==="string"?a.TypeaheadBehaviors&&a.TypeaheadBehaviors[c]?a.TypeaheadBehaviors[c](this):b("Run").onLoad(function(){a.TypeaheadBehaviors&&(a.TypeaheadBehaviors[c]||b("emptyFunction"))(this)}.bind(this)):this.enableBehavior(c)},this)};h.getInstance=function(a){"use strict";a=b("Parent").byClass(a,"uiTypeahead");return a?b("DataStore").get(a,"Typeahead"):null};h.initNow=function(a,b,c){"use strict";c&&c.init(a),a.init(b)};h.init=function(a,c,d,e){"use strict";b("DOM").isNodeOfType(a,["input","textarea"])||(a=b("DOM").scry(a,"input")[0]||b("DOM").scry(a,"textarea")[0]);var f=!1;try{f=document.activeElement===a}catch(a){}if(f)h.initNow(c,d,e);else var g=b("Event").listen(a,"focus",function(){h.initNow(c,d,e),g.remove()})};e.exports=h}),null);
__d("TypeaheadCore",["Arbiter","ArbiterMixin","CSS","DOM","Event","Focus","Input","InputSelection","Keys","StickyPlaceholderInput","UserAgent","bind","emptyFunction","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this),this.events=["blur","focus","click","unselect","loading","change"],this.keepFocused=!0,this.preventFocusChangeOnTab=!1,this.queryTimeout=250,this.resetOnKeyup=!0,this.resetOnSelect=!1,this.setValueOnSelect=!1,this.selectOnTabKey=!0,this.selectOnClick=!0,Object.assign(this,a)}a.prototype.init=function(a,c,d){"use strict";this.init=b("emptyFunction"),this.data=a,this.view=c,this.root=d,this.initInput(),this.inputWrap=b("DOM").find(d,"div.wrap"),this.hiddenInput=b("DOM").find(d,"input.hiddenInput"),this.value="",this.nextQuery=null,this.selectedText=null,this.setValueOnSelect&&b("CSS").hasClass(this.inputWrap,"selected")&&(this.selectedText=this.getValue()),this.initView(),this.initData(),this.initEvents(),this.initToggle(),this._exclusions=[]};a.prototype.initInput=function(){"use strict";this.element=b("DOM").find(this.root,".textInput");var a=b("DOM").scry(this.element,"input")[0];a&&(this.element=a)};a.prototype.initView=function(){"use strict";this.view.subscribe("highlight",b("Focus").set.bind(null,this.element)),this.view.subscribe("select",function(a,b){this.select(b.selected)}.bind(this)),this.view.subscribe("afterSelect",function(){this.afterSelect()}.bind(this))};a.prototype.initData=function(){"use strict";this.data.subscribe("notify",function(a,b){this.root.id==b.rootid&&!this.element.disabled&&b.value==this.getValue()&&this.view.render(b.value,b.results,b.isAsync)}.bind(this)),this.data.subscribe("respond",function(a,b){(b.forceDisplay||b.value==this.getValue()&&!this.element.disabled&&(this.element.getAttribute("singlestate")!=="true"||b.nullState))&&this.view.render(b.value,b.results,b.isAsync)}.bind(this)),this.data.subscribe("activity",function(a,b){this.fetching=b.activity,this.fetching||this.nextQuery&&this.performQuery(),this.loading!=this.fetching&&(this.loading=this.fetching,this.inform("loading",{loading:this.loading}))}.bind(this))};a.prototype.initEvents=function(){"use strict";b("Event").listen(this.view.getElement(),{mouseup:this.viewMouseup.bind(this),mousedown:this.viewMousedown.bind(this)});var a={blur:b("bind")(this,"blur"),focus:b("bind")(this,"focus"),click:b("bind")(this,"click"),keyup:b("bind")(this,"keyup"),keydown:b("bind")(this,"keydown"),keypress:b("bind")(this,"keypress")};b("UserAgent").isBrowser("Firefox")&&b("Event").listen(this.element,{input:a.keyup});b("Event").listen(this.element,a)};a.prototype.initToggle=function(){"use strict";this.subscribe("blur",this.view.hide.bind(this.view)),this.subscribe("focus",this.view.show.bind(this.view))};a.prototype.viewMousedown=function(){"use strict";this.selecting=!0};a.prototype.viewMouseup=function(){"use strict";this.selecting=!1};a.prototype.blur=function(){"use strict";if(this.selecting){this.selecting=!1;return}this.inform("blur")};a.prototype.click=function(){"use strict";if(this.selectOnClick){var a=b("InputSelection").get(this.element);a.start==a.end&&this.element.select()}this.inform("click")};a.prototype.focus=function(){"use strict";this.checkValue(),this.inform("focus")};a.prototype.keyup=function(){"use strict";this.resetOnKeyup&&!this.getValue()&&this.view.reset(),this.checkValue(),this.getValue().length===0&&this.inform("change",null)};a.prototype.keydown=function(event){"use strict";__p&&__p();if(!this.view.isVisible()||this.view.isEmpty()){setTimeout(this.checkValue.bind(this),0);return}switch(b("Event").getKeyCode(event)){case b("Keys").TAB:this.handleTab(event);return;case b("Keys").UP:this.view.prev();break;case b("Keys").DOWN:this.view.next();break;case b("Keys").ESC:this.view.reset();break;default:setTimeout(this.checkValue.bind(this),0);return}event.kill()};a.prototype.keypress=function(event){"use strict";this.view.getSelection()&&b("Event").getKeyCode(event)==b("Keys").RETURN&&(this.view.select(),event.kill())};a.prototype.handleTab=function(event){"use strict";this.preventFocusChangeOnTab&&(this.view.getSelection()?event.kill():event.prevent()),this.selectOnTabKey&&this.view.select()};a.prototype.select=function(a){"use strict";if(a&&this.setValueOnSelect){var c=a.orig_text||a.text;this.setValue(c);this.setHiddenValue(a.uid);this.selectedText=c;b("CSS").addClass(this.inputWrap,"selected")}};a.prototype.afterSelect=function(){"use strict";this.keepFocused?b("Focus").set(this.element):this.element.blur(),this.resetOnSelect?this.reset():this.view.reset()};a.prototype.unselect=function(){"use strict";this.setValueOnSelect&&(this.selectedText=null,b("CSS").removeClass(this.inputWrap,"selected")),this.setHiddenValue(),this.inform("unselect",this)};a.prototype.setEnabled=function(a){"use strict";a=a===!1;this.element.disabled=a;b("CSS").conditionClass(this.root,"uiTypeaheadDisabled",a)};a.prototype.reset=function(){"use strict";this.unselect(),this.setValue(),this.keepFocused||b("Input").reset(this.element),this.view.reset(),this.inform("reset")};a.prototype.getElement=function(){"use strict";return this.element};a.prototype.setExclusions=function(a){"use strict";this._exclusions=a.map(String)};a.prototype.getExclusions=function(){"use strict";return this._exclusions};a.prototype.setValue=function(a){"use strict";this.value=this.nextQuery=a||"",b("Input").setValue(this.element,this.value),b("StickyPlaceholderInput").update(this.element),this.inform("change",a)};a.prototype.setHiddenValue=function(a){"use strict";typeof a==="number"&&(a=String(a));this.hiddenInput.value=a||"";b("Arbiter").inform("Form/change",{node:this.hiddenInput});var event=document.createEvent("HTMLEvents");event.initEvent("change",!1,!0);this.hiddenInput.dispatchEvent(event)};a.prototype.getValue=function(){"use strict";return b("Input").getValue(this.element)};a.prototype.getHiddenValue=function(){"use strict";return this.hiddenInput.value||""};a.prototype.checkValue=function(){"use strict";__p&&__p();var a=this.getValue();if(a==this.value)return;this.selectedText&&this.selectedText!=a&&this.unselect();var b=Date.now(),c=b-this.time;this.time=b;this.value=this.nextQuery=a;this.inform("change",this.value);this.performQuery(c)};a.prototype.performQuery=function(a){"use strict";if(this.selectedText)return;a=a||0;this.fetching&&a<this.queryTimeout?this.data.query(this.nextQuery,!0,this._exclusions,a):(this.data.query(this.nextQuery,!1,this._exclusions,a),this.nextQuery=null)};a.prototype.updateHeight=function(){"use strict"};e.exports=a}),null);
__d("SearchFunnelTypeaheadLogger",["csx","Banzai","DOM","Event","PageTransitions","SubscriptionsHandler","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="search_funnel",i={focus:"entrant",render:"results_displayed",keydown:"interaction",select:"search"};a={init:function(a,c){__p&&__p();if(!a||!c)return;this._isColdStart=!0;this._sampleRates=c;this._core=a.getCore();this._data=a.getData();this._view=a.getView();this._handler=new(b("SubscriptionsHandler"))();this.log=this.log.bind(this);this.onKeydown=this.onKeydown.bind(this);this.onSelect=this.onSelect.bind(this);this.onTypeaheadImpression=this.onTypeaheadImpression.bind(this);this._transitionInProgress=!0;this.onTypeaheadImpression()},onTypeaheadImpression:function(a){this._initTime=this._getInitTime(),this.e2eMarkers=[],this._transitionInProgress&&b("DOM").scry(document.body,"._4d3w").length===0&&this.log("impression",{funnel_path:b("URI").getNextURI().getPath()}),this.reset(),this._handler.addSubscriptions(this._core.subscribeOnce("focus",this.log),this._view.subscribeOnce("render",this.log),this._view.subscribeOnce("select",this.onSelect)),b("Event").listen(this._core.getElement(),"keydown",this.onKeydown),b("PageTransitions").registerHandler(function(){this._transitionInProgress=!0}.bind(this)),b("PageTransitions").registerCompletionCallback(this.onTypeaheadImpression)},onKeydown:function(event){this._sawKeydown||(this._sawKeydown=!0,this.log("keydown",event))},onSelect:function(event,a){a.funnel_data={selected_position:a.selected.globalIndex,selected_type:a.selected.type},a.selected.isNullState?a.funnel_data.interaction_type="null_state":a.selected.isSingleState?a.funnel_data.interaction_type="single_state":a.funnel_data.interaction_type="typed",this._endToEndPath=b("URI").getMostRecentURI().getPath(),this.log(event,a)},reset:function(){this._handler.release(),this._handler.engage(),this._sawKeydown=!1,this._transitionInProgress=!1},log:function(a,c){__p&&__p();i[a]&&(a=i[a]);this.e2eMarkers.push({event:a,time:String(Date.now()-this._initTime)});if(!this._sampleRates[a])return;c=c||{};c.funnel_data=c.funnel_data||{};c.funnel_data.sample_rate=this._sampleRates[a];c.funnel_data.current_event_time=Date.now();this._prevTime&&this._prevEvt&&(c.funnel_data.previous_event_time=this._prevTime,c.funnel_data.previous_event=this._prevEvt);this._prevTime=c.funnel_data.current_event_time;this._prevEvt=a;b("Banzai").post(h,{funnel_data:c.funnel_data,path:c.funnel_path||b("PageTransitions").getMostRecentURI().getPath(),stage:a},b("Banzai").VITAL)},_getInitTime:function(){if(window.ExitTime)return window.ExitTime;var a=window.performance||window.msPerformance;return!a||!a.timing?undefined:a.timing.navigationStart}};e.exports=a}),null);
__d("QueryHistory",[],(function(a,b,c,d,e,f){var g={};a={set:function(a,b){g[this._key(a)]=b},get:function(a){return g[this._key(a)]},_key:function(a){return"uri-"+a.getQualifiedURI().toString()}};e.exports=a}),null);
__d("SearchBootstrapCache",["AsyncRequest","AsyncResponse","CacheStorage","SearchBootstrapCacheConstants"],(function(a,b,c,d,e,f){__p&&__p();var g=1;a={get:function(a,c,d,e,f){__p&&__p();var g=this.getKey(a,c,d),h=this.getStorage(),i=h.get(g);h=b("SearchBootstrapCacheConstants")[c.type]||36e5;if(i==null||Date.now()-i.timestamp>h)f(d,a,c);else{g=new(b("AsyncRequest"))();g.getData=function(){return i.requestData};h=new(b("AsyncResponse"))(g,i.payload);e(h,c)}},set:function(a,b,c){var d=a.getRequest().getData();this.getStorage().set(this.getKey(d,b,c),{timestamp:Date.now(),payload:a.payload,requestData:d})},getKey:function(a,b,c){return JSON.stringify({filter:a.filter,context:a.context,viewer:a.viewer,lazy:a.lazy,token:a.token,type:b.type,bootstrapEndpoint:c})},getStorage:function(){return new(b("CacheStorage"))("localstorage","_SearchBootstrapCache_"+g)}};e.exports=a}),null);
__d("SearchSingleState",["fbt"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a,b,c,d){return{classNames:"grammar",groupIndex:0,indexInGroup:a,path:b,text:c,type:"grammar",uid:d}}a={getSuggestions:function(a,b,c){if(c==="ent:user")return this.getSuggestionsForUser(a,b);else if(c==="ent:page")return this.getSuggestionsForPage(a,b);else if(c==="ent:app")return this.getSuggestionsForApp(a,b);else if(c==="ent:group")return this.getSuggestionsForGroup(a,b)},getSuggestionsForUser:function(a,b){return[h(0,"/search/"+a+"/photos-of",g._("photos of {full name}",[g._param("full name",b)]),"photos_of_user"),h(1,"/search/"+a+"/friends",g._("friends of {full name}",[g._param("full name",b)]),"friends_of_user"),h(2,"/search/"+a+"/pages-liked",g._("favorite pages of {full name}",[g._param("full name",b)]),"pages_liked_user"),h(3,"/search/str/"+b+"/users-named",g._("find all people named \"{full name}\"",[g._param("full name",b)]),"people_named_text")]},getSuggestionsForPage:function(a,b){return[h(0,"/search/"+a+"/photos-of",g._("photos of {name of page}",[g._param("name of page",b)]),"photos_of_page"),h(1,"/search/"+a+"/likers",g._("people who like {name of page}",[g._param("name of page",b)]),"page_likers"),h(2,"/search/str/"+b+"/pages-named",g._("find all pages named \"{name of page}\"",[g._param("name of page",b)]),"pages_named_text")]},getSuggestionsForGroup:function(a,b){return[h(0,"/search/"+a+"/members",g._("{name of group} members",[g._param("name of group",b)]),"members_of_group"),h(1,"/search/"+a+"/photos-in",g._("photos in {name of groups}",[g._param("name of groups",b)]),"photos_in_group"),h(2,"/search/"+a+"/creators",g._("{name of group} creators",[g._param("name of group",b)]),"creators_of_group"),h(3,"/search/"+a+"/admins",g._("{name of group} administrators",[g._param("name of group",b)]),"admins_of_group")]},getSuggestionsForApp:function(a,b){return[h(0,"/search/"+a+"/apps-similar-to",g._("apps similar to {name of app}",[g._param("name of app",b)]),"similar_apps"),h(1,"/search/"+a+"/app-users",g._("people who use {name of app}",[g._param("name of app",b)]),"app_users"),h(2,"/search/str/"+b+"/pages-named",g._("find all apps named \"{name of page}\"",[g._param("name of page",b)]),"apps_named_text")]}};e.exports=a}),null);
__d("SearchDataSource",["Arbiter","AsyncResponse","CSRFGuard","CurrentUserInitialData","DataSource","Event","FacebarJSConstants","HashtagSearchResultUtils","PageTransitionsRegistrar","SearchBootstrapCache","SearchRegion","SearchSingleState","UnicodeCJK","XHRRequest","createArrayFromMixed","debounce"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=100,i="/typeahead/search/facebar/nullstate/";c=babelHelpers.inherits(a,b("DataSource"));g=c&&c.prototype;function a(a){__p&&__p();a.headerflags=new Map();(b("SearchRegion").sgp_fork_ss_at_proxygen||b("SearchRegion").sgp_fork_gs_at_proxygen)&&a.headerflags.set("X-FB-ForkingType","edge-sgp-search");g.constructor.call(this,a);this._updateMaxResults=function(){var a=window.innerHeight||document.documentElement.clientHeight;this.setMaxResults(Math.max(this._numResults.min,Math.min(this._numResults.max,Math.ceil(2+(a-370)/56))))}.bind(this);this._token=a.token||"";this._lazyonload=a.lazyonload!==!1;this._extraTypes=a.extraTypes;this._buckets=a.buckets;this._noMultiFetch=a.noMultiFetch||!1;this._nullStateConfig=a.nullStateConfig||{};var c=a.maxResults||8;this._numResults={min:3,max:c};this.recordingRoute=a.recordingRoute||"non_banzai";this._enabledHashtag=a.enabledHashtag||!1;this.logBackendQueriesWindow=a.logBackendQueriesWindow||25;this._genTime=a.genTime;this._bootstrapError=!1;this._hasKeywordBootstrap=a.hasKeywordBootstrap||!1;this._addJoinedTermsMatching=a.addJoinedTermsMatching||!1;this._useBootstrapCache=a.useBootstrapCache||!1;this._useBrowserCache=a.useBrowserCache||!1;this.cacheUnicodeMatch.setConfigs({prefix_hangul_conjoining_jamo:!0,prefix_kana_drop_trailing_latin:a.cjkDropLatinInCjTokens,prefix_kana_hiragana_to_katakana:a.cjkUiCacheHiraganaToKatakana,search_i18n_prefix_arabic_normalization:a.arabicNormalization});this.backendUnicodeMatch.setConfigs({prefix_kana_drop_trailing_latin:a.cjkDropLatinInCjTokens})}a.prototype.init=function(){__p&&__p();g.init.call(this);this._leanPayload=null;this._bootstrapRequestsPending=0;this._criticalOnly=!0;this._updateMaxResults();var a=b("debounce")(this._updateMaxResults,h,this,!0);b("Event").listen(window,"resize",a);this._nullStateConfig.prefetchNullState&&this.fetchNullState("");this._nullStateConfig.singleState&&b("Arbiter").subscribe("page_transition",this.handlePageTransition.bind(this));(this._nullStateConfig.prefetchNullState||this._nullStateConfig.singleState)&&b("Arbiter").subscribe("search/updateNullState",this.updateNullState.bind(this));this._nullStateConfig.recent&&b("Arbiter").subscribe("search/refreshRecentSearchesNullstate",this.refreshRecentSearches.bind(this))};a.prototype.refreshRecentSearches=function(){this.nullStateData=null};a.prototype.handlePageTransition=function(){this.nullStateParams={}};a.prototype.updateNullState=function(event,a){this.nullStateParams=a,this.fetchNullState()};a.prototype.markResultsAsNullState=function(a){__p&&__p();if(a)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.isNullState=!0}};a.prototype.markResultsAsSingleState=function(a){__p&&__p();if(a)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.isSingleState=!0}};a.prototype.fetchNullState=function(a){this.lastNullOrSingleStateFetchStartTime=Date.now();if(!this._nullStateConfig.hasNullState)return;var b=null;this.nullStateParams&&this.nullStateParams.uid?(this.nullStateParams.query=a||"",b=this._fetchDataForSingleState(),this.markResultsAsNullState(b)):(b=this._fetchDataForNullState(),this.markResultsAsSingleState(b));b&&this.inform("respond",{value:this.nullStateParams?this.nullStateParams.query:"",results:b,isAsync:!1,nullState:!0})};a.prototype._fetchDataForSingleState=function(){__p&&__p();if(this.nullStateDataWithProfile&&this.nullStateParams.uid===this.nullStateDataWithProfile.profileID)return this.nullStateDataWithProfile.data;if(this.nullStateParams.type==="ent:app"||this.nullStateParams.type==="ent:group"||this.nullStateParams.type==="ent:page"){this.fetch(i,{profile_id:this.nullStateParams.uid,ent_type:this.nullStateParams.type},{singleState:!0});this.nullStateDataWithProfile={profileID:this.nullStateParams.uid};return}var a=b("SearchSingleState").getSuggestions(this.nullStateParams.uid,this.nullStateParams.text,this.nullStateParams.type);if(!a)return this._fetchDataForNullState();this.nullStateDataWithProfile={data:a,profileID:this.nullStateParams.uid};return a};a.prototype._shouldRefreshNullState=function(){if(!this._nullStateConfig.recent)return!1;var a=window.location.href;if(!a)return!1;return a.contains("allactivity")&&a.contains("log_filter=search")?!0:!1};a.prototype._fetchDataForNullState=function(){if(this.nullStateData&&!this._shouldRefreshNullState()){this.markResultsAsNullState(this.nullStateData);setTimeout(function(){this.inform("respond",{value:"",results:this.nullStateData,isAsync:!0,nullState:!0})}.bind(this),0);return}this.fetchingNullState||(this.fetchingNullState=!0,this.fetch(i,{value:""},{nullState:!0,value:""}));return null};a.prototype.dirty=function(){g.dirty.call(this),this._bootstrapError=!1,this._fetchOnUseRequests=[]};a.prototype.asyncErrorHandler=function(a,b){b.nullState&&(this.fetchingNullState=!1),b.bootstrap&&(this._bootstrapError=!0),this.inform("fetchError",{response:a,fetch_context:b})};a.prototype.fetch=function(a,c,d){d=d||{};d.fetch_start=Date.now();var e=b("PageTransitionsRegistrar").getMostRecentURI().getPath();c=babelHelpers["extends"]({},c,{path:e});g.fetch.call(this,a,c,d)};a.prototype.xhrFetchHandler=function(a,c,d){a=b("CSRFGuard").clean(a);a=JSON.parse(a);return this.fetchHandler(new(b("AsyncResponse"))(null,a.payload),d,c)};a.prototype.fetchHandler=function(a,c,d){__p&&__p();d===void 0&&(d=null);if(c.nullState){this.fetchingNullState=!1;this.nullStateData=a.getPayload().entries;this.markResultsAsNullState(this.nullStateData);this.inform("respond",{value:"",results:this.nullStateData,isAsync:!0,nullState:!0});return}if(c.singleState){this.nullStateDataWithProfile.data=a.getPayload().entries;this.markResultsAsSingleState(this.nullStateDataWithProfile.data);this.inform("respond",{results:this.nullStateDataWithProfile.data,isAsync:!0,value:this.nullStateParams?this.nullStateParams.query:"",nullState:!0});return}var e=a.getPayload(),f=babelHelpers["extends"]({fetch_end:Date.now()},c),h=f.value?"event":"persistent";this.inform("beginFetchHandler",{response:a});c.bootstrap&&(this._bootstrapError=!1);var i=d===null?a.getRequest().uri.getPath():d.getURI().getPath();i===this.bootstrapEndpoint&&this._useBootstrapCache&&b("SearchBootstrapCache").set(a,c,this.bootstrapEndpoint);if(c.type=="lean")this._leanPayload=e,this._processLean();else{e.coeff2_ts&&(f.coeff2_ts=e.coeff2_ts);g.fetchHandler.call(this,a,c);i=d===null?a.getRequest().getData():d.getData();c.bootstrap&&!i.no_cache&&(f.browserCacheHit=e.timestamp<this._genTime);c.bootstrap&&!e.no_data&&this._bootstrapRequestsPending>0&&(c.bootstrap=!1,--this._bootstrapRequestsPending,this._bootstrapRequestsPending||this._bootstrapPostProcess());if(e.no_data||e.stale||e.token!==this._token){d=babelHelpers["extends"]({},i);d.lazy&&(delete d.lazy,d.token=this._token,this._fetchOnUse(d,c))}}this.inform("endpointStats",{info:f,response:a},h);c&&!!c.value&&this.inform("completeFetch",{response:a,stats:f});e=this.getResponseHeaderValue("X-FB-ForkingPoolID");e.length>0&&this.inform("logProxygenForkPoolId",{field:"fork_pool_id",value:e})};a.prototype.respond=function(a,b,c){this.inform("respondValidUids",b);this.inform("reorderResults",b);b=this.buildData(b,a);b.forEach(function(a,b){a.origIndex=b,a.fromCache=!c});this.inform("respond",{value:a,results:b,isAsync:!!c});return b};a.prototype.buildData=function(a,b){if(!a||a.length===0)return[];b=a.map(this.getEntry,this);b.length=Math.min(b.length,this._maxResults);return b};a.prototype.fetchLean=function(){this._fetchLean()};a.prototype._isQueryTooShort=function(a){return a.length<this._minQueryLength&&!this._performShortQuery&&!b("UnicodeCJK").hasIdeoOrSyll(a)};a.prototype.shouldFetchMoreResults=function(a){return a.length<this._maxResults};a.prototype._bootstrapPostProcess=function(){var a=0;for(var b in this._data)Object.prototype.hasOwnProperty.call(this._data,b)&&a++;this.inform("bootstrapped",{time:Date.now(),size:a},"persistent");this._processLean()};a.prototype._processLean=function(){if(this._leanPayload){var a,b=this._leanPayload.entries;for(var c in b)a=this.getEntry(c),a&&(a.index=b[c]);this.setExclusions(this._leanPayload.blocked);this._leanPayload=null}};a.prototype._bootstrapFetch=function(a,b){b=babelHelpers["extends"]({},b,this.bootstrapData);this._criticalOnly&&this._lazyonload&&(b.lazy=1);a={bootstrap:!0,type:a};this._fetchBootstrapMaybeCache(b,a);++this._bootstrapRequestsPending};a.prototype._fetchBootstrapMaybeCache=function(a,c){__p&&__p();if(this._useBootstrapCache)b("SearchBootstrapCache").get(a,c,this.bootstrapEndpoint,this.fetchHandler.bind(this),this.fetch.bind(this));else if(this._useBrowserCache){var d=new(b("XHRRequest"))(this.bootstrapEndpoint).setData(babelHelpers["extends"]({},a,{__user:b("CurrentUserInitialData").USER_ID,__a:1})).setMethod("GET").setResponseHandler(function(a){return this.xhrFetchHandler(a,d,c||{})}.bind(this)).setErrorHandler(function(a){return this.asyncErrorHandler(a,c)}.bind(this));this.inform("beforeFetch",{request:d,fetch_context:c});d.send()}else this.fetch(this.bootstrapEndpoint,a,c)};a.prototype._fetchOnUse=function(a,b){for(var c in this.bootstrapData)Object.prototype.hasOwnProperty.call(a,c)||(a[c]=this.bootstrapData[c]);this._criticalOnly?this._fetchOnUseRequests.push({args:a,ctx:b}):this._fetchBootstrapMaybeCache(a,b)};a.prototype._fetchLean=function(){var a={no_cache:1};a.options=b("createArrayFromMixed")(a.options);a.options.push("lean");this._fetchOnUse(a,{type:"lean"})};a.prototype.bootstrap=function(a){__p&&__p();a||(this._criticalOnly=!1,this._flushFetchOnUseRequests());if(this._bootstrapped)return;a={filter:["event"]};this._fetchOnUse(a,{type:"event"});a=["app","page","group","friendlist"];a=a.concat(this._extraTypes||[]);var c=[];this._hasKeywordBootstrap&&c.push(b("FacebarJSConstants").keywordType);if(this._noMultiFetch)a.push("user"),a=a.concat(c),this._bootstrapFetch("user",{filter:a});else{this._bootstrapFetch("other",{filter:a});if(this._buckets)for(var a=0;a<this._buckets.length;++a){var d={filter:["user"],buckets:this._buckets[a]};this._bootstrapFetch("user",d)}else this._bootstrapFetch("user",{filter:["user"]});c.length>0&&this._bootstrapFetch("keyword",{filter:c})}this._fetchLean();this._bootstrapped=!0};a.prototype.getBootstrapError=function(){return this._bootstrapError};a.prototype._flushFetchOnUseRequests=function(){var a=this._fetchOnUseRequests.length;for(var b=0;b<a;++b){var c=this._fetchOnUseRequests[b];this._fetchBootstrapMaybeCache(c.args,c.ctx)}a>0&&this.inform("extra_bootstrap",{time:Date.now()},"persistent");this._fetchOnUseRequests=[]};a.prototype.onLoad=function(a,b){this.inform("onload",{time:Date.now()},"persistent"),a&&setTimeout(this.bootstrap.bind(this,b),0)};a.prototype.mergeUids=function(a,b,c,d){__p&&__p();var e=this.getDynamicHashtagResult(d);d&&e&&b.indexOf(e)<=0&&b.unshift(e);e=c[0]?this.getEntry(c[0]):null;var f=b[0]?this.getEntry(b[0]):null;e=e&&e.replace_results?e:null;e=!e&&f&&f.replace_results?f:e;f=g.mergeUids.call(this,a,b,c,d);if(e){this.inform("backend_topreplace",{});return this.deduplicateByKey([e.uid].concat(f))}return f};a.prototype.getTextToIndexFromFields=function(a,b){var c=[],d=a.tokenVersion==="v2";for(var e=0;e<b.length;++e){if(d&&(b[e]==="text"||b[e]==="alias"))continue;var f=a[b[e]];f&&(f=f.join?f.join(" "):f,c.push(f),b[e]=="text"&&this._addJoinedTermsMatching&&(f=f.toLowerCase(),f=f.replace(/ /g,""),c.push(f)))}return c.join(" ")};a.prototype.getDynamicHashtagResult=function(a){if(!a||!this._enabledHashtag)return;var c=b("HashtagSearchResultUtils").getHashtagFromQuery(a);if(!c)return;var d="hashtag:"+c,e=this.getEntry(d);e||this.processEntries([b("HashtagSearchResultUtils").makeTypeaheadResult(c)],a);return d};a.prototype.tokenizeCache=function(a,b){a=this.cacheUnicodeMatch.prefixMatchPrepare(a);a=this._tokenize(a,b);b=a.tokens;b.length>0&&a.value.startsWith("@")&&(b[0]="@"+b[0]);return a};e.exports=a}),null);
__d("SearchPeopleFriendsOf",["fbt","TokenizeUtil","URI"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,b){"use strict";this.friendsOfUri=a,this.placementStrategy=b.placement_strategy,this.placementParams=b.placement_params,this.triggerStrategy=b.trigger_strategy,this.triggerParams=b.trigger_params}a.prototype.injectInto=function(a,b){"use strict";if(!a||a.length===0||!this.$1(a,b))return;if(a[0].type!=="user")return;b=this.createFindAllFriendsOf(a[0].text,a[0].uid);this.$2(b,a)};a.prototype.$2=function(a,b){"use strict";var c=this.$3(b);if(c==="last"){var d=b.filter(function(a){return a.type==="user"}).length;c=d}b.splice(c,0,a)};a.prototype.$1=function(a,b){"use strict";var c=this.$4(this.triggerStrategy);return c(a,this.triggerParams,b)};a.prototype.$3=function(a){"use strict";var b=this.$4(this.placementStrategy);return b(a,this.placementParams)};a.prototype.$4=function(a){"use strict";return this["$SearchPeopleFriendsOf_"+a]};a.prototype.$5=function(a,b,c){"use strict";return!1};a.prototype.$6=function(a,b,c){"use strict";return!0};a.prototype.$7=function(a,b,c){"use strict";__p&&__p();c=parseInt(b,10);b=0;for(var d=0;d<a.length;d++){var e=a[d];e.type==="user"&&e.index_rank==-1&&b++;if(b>c)return!1}return!0};a.prototype.$8=function(a,c,d){"use strict";__p&&__p();c=parseInt(c,10);d=b("TokenizeUtil").tokenize(d);d=d.map(function(a){return a.toLowerCase()});var e=0;for(var f=0;f<a.length;f++){var g=a[f];if(g.type!=="user"||g.index_rank!=-1)continue;g=b("TokenizeUtil").tokenize(g.text);g=g.map(function(a){return a.toLowerCase()});if(g.length<d.length)continue;var h=!0;for(var i=0;i<d.length-1;i++)if(d[i]!==g[i]){h=!1;break}i=d.length-1;if(h&&g[i].startsWith(d[i])){e++;if(e>=c)return!1}}return!0};a.prototype.$9=function(a,b){"use strict";return"last"};a.prototype.$10=function(a,b){"use strict";return 1};a.prototype.createFindAllFriendsOf=function(a,c){"use strict";a=g._("{name}'s Friends",[g._param("name",a)]);c=new(b("URI"))(this.friendsOfUri).addQueryData({q:"",init:"psm",fofid:c}).toString();return{uid:"people_search",type:"user",text:a,classNames:"seeAllUser",photo:"/images/search_typeahead/people_see_more.png",logType:"grammar",path:c}};e.exports=a}),null);
__d("SearchPeopleSeeMore",["fbt","invariant","TokenizeUtil","URI"],(function(a,b,c,d,e,f,g,h){__p&&__p();function a(a,b){var c=b.placement,d=b.strategy,e=b.min_users;b=b.query_to_show;this.seeMoreUri=a;this.placement=c;this.strategy=d;this.min_users=e;this.query_to_show=b}a.prototype.injectInto=function(a,b){"use strict";if(!a||a.length===0)return;b=this.$1(a,b);if(!b)return;b=this.createFindAllPeopleResult(b);this.$2(b,a)};a.prototype.$1=function(a,b){"use strict";__p&&__p();if(this.strategy==="disabled")return null;if(a[0].type!=="user")return null;a=a.filter(function(a){return a.type==="user"});if(a.length<this.min_users)return null;else a.length>this.min_users&&(a=a.slice(0,this.min_users));var c,d=a[0];switch(this.strategy){case"all_identical":var e=a.every(function(a){return this.$3(d.text,a.text)}.bind(this));c=e?d.text:null;break;case"top_results_prefix":c=a.reduce(function(a,b){return this.$4(a,b.text)}.bind(this),d.text);break;default:h(0,3956)}return!c?null:this.query_to_show==="common"?c:b};a.prototype.$2=function(a,b){"use strict";if(this.placement==="last"){var c=b.filter(function(a){return a.type==="user"}).length;b.splice(c,0,a)}else{c=parseInt(this.placement,10);b.splice(c,0,a)}};a.prototype.createFindAllPeopleResult=function(a){"use strict";var c=g._("Find all people named \"{query}\"",[g._param("query",a.toLowerCase())]);a=new(b("URI"))(this.seeMoreUri).addQueryData({q:a,init:"psm"}).toString();return{uid:"people_search",type:"user",text:c,classNames:"seeAllUser",photo:"/images/search_typeahead/people_see_more.png",path:a}};a.prototype.$3=function(a,c){"use strict";if(a===c)return!0;a=b("TokenizeUtil").tokenize(a);var d=b("TokenizeUtil").tokenize(c);return a.length!==d.length?!1:a.every(function(a,b){return a===d[b]})};a.prototype.$4=function(a,c){"use strict";__p&&__p();if(!a||!c)return;if(a===c)return a;a=b("TokenizeUtil").tokenize(a);c=b("TokenizeUtil").tokenize(c);var d=[];for(var e=0;e<a.length&&e<c.length;e++)if(a[e]===c[e])d.push(a[e]);else break;return d.length===0?null:d.join(" ")};e.exports=a}),null);
__d("SearchTypeaheadCore",["Arbiter","DOM","Event","Input","Keys","Parent","ScriptPath","TypeaheadCore"],(function(a,b,c,d,e,f){__p&&__p();var g,h;g=babelHelpers.inherits(a,b("TypeaheadCore"));h=g&&g.prototype;a.prototype.init=function(a,c,d){"use strict";__p&&__p();h.init.call(this,a,c,d);a=b("Parent").byTag(d,"form");var e=this.reset.bind(this);b("Arbiter").subscribe("pre_page_transition",function(event,a){var b=/^\/search/,c=b.test(a.from.path);b=b.test(a.to.path);c&&!b&&setTimeout(e,0)});if(a){var f=b("DOM").find(a,"input.search_sid_input");b("Event").listen(a,"submit",function(){this.data&&this.data.queryData&&(f.value=this.data.queryData.sid),setTimeout(e,0)}.bind(this),b("Event").Priority.URGENT)}};a.prototype.select=function(){"use strict";this.reset(),this.element.focus(),setTimeout(function(){this.element.blur()}.bind(this),0),b("ScriptPath").setClickPointInfo({click:"Search"})};a.prototype.handleTab=function(event){"use strict";var a=this.view.getQuerySuggestion(this.value);a?(b("Input").setValue(this.element,a),this.checkValue(),event.kill()):h.handleTab.call(this,event)};a.prototype.getSearchType=function(){"use strict";return"regular"};a.prototype.focus=function(){"use strict";h.focus.call(this),(this.getValue().length===0||this.element.getAttribute("singlestate")==="true")&&this.data.fetchNullState(this.getValue())};a.prototype.keyup=function(event){"use strict";if(this.getValue().length===0&&b("Event").getKeyCode(event)===b("Keys").ESC)return;this.getValue().length===0&&this.data.fetchNullState(this.getValue());this.element.setAttribute("singlestate",!1)};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("SearchTypeaheadRecorder",["AsyncRequest","Banzai","BanzaiNectar","BanzaiScuba","CurrentUser","Event","FacebarGlobalOptions","Keys","TokenizeUtil","Vector","clickRefAction","ge","mapObject","throttle","whitelistObjectKeys"],(function(a,b,c,d,e,f){__p&&__p();var g={WAITING:"WAITING",SUCCESS:"SUCCESS",NO_RESULTS:"NO_RESULTS",ERROR:"ERROR"};function a(a){"use strict";this.init(a),this.initEvents(a)}a.prototype.init=function(a){"use strict";__p&&__p();this.core=a.getCore();this.data=a.getData();this.view=a.getView();this.element=this.core.getElement();this.initTime=Date.now();this._onloadTime=0;this._extraRecorder=[];this.performanceTimings={};this.allFromSingleState=!1;this.allFromNullState=!1;a=b("ge")("search_first_focus");this.initStartTime=a&&a.value;this.bootstrapStats={bootstrapped:0};this.type="legacy_search";this._reset()};a.prototype._reset=function(){"use strict";__p&&__p();this.stats={};this.avgStats={};this.appendStats={};this._backspacing=!1;this.backendQueries=[];this.backendQueriesStatus={};this._topreplace=!1;this._inflightRequests={};var a=Math.random().toString();this.data.setQueryData({sid:a});this.view.setSid(a);this.recordStat("sid",a);this.recordStat("keypressed",0)};a.prototype.initEvents=function(){"use strict";__p&&__p();this.core.subscribe("focus",function(event){if(!this.stats.session_start_time){this.recordStat("session_start_time",Date.now());var a=new Date();a=a.getTimezoneOffset();a=Date.now()-a*60*1e3;this.recordStat("session_start_time_user_timezone",a);this._lastRenderTime=0;this._firstKeypressTime=null}}.bind(this)),this.core.subscribe("blur",function(event){var a=Date.now();for(var b in this._inflightRequests){var c=this._inflightRequests[b];c=a-c;this.recordAvgStat("search_endpoint_ms_from_js",c)}this.recordStat("session_end_time",a);this.submit()}.bind(this)),this.view.subscribe("select",function(a,b){this.recordStat("time_between_select_and_last_render",Date.now()-this._lastRenderTime),this._firstKeypressTime!=null&&this.recordStat("keypress_to_select_time",Date.now()-this._firstKeypressTime),this.recordSelectInfo(b)}.bind(this)),this.view.subscribe("render",function(a,b){this._lastRenderTime=Date.now(),this.recordRender(b)}.bind(this)),this.data.subscribe("logPerformanceTiming",function(a,b){this.performanceTimings[b.field]=b.value}.bind(this)),this.data.subscribe("logProxygenForkPoolId",function(a,b){this.recordStat(b.field,b.value)}.bind(this)),this.data.subscribe("activity",function(a,b){this.recordStat("pending_request",b.activity)}.bind(this)),this.data.subscribe("respondValidUids",function(a,b){this.validUids=b.slice(0)}.bind(this)),this.data.subscribe("beforeQuery",function(a,b){__p&&__p();if(!b.value){this.query="";this.results=[];this.data.lastNullOrSingleStateFetchStartTime=Date.now();return}this.stats.first_query_time||this.recordStat("first_query_time",Date.now());this.query=b.value;this.queryStartTime||(this.queryStartTime=[]);this.queryStartTime[this.query]=Date.now();this.recordCountStat("num_queries")}.bind(this)),this.data.subscribe("queryEndpoint",function(a,b){this.recordCountStat("num_search_ajax_requests"),this.recordAvgStat("endpoint_query_length",b.value.length),this._inflightRequests[b.value]=Date.now()}.bind(this)),this.data.subscribe("onload",function(a,b){this._onloadTime=b.time}.bind(this)),this.data.subscribe("bootstrapped",function(a,b){this.bootstrapStats.endTime=b.time,this.bootstrapStats.bootstrapped=1}.bind(this)),this.core.subscribe("recordFunction",function(a,b){this._extraRecorder.push(b)}.bind(this)),this.data.subscribe("endpointStats",function(a,b){a=b.info;b=a.fetch_end-a.fetch_start;a.value?this.recordAvgStat("search_endpoint_ms_from_js",b):this.bootstrapStats[a.type]=b;a.coeff2_ts&&(this.bootstrapStats.coeff2_ts=a.coeff2_ts);typeof a.browserCacheHit!=="undefined"&&this.recordCountStat(a.browserCacheHit?"bootstrap_cachehits":"bootstrap_cachemisses");this._inflightRequests[a.value]&&delete this._inflightRequests[a.value]}.bind(this)),this.data.subscribe("fetchComplete",function(a,b){a=b.entries;b=b.value;b&&this.backendQueriesStatus[b]&&(this._addDurationForBackendQuery(this.backendQueriesStatus[b]),this.backendQueriesStatus[b].status=a&&a.length>0?g.SUCCESS:g.NO_RESULTS)}.bind(this)),this.data.subscribe("fetchError",function(a,b){a=b.fetch_context;b=a.value;if(a.bootstrap||!b)return;this.backendQueriesStatus[b]&&(this.backendQueriesStatus[b].status=g.ERROR,this._addDurationForBackendQuery(this.backendQueriesStatus[b]))}.bind(this)),this.data.subscribe("query",function(a,b){this.recordAvgStat("num_results_from_cache",b.results.length)}.bind(this)),this.data.subscribe("backend_topreplace",function(a,b){!1===this._topreplace&&(this.recordStat("backend_topreplace",1),this._topreplace=!0)}.bind(this)),this.data.subscribe("completeFetch",function(a,b){if(this.core.scubaInfo){a=b.response;b={recv:b.stats.fetch_end-b.stats.fetch_start,render:Date.now()-b.stats.fetch_start,payload_size:JSON.stringify(a).length};a.payload.entities||(a.payload.entities=this.buildResults());this.logToScuba(a,b,this.core.scubaInfo,this.query,this.type)}}.bind(this)),this.data.subscribe("completeCacheFetch",b("throttle")(function(a,b){this.core.scubaInfo&&this.logToScuba({},{},this.core.scubaInfo,this.query,this.type)}.bind(this),500)),b("Event").listen(this.element,"keydown",function(event){this.recordStat("keypressed",1),this.recordCountStat("count_keys_pressed"),b("Event").getKeyCode(event)==b("Keys").BACKSPACE?!this._backspacing&&this.query&&(this._backspacing=!0,this.recordAppendStat("before_backspace_queries",this.query)):this._backspacing=!1,this._firstKeypressTime==null&&(this._firstKeypressTime=Date.now())}.bind(this)),this.data.subscribe("beforeFetch",function(a,b){a=b.request.data?b.request.data.value:null;if(!a)return;this.backendQueries.push(a);this.backendQueriesStatus[a]={status:g.WAITING,start_time:Date.now()}}.bind(this))};a.prototype.recordStat=function(a,b){"use strict";this.stats[a]=b};a.prototype.recordCountStat=function(a){"use strict";var b=this.stats[a];this.stats[a]=b?b+1:1};a.prototype.recordAvgStat=function(a,b){"use strict";this.avgStats[a]?(this.avgStats[a][0]+=b,++this.avgStats[a][1]):this.avgStats[a]=[b,1]};a.prototype.recordAppendStat=function(a,b){"use strict";Object.prototype.hasOwnProperty.call(this.appendStats,a)||(this.appendStats[a]=[]),this.appendStats[a].push(b)};a.prototype.recordRender=function(a){"use strict";__p&&__p();this.results=a.filter(function(a){return a.uid!="search"&&a.type!="disabled_result"&&a.type!="header"}).map(function(a){return babelHelpers["extends"]({},a)});a=null;this.queryStartTime&&(a=this.queryStartTime[this.query]);var c=this.results.every(function(a){return a.fromCache||a.isSeeMore}),d=this.results.every(function(a){return a.isFromGSEF||a.fromCache||a.isSeeMore||a.isJSBootstrapMatch})&&this.results.some(function(a){return a.isFromGSEF}),e=this.results.every(function(a){return a.isGloballyCachedKeyword||a.fromCache||a.isSeeMore||a.isJSBootstrapMatch})&&this.results.some(function(a){return a.isGloballyCachedKeyword}),f=this.results.every(function(a){return a.isNullState}),g=this.results.every(function(a){return a.isSingleState}),h=this.results.every(function(a){return a.exactMatchKeyword||a.isSeeMore});this.allFromSingleState=g;this.allFromNullState=f;if(this.results.length&&this.data.lastNullOrSingleStateFetchStartTime&&f)this.recordStat("time_render_null_state",Date.now()-this.data.lastNullOrSingleStateFetchStartTime),this.data.lastNullOrSingleStateFetchStartTime=null;else if(this.data.lastNullOrSingleStateFetchStartTime&&this.results.length&&g)this.recordStat("time_render_single_state",Date.now()-this.data.lastNullOrSingleStateFetchStartTime);else if(a){f=Date.now()-a;h?this.recordAppendStat("times_render_gs_echo",f):this.recordAppendStat(c?"times_render_local":"times_render_remote",f);!c&&d&&this.recordAppendStat("time_render_gs_early_fetch",f);!c&&e&&this.recordAppendStat("time_render_globally_cached_keywords",f);!c&&!d&&!e&&this.recordAppendStat("time_render_remote_main_call",f)}this.data.lastNullOrSingleStateFetchStartTime=null;g=b("Vector").getViewportDimensions();this.recordStat("window_size_width",g.x);this.recordStat("window_size_height",g.y);this.results.length>0&&!this.stats.first_result_time&&this.recordStat("first_result_time",Date.now());a="typed";this.allFromNullState?a="nullstate":this.allFromSingleState&&(a="singlestate");this.recordStat("last_state",a)};a.prototype.recordSelectInfo=function(a){"use strict";__p&&__p();var c=a.selected,d=a.index;c.groupIndex!==undefined&&(d=a.index-c.groupIndex-1);var e={href:c.path},f=c.dataGT?{gt:JSON.parse(c.dataGT)}:{};b("clickRefAction")("click",e,null,null,f);if(c.uid=="search"||c.uid=="people_search")this.recordStat("selected_position",this.results!=null?this.results.length:0),this.recordStat("selected_search",1);else if(c.uid=="invite")this.recordStat("selected_invite",1);else{e=c.log_type||c.rankType||c.render_type||c.type;f=e=="friend"?"user":e;this.recordStat("selected_"+f,1);this.recordStat("selected_position",d);this.recordStat("selected_type",e);this.recordStat("selected_name_length",c.text.length);this.recordStat("selected_id",c.uid);this.recordStat("selected_degree",c.bootstrapped?1:2);this.recordStat("selected_recent_search",c.recent_search);f=b("TokenizeUtil").parse(this.data.getTextToIndex(c)).tokens;d=h(f,this.query);d&&this.recordStat("matched_terms",d);this.recordStat("selected_text",c.text)}var g={};this._extraRecorder.forEach(function(b){b(a,this.results,g)}.bind(this));this.recordStat("extra_select_info",JSON.stringify(g));this.recordStat("selected_with_mouse",a.clicked?1:0)};a.prototype._addDurationForBackendQuery=function(a){"use strict";a.start_time&&(a.duration=Date.now()-a.start_time,delete a.start_time)};a.prototype._dataToSubmit=function(){"use strict";__p&&__p();this.recordStat("candidate_results",this.buildResults());this.recordStat("query",this.query);this.recordStat("init_time",this.initTime);this.initStartTime&&(this.recordStat("init_start_time",this.initStartTime),this.recordStat("onload_time",this._onloadTime),this.initStartTime=0);this.recordStat("bootstrapped",this.bootstrapStats.bootstrapped);this.bootstrapStats.endTime&&(this.recordStat("bootstrapped_time",this.bootstrapStats.endTime),this.recordStat("user_bootstrap_ms",this.bootstrapStats.user),this.recordStat("other_bootstrap_ms",this.bootstrapStats.other),this.bootstrapStats.endTime=0);var a=this.data.getBootstrapError();a&&this.recordStat("bootstrap_error",1);this.recordStat("coeff2_ts",this.bootstrapStats.coeff2_ts);this.recordStat("max_results",this.data._maxResults);if(this.backendQueries.length>0){this.backendQueries.length>this.data.logBackendQueriesWindow&&(this.backendQueries=this.backendQueries.slice(this.backendQueries.length-this.data.logBackendQueriesWindow));this.recordStat("backend_queries",this.backendQueries);a=b("whitelistObjectKeys")(this.backendQueriesStatus,this.backendQueries);b("mapObject")(a,this._addDurationForBackendQuery,this);this.recordStat("backend_queries_status",a)}if(b("FacebarGlobalOptions").taSessionLoggingSample){var c=[];this.results.forEach(function(a){c.push([a.text||"",a.category||"",a.subtext||""])});this.recordStat("raw_suggestions_text",c)}a=this.stats;for(var d in this.avgStats){var e=this.avgStats[d];a[d]=e[0]/e[1]}for(var f in this.appendStats)a[f]=JSON.stringify(this.appendStats[f]);return a};a.prototype.buildResults=function(){"use strict";var a=(this.results||[]).map(function(a,c){var d=b("TokenizeUtil").parse(this.data.getTextToIndex(a)).tokens,e=a.rankType||a.render_type||a.type,f=a.log_type,g=a.bootstrapped?1:0,i=a.s_token||"",j=typeof a.index==="undefined"?100:a.index;d=h(d,this.query)||this.query;var k=a.index_rank,l=a.match_type,m=a.l_type,n=a.vertical_type,o=a.prefix_match,p=a.prefix_length,q=a.text,r=a.category,s=a.subtext,t=a.fromCache,u=a.isNullState,v=a.isSingleState,w=a.logInfo;return typeof a.groupIndex==="number"?[a.groupIndex,a.indexInGroup,a.uid,e,g,i,d,k,l,o,p,a.origIndex,m,n,q,r,s,j,t,u,v,w,f]:[0,c,a.uid,e,g,i,d,k,l,o,p,a.origIndex,m,n,q,r,s,j,t,u,v,w,f]}.bind(this));return JSON.stringify(a)};a.prototype.submit=function(){"use strict";var a=this._dataToSubmit();switch(this.data.recordingRoute){case"banzai_vital":b("Banzai").post(this._banzaiRoute,a,{delay:0,retry:!0});break;default:this.submitThroughAsyncRequest(a)}this._reset()};a.prototype.addLatencyToSample=function(a,b,c,d){"use strict";a.addInteger(d+"query_start",c.queryStart),a.addInteger(d+"query_end",c.queryEnd),a.addInteger(d+"keypress_query_end",c.keyPressToQueryEnd),a.addInteger(d+"render",c.render),a.addInteger(d+"keypress_render",c.keyPressToRender),b[d+"query_start"]=c.queryStart,b[d+"query_end"]=c.queryEnd,b[d+"keypress_query_end"]=c.keyPressToQueryEnd,b[d+"render"]=c.render,b[d+"keypress_render"]=c.keyPressToRender};a.prototype.logToScuba=function(a,c,d,e,f){"use strict";__p&&__p();var g={},h=new(b("BanzaiScuba"))("search_facebar_js",null,{addBrowserFields:!0,addPredictedGeographyFields:!0,addUser:!0,addSearchVersion:!0,addGatekeepers:{facebarGKs:!0}});h.addInteger("sample_rate",d.sample_rate);g.sample_rate=d.sample_rate;h.addNormal("site",d.site);g.site=d.site;h.addDenorm("query",e);g.query=e;d=a.payload||{};d.entities&&(h.addInteger("num_entities",d.entities.length),g.num_entities=d.entities.length);Object.keys(this.performanceTimings).forEach(function(a){h.addInteger(a,this.performanceTimings[a]),g[a]=this.performanceTimings[a]}.bind(this),this);if(d.results||d.entries){var i=(d.results||d.entries).length;h.addInteger("num_results",i);g.num_results=i}d.gzipped_payload_size!==undefined&&(h.addInteger("gzipped_payload_size",d.gzipped_payload_size),g.gzipped_payload_size=d.gzipped_payload_size);c.recv&&c.render>c.recv&&(h.addInteger("time_render",c.render-c.recv),g.time_render=c.render-c.recv,h.addInteger("time_js_async",c.recv),g.time_js_async=c.recv);c.payload_size&&(h.addInteger("payload_size",c.payload_size),g.payload_size=c.payload_size);this.stats.time_render_null_state&&(!e||e.length===0)&&(h.addInteger("time_render_null_state",this.stats.time_render_null_state),g.time_render_null_state=this.stats.time_render_null_state);h.addInteger("query_id",a.queryId);g.query_id=a.queryId;h.addDenorm("user_id",b("CurrentUser").getID());g.user_id=b("CurrentUser").getID();h.addDenorm("session_id",this.stats.sid);g.session_id=this.stats.sid;h.addNormal("typeahead_type",f);g.typeahead_type=f;c.remoteQueryLatencies&&(this.addLatencyToSample(h,g,c.remoteQueryLatencies,"remote_"),h.addInteger("remote_keypress_query_dispatch",c.remoteQueryLatencies.keyPressToQueryDispatch),g.remote_keypress_query_dispatch=c.remoteQueryLatencies.keyPressToQueryDispatch,h.addInteger("remote_keypress_query_start",c.remoteQueryLatencies.keyPressToQueryStart),g.remote_keypress_query_start=c.remoteQueryLatencies.keyPressToQueryStart,h.addNormal("inflight_requests",c.remoteQueryLatencies.inflightRequests),h.addInteger("inflight_requests",c.remoteQueryLatencies.inflightRequests),g.inflight_requests=c.remoteQueryLatencies.inflightRequests,h.addNormal("waiting_queries",c.remoteQueryLatencies.waitingQueries),h.addInteger("waiting_queries",c.remoteQueryLatencies.waitingQueries),g.waiting_queries=c.remoteQueryLatencies.waitingQueries);c.cacheQueryLatencies&&this.addLatencyToSample(h,g,c.cacheQueryLatencies,"cache_");h.post();b("BanzaiNectar").log("search_facebar_js","typeahead",g)};a.prototype.submitThroughAsyncRequest=function(a){"use strict";Object.keys(a).length>0&&new(b("AsyncRequest"))().setURI(this._endPoint).setMethod("POST").setData({stats:a}).setOption("handleErrorAfterUnload",!0).setErrorHandler(function(c){a.retry=!0,new(b("AsyncRequest"))().setURI(this._endPoint).setMethod("POST").setData({stats:a}).setOption("asynchronous_DEPRECATED",!1).send()}.bind(this)).send()};var h=function(a,c){__p&&__p();if(!a||!c)return;c=b("TokenizeUtil").parse(c);if(c.flatValue[c.flatValue.length-1]===" ")return c.flatValue;var d=c.tokens[c.tokens.length-1],e={};a.forEach(function(a){e[a]=(e[a]||0)+1});var f={};c=c.tokens.slice(0,c.tokens.length-1);c.forEach(function(a){f[a]=(f[a]||0)+1});for(var g=0;g<a.length;++g){var h=a[g];if(h.indexOf(d)===0&&e[h]-(f[h]||0)>0){c.push(h);return c.join(" ")}}return undefined};Object.assign(a.prototype,{_endPoint:"/ajax/typeahead/record_metrics.php",_banzaiRoute:"search"});e.exports=a}),null);
__d("isEmail",[],(function(a,b,c,d,e,f){var g=/^[\w!#\$%&\'\*\+\/\=\?\^`\{\|\}~\-]+(:?\.[\w!#\$%&\'\*\+\/\=\?\^`\{\|\}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/i;function a(a){return g.test(a)}e.exports=a}),null);
__d("SearchTypeaheadView",["csx","cx","fbt","Arbiter","ContextualLayerUpdateOnScroll","ContextualTypeaheadView","DOM","FbtResultBase","SearchPeopleFriendsOf","SearchPeopleFriendsOfOptions","SearchPeopleSeeMore","SearchPeopleSeeMoreOptions","URI","goURI","isEmail"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j;c=babelHelpers.inherits(a,b("ContextualTypeaheadView"));j=c&&c.prototype;function a(a,c){"use strict";j.constructor.call(this,a,c),this._peopleSeeMore=new(b("SearchPeopleSeeMore"))(this.getSeeMoreEndpoint("",!0),b("SearchPeopleSeeMoreOptions")),this._peopleFriendsOf=new(b("SearchPeopleFriendsOf"))(this.getSeeMoreEndpoint("",!0),b("SearchPeopleFriendsOfOptions"))}a.prototype.initializeLayer=function(){"use strict";j.initializeLayer.call(this),this.layer.setOffsetY(-1),this.layer.enableBehavior(b("ContextualLayerUpdateOnScroll"))};a.prototype.ignoreClick=function(event){"use strict";event.prevent()};a.prototype.render=function(a,b,c){"use strict";if(!b)return;this._bucketize&&(b=k(b));this.showPeopleSeeMore&&a&&this._peopleSeeMore.injectInto(b,a);this.showPeopleFriendsOf&&a&&this._peopleFriendsOf.injectInto(b,a);b={results:b,value:a};this.inform("finalResultsReordering",b);return j.render.call(this,a,b.results,c)};a.prototype.disableBucketization=function(){"use strict";this._bucketize=!1};a.prototype.buildBuckets=function(a,c){"use strict";__p&&__p();var d=c.length,e=0,f;for(f=0;f<d;++f)c[f].type=="user"&&e++;this._redirectToUsersResultsPage=this.showFilterResults&&e===d;this.setWebSuggLoggingParams(a,c);!a&&this.showFindPeople&&c.unshift(this.buildFindPeople());this._bucketize&&(c=j.buildBuckets.call(this,a,c));a&&this._shouldShowSeeMore&&(c.push(this.buildSeeMore(a,d)),b("isEmail")(a)&&e<1&&c.push(this.buildInvite(a)));return c};a.prototype.buildFindPeople=function(){"use strict";var a=i._("Find people");return{classNames:"seeAllUser seeAllUserNullState",logType:"grammar",path:this.getSeeMoreEndpoint(null,!0),photo:"/images/search_typeahead/people_see_more.png",text:a,type:"no_header"}};a.prototype.buildSeeMore=function(a,c){"use strict";c=this.getSeeMoreText(a,c);var d="seeMoreV2",e="calltoactionV2",f=b("DOM").create("span",{className:"simpleSearchSeeMoreRowRedesignIcon"});e=b("DOM").create("li",{className:e},[f,b("DOM").create("a",{href:this.getSeeMoreEndpoint(a),rel:"ignore"},[b("DOM").create("span",{className:"text"},[b("DOM").create("span",{className:d},c)])])]);c instanceof b("FbtResultBase")?e.setAttribute("aria-label",c.flattenToArray()):e.setAttribute("aria-label",c);return{uid:"search",node:e,search:!0}};a.prototype.getSeeMoreText=function(a,c){"use strict";if(this.showKeywordResultsPage)return i._("Search for {query}",[i._param("query",a)]);if(c<=0)return i._("See results for {query}",[i._param("query",a)]);if(this._redirectToUsersResultsPage)return i._("Filter results for {query}",[i._param("query",a)]);c=b("DOM").create("b",{},a);return i._("Find more results for {query}",[i._param("query",c)])};a.prototype.getSeeMoreSubtext=function(a){"use strict";if(a===0)return i._("No results to display");return a===1?i._("Displaying top result"):i._({"*":"Displaying top {number} results"},[i._param("number",a,[0])])};a.prototype.buildInvite=function(a){"use strict";var c=i._("Invite {query} to Facebook",[i._param("query",a)]);a=b("DOM").create("li",{className:"calltoaction"},[b("DOM").create("a",{href:this.getInviteEndpoint(a),rel:"ignore"},[b("DOM").create("span",{className:"text"},[b("DOM").create("span",{className:"invite"},[c])])])]);c instanceof b("FbtResultBase")?a.setAttribute("arial-label",c.flattenToArray()):a.setAttribute("aria-label",c);return{uid:"invite",node:a,search:!0}};a.prototype.searchPageQueryData=function(a){"use strict";return babelHelpers["extends"]({q:a},this.queryData||{})};a.prototype.searchPageTypeData=function(a){"use strict";return this._redirectToUsersResultsPage||a?{type:"users"}:{}};a.prototype.select=function(a){"use strict";var c=this.index,d=this.results[c];if(!d||d.type=="header")return;d=this.items[c];c=b("DOM").scry(d,"a")[0];j.select.call(this,a);c&&c.href&&(c.target=="_blank"?window.open(c.href):b("goURI")(c.href))};a.prototype.setSid=function(a){"use strict";this.queryData.tas=a};a.prototype.getSeeMoreEndpoint=function(a,c){"use strict";return new(b("URI"))(this.seeMoreEndpoint).addQueryData(this.searchPageQueryData(a)).addQueryData(this.searchPageTypeData(c)).toString()};a.prototype.getInviteEndpoint=function(a){"use strict";return new(b("URI"))("/invite.php").addQueryData({email_list:a})};a.prototype.show=function(){"use strict";this.isVisible()||(b("Arbiter").inform("layer_shown",{type:"SearchTypeahead"}),this.searchBtns=this.searchBtns||b("DOM").scry(this.typeahead,"button.reDesignedBtn"),this.searchBtns[0]&&CSS.addClass(this.searchBtns[0],"btnSelected"),j.show.call(this))};a.prototype.hide=function(){"use strict";this.isVisible()&&(b("Arbiter").inform("layer_hidden",{type:"SearchTypeahead"}),this.searchBtns=this.searchBtns||b("DOM").scry(this.typeahead,"button.reDesignedBtn"),this.searchBtns[0]&&CSS.matchesSelector(this.searchBtns[0],".btnSelected")&&CSS.removeClass(this.searchBtns[0],"btnSelected"),j.hide.call(this))};a.prototype.getQuerySuggestion=function(a){"use strict";var b=this.results[this.index];b=b&&b.type!="header"?b.text.toLowerCase():"";return b==a.toLowerCase()?"":b};a.prototype.setWebSuggLoggingParams=function(a,b){"use strict";__p&&__p();var c=0,d=0;for(var e=0;e<b.length;e++)if(b[e].type==="websuggestion"){d===0&&(d=e+1);var f="FR"+(e-c)+"AS"+c,g=e+1;b[e].path+="&wssk="+f+"&wssp="+g+"&wspq="+encodeURIComponent(a);b[e].path+="&wssrc="+b[e].websuggestion_source;c++}f="&wssc="+b.length+"-"+a.length+"&wsbp="+c+"-"+d;for(e=0;e<b.length;e++)b[e].type==="websuggestion"&&(b[e].path+=f)};function k(a){var b,c,d,e,f=[],g={};c=a.length;for(b=0;b<c;b++)d=a[b],e=d.render_type||d.type,Object.prototype.hasOwnProperty.call(g,e)||(g[e]=f.length,f.push([])),f[g[e]].push(d);a=[];c=f.length;for(b=0;b<c;++b)d=f[b][0],e=d.render_type||d.type,a=a.concat(f[b]);return a}Object.assign(a.prototype,{_shouldShowSeeMore:!0,_bucketize:!0,queryData:{init:"quick"}});e.exports=a}),null);
__d("SimpleSearchNavigation",["Arbiter","DOMQuery","Input","QueryHistory","URI"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=null;a={registerInput:function(a,c){h=b("DOMQuery").scry(a,"input")[0],g&&this._updateTitle(g,c),b("Arbiter").subscribe("page_transition",function(a,c){this._updateTitle(b("QueryHistory").get(c.uri))}.bind(this))},_updateTitle:function(a,c){h&&(b("Input").setValue(h,a||""),h.setAttribute("singlestate",a&&c),h.blur())},setPageTitle:function(a,c){b("QueryHistory").set(b("URI").getNextURI(),a);h?this._updateTitle(a,c):g=a;c={};b("Arbiter").inform("search/updateNullState",c,"state")},setPageQuery:function(a){b("Arbiter").inform("search/updateNullState",a,"state")}};e.exports=a}),null);
__d("XSearchFacebarSurveyController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/search/facebar_survey/",{id:{type:"String",required:!0},query:{type:"String"},session_id:{type:"String",required:!0},on_session_start:{type:"Exists",defaultValue:!1},result_selected:{type:"Exists",defaultValue:!1}})}),null);
__d("AbandonedSessionSurvey",["AsyncRequest","SubscriptionsHandler","XSearchFacebarSurveyController","getOrCreateDOMID"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.tryToSubmitSurvey=function(){this.searchBoxFocused&&(this.openSurvey(),this.resultSelected=!1,this.searchBoxFocused=!1)}.bind(this),this.core=a.getCore(),this.data=a.getData(),this.view=a.getView(),this.subscriptionsHandler=new(b("SubscriptionsHandler"))()}a.prototype.enable=function(){"use strict";this.subscriptionsHandler.addSubscriptions(this.core.subscribe("focus",function(){this.searchBoxFocused=!0,this.resultSelected=!1}.bind(this)),this.data.subscribe("beforeQuery",function(a,b){this.query=b.value||""}.bind(this)),this.view.subscribe("select",function(){this.resultSelected=!0,this.tryToSubmitSurvey()}.bind(this)),this.core.subscribe("blur",this.tryToSubmitSurvey))};a.prototype.disable=function(){"use strict";this.subscriptionsHandler.release(),this.request&&this.request.abort()};a.prototype.openSurvey=function(){"use strict";__p&&__p();if(this.openedSurvey)return;this.openedSurvey=!0;var a=this.core.element;a==null&&(a=this.core.getElement());var c=this.normalizeValue(this.query);a=b("XSearchFacebarSurveyController").getURIBuilder().setString("id",b("getOrCreateDOMID")(a)).setString("query",c!=null?c:"").setString("session_id",this.data.queryData.sid).setExists("result_selected",this.resultSelected);this.request=new(b("AsyncRequest"))().setMethod("POST").setAllowCrossPageTransition(!0).setURI(a.getURI());this.request.send()};a.prototype.normalizeValue=function(a){"use strict";return String(a).trim().replace(/\s+/g," ").replace(/[\u200E|\u200F|\u202a|\u202b|\u202c]/g,"").toLowerCase()};e.exports=a}),null);
__d("TypeaheadSearchFilter",["Arbiter"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this._typeahead=a}a.prototype.enable=function(){"use strict";var a=this._typeahead,c=a.getView().seeMoreEndpoint;this._subscriptions=[b("Arbiter").subscribe("search/typeahead/updateFilter",function(b,c){c.filter_type=="web"&&(a.getView().queryData.form="FBKBFR"),a.getView().queryData.type=c.filter_type}),b("Arbiter").subscribe("search/typeahead/updateSeeMoreEndpoint",function(b,c){a.getView().seeMoreEndpoint=c}),b("Arbiter").subscribe("page_transition",function(b,d){a.getView().queryData.form&&delete a.getView().queryData.form,delete a.getView().queryData.type,a.getView().seeMoreEndpoint=c},"new")]};a.prototype.disable=function(){"use strict";this._subscriptions.forEach(function(a){a.unsubscribe()}),this._subscriptions=null};Object.assign(a.prototype,{_subscription:null});e.exports=a}),null);
__d("legacy:SearchFilterTypeaheadBehavior",["TypeaheadSearchFilter"],(function(a,b,c,d,e,f){a.TypeaheadBehaviors||(a.TypeaheadBehaviors={}),a.TypeaheadBehaviors.initFilters=function(a){a.enableBehavior(b("TypeaheadSearchFilter"))}}),3);
__d("TypeaheadSearchRecorderBasic",["SearchTypeaheadRecorder","emptyFunction"],(function(a,b,c,d,e,f){function a(a){"use strict";this._typeahead=a}a.prototype.enable=function(){"use strict";new(b("SearchTypeaheadRecorder"))(this._typeahead)};Object.assign(a.prototype,{disable:b("emptyFunction")});e.exports=a}),null);
__d("legacy:SearchRecorderBasicTypeaheadBehavior",["TypeaheadSearchRecorderBasic"],(function(a,b,c,d,e,f){a.TypeaheadBehaviors||(a.TypeaheadBehaviors={}),a.TypeaheadBehaviors.searchRecorderBasic=function(a){a.enableBehavior(b("TypeaheadSearchRecorderBasic"))}}),3);
__d("SessionStartSurvey",["AsyncRequest","SubscriptionsHandler","XSearchFacebarSurveyController","getOrCreateDOMID"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.core=a.getCore(),this.data=a.getData(),this.subscriptionsHandler=new(b("SubscriptionsHandler"))()}a.prototype.enable=function(){"use strict";this.subscriptionsHandler.addSubscriptions(this.data.subscribe("query",function(){this.openSurvey()}.bind(this)))};a.prototype.disable=function(){"use strict";this.subscriptionsHandler.release(),this.request&&this.request.abort()};a.prototype.openSurvey=function(){"use strict";if(this.openedSurvey)return;this.openedSurvey=!0;var a=b("XSearchFacebarSurveyController").getURIBuilder().setString("id",b("getOrCreateDOMID")(this.core.element)).setExists("on_session_start",!0).setString("session_id",this.data.queryData.sid);this.request=new(b("AsyncRequest"))().setMethod("POST").setURI(a.getURI());this.request.send()};e.exports=a}),null);
__d("TypeaheadDetectQueryLocale",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this._typeahead=a,this._data=a.getData(),this._queryCache={"":this._data.queryCache,ja_JP:{},zh_TW:{}}}a.prototype.enable=function(){"use strict";__p&&__p();this._previousLocale="",this._reset=this._typeahead.subscribe("reset",this._swapQueryCache.bind(this,"")),this._beforeQuery=this._data.subscribe("beforeQuery",function(a,b){a=b.value;if(a===""){this._swapQueryCache("");return}b=null;a=a.charCodeAt(a.length-1);12352<=a&&a<=12543?b="ja_JP":12544<=a&&a<=12735&&(b="zh_TW");this._swapQueryCache(b)}.bind(this))};a.prototype.disable=function(){"use strict";this._swapQueryCache(""),this._data.unsubscribe(this._beforeQuery),this._typeahead.ubsubscribe(this._reset)};a.prototype._swapQueryCache=function(a){"use strict";if(a===null||a===this._previousLocale)return;this._data.queryCache=this._queryCache[a];this._data.setQueryData({query_locale:a});this._previousLocale=a};e.exports=a}),null);
__d("TypeaheadExcludeBootstrapFromQueryCache",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this._data=a.getData()}a.prototype.enable=function(){"use strict";this._buildingQueryCache=!1,this._buildQueryCache=this._data.subscribe("buildQueryCache",function(){this._buildingQueryCache=!0}.bind(this)),this._mergeUids=this._data.subscribe("mergeUids",function(a,b){this._buildingQueryCache&&b.local_uids.splice(0,b.local_uids.length)}.bind(this)),this._fetchComplete=this._data.subscribe("fetchComplete",function(){this._buildingQueryCache=!1}.bind(this))};a.prototype.disable=function(){"use strict";this._data.unsubscribe(this._buildQueryCache),this._data.unsubscribe(this._mergeUids),this._data.unsubscribe(this._fetchComplete)};e.exports=a}),null);
__d("TypeaheadRecentSearchUpdater",["Arbiter"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.view=a.getView()}a.prototype.enable=function(){"use strict";this.updaterSubscription=this.view.subscribe("select",function(){b("Arbiter").inform("search/refreshRecentSearchesNullstate",{},"state")})};a.prototype.disable=function(){"use strict";this.view.unsubscribe(this.updaterSubscription)};e.exports=a}),null);
__d("TypeaheadShowLoadingIndicator",["CSS"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this._typeahead=a}a.prototype.enable=function(){"use strict";this._subscription=this._typeahead.subscribe("loading",function(a,c){b("CSS").conditionClass(this._typeahead.getElement(),"typeaheadLoading",c.loading),b("CSS").conditionClass(this._typeahead.getView().getElement(),"typeaheadViewLoading",c.loading)}.bind(this))};a.prototype.disable=function(){"use strict";this._typeahead.unsubscribe(this._subscription),this._subscription=null};Object.assign(a.prototype,{_subscription:null});e.exports=a}),null);
__d("legacy:ShowLoadingIndicatorTypeaheadBehavior",["TypeaheadShowLoadingIndicator"],(function(a,b,c,d,e,f){a.TypeaheadBehaviors||(a.TypeaheadBehaviors={}),a.TypeaheadBehaviors.showLoadingIndicator=function(a){a.enableBehavior(b("TypeaheadShowLoadingIndicator"))}}),3);
__d("SearchTypeaheadRenderer",["fbt","BadgeHelper","DOM","Locale","TokenizeUtil","TypeaheadFacepile","UnicodeBidi","URI","WWWBase"],(function(a,b,c,d,e,f,g){__p&&__p();var h=!1;function i(a,c){__p&&__p();c=[];var d=a.photos||a.photo;d&&(d instanceof Array?d=b("TypeaheadFacepile").render(d):d=b("DOM").create("img",{alt:"",src:d}),c.push(d));if(a.text){d=a.alias;var e=this.value,f=a.text,j=b("UnicodeBidi").isDirectionRTL(f.toString()),k=b("Locale").isRTL();j=j&&!k?"rtl":!j&&k?"ltr":"";k=[f];d&&b("TokenizeUtil").isQueryMatch(e,d)&&!b("TokenizeUtil").isQueryMatch(e,f)&&k.push(b("DOM").create("span",{className:"alias"},[" \xb7 "+d]));a.is_verified&&k.push(b("BadgeHelper").renderBadge("xsmall","verified"));if(a.badge){k.push(b("DOM").create("span",{className:""}," \xb7 "));e=[a.badge];k.push(b("DOM").create("span",{className:"unSeenPosts"},e))}c.push(b("DOM").create("span",{className:"text",dir:j},k))}if(a.category){f=[a.category];a.is_external&&f.push(b("DOM").create("span",{className:"arrow"}));d=a.message?"preCategory":"category";c.push(b("DOM").create("span",{className:d},f))}a.message&&c.push(b("DOM").create("span",{className:"category"},[a.message]));e=a.subtextOverride||a.subtext;if(e){j=[e];c.push(b("DOM").create("span",{className:"subtext"},j))}k=a.classNames||a.type||"";d=a.is_external?"_blank":"";f=!a.song&&a.path||"";f&&(/^https?\:\/\//.test(f)||(f=b("WWWBase").uri+f.substr(1)),f+=(f.indexOf("?")>0?"&":"?")+"ref=ts&fref=ts");e=b("DOM").create("a",{href:f,rel:"ignore",target:d},c);j=null;if(a.type==="header"){f=null;d=null;a.uid==="recent"?(d=new(b("URI"))("/profile.php"),d.setQueryData({sk:"allactivity",log_filter:"search"}),f=g._("EDIT")):a.uid==="pymk"&&(d=new(b("URI"))("/find-friends/browser/"),f=g._("SEE ALL"));d&&(j=b("DOM").create("a",{href:d,className:"typeaheadHeaderRightLink"},f),e.setAttribute("class","typeaheadHeaderLeftLink"),k+=" typeaheadHeader")}c=b("DOM").create("li",{className:k},[e,j]);a.text&&(c.setAttribute("title",a.text),c.setAttribute("aria-label",a.text));this.showupadatedsuggestions&&!h&&(i.className+=" updatedSuggestionRows",h=!0);return c}i.className="search";e.exports=i}),null);
__d("legacy:SearchTypeaheadRenderer",["SearchTypeaheadRenderer"],(function(a,b,c,d,e,f){a.TypeaheadRenderers||(a.TypeaheadRenderers={}),a.TypeaheadRenderers.search=b("SearchTypeaheadRenderer")}),3);